 
<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <style>
        a {
  color: black
}
    </style>
</head> 
<body> 
<h1>概念</h1>
<div><p>本质上，<strong>webpack</strong> 是一个现代 JavaScript 应用程序的<em>静态模块打包工具</em>。当 webpack 处理应用程序时，它会在内部构建一个 <a href="/concepts/dependency-graph/">依赖图(dependency graph)</a>，此依赖图会映射项目所需的每个模块，并生成一个或多个 <em>bundle</em>。</p>
<blockquote class="tip"><div class="tip-content"> 可以在 <a href="/concepts/modules">这里</a> 了解更多关于 JavaScript 模块和 webpack 模块的信息。 </div></blockquote><p>从 v4.0.0 开始，<strong>webpack 可以不用再引入一个配置文件</strong>来打包项目，然而，但它仍然有着 <a href="/configuration">高度可配置性</a>，可以很好满足你的需求。</p>
<p>在开始前你需要先理解一些<strong>核心概念</strong>：</p>
<ul>
<li><a href="#entry">入口(entry)</a></li>
<li><a href="#output">输出(output)</a></li>
<li><a href="#loaders">loader</a></li>
<li><a href="#plugins">插件(plugin)</a></li>
<li><a href="#mode">模式(mode)</a></li>
<li><a href="#browser-compatibility">浏览器兼容性(browser compatibility)</a></li>
</ul>
<p>本文档旨在给出这些概念的<strong>高度</strong>概述，同时提供具体概念的详尽相关用例。</p>
<p>为了更好地理解模块打包工具背后的理念，以及在底层它们是如何运作的，请参考以下资源：</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=UNMkLHzofQI">手动打包一个应用程序</a></li>
<li><a href="https://www.youtube.com/watch?v=Gc9-7PBqOC8">实时创建一个简单打包工具</a></li>
<li><a href="https://github.com/ronami/minipack">一个简单打包工具的详细说明</a></li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#入口-entry-" id="入口-entry-"></a>
<span class="text">入口(entry)</span>
<a aria-label="入口(entry)" class="icon-link" href="#入口-entry-"></a>
</h2>
<p><strong>入口起点(entry point)</strong>指示 webpack 应该使用哪个模块，来作为构建其内部 <em><a href="/concepts/dependency-graph/">依赖图(dependency graph)</a></em> 的开始。进入入口起点后，webpack 会找出有哪些模块和库是入口起点（直接和间接）依赖的。</p>
<p>默认值是 <code>./src/index.js</code>，但你可以通过在 <a href="/configuration">webpack configuration</a> 中配置 <strong>entry</strong> 属性，来指定一个（或多个）不同的入口起点。例如：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 在 <a href="/concepts/entry-points">入口起点</a> 章节可以了解更多信息。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#输出-output-" id="输出-output-"></a>
<span class="text">输出(output)</span>
<a aria-label="输出(output)" class="icon-link" href="#输出-output-"></a>
</h2>
<p><strong>output</strong> 属性告诉 webpack 在哪里输出它所创建的 <em>bundle</em>，以及如何命名这些文件。主要输出文件的默认值是 <code>./dist/main.js</code>，其他生成文件默认放置在 <code>./dist</code> 文件夹中。</p>
<p>你可以通过在配置中指定一个 <code>output</code> 字段，来配置这些处理过程：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>在上面的示例中，我们通过 <code>output.filename</code> 和 <code>output.path</code> 属性，来告诉 webpack bundle 的名称，以及我们想要 bundle 生成(emit)到哪里。可能你想要了解在代码最上面导入的 path 模块是什么，它是一个 <a href="https://nodejs.org/api/modules.html">Node.js 核心模块</a>，用于操作文件路径。</p>
<blockquote class="tip"><div class="tip-content"> <code>output</code> 属性还有 <a href="/configuration/output">许多可配置的特性</a>，如果你想要了解更多其背后的概念，你可以通过 <a href="/concepts/output">阅读输出章节</a> 来了解。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader" id="loader"></a>
<span class="text">loader</span>
<a aria-label="loader" class="icon-link" href="#loader"></a>
</h2>
<p>webpack 只能理解 JavaScript 和 JSON 文件。<strong>loader</strong> 让 webpack 能够去处理其他类型的文件，并将它们转换为有效 <a href="/concepts/modules">模块</a>，以供应用程序使用，以及被添加到依赖图中。</p>
<blockquote class="warning"><div class="tip-content"> 注意，loader 能够 <code>import</code> 导入任何类型的模块（例如 <code>.css</code> 文件），这是 webpack 特有的功能，其他打包程序或任务执行器的可能并不支持。我们认为这种语言扩展是很有必要的，因为这可以使开发人员创建出更准确的依赖关系图。 </div></blockquote><p>在更高层面，在 webpack 的配置中 <strong>loader</strong> 有两个属性：</p>
<ol start="undefined">
<li><code>test</code> 属性，用于标识出应该被对应的 loader 进行转换的某个或某些文件。</li>
<li><code>use</code> 属性，表示进行转换时，应该使用哪个 loader。</li>
</ol>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.txt$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'raw-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>以上配置中，对一个单独的 module 对象定义了 <code>rules</code> 属性，里面包含两个必须属性：<code>test</code> 和 <code>use</code>。这告诉 webpack 编译器(compiler) 如下信息：</p>
<blockquote>
<p>“嘿，webpack 编译器，当你碰到「在 <code>require()</code>/<code>import</code> 语句中被解析为 '.txt' 的路径」时，在你对它打包之前，先 <strong>使用</strong> <code>raw-loader</code> 转换一下。”</p>
</blockquote>
<blockquote class="warning"><div class="tip-content"> 重要的是要记住，在 webpack 配置中定义 rules 时，要定义在 <code>module.rules</code> 而不是 <code>rules</code> 中。为了使你受益于此，如果没有按照正确方式去做，webpack 会给出警告。 </div></blockquote><blockquote class="warning"><div class="tip-content"> 请记住，使用正则表达式匹配文件时，你不要为它添加引号。也就是说，<code>/\.txt$/</code> 与 <code>'/\.txt$/'</code>/ <code>"/\.txt$/"</code> 不一样。前者指示 webpack 匹配任何以 .txt 结尾的文件，后者指示 webpack 匹配具有绝对路径 '.txt' 的单个文件; 这可能不符合你的意图。 </div></blockquote><p>在使用 loader 时，可以阅读 <a href="/concepts/loaders">loader 章节</a> 查看更深入的自定义配置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#插件-plugin-" id="插件-plugin-"></a>
<span class="text">插件(plugin)</span>
<a aria-label="插件(plugin)" class="icon-link" href="#插件-plugin-"></a>
</h2>
<p>loader 用于转换某些类型的模块，而插件则可以用于执行范围更广的任务。包括：打包优化，资源管理，注入环境变量。</p>
<blockquote class="tip"><div class="tip-content"> <a href="/api/plugins">插件接口(plugin interface)</a> 功能极其强大，可以用来处理各种各样的任务。 </div></blockquote><p>想要使用一个插件，你只需要 <code>require()</code> 它，然后把它添加到 <code>plugins</code> 数组中。多数插件可以通过选项(option)自定义。你也可以在一个配置文件中因为不同目的而多次使用同一个插件，这时需要通过使用 <code>new</code> 操作符来创建它的一个实例。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 通过 npm 安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 用于访问内置插件</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.txt$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'raw-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>在上面的示例中，<code>html-webpack-plugin</code> 为应用程序生成 HTML 一个文件，并自动注入所有生成的 bundle。</p>
<blockquote class="tip"><div class="tip-content"> webpack 提供许多开箱可用的插件！查阅 <a href="/plugins">插件列表</a> 获取更多。 </div></blockquote><p>在 webpack 配置中使用插件是简单直接的，然而也有很多值得我们进一步探讨的用例。<a href="/concepts/plugins">查看这里了解更多</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模式-mode-" id="模式-mode-"></a>
<span class="text">模式(mode)</span>
<a aria-label="模式(mode)" class="icon-link" href="#模式-mode-"></a>
</h2>
<p>通过选择 <code>development</code>, <code>production</code> 或 <code>none</code> 之中的一个，来设置 <code>mode</code> 参数，你可以启用 webpack 内置在相应环境下的优化。其默认值为 <code>production</code>。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>查看 <a href="/concepts/mode">模式配置</a> 章节了解其详细内容和每个值所作的优化。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#浏览器兼容性-browser-compatibility-" id="浏览器兼容性-browser-compatibility-"></a>
<span class="text">浏览器兼容性(browser compatibility)</span>
<a aria-label="浏览器兼容性(browser compatibility)" class="icon-link" href="#浏览器兼容性-browser-compatibility-"></a>
</h2>
<p>webpack 支持所有符合 <a href="https://kangax.github.io/compat-table/es5/">ES5 标准</a> 的浏览器（不支持 IE8 及以下版本）。webpack 的 <code>import()</code> 和 <code>require.ensure()</code> 需要 <code>Promise</code>。如果你想要支持旧版本浏览器，在使用这些表达式之前，还需要 <a href="/guides/shimming/">提前加载 polyfill</a>。</p>
</div>
<br/><h1>入口起点(entry points)</h1>
<div><p>正如我们在 <a href="/guides/getting-started/#using-a-configuration">起步</a> 中提到的，在 webpack 配置中有多种方式定义 <code>entry</code> 属性。除了解释为什么它可能非常有用，我们还将向你展示<strong>如何去</strong>配置 <code>entry</code> 属性。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#单个入口-简写-语法" id="单个入口-简写-语法"></a>
<span class="text">单个入口（简写）语法</span>
<a aria-label="单个入口（简写）语法" class="icon-link" href="#单个入口-简写-语法"></a>
</h2>
<p>用法：<code>entry: string|Array&lt;string&gt;</code></p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><code>entry</code> 属性的单个入口语法，是下面的简写：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    main<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> <strong>当你向 <code>entry</code> 传入一个数组时会发生什么？</strong>向 <code>entry</code> 属性传入文件路径数组，将创建出一个 <strong>多主入口(multi-main entry)</strong>。在你想要一次注入多个依赖文件，并且将它们的依赖导向(graph)到一个 chunk 时，这种方式就很有用。 </div></blockquote><p>当你正在寻找为「只有一个入口起点的应用程序或工具（即 library）」快速设置 webpack 配置的时候，这会是个很不错的选择。然而，使用此语法在扩展配置时有失灵活性。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#对象语法" id="对象语法"></a>
<span class="text">对象语法</span>
<a aria-label="对象语法" class="icon-link" href="#对象语法"></a>
</h2>
<p>用法：<code>entry: {[entryChunkName: string]: string|Array&lt;string&gt;}</code></p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    adminApp<span class="token punctuation">:</span> <span class="token string">'./src/adminApp.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>对象语法会比较繁琐。然而，这是应用程序中定义入口的最可扩展的方式。</p>
<blockquote class="tip"><div class="tip-content"> <strong>“webpack 配置的可扩展”</strong>是指，这些配置可以重复使用，并且可以与其他配置组合使用。这是一种流行的技术，用于将关注点从环境(environment)、构建目标(build target)、运行时(runtime)中分离。然后使用专门的工具（如 <a href="https://github.com/survivejs/webpack-merge">webpack-merge</a>）将它们合并起来。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#常见场景" id="常见场景"></a>
<span class="text">常见场景</span>
<a aria-label="常见场景" class="icon-link" href="#常见场景"></a>
</h2>
<p>以下列出一些入口配置和它们的实际用例：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#分离-app-应用程序-和-vendor-第三方库-入口" id="分离-app-应用程序-和-vendor-第三方库-入口"></a>
<span class="text">分离 app(应用程序) 和 vendor(第三方库) 入口</span>
<a aria-label="分离 app(应用程序) 和 vendor(第三方库) 入口" class="icon-link" href="#分离-app-应用程序-和-vendor-第三方库-入口"></a>
</h3>
<blockquote class="tip"><div class="tip-content"> 在 webpack &lt; 4 的版本中，通常将 vendor 作为单独的入口起点添加到 entry 选项中，以将其编译为单独的文件（与 <code>CommonsChunkPlugin</code> 结合使用）。而在 webpack 4 中不鼓励这样做。而是使用 <code>optimization.splitChunks</code> 选项，将 vendor 和 app(应用程序) 模块分开，并为其创建一个单独的文件。<strong>不要</strong> 为 vendor 或其他不是执行起点创建 entry。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#多页面应用程序" id="多页面应用程序"></a>
<span class="text">多页面应用程序</span>
<a aria-label="多页面应用程序" class="icon-link" href="#多页面应用程序"></a>
</h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pageOne<span class="token punctuation">:</span> <span class="token string">'./src/pageOne/index.js'</span><span class="token punctuation">,</span>
    pageTwo<span class="token punctuation">:</span> <span class="token string">'./src/pageTwo/index.js'</span><span class="token punctuation">,</span>
    pageThree<span class="token punctuation">:</span> <span class="token string">'./src/pageThree/index.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>这是什么？</strong>我们告诉 webpack 需要三个独立分离的依赖图（如上面的示例）。</p>
<p><strong>为什么？</strong>在多页面应用程序中，服务器会传输一个新的 HTML 文档给你的客户端。页面重新加载此新文档，并且资源被重新下载。然而，这给了我们特殊的机会去做很多事：</p>
<ul>
<li>使用 <code>optimization.splitChunks</code> 为页面间共享的应用程序代码创建 bundle。由于入口起点增多，多页应用能够复用入口起点之间的大量代码/模块，从而可以极大地从这些技术中受益。</li>
</ul>
<blockquote class="tip"><div class="tip-content"> 根据经验：每个 HTML 文档只使用一个入口起点。 </div></blockquote></div>
<br/><h1>输出(output)</h1>
<div><p>配置 <code>output</code> 选项可以控制 webpack 如何向硬盘写入编译文件。注意，即使可以存在多个 <code>entry</code> 起点，但只指定一个 <code>output</code> 配置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法-usage-" id="用法-usage-"></a>
<span class="text">用法(Usage)</span>
<a aria-label="用法(Usage)" class="icon-link" href="#用法-usage-"></a>
</h2>
<p>在 webpack 中配置 <code>output</code> 属性的最低要求是，将它的值设置为一个对象，包括以下属性：</p>
<ul>
<li><code>filename</code> 用于输出文件的文件名。</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>此配置将一个单独的 <code>bundle.js</code> 文件输出到 <code>dist</code> 目录中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#多个入口起点" id="多个入口起点"></a>
<span class="text">多个入口起点</span>
<a aria-label="多个入口起点" class="icon-link" href="#多个入口起点"></a>
</h2>
<p>如果配置创建了多个单独的 "chunk"（例如，使用多个入口起点或使用像 CommonsChunkPlugin 这样的插件），则应该使用 <a href="/configuration/output#output-filename">占位符(substitutions)</a> 来确保每个文件具有唯一的名称。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">:</span> <span class="token string">'./src/app.js'</span><span class="token punctuation">,</span>
    search<span class="token punctuation">:</span> <span class="token string">'./src/search.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> __dirname <span class="token operator">+</span> <span class="token string">'/dist'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 写入到硬盘：./dist/app.js, ./dist/search.js</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#高级进阶" id="高级进阶"></a>
<span class="text">高级进阶</span>
<a aria-label="高级进阶" class="icon-link" href="#高级进阶"></a>
</h2>
<p>以下是对资源使用 CDN 和 hash 的复杂示例：</p>
<p><strong>config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/home/proj/cdn/assets/[hash]'</span><span class="token punctuation">,</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'http://cdn.example.com/assets/[hash]/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果在编译时，不知道最终输出文件的 <code>publicPath</code> 是什么地址，则可以将其留空，并且在运行时通过入口起点文件中的 <code>__webpack_public_path__</code> 动态设置。</p>
<pre><code class="lang-javascript">__webpack_public_path__ <span class="token operator">=</span> myRuntimePublicPath<span class="token punctuation">;</span>

<span class="token comment">// 应用程序入口的其余部分</span>
</code></pre>
</div>
<br/><h1>模式(mode)</h1>
<div><p>提供 <code>mode</code> 配置选项，告知 webpack 使用相应环境的内置优化。</p>
<p><code>string</code></p>
<blockquote class="tip"><div class="tip-content"> 可能的值有：<code>none</code>, <code>development</code> 或 <code>production</code>（默认）。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>只需在配置对象中提供 <code>mode</code> 选项：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或者从 <a href="/api/cli/">CLI</a> 参数中传递：</p>
<pre><code class="lang-bash">webpack --mode<span class="token operator">=</span>production
</code></pre>
<p>支持以下字符串值：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">选项</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>development</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        会将 <code>DefinePlugin</code> 中 <code>process.env.NODE_ENV</code> 的值设置为 <code>development</code>。启用 <code>NamedChunksPlugin</code> 和 <code>NamedModulesPlugin</code>。
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>production</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        会将 <code>DefinePlugin</code> 中 <code>process.env.NODE_ENV</code> 的值设置为 <code>production</code>。启用 <code>FlagDependencyUsagePlugin</code>, <code>FlagIncludedChunksPlugin</code>, <code>ModuleConcatenationPlugin</code>, <code>NoEmitOnErrorsPlugin</code>, <code>OccurrenceOrderPlugin</code>, <code>SideEffectsFlagPlugin</code> 和 <code>TerserPlugin</code>。
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>none</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        退出任何默认优化选项
    </div>
</div></div>
</div>
</div>
</div><p>如果没有设置，webpack 会将 <code>mode</code> 的默认值设置为 <code>production</code>。模式支持的值为：</p>
<blockquote class="tip"><div class="tip-content"> 记住，设置 <code>NODE_ENV</code> 并不会自动地设置 <code>mode</code>。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#mode-development" id="mode-development"></a>
<span class="text">mode: development</span>
<a aria-label="mode: development" class="icon-link" href="#mode-development"></a>
</h3>
<pre><code class="lang-diff">// webpack.development.config.js
module.exports = {
<span class="token inserted">+ mode: 'development'</span>
<span class="token deleted">- devtool: 'eval',</span>
<span class="token deleted">- cache: true,</span>
<span class="token deleted">- performance: {</span>
<span class="token deleted">-   hints: false</span>
<span class="token deleted">- },</span>
<span class="token deleted">- output: {</span>
<span class="token deleted">-   pathinfo: true</span>
<span class="token deleted">- },</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   namedModules: true,</span>
<span class="token deleted">-   namedChunks: true,</span>
<span class="token deleted">-   nodeEnv: 'development',</span>
<span class="token deleted">-   flagIncludedChunks: false,</span>
<span class="token deleted">-   occurrenceOrder: false,</span>
<span class="token deleted">-   sideEffects: false,</span>
<span class="token deleted">-   usedExports: false,</span>
<span class="token deleted">-   concatenateModules: false,</span>
<span class="token deleted">-   splitChunks: {</span>
<span class="token deleted">-     hidePathInfo: false,</span>
<span class="token deleted">-     minSize: 10000,</span>
<span class="token deleted">-     maxAsyncRequests: Infinity,</span>
<span class="token deleted">-     maxInitialRequests: Infinity,</span>
<span class="token deleted">-   },</span>
<span class="token deleted">-   noEmitOnErrors: false,</span>
<span class="token deleted">-   checkWasmTypes: false,</span>
<span class="token deleted">-   minimize: false,</span>
<span class="token deleted">- },</span>
<span class="token deleted">- plugins: [</span>
<span class="token deleted">-   new webpack.NamedModulesPlugin(),</span>
<span class="token deleted">-   new webpack.NamedChunksPlugin(),</span>
<span class="token deleted">-   new webpack.DefinePlugin({ "process.env.NODE_ENV": JSON.stringify("development") }),</span>
<span class="token deleted">- ]</span>
}
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#mode-production" id="mode-production"></a>
<span class="text">mode: production</span>
<a aria-label="mode: production" class="icon-link" href="#mode-production"></a>
</h3>
<pre><code class="lang-diff">// webpack.production.config.js
module.exports = {
<span class="token inserted">+  mode: 'production',</span>
<span class="token deleted">- performance: {</span>
<span class="token deleted">-   hints: 'warning'</span>
<span class="token deleted">- },</span>
<span class="token deleted">- output: {</span>
<span class="token deleted">-   pathinfo: false</span>
<span class="token deleted">- },</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   namedModules: false,</span>
<span class="token deleted">-   namedChunks: false,</span>
<span class="token deleted">-   nodeEnv: 'production',</span>
<span class="token deleted">-   flagIncludedChunks: true,</span>
<span class="token deleted">-   occurrenceOrder: true,</span>
<span class="token deleted">-   sideEffects: true,</span>
<span class="token deleted">-   usedExports: true,</span>
<span class="token deleted">-   concatenateModules: true,</span>
<span class="token deleted">-   splitChunks: {</span>
<span class="token deleted">-     hidePathInfo: true,</span>
<span class="token deleted">-     minSize: 30000,</span>
<span class="token deleted">-     maxAsyncRequests: 5,</span>
<span class="token deleted">-     maxInitialRequests: 3,</span>
<span class="token deleted">-   },</span>
<span class="token deleted">-   noEmitOnErrors: true,</span>
<span class="token deleted">-   checkWasmTypes: true,</span>
<span class="token deleted">-   minimize: true,</span>
<span class="token deleted">- },</span>
<span class="token deleted">- plugins: [</span>
<span class="token deleted">-   new TerserPlugin(/* ... */),</span>
<span class="token deleted">-   new webpack.DefinePlugin({ "process.env.NODE_ENV": JSON.stringify("production") }),</span>
<span class="token deleted">-   new webpack.optimize.ModuleConcatenationPlugin(),</span>
<span class="token deleted">-   new webpack.NoEmitOnErrorsPlugin()</span>
<span class="token deleted">- ]</span>
}
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#mode-none" id="mode-none"></a>
<span class="text">mode: none</span>
<a aria-label="mode: none" class="icon-link" href="#mode-none"></a>
</h3>
<pre><code class="lang-diff">// webpack.custom.config.js
module.exports = {
<span class="token inserted">+ mode: 'none',</span>
<span class="token deleted">- performance: {</span>
<span class="token deleted">-  hints: false</span>
<span class="token deleted">- },</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   flagIncludedChunks: false,</span>
<span class="token deleted">-   occurrenceOrder: false,</span>
<span class="token deleted">-   sideEffects: false,</span>
<span class="token deleted">-   usedExports: false,</span>
<span class="token deleted">-   concatenateModules: false,</span>
<span class="token deleted">-   splitChunks: {</span>
<span class="token deleted">-     hidePathInfo: false,</span>
<span class="token deleted">-     minSize: 10000,</span>
<span class="token deleted">-     maxAsyncRequests: Infinity,</span>
<span class="token deleted">-     maxInitialRequests: Infinity,</span>
<span class="token deleted">-   },</span>
<span class="token deleted">-   noEmitOnErrors: false,</span>
<span class="token deleted">-   checkWasmTypes: false,</span>
<span class="token deleted">-   minimize: false,</span>
<span class="token deleted">- },</span>
<span class="token deleted">- plugins: []</span>
}
</code></pre>
<p>如果要根据 webpack.config.js 中的 <strong>mode</strong> 变量更改打包行为，则必须将配置导出为一个函数，而不是导出为一个对象：</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span>env<span class="token punctuation">,</span> argv<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">'source-map'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>argv<span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>loader</h1>
<div><p>loader 用于对模块的源代码进行转换。loader 可以使你在 <code>import</code> 或"加载"模块时预处理文件。因此，loader 类似于其他构建工具中“任务(task)”，并提供了处理前端构建步骤的强大方法。loader 可以将文件从不同的语言（如 TypeScript）转换为 JavaScript 或将内联图像转换为 data URL。loader 甚至允许你直接在 JavaScript 模块中 <code>import</code> CSS文件！</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>例如，你可以使用 loader 告诉 webpack 加载 CSS 文件，或者将 TypeScript 转为 JavaScript。为此，首先安装相对应的 loader：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev css-loader
npm <span class="token function">install</span> --save-dev ts-loader
</code></pre>
<p>然后指示 webpack 对每个 <code>.css</code> 使用 <a href="/loaders/css-loader"><code>css-loader</code></a>，以及对所有 <code>.ts</code> 文件使用 <a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a>：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.ts$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-loader" id="使用-loader"></a>
<span class="text">使用 loader</span>
<a aria-label="使用 loader" class="icon-link" href="#使用-loader"></a>
</h2>
<p>在你的应用程序中，有三种使用 loader 的方式：</p>
<ul>
<li><a href="#configuration">配置</a>（推荐）：在 <strong>webpack.config.js</strong> 文件中指定 loader。</li>
<li><a href="#inline">内联</a>：在每个 <code>import</code> 语句中显式指定 loader。</li>
<li><a href="#cli">CLI</a>：在 shell 命令中指定它们。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置-configuration-" id="配置-configuration-"></a>
<span class="text">配置(configuration)</span>
<a aria-label="配置(configuration)" class="icon-link" href="#配置-configuration-"></a>
</h3>
<p><a href="/configuration/module/#module-rules"><code>module.rules</code></a> 允许你在 webpack 配置中指定多个 loader。
这种方式是展示 loader 的一种简明方式，并且有助于使代码变得简洁和易于维护。同时让你对各个 loader 有个全局概览：</p>
<p>loader 从右到左地取值(evaluate)/执行(execute)。在下面的示例中，从 sass-loader 开始执行，然后继续执行 css-loader，最后以 style-loader 为结束。查看 <a href="/concepts/loaders/#loader-features">loader 功能</a> 了解有关 loader 顺序的更多信息。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <a class="code-link" href="/loaders/style-loader">'style-loader'</a> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <a class="code-link" href="/loaders/css-loader">'css-loader'</a><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <a class="code-link" href="/loaders/sass-loader">'sass-loader'</a> <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#内联-inline-" id="内联-inline-"></a>
<span class="text">内联(inline)</span>
<a aria-label="内联(inline)" class="icon-link" href="#内联-inline-"></a>
</h3>
<p>可以在 <code>import</code> 语句或任何 <a href="/api/module-methods">等同于 "import" 的方法</a> 中指定 loader。使用 <code>!</code> 将资源中的 loader 分开。每个部分都会相对于当前目录解析。</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Styles <span class="token keyword">from</span> <span class="token string">'style-loader!css-loader?modules!./styles.css'</span><span class="token punctuation">;</span>
</code></pre>
<p>使用 <code>!</code> 为整个规则添加前缀，可以覆盖配置中的所有 loader 定义。</p>
<p>选项可以传递查询参数，例如 <code>?key=value&amp;foo=bar</code>，或者一个 JSON 对象，例如 <code>?{"key":"value","foo":"bar"}</code>。</p>
<blockquote class="tip"><div class="tip-content"> 尽可能使用 <code>module.rules</code>，因为这样可以减少源码中样板文件的代码量，并且可以在出错时，更快地调试和定位 loader 中的问题。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#cli" id="cli"></a>
<span class="text">CLI</span>
<a aria-label="CLI" class="icon-link" href="#cli"></a>
</h3>
<p>还可以通过 CLI 使用 loader：</p>
<pre><code class="lang-sh">webpack --module-bind jade-loader --module-bind <span class="token string">'css=style-loader!css-loader'</span>
</code></pre>
<p>这会对 <code>.jade</code> 文件使用 <code>jade-loader</code>，以及对 <code>.css</code> 文件使用 <a href="/loaders/style-loader"><code>style-loader</code></a> 和 <a href="/loaders/css-loader"><code>css-loader</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader-特性" id="loader-特性"></a>
<span class="text">loader 特性</span>
<a aria-label="loader 特性" class="icon-link" href="#loader-特性"></a>
</h2>
<ul>
<li>loader 支持链式传递。链中的每个 loader 会将转换应用在已处理过的资源上。一组链式的 loader 将按照相反的顺序执行。链中的第一个 loader 将其结果（也就是应用过转换后的资源）传递给下一个 loader，依此类推。最后，链中的最后一个 loader，返回 webpack 期望 JavaScript。</li>
<li>loader 可以是同步的，也可以是异步的。</li>
<li>loader 运行在 Node.js 中，并且能够执行任何 Node.js 能做到的操作。</li>
<li>loader 可以通过 <code>options</code> 对象配置（仍然支持使用 <code>query</code> 参数来设置选项，但是这种方式已被废弃）。</li>
<li>除了常见的通过 <code>package.json</code> 的 <code>main</code> 来将一个 npm 模块导出为 loader，还可以在 module.rules 中使用 <code>loader</code> 字段直接引用一个模块。</li>
<li>插件(plugin)可以为 loader 带来更多特性。</li>
<li>loader 能够产生额外的任意文件。</li>
</ul>
<p>通过（loader）预处理函数，loader 为 JavaScript 生态系统提供了更多能力。
用户现在可以更加灵活地引入细粒度逻辑，例如：压缩、打包、语言翻译和 <a href="/loaders">更多其他特性</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#解析-loader" id="解析-loader"></a>
<span class="text">解析 loader</span>
<a aria-label="解析 loader" class="icon-link" href="#解析-loader"></a>
</h2>
<p>loader 遵循 <a href="/concepts/module-resolution/">模块解析</a> 标准。多数情况下，loader 将从 <a href="/concepts/module-resolution/#module-paths">模块路径</a> 加载（通常是从 <code>npm install</code>, <code>node_modules</code> 进行加载）。</p>
<p>通常使用 npm 进行管理，但是也可以将自定义 loader 作为应用程序中的文件。按照约定，loader 通常被命名为 <code>xxx-loader</code>（例如 <code>json-loader</code>）。更多详细信息请查看 <a href="/contribute/writing-a-loader">如何编写 loader？</a>。</p>
</div>
<br/><h1>插件(plugin)</h1>
<div><p><strong>插件</strong>是 webpack 的 <a href="https://github.com/webpack/tapable">支柱</a> 功能。webpack 自身也是构建于，你在 webpack 配置中用到的<strong>相同的插件系统</strong>之上！</p>
<p>插件目的在于解决 <a href="/concepts/loaders">loader</a> 无法实现的<strong>其他事</strong>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#剖析" id="剖析"></a>
<span class="text">剖析</span>
<a aria-label="剖析" class="icon-link" href="#剖析"></a>
</h2>
<p>webpack <strong>插件</strong>是一个具有 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply"><code>apply</code></a> 方法的 JavaScript 对象。<code>apply</code> 方法会被 webpack compiler 调用，并且 compiler 对象可在<strong>整个</strong>编译生命周期访问。</p>
<p><strong>ConsoleLogOnBuildWebpackPlugin.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> pluginName <span class="token operator">=</span> <span class="token string">'ConsoleLogOnBuildWebpackPlugin'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">ConsoleLogOnBuildWebpackPlugin</span> <span class="token punctuation">{</span>
  <span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>pluginName<span class="token punctuation">,</span> compilation <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'webpack 构建过程开始！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>compiler hook 的 tap 方法的第一个参数，应该是驼峰式命名的插件名称。建议为此使用一个常量，以便它可以在所有 hook 中复用。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>由于<strong>插件</strong>可以携带参数/选项，你必须在 webpack 配置中，向 <code>plugins</code> 属性传入 <code>new</code> 实例。</p>
<p>根据你使用 webpack 的需要，这里有多种方式使用插件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通过 npm 安装</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//访问内置的插件</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(js|jsx)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#node-api" id="node-api"></a>
<span class="text">Node API</span>
<a aria-label="Node API" class="icon-link" href="#node-api"></a>
</h3>
<p>在使用 Node API 时，还可以通过配置中的 <code>plugins</code> 属性传入插件。</p>
<p><strong>some-node-script.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//访问 webpack 运行时(runtime)</span>
<span class="token keyword">const</span> configuration <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 你知道吗：以上看到的示例和 <a href="https://github.com/webpack/webpack/blob/e7087ffeda7fa37dfe2ca70b5593c6e899629a2c/bin/webpack.js#L290-L292">webpack 自身运行时(runtime)</a> 极其类似。<a href="https://github.com/webpack/webpack">wepback 源码</a>中隐藏有大量使用示例，你可以用在自己的配置和脚本中。 </div></blockquote></div>
<br/><h1>配置(configuration)</h1>
<div><p>你可能已经注意到，很少有 webpack 配置看起来完全相同。这是因为 <strong>webpack 的配置文件，是一个导出 webpack <a href="/configuration/">配置对象</a> 的 JavaScript 文件。</strong>然后 webpack 会根据此配置对象上定义的属性进行处理。</p>
<p>因为 webpack 配置是标准的 Node.js CommonJS 模块，你<strong>可以做到以下事情</strong>：</p>
<ul>
<li>通过 <code>require(...)</code> 导入其他文件</li>
<li>通过 <code>require(...)</code> 使用 npm 的工具函数</li>
<li>使用 JavaScript 控制流表达式，例如 <code>?:</code> 操作符</li>
<li>对常用值使用常量或变量</li>
<li>编写和执行函数，来生成部分配置</li>
</ul>
<p>请在合适的场景下使用这些功能。</p>
<p>虽然技术上可行，<strong>但应避免以下做法</strong>：</p>
<ul>
<li>在使用 webpack 命令行接口(CLI)时，访问命令行接口(CLI)参数（应该编写自己的命令行接口(CLI)，或 <a href="/configuration/configuration-types/">使用 <code>--env</code></a>）</li>
<li>导出不确定的值（调用 webpack 两次应该产生同样的输出文件）</li>
<li>编写很长的配置（应该将配置拆分为多个文件）</li>
</ul>
<blockquote class="tip"><div class="tip-content"> 这份文档中得出的最重要的收获是，你的 webpack 配置可以有许多不同的格式和风格。关键在于，为了便于你和你的团队易于理解和维护这些配置，需要保证一致性。 </div></blockquote><p>接下来的例子展示了 webpack 配置(webpack configuration)如何即具有表现力，又具有可配置性，这是因为<em>配置即是代码</em>：</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本配置" id="基本配置"></a>
<span class="text">基本配置</span>
<a aria-label="基本配置" class="icon-link" href="#基本配置"></a>
</h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'foo.bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><em>See</em>: <a href="/configuration/">Configuration section</a> for the all supported configuration options</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#多个-target" id="多个-target"></a>
<span class="text">多个 target</span>
<a aria-label="多个 target" class="icon-link" href="#多个-target"></a>
</h2>
<p>除了可以将单个配置导出为 object, <a href="/configuration/configuration-types/#exporting-a-function">function</a> 或 <a href="/configuration/configuration-types/#exporting-a-promise">Promise</a>，还可以将其导出为多个配置。</p>
<p>查看：<a href="/configuration/configuration-types/#exporting-multiple-configurations">导出多个配置</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用其他配置语言" id="使用其他配置语言"></a>
<span class="text">使用其他配置语言</span>
<a aria-label="使用其他配置语言" class="icon-link" href="#使用其他配置语言"></a>
</h2>
<p>webpack 接受以多种编程和数据语言编写的配置文件。</p>
<p>查看：<a href="/configuration/configuration-languages/">配置语言</a></p>
</div>
<br/><h1>模块(module)</h1>
<div><p>在 <a href="https://en.wikipedia.org/wiki/Modular_programming">模块化编程</a> 中，开发者将程序分解为功能离散的 chunk(discrete chunks of functionality)，并称之为_模块_。</p>
<p>每个模块具有比完整程序更小的接触面，使得验证、调试、测试轻而易举。
精心编写的_模块_提供了可靠的抽象和封装界限，使得应用程序中每个模块，都具备了条理清楚的设计和明确的目的。</p>
<p>Node.js 从最一开始就支持模块化编程。
然而，web 的<em>模块化</em>支持正缓慢到来。
在 web 存在多种支持 JavaScript 模块化的工具，这些工具各有优势和限制。
webpack 基于从这些系统获得的经验教训，并将_模块_的概念应用于项目中的任何文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#什么是-webpack-模块" id="什么是-webpack-模块"></a>
<span class="text">什么是 webpack 模块</span>
<a aria-label="什么是 webpack 模块" class="icon-link" href="#什么是-webpack-模块"></a>
</h2>
<p>与 <a href="https://nodejs.org/api/modules.html">Node.js 模块</a> 相比，webpack _模块_能够以各种方式表达它们的依赖关系。下面是一些示例：</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">ES2015 <code>import</code></a> 语句</li>
<li><a href="http://www.commonjs.org/specs/modules/1.0/">CommonJS</a> <code>require()</code> 语句</li>
<li><a href="https://github.com/amdjs/amdjs-api/blob/master/AMD.md">AMD</a> <code>define</code> 和 <code>require</code> 语句</li>
<li>css/sass/less 文件中的 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@import"><code>@import</code> 语句</a>。</li>
<li>样式(<code>url(...)</code>)或 HTML 文件(<code>&lt;img src=...&gt;</code>)中的图片链接</li>
</ul>
<blockquote class="tip"><div class="tip-content"> webpack 1 需要特定的 loader 来转换 ES2015 <code>import</code>，然而在 webpack 2 中，这一切都是开箱即用的。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#支持的模块类型" id="支持的模块类型"></a>
<span class="text">支持的模块类型</span>
<a aria-label="支持的模块类型" class="icon-link" href="#支持的模块类型"></a>
</h2>
<p>通过 <em>loader</em>，webpack 可以支持以各种语言和预处理器语法编写的模块。<em>loader</em> 描述了 webpack <strong>如何</strong>处理 非 JavaScript _模块_，并且在 <em>bundle</em> 中引入这些_依赖_。
webpack 社区已经为各种流行语言和语言处理器创建了 <em>loader</em>，包括：</p>
<ul>
<li><a href="http://coffeescript.org">CoffeeScript</a></li>
<li><a href="https://www.typescriptlang.org">TypeScript</a></li>
<li><a href="https://babel.docschina.org/">ESNext (Babel)</a></li>
<li><a href="http://sass-lang.com">Sass</a></li>
<li><a href="http://lesscss.org">Less</a></li>
<li><a href="http://stylus-lang.com">Stylus</a></li>
</ul>
<p>其实还有很多！总的来说，webpack 提供了可定制的、强大和丰富的 API，允许在<strong>任何技术栈</strong>中使用 webpack，同时在开发、测试和生产环境下的工作流程中做到<strong>无侵入性</strong>。</p>
<p>有关完整列表，请参考 <a href="/loaders"><strong>loader 列表</strong></a> 或 <a href="/api/loaders"><strong>编写你自己的 loader</strong></a>。</p>
</div>
<br/><h1>为什么选择 webpack</h1>
<div><p>想要理解为什么要使用 webpack，我们先回顾下历史，在打包工具出现之前，我们是如何在 web 中使用 JavaScript 的。</p>
<p>在浏览器中运行 JavaScript 有两种方法。第一种方式，引用一些脚本来存放每个功能；此解决方案很难扩展，因为加载太多脚本会导致网络瓶颈。第二种方式，使用一个包含所有项目代码的大型 <code>.js</code> 文件，但是这会导致作用域、文件大小、可读性和可维护性方面的问题。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#立即调用函数表达式-immediately-invoked-function-expressions" id="立即调用函数表达式-immediately-invoked-function-expressions"></a>
<span class="text">立即调用函数表达式 - Immediately invoked function expressions</span>
<a aria-label="立即调用函数表达式 - Immediately invoked function expressions" class="icon-link" href="#立即调用函数表达式-immediately-invoked-function-expressions"></a>
</h2>
<p>IIFE 解决大型项目的作用域问题；当脚本文件被封装在 IIFE 内部时，你可以安全地拼接或安全地组合所有文件，而不必担心作用域冲突。</p>
<p>这种方式产生出 Make, Gulp, Grunt, Broccoli 或 Brunch 等工具。这些工具称为任务执行器，它们将所有项目文件拼接在一起。</p>
<p>但是，修改一个文件意味着必须重新构建整个文件。拼接可以做到很容易地跨文件重用脚本，但是却使构建结果的优化变得更加困难。如何判断代码是否实际被使用？</p>
<p>即使你只用到 lodash 中的某个函数，也必须在构建结果中加入整个库，然后将它们压缩在一起。如何 treeshake 代码依赖？难以大规模地实现延迟加载代码块，这需要开发人员手动地进行大量工作。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#感谢-node-js-javascript-模块诞生了" id="感谢-node-js-javascript-模块诞生了"></a>
<span class="text">感谢 Node.js，JavaScript 模块诞生了</span>
<a aria-label="感谢 Node.js，JavaScript 模块诞生了" class="icon-link" href="#感谢-node-js-javascript-模块诞生了"></a>
</h2>
<p>Node.js 是一个 JavaScript 运行时，可以在浏览器环境之外的计算机和服务器中使用。webpack 运行在 Node.js 中。</p>
<p>当 Node.js 发布时，一个新的时代开始了，它带来了新的挑战。既然不是在浏览器中运行 JavaScript，现在已经没有了可以添加到浏览器中的 html 文件和 script 标签。那么 Node.js 应用程序要如何加载新的代码 chunk 呢？</p>
<p>CommonJS 问世并引入了 <code>require</code> 机制，它允许你在当前文件中加载和使用某个模块。导入需要的每个模块，这一开箱即用的功能，帮助我们解决了作用域问题。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#npm-node-js-modules-大规模分发模块" id="npm-node-js-modules-大规模分发模块"></a>
<span class="text">npm + Node.js + modules - 大规模分发模块</span>
<a aria-label="npm + Node.js + modules - 大规模分发模块" class="icon-link" href="#npm-node-js-modules-大规模分发模块"></a>
</h2>
<p>JavaScript 已经成为一种语言、一个平台和一种快速开发和创建快速应用程序的方式，接管了整个 JavaScript 世界。</p>
<p>但 CommonJS 没有浏览器支持。没有 <a href="https://medium.com/webpack/the-state-of-javascript-modules-4636d1774358">live binding(实时绑定)</a>。循环引用存在问题。同步执行的模块解析加载器速度很慢。虽然 CommonJS 是 Node.js 项目的绝佳解决方案，但浏览器不支持模块。因而创建了 Browserify, RequireJS 和 SystemJS 等打包工具，允许我们编写能够在浏览器中运行的 CommonJS 模块。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#esm-ecmascript-模块" id="esm-ecmascript-模块"></a>
<span class="text">ESM - ECMAScript 模块</span>
<a aria-label="ESM - ECMAScript 模块" class="icon-link" href="#esm-ecmascript-模块"></a>
</h2>
<p>来自 Web 项目的好消息是，模块正在成为 ECMAScript 标准的官方功能。然而，浏览器支持不完整，版本迭代速度也不够快，目前还是推荐上面那些早期模块实现。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#看起来都不是很好-" id="看起来都不是很好-"></a>
<span class="text">看起来都不是很好……</span>
<a aria-label="看起来都不是很好……" class="icon-link" href="#看起来都不是很好-"></a>
</h2>
<p>是否可以有一种方式，不仅可以让我们编写模块，而且还支持任何模块格式（至少在我们到达 ESM 之前），并且可以同时处理资源和资产？</p>
<p>这就是 webpack 存在的原因。它是一个工具，可以打包你的 JavaScript 应用程序（支持 ESM 和 CommonJS），可以扩展为支持许多不同的资产，例如：images, fonts 和 stylesheets。
w
webpack 关心性能和加载时间；它始终在改进或添加新功能，例如：异步地加载 chunk 和预取，以便为你的项目和用户提供最佳体验。</p>
</div>
<br/><h1>模块解析(module resolution)</h1>
<div><p>resolver 是一个库(library)，用于帮助找到模块的绝对路径。
一个模块可以作为另一个模块的依赖模块，然后被后者引用，如下：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> foo <span class="token keyword">from</span> <span class="token string">'path/to/module'</span><span class="token punctuation">;</span>
<span class="token comment">// 或者</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path/to/module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>所依赖的模块可以是来自应用程序代码或第三方的库(library)。
resolver 帮助 webpack 从每个如 <code>require</code>/<code>import</code> 语句中，找到需要引入到 bundle 中的模块代码。
当打包模块时，<code>webpack</code> 使用 <a href="https://github.com/webpack/enhanced-resolve">enhanced-resolve</a> 来解析文件路径。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#webpack-中的解析规则" id="webpack-中的解析规则"></a>
<span class="text">webpack 中的解析规则</span>
<a aria-label="webpack 中的解析规则" class="icon-link" href="#webpack-中的解析规则"></a>
</h2>
<p>使用 <code>enhanced-resolve</code>，webpack 能够解析三种文件路径：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#绝对路径" id="绝对路径"></a>
<span class="text">绝对路径</span>
<a aria-label="绝对路径" class="icon-link" href="#绝对路径"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token string">'/home/me/file'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token string">'C:\\Users\\me\\file'</span><span class="token punctuation">;</span>
</code></pre>
<p>由于我们已经取得文件的绝对路径，因此不需要进一步再做解析。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#相对路径" id="相对路径"></a>
<span class="text">相对路径</span>
<a aria-label="相对路径" class="icon-link" href="#相对路径"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token string">'../src/file1'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./file2'</span><span class="token punctuation">;</span>
</code></pre>
<p>在这种情况下，使用 <code>import</code> 或 <code>require</code> 的资源文件所在的目录，被认为是上下文目录(context directory)。在 <code>import/require</code> 中给定的相对路径，会拼接此上下文路径(context path)，以产生模块的绝对路径。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#模块路径" id="模块路径"></a>
<span class="text">模块路径</span>
<a aria-label="模块路径" class="icon-link" href="#模块路径"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token string">'module'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'module/lib/file'</span><span class="token punctuation">;</span>
</code></pre>
<p>模块将在 <a href="/configuration/resolve/#resolve-modules"><code>resolve.modules</code></a> 中指定的所有目录内搜索。
你可以替换初始模块路径，此替换路径通过使用 <a href="/configuration/resolve/#resolve-alias"><code>resolve.alias</code></a> 配置选项来创建一个别名。</p>
<p>一旦根据上述规则解析路径后，resolver 将检查路径是否指向文件或目录。如果路径指向一个文件：</p>
<ul>
<li>如果路径具有文件扩展名，则被直接将文件打包。</li>
<li>否则，将使用 [<code>resolve.extensions</code>] 选项作为文件扩展名来解析，此选项告诉 resolver 在解析中能够接受哪些扩展名（例如 <code>.js</code>, <code>.jsx</code>）。</li>
</ul>
<p>如果路径指向一个文件夹，则采取以下步骤找到具有正确扩展名的正确文件：</p>
<ul>
<li>如果文件夹中包含 <code>package.json</code> 文件，则按照顺序查找 <a href="/configuration/resolve/#resolve-mainfields"><code>resolve.mainFields</code></a> 配置选项中指定的字段。通过 <code>package.json</code> 中的第一个字段确定文件路径。</li>
<li>如果不存在 <code>package.json</code> 文件或者 <code>package.json</code> 文件中的 main 字段没有返回一个有效路径，则按照顺序查找 <a href="/configuration/resolve/#resolve-mainfiles"><code>resolve.mainFiles</code></a> 配置选项中指定的文件名，看是否能在 import/require 目录下匹配到一个存在的文件名。</li>
<li>文件扩展名通过 <code>resolve.extensions</code> 选项，采用类似的方法进行解析。</li>
</ul>
<p>webpack 根据构建目标(build target)，为这些选项提供了合理的 <a href="/configuration/resolve">默认</a> 配置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#解析-loader" id="解析-loader"></a>
<span class="text">解析 loader</span>
<a aria-label="解析 loader" class="icon-link" href="#解析-loader"></a>
</h2>
<p>loader 的解析规则，也遵循文件解析的特定规则。但是 <a href="/configuration/resolve/#resolveloader"><code>resolveLoader</code></a> 配置选项，可以用来为 loader 提供独立的解析规则。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#缓存" id="缓存"></a>
<span class="text">缓存</span>
<a aria-label="缓存" class="icon-link" href="#缓存"></a>
</h2>
<p>每次文件系统访问都会被缓存，以便更快触发对同一文件的多个并行或串行请求。在 <a href="/configuration/watch/#watch">观察模式(watch mode)</a> 下，只有修改过的文件会从缓存中摘出。如果关闭观察模式，会在每次编译前清理缓存。</p>
<p>有关上述配置的更多信息，请查看 <a href="/configuration/resolve">resolve API</a>。</p>
</div>
<br/><h1>依赖图(dependency graph)</h1>
<div><p>任何时候，一个文件依赖于另一个文件，webpack 就把此视为文件之间有 <em>依赖关系</em>。这使得 webpack 可以接收非代码资源(non-code asset)（例如 images 或 web fonts），并且可以把它们作为 _依赖_ 提供给你的应用程序。</p>
<p>webpack 从命令行或配置文件中定义的一个模块列表开始，处理你的应用程序。
从这些 <a href="/concepts/entry-points/"><em>入口起点</em></a> 开始，webpack 递归地构建一个<em>依赖图</em>，这个依赖图包含着应用程序所需的每个模块，然后将所有这些模块打包为少量的 <em>bundle</em> - 通常只有一个 - 可由浏览器加载。</p>
<blockquote class="tip"><div class="tip-content"> 对于 <em>HTTP/1.1</em> 客户端，由 webpack 打包你的应用程序会极其强大，这是因为在浏览器发起一个新请求时，它能够减少应用程序必须等待的时间。对于 <em>HTTP/2</em>，你还可以使用 <a href="/guides/code-splitting/">代码分离</a> 来实现最佳构建结果。
de </div></blockquote></div>
<br/><h1>manifest</h1>
<div><p>在使用 webpack 构建的典型应用程序或站点中，有三种主要的代码类型：</p>
<ol start="undefined">
<li>你或你的团队编写的源码。</li>
<li>你的源码会依赖的任何第三方的 library 或 "vendor" 代码。</li>
<li>webpack 的 runtime 和 <strong>manifest</strong>，管理所有模块的交互。</li>
</ol>
<p>本文将重点介绍这三个部分中的最后部分，runtime 和 manifest，特别是 manifest。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#runtime" id="runtime"></a>
<span class="text">runtime</span>
<a aria-label="runtime" class="icon-link" href="#runtime"></a>
</h2>
<p>runtime，以及伴随的 manifest 数据，主要是指：在浏览器运行过程中，webpack 用来连接模块化应用程序所需的所有代码。它包含：在模块交互时，连接模块所需的加载和解析逻辑。包括：已经加载到浏览器中的连接模块逻辑，以及尚未加载模块的延迟加载逻辑。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#manifest" id="manifest"></a>
<span class="text">manifest</span>
<a aria-label="manifest" class="icon-link" href="#manifest"></a>
</h2>
<p>在你的应用程序中，形如 <code>index.html</code> 文件、一些 bundle 和各种资源，都必须以某种方式加载和链接到应用程序，一旦被加载到浏览器中。在经过打包、压缩、为延迟加载而拆分为细小的 chunk 这些 webpack <a href="/configuration/optimization/"><code>优化</code></a> 之后，你精心安排的 <code>/src</code> 目录的文件结构都已经不再存在。所以 webpack 如何管理所有所需模块之间的交互呢？这就是 manifest 数据用途的由来……</p>
<p>当 compiler 开始执行、解析和映射应用程序时，它会保留所有模块的详细要点。这个数据集合称为 "manifest"，当完成打包并发送到浏览器时，runtime 会通过 manifest 来解析和加载模块。无论你选择哪种 <a href="/api/module-methods">模块语法</a>，那些 <code>import</code> 或 <code>require</code> 语句现在都已经转换为 <code>__webpack_require__</code> 方法，此方法指向模块标识符(module identifier)。通过使用 manifest 中的数据，runtime 将能够检索这些标识符，找出每个标识符背后对应的模块。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#问题" id="问题"></a>
<span class="text">问题</span>
<a aria-label="问题" class="icon-link" href="#问题"></a>
</h2>
<p>所以，现在你应该对 webpack 在幕后工作有一点了解。“但是，这对我有什么影响呢？”，你可能会问。答案是大多数情况下没有。runtime 做完成这些工作：一旦你的应用程序加载到浏览器中，使用 manifest，然后所有内容将展现出魔幻般运行结果。然而，如果你决定通过使用浏览器缓存来改善项目的性能，理解这一过程将突然变得极为重要。</p>
<p>通过使用内容散列(content hash)作为 bundle 文件的名称，这样在文件内容修改时，会计算出新的 hash，浏览器会使用新的名称加载文件，从而使缓存无效。一旦你开始这样做，你会立即注意到一些有趣的行为。即使某些内容明显没有修改，某些 hash 还是会改变。这是因为，注入的 runtime 和 manifest 在每次构建后都会发生变化。</p>
<p>查看<em>管理输出</em>指南的 <a href="/guides/output-management/#the-manifest">manifest 部分</a>，了解如何提取 manifest，并阅读下面的指南，以了解更多长效缓存错综复杂之处。</p>
</div>
<br/><h1>部署目标(target)</h1>
<div><p>因为服务器和浏览器代码都可以用 JavaScript 编写，所以 webpack 提供了多种部署 <em>target(目标)</em>，你可以在你的 webpack <a href="/configuration">配置对象</a> 中进行设置。</p>
<blockquote class="warning"><div class="tip-content"> webpack 的 <code>target</code> 属性，不要和 <code>output.libraryTarget</code> 属性混淆。有关 <code>output</code> 属性的更多信息，请查看我们的 <a href="/concepts/output/">指南</a>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>想要设置 <code>target</code> 属性，只需要在你的 webpack 配置中设置 target 的值。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token string">'node'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>在上面例子中，使用 <code>node</code>，webpack 会编译为用于类 Node.js 环境（使用 Node.js 的 <code>require</code> ，而不是使用任意内置模块（如 <code>fs</code> 或 <code>path</code>）来加载 chunk）。</p>
<p>每个 <em>target</em> 都有各种部署(deployment)/环境(environment)特定的附加项，以支持满足其需求。查看 <a href="/configuration/target/">target 可用值</a>。</p>
<blockquote class="todo"><div class="tip-content"> Further expansion for other popular target values </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#多个-target" id="多个-target"></a>
<span class="text">多个 target</span>
<a aria-label="多个 target" class="icon-link" href="#多个-target"></a>
</h2>
<p>虽然 webpack <strong>不支持</strong>向 <code>target</code> 传入多个字符串，还是可以通过打包两个单独配置，来创建出一个同构的 library：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> serverConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token string">'node'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'lib.node.js'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//…</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> clientConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token string">'web'</span><span class="token punctuation">,</span> <span class="token comment">// &lt;=== 默认是 'web'，可省略</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'lib.js'</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//…</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span> serverConfig<span class="token punctuation">,</span> clientConfig <span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<p>上面的例子将在 <code>dist</code> 文件夹下创建 <code>lib.js</code> 和 <code>lib.node.js</code> 文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#资源" id="资源"></a>
<span class="text">资源</span>
<a aria-label="资源" class="icon-link" href="#资源"></a>
</h2>
<p>从上面的选项能够看出，可以选择多种不同的部署 <em>target</em>。下面是一个示例列表，以及可以参考的资源。</p>
<ul>
<li><strong><a href="https://github.com/TheLarkInn/compare-webpack-target-bundles">compare-webpack-target-bundles</a></strong>：有关「测试和查看」不同的 webpack <em>target</em> 的大量资源。也有大量 bug 报告。</li>
<li><strong><a href="https://github.com/chentsulin/electron-react-boilerplate">Boilerplate of Electron-React Application</a></strong>：一个 electron 主进程和渲染进程构建过程的很好的例子。</li>
</ul>
<blockquote class="todo"><div class="tip-content"> Need to find up to date examples of these webpack targets being used in live code or boilerplates. </div></blockquote></div>
<br/><h1>模块热替换(hot module replacement)</h1>
<div><p>模块热替换(HMR - hot module replacement)功能会在应用程序运行过程中，替换、添加或删除 <a href="/concepts/modules/">模块</a>，而无需重新加载整个页面。主要是通过以下几种方式，来显著加快开发速度：</p>
<ul>
<li>保留在完全重新加载页面期间丢失的应用程序状态。</li>
<li>只更新变更内容，以节省宝贵的开发时间。</li>
<li>在源代码中对 CSS/JS 进行修改，会立刻在浏览器中进行更新，这几乎相当于在浏览器 devtools 直接更改样式。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#这一切是如何运行的-" id="这一切是如何运行的-"></a>
<span class="text">这一切是如何运行的？</span>
<a aria-label="这一切是如何运行的？" class="icon-link" href="#这一切是如何运行的-"></a>
</h2>
<p>让我们从一些不同的角度观察，以了解 HMR 的工作原理……</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在应用程序中" id="在应用程序中"></a>
<span class="text">在应用程序中</span>
<a aria-label="在应用程序中" class="icon-link" href="#在应用程序中"></a>
</h3>
<p>通过以下步骤，可以做到在应用程序中置换(swap in and out)模块：</p>
<ol start="undefined">
<li>应用程序要求 HMR runtime 检查更新。</li>
<li>HMR runtime 异步地下载更新，然后通知应用程序。</li>
<li>应用程序要求 HMR runtime 应用更新。</li>
<li>HMR runtime 同步地应用更新。</li>
</ol>
<p>你可以设置 HMR，以使此进程自动触发更新，或者你可以选择要求在用户交互时进行更新。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在-compiler-中" id="在-compiler-中"></a>
<span class="text">在 compiler 中</span>
<a aria-label="在 compiler 中" class="icon-link" href="#在-compiler-中"></a>
</h3>
<p>除了普通资源，compiler 需要发出 "update"，将之前的版本更新到新的版本。"update" 由两部分组成：</p>
<ol start="undefined">
<li>更新后的 <a href="/concepts/manifest">manifest</a> (JSON)</li>
<li>一个或多个 updated chunk (JavaScript)</li>
</ol>
<p>manifest 包括新的 compilation hash 和所有的 updated chunk 列表。每个 chunk 都包含着全部更新模块的最新代码（或一个 flag 用于表明此模块需要被移除）。</p>
<p>compiler 会确保在这些构建之间的模块 ID 和 chunk ID 保持一致。通常将这些 ID 存储在内存中（例如，使用 <a href="/configuration/dev-server/">webpack-dev-server</a> 时），但是也可能会将它们存储在一个 JSON 文件中。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在模块中" id="在模块中"></a>
<span class="text">在模块中</span>
<a aria-label="在模块中" class="icon-link" href="#在模块中"></a>
</h3>
<p>HMR 是可选功能，只会影响包含 HMR 代码的模块。举个例子，通过 <a href="https://github.com/webpack-contrib/style-loader"><code>style-loader</code></a> 为 style 追加补丁。为了运行追加补丁，<code>style-loader</code> 实现了 HMR 接口；当它通过 HMR 接收到更新，它会使用新的样式替换旧的样式。</p>
<p>类似的，当在一个模块中实现了 HMR 接口，你可以描述出当模块被更新后发生了什么。然而在多数情况下，不需要在每个模块中强行写入 HMR 代码。如果一个模块没有 HMR 处理函数，更新就会冒泡(bubble up)。这意味着某个单独处理函数能够更新整个模块树。如果在模块树的一个单独模块被更新，那么整组依赖模块都会被重新加载。</p>
<p>有关 <code>module.hot</code> 接口的详细信息，请查看 <a href="/api/hot-module-replacement">HMR API 页面</a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在-hmr-runtime-中" id="在-hmr-runtime-中"></a>
<span class="text">在 HMR runtime 中</span>
<a aria-label="在 HMR runtime 中" class="icon-link" href="#在-hmr-runtime-中"></a>
</h3>
<p>这件事情比较有技术性……如果你对其内部不感兴趣，可以随时跳到 <a href="/api/hot-module-replacement">HMR API 页面</a> 或 <a href="/guides/hot-module-replacement">HMR 指南</a>。</p>
<p>对于模块系统运行时(module system runtime)，会发出额外代码，来跟踪模块 <code>parents</code> 和 <code>children</code> 关系。在管理方面，runtime 支持两个方法 <code>check</code> 和 <code>apply</code>。</p>
<p><code>check</code> 方法，发送一个 HTTP 请求来更新 manifest。如果请求失败，说明没有可用更新。如果请求成功，会将 updated chunk 列表与当前的 loaded chunk 列表进行比较。每个 loaded chunk 都会下载相应的 updated chunk。当所有更新 chunk 完成下载，runtime 就会切换到 <code>ready</code> 状态。</p>
<p><code>apply</code> 方法，将所有 updated module 标记为无效。对于每个无效 module，都需要在模块中有一个 update handler，或者在此模块的父级模块中有 update handler。否则，会进行无效标记冒泡，并且父级也会被标记为无效。继续每个冒泡，直到到达应用程序入口起点，或者到达带有 update handler 的 module（以最先到达为准，冒泡停止）。如果它从入口起点开始冒泡，则此过程失败。</p>
<p>之后，所有无效 module 都会被（通过 dispose handler）处理和解除加载。然后更新当前 hash，并且调用所有 <code>accept</code> handler。runtime 切换回 <code>idle</code> 状态，一切照常继续。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#应用在项目中" id="应用在项目中"></a>
<span class="text">应用在项目中</span>
<a aria-label="应用在项目中" class="icon-link" href="#应用在项目中"></a>
</h2>
<p>在开发环境，可以将 HMR 作为 LiveReload 的替代。<a href="/configuration/dev-server/">webpack-dev-server</a> 支持 <code>hot</code> 模式，在试图重新加载整个页面之前，<code>hot</code> 模式会尝试使用 HMR 来更新。更多细节请查看 <a href="/guides/hot-module-replacement">模块热替换</a> 指南。</p>
<blockquote class="tip"><div class="tip-content"> 与许多其他功能一样，webpack 的强大之处在于它的可定制化。取决于特定项目需求，会有<em>许多方式</em>来配置 HMR。然而，对于多数项目的实现目的来说，<code>webpack-dev-server</code> 都能够很好适应，可以帮助你在项目中快速应用 HMR。 </div></blockquote></div>
<br/><h1>配置</h1>
<div><p>webpack 开箱即用，可以无需使用任何配置文件。然而，webpack 会假定项目的入口起点为 <code>src/index</code>，然后会在 <code>dist/main.js</code> 输出结果，并且在生产环境开启压缩和优化。</p>
<p>通常，你的项目还需要继续扩展此能力，为此你可以在项目根目录下创建一个 <code>webpack.config.js</code> 文件，webpack 会自动使用它。</p>
<p>下面指定了所有可用的配置选项。</p>
<blockquote class="tip"><div class="tip-content"> 刚开始学习 webpack？请查看我们提供的指南，从 webpack 一些 <a href="/concepts/">核心概念</a> 开始学习吧！ </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>点击下面配置代码中每个选项的名称，跳转到详细的文档。还要注意，带有箭头的项目可以展开，以显示更多示例，在某些情况下可以看到高级配置。</p>
<blockquote class="tip"><div class="tip-content"> 注意整个配置中我们使用 Node 内置的 <a href="https://nodejs.org/api/path.html">path 模块</a>，并在它前面加上 <a href="https://nodejs.org/docs/latest/api/globals.html#globals_dirname">__dirname</a>这个全局变量。可以防止不同操作系统之间的文件路径问题，并且可以使相对路径按照预期工作。更多「POSIX 和 Windows」的相关信息请查看<a href="https://nodejs.org/api/path.html#path_windows_vs_posix">此章节</a>。 </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/concepts/mode">mode</a><span class="token punctuation">:</span> <span class="token string">"production"</span><span class="token punctuation">,</span> <span class="token comment">// "production" | "development" | "none"</span></span></summary>  <a class="code-link" href="/concepts/mode">mode</a><span class="token punctuation">:</span> <span class="token string">"production"</span><span class="token punctuation">,</span> <span class="token comment">// enable many optimizations for production builds</span>
  <a class="code-link" href="/concepts/mode">mode</a><span class="token punctuation">:</span> <span class="token string">"development"</span><span class="token punctuation">,</span> <span class="token comment">// enabled useful tools for development</span>
  <a class="code-link" href="/concepts/mode">mode</a><span class="token punctuation">:</span> <span class="token string">"none"</span><span class="token punctuation">,</span> <span class="token comment">// no defaults</span>
</details>  <span class="token comment">// Chosen mode tells webpack to use its built-in optimizations accordingly.</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/configuration/entry-context#entry">entry</a><span class="token punctuation">:</span> <span class="token string">"./app/entry"</span><span class="token punctuation">,</span> <span class="token comment">// string | object | array</span></span></summary>  <a class="code-link" href="/configuration/entry-context#entry">entry</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"./app/entry1"</span><span class="token punctuation">,</span> <span class="token string">"./app/entry2"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <a class="code-link" href="/configuration/entry-context#entry">entry</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">:</span> <span class="token string">"./app/entry-a"</span><span class="token punctuation">,</span>
    b<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"./app/entry-b1"</span><span class="token punctuation">,</span> <span class="token string">"./app/entry-b2"</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</details>  <span class="token comment">// 默认为 './src'</span>
  <span class="token comment">// 这里应用程序开始执行</span>
  <span class="token comment">// webpack 开始打包</span>
  <a class="code-link" href="/configuration/output">output</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// webpack 如何输出结果的相关选项</span>
    <a class="code-link" href="/configuration/output#output-path">path</a><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"dist"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 所有输出文件的目标路径</span>
    <span class="token comment">// 必须是绝对路径（使用 Node.js 的 path 模块）</span>
<details><summary><span class="code-details-summary-span">    <a class="code-link" href="/configuration/output#output-filename">filename</a><span class="token punctuation">:</span> <span class="token string">"bundle.js"</span><span class="token punctuation">,</span> <span class="token comment">// string</span></span></summary>    <a class="code-link" href="/configuration/output#output-filename">filename</a><span class="token punctuation">:</span> <span class="token string">"[name].js"</span><span class="token punctuation">,</span> <span class="token comment">// 用于多个入口点(entry point)（出口点？）</span>
    <a class="code-link" href="/configuration/output#output-filename">filename</a><span class="token punctuation">:</span> <span class="token string">"[chunkhash].js"</span><span class="token punctuation">,</span> <span class="token comment">// 用于<a class="code-link" href="/guides/cache">长效缓存</a></span>
</details>    <span class="token comment">// 「入口分块(entry chunk)」的文件名模板</span>
<details><summary><span class="code-details-summary-span">    <a class="code-link" href="/configuration/output#output-publicpath">publicPath</a><span class="token punctuation">:</span> <span class="token string">"/assets/"</span><span class="token punctuation">,</span> <span class="token comment">// string</span></span></summary>    <a class="code-link" href="/configuration/output#output-publicpath">publicPath</a><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <a class="code-link" href="/configuration/output#output-publicpath">publicPath</a><span class="token punctuation">:</span> <span class="token string">"https://cdn.example.com/"</span><span class="token punctuation">,</span>
</details>    <span class="token comment">// 输出解析文件的目录，url 相对于 HTML 页面</span>
    <a class="code-link" href="/configuration/output#output-library">library</a><span class="token punctuation">:</span> <span class="token string">"MyLibrary"</span><span class="token punctuation">,</span> <span class="token comment">// string,</span>
    <span class="token comment">// 导出库(exported library)的名称</span>
<details><summary><span class="code-details-summary-span">    <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"umd"</span><span class="token punctuation">,</span> <span class="token comment">// 通用模块定义</span></span></summary>        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"umd2"</span><span class="token punctuation">,</span> <span class="token comment">// 通用模块定义</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"commonjs2"</span><span class="token punctuation">,</span> <span class="token comment">// exported with module.exports</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span> <span class="token comment">// 作为 exports 的属性导出</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"amd"</span><span class="token punctuation">,</span> <span class="token comment">// 使用 AMD 定义方法来定义</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"this"</span><span class="token punctuation">,</span> <span class="token comment">// 在 this 上设置属性</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"var"</span><span class="token punctuation">,</span> <span class="token comment">// 变量定义于根作用域下</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"assign"</span><span class="token punctuation">,</span> <span class="token comment">// 盲分配(blind assignment)</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"window"</span><span class="token punctuation">,</span> <span class="token comment">// 在 window 对象上设置属性</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"global"</span><span class="token punctuation">,</span> <span class="token comment">// property set to global object</span>
        <a class="code-link" href="/configuration/output#output-librarytarget">libraryTarget</a><span class="token punctuation">:</span> <span class="token string">"jsonp"</span><span class="token punctuation">,</span> <span class="token comment">// jsonp wrapper</span>
</details>    <span class="token comment">// 导出库(exported library)的类型</span>
<details><summary><span class="code-details-summary-span">    <span class="token comment">/* 高级输出配置（点击显示） */</span></span></summary>    <a class="code-link" href="/configuration/output#output-pathinfo">pathinfo</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
    <span class="token comment">// 在生成代码时，引入相关的模块、导出、请求等有帮助的路径信息。</span>
    <a class="code-link" href="/configuration/output#output-chunkfilename">chunkFilename</a><span class="token punctuation">:</span> <span class="token string">"[id].js"</span><span class="token punctuation">,</span>
    <a class="code-link" href="/configuration/output#output-chunkfilename">chunkFilename</a><span class="token punctuation">:</span> <span class="token string">"[chunkhash].js"</span><span class="token punctuation">,</span> <span class="token comment">// 长效缓存(/guides/caching)</span>
    <span class="token comment">// 「附加分块(additional chunk)」的文件名模板</span>
    <a class="code-link" href="/configuration/output#output-jsonpfunction">jsonpFunction</a><span class="token punctuation">:</span> <span class="token string">"myWebpackJsonp"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 用于加载分块的 JSONP 函数名</span>
    <a class="code-link" href="/configuration/output#output-sourcemapfilename">sourceMapFilename</a><span class="token punctuation">:</span> <span class="token string">"[file].map"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <a class="code-link" href="/configuration/output#output-sourcemapfilename">sourceMapFilename</a><span class="token punctuation">:</span> <span class="token string">"sourcemaps/[file].map"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 「source map 位置」的文件名模板</span>
    <a class="code-link" href="/configuration/output#output-devtoolmodulefilenametemplate">devtoolModuleFilenameTemplate</a><span class="token punctuation">:</span> "webpack<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//[resource-path]", // string</span>
    <span class="token comment">// 「devtool 中模块」的文件名模板</span>
    <a class="code-link" href="/configuration/output#output-devtoolfallbackmodulefilenametemplate">devtoolFallbackModuleFilenameTemplate</a><span class="token punctuation">:</span> "webpack<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//[resource-path]?[hash]", // string</span>
    <span class="token comment">// 「devtool 中模块」的文件名模板（用于冲突）</span>
    <a class="code-link" href="/configuration/output#output-umdnameddefine">umdNamedDefine</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
    <span class="token comment">// 在 UMD 库中使用命名的 AMD 模块</span>
    <a class="code-link" href="/configuration/output#output-crossoriginloading">crossOriginLoading</a><span class="token punctuation">:</span> <span class="token string">"use-credentials"</span><span class="token punctuation">,</span> <span class="token comment">// 枚举</span>
    <a class="code-link" href="/configuration/output#output-crossoriginloading">crossOriginLoading</a><span class="token punctuation">:</span> <span class="token string">"anonymous"</span><span class="token punctuation">,</span>
    <a class="code-link" href="/configuration/output#output-crossoriginloading">crossOriginLoading</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 指定运行时如何发出跨域请求问题</span>
<details><summary><span class="code-details-summary-span">    <span class="token comment">/* 专家级输出配置（自行承担风险） */</span></span></summary>    <a class="code-link" href="/configuration/output#output-devtoollinetoline">devtoolLineToLine</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.jsx$/</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 为这些模块使用 1:1 映射 SourceMaps（快速）</span>
    <a class="code-link" href="/configuration/output#output-hotupdatemainfilename">hotUpdateMainFilename</a><span class="token punctuation">:</span> <span class="token string">"[hash].hot-update.json"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 「HMR 清单」的文件名模板</span>
    <a class="code-link" href="/configuration/output#output-hotupdatechunkfilename">hotUpdateChunkFilename</a><span class="token punctuation">:</span> <span class="token string">"[id].[hash].hot-update.js"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 「HMR 分块」的文件名模板</span>
    <a class="code-link" href="/configuration/output#output-sourceprefix">sourcePrefix</a><span class="token punctuation">:</span> <span class="token string">"\t"</span><span class="token punctuation">,</span> <span class="token comment">// string</span>
    <span class="token comment">// 包内前置式模块资源具有更好可读性</span>
</details></details>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="/configuration/module">module</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 关于模块配置</span>
    <a class="code-link" href="/configuration/module#module-rules">rules</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// 模块规则（配置 loader、解析器等选项）</span>
      <span class="token punctuation">{</span>
        <a class="code-link" href="/configuration/module#rule-test">test</a><span class="token punctuation">:</span> <span class="token regex">/\.jsx?$/</span><span class="token punctuation">,</span>
        <a class="code-link" href="/configuration/module#rule-include">include</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"app"</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <a class="code-link" href="/configuration/module#rule-exclude">exclude</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"app/demo-files"</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// 这里是匹配条件，每个选项都接收一个正则表达式或字符串</span>
        <span class="token comment">// test 和 include 具有相同的作用，都是必须匹配选项</span>
        <span class="token comment">// exclude 是必不匹配选项（优先于 test 和 include）</span>
        <span class="token comment">// 最佳实践：</span>
        <span class="token comment">// - 只在 test 和 文件名匹配 中使用正则表达式</span>
        <span class="token comment">// - 在 include 和 exclude 中使用绝对路径数组</span>
        <span class="token comment">// - 尽量避免 exclude，更倾向于使用 include</span>
        <a class="code-link" href="/configuration/module#rule-issuer">issuer</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> test<span class="token punctuation">,</span> include<span class="token punctuation">,</span> exclude <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// issuer 条件（导入源）</span>
        <a class="code-link" href="/configuration/module#rule-enforce">enforce</a><span class="token punctuation">:</span> <span class="token string">"pre"</span><span class="token punctuation">,</span>
        <a class="code-link" href="/configuration/module#rule-enforce">enforce</a><span class="token punctuation">:</span> <span class="token string">"post"</span><span class="token punctuation">,</span>
        <span class="token comment">// 标识应用这些规则，即使规则覆盖（高级选项）</span>
        <a class="code-link" href="/configuration/module#rule-loader">loader</a><span class="token punctuation">:</span> <span class="token string">"babel-loader"</span><span class="token punctuation">,</span>
        <span class="token comment">// 应该应用的 loader，它相对上下文解析</span>
        <span class="token comment">// 为了更清晰，`-loader` 后缀在 webpack 2 中不再是可选的</span>
        <span class="token comment">// 查看 <a class="code-link" href="/migrate/3/#automatic-loader-module-name-extension-removed">webpack 1 升级指南</a>。</span>
        <a class="code-link" href="/configuration/module#rule-options-rule-query">options</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token comment">// loader 的可选项</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <a class="code-link" href="/configuration/module#rule-test">test</a><span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        <a class="code-link" href="/configuration/module#rule-use">use</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// 应用多个 loader 和选项</span>
          <span class="token string">"htmllint-loader"</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">"html-loader"</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token comment">/* ... */</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-oneof">oneOf</a><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">/* rules */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 只使用这些嵌套规则之一</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-rules">rules</a><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">/* rules */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 使用所有这些嵌套规则（合并可用条件）</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-resource">resource</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#condition">and</a><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 仅当所有条件都匹配时才匹配</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-resource">resource</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#condition">or</a><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-resource">resource</a><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// 任意条件匹配时匹配（默认为数组）</span>
      <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#rule-resource">resource</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <a class="code-link" href="/configuration/module#condition">not</a><span class="token punctuation">:</span> <span class="token comment">/* 条件 */</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
      <span class="token comment">// 条件不匹配时匹配</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<details><summary><span class="code-details-summary-span">    <span class="token comment">/* 高级模块配置（点击展示） */</span></span></summary>    <a class="code-link" href="/configuration/module#module-noparse">noParse</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token regex">/special-library\.js$/</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 不解析这里的模块</span>
    unknownContextRequest<span class="token punctuation">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>
    unknownContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unknownContextRegExp<span class="token punctuation">:</span> <span class="token regex">/^\.\/.*$/</span><span class="token punctuation">,</span>
    unknownContextCritical<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextRequest<span class="token punctuation">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>
    exprContextRegExp<span class="token punctuation">:</span> <span class="token regex">/^\.\/.*$/</span><span class="token punctuation">,</span>
    exprContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextCritical<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    wrappedContextRegExp<span class="token punctuation">:</span> <span class="token regex">/.*/</span><span class="token punctuation">,</span>
    wrappedContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    wrappedContextCritical<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// specifies default behavior for dynamic requests</span>
</details>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="/configuration/resolve">resolve</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 解析模块请求的选项</span>
    <span class="token comment">// （不适用于对 loader 解析）</span>
    <a class="code-link" href="/configuration/resolve#resolve-modules">modules</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">"node_modules"</span><span class="token punctuation">,</span>
      path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"app"</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 用于查找模块的目录</span>
    <a class="code-link" href="/configuration/resolve#resolve-extensions">extensions</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">".js"</span><span class="token punctuation">,</span> <span class="token string">".json"</span><span class="token punctuation">,</span> <span class="token string">".jsx"</span><span class="token punctuation">,</span> <span class="token string">".css"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 使用的扩展名</span>
    <a class="code-link" href="/configuration/resolve#resolve-alias">alias</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 模块别名列表</span>
      <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"new-module"</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名："module" -&gt; "new-module" 和 "module/path/file" -&gt; "new-module/path/file"</span>
      <span class="token string">"only-module$"</span><span class="token punctuation">:</span> <span class="token string">"new-module"</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名 "only-module" -&gt; "new-module"，但不匹配 "only-module/path/file" -&gt; "new-module/path/file"</span>
      <span class="token string">"module"</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"app/third/module.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// 起别名 "module" -&gt; "./app/third/module.js" 和 "module/file" 会导致错误</span>
      <span class="token comment">// 模块别名相对于当前上下文导入</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<details><summary><span class="code-details-summary-span">    <span class="token comment">/* 可供选择的别名语法（点击展示） */</span></span></summary>    <a class="code-link" href="/configuration/resolve#resolve-alias">alias</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">"module"</span><span class="token punctuation">,</span>
        <span class="token comment">// 旧的请求</span>
        alias<span class="token punctuation">:</span> <span class="token string">"new-module"</span><span class="token punctuation">,</span>
        <span class="token comment">// 新的请求</span>
        onlyModule<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token comment">// 如果为 true，只有 "module" 是别名</span>
        <span class="token comment">// 如果为 false，"module/inner/path" 也是别名</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
</details><details><summary><span class="code-details-summary-span">    <span class="token comment">/* 高级解析选项（点击展示） */</span></span></summary>    <a class="code-link" href="/configuration/resolve#resolve-symlinks">symlinks</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 遵循符号链接(symlinks)到新位置</span>
    <a class="code-link" href="/configuration/resolve#resolve-descriptionfiles">descriptionFiles</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"package.json"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 从 package 描述中读取的文件</span>
    <a class="code-link" href="/configuration/resolve#resolve-mainfields">mainFields</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"main"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 从描述文件中读取的属性</span>
    <span class="token comment">// 当请求文件夹时</span>
    <a class="code-link" href="/configuration/resolve#resolve-aliasfields">aliasFields</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"browser"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 从描述文件中读取的属性</span>
    <span class="token comment">// 以对此 package 的请求起别名</span>
    <a class="code-link" href="/configuration/resolve#resolve-enforceextension">enforceExtension</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 如果为 true，请求必不包括扩展名</span>
    <span class="token comment">// 如果为 false，请求可以包括扩展名</span>
    <a class="code-link" href="/configuration/resolve#resolveloader-moduleextensions">moduleExtensions</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"-module"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <a class="code-link" href="/configuration/resolve#resolve-enforcemoduleextension">enforceModuleExtension</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 类似 extensions/enforceExtension，但是用模块名替换文件</span>
    <a class="code-link" href="/configuration/resolve#resolve-unsafecache">unsafeCache</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <a class="code-link" href="/configuration/resolve#resolve-unsafecache">unsafeCache</a><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 为解析的请求启用缓存</span>
    <span class="token comment">// 这是不安全，因为文件夹结构可能会改动</span>
    <span class="token comment">// 但是性能改善是很大的</span>
    <a class="code-link" href="/configuration/resolve#resolve-cachepredicate">cachePredicate</a><span class="token punctuation">:</span> <span class="token punctuation">(</span>path<span class="token punctuation">,</span> request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// predicate function which selects requests for caching</span>
    <a class="code-link" href="/configuration/resolve#resolve-plugins">plugins</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">]</span>
    <span class="token comment">// 应用于解析器的附加插件</span>
</details>  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="/configuration/performance">performance</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
<details><summary><span class="code-details-summary-span">    <a class="code-link" href="/configuration/performance#performance-hints">hints</a><span class="token punctuation">:</span> <span class="token string">"warning"</span><span class="token punctuation">,</span> <span class="token comment">// 枚举</span></span></summary>    <a class="code-link" href="/configuration/performance#performance-hints">hints</a><span class="token punctuation">:</span> <span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token comment">// 性能提示中抛出错误</span>
    <a class="code-link" href="/configuration/performance#performance-hints">hints</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 关闭性能提示</span>
</details>    <a class="code-link" href="/configuration/performance#performance-maxassetsize">maxAssetSize</a><span class="token punctuation">:</span> <span class="token number">200000</span><span class="token punctuation">,</span> <span class="token comment">// 整数类型（以字节为单位）</span>
    <a class="code-link" href="/configuration/performance#performance-maxentrypointsize">maxEntrypointSize</a><span class="token punctuation">:</span> <span class="token number">400000</span><span class="token punctuation">,</span> <span class="token comment">// 整数类型（以字节为单位）</span>
    <a class="code-link" href="/configuration/performance#performance-assetfilter">assetFilter</a><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 提供资源文件名的断言函数</span>
      <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.css'</span><span class="token punctuation">)</span> <span class="token operator">||</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"source-map"</span><span class="token punctuation">,</span> <span class="token comment">// enum</span></span></summary>  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"inline-source-map"</span><span class="token punctuation">,</span> <span class="token comment">// 嵌入到源文件中</span>
  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"eval-source-map"</span><span class="token punctuation">,</span> <span class="token comment">// 将 SourceMap 嵌入到每个模块中</span>
  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"hidden-source-map"</span><span class="token punctuation">,</span> <span class="token comment">// SourceMap 不在源文件中引用</span>
  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"cheap-source-map"</span><span class="token punctuation">,</span> <span class="token comment">// 没有模块映射(module mappings)的 SourceMap 低级变体(cheap-variant)</span>
  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"cheap-module-source-map"</span><span class="token punctuation">,</span> <span class="token comment">// 有模块映射(module mappings)的 SourceMap 低级变体</span>
  <a class="code-link" href="/configuration/devtool">devtool</a><span class="token punctuation">:</span> <span class="token string">"eval"</span><span class="token punctuation">,</span> <span class="token comment">// 没有模块映射，而是命名模块。以牺牲细节达到最快。</span>
</details>  <span class="token comment">// 通过在浏览器调试工具(browser devtools)中添加元信息(meta info)增强调试</span>
  <span class="token comment">// 牺牲了构建速度的 `source-map' 是最详细的。</span>
  <a class="code-link" href="/configuration/entry-context#context">context</a><span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span> <span class="token comment">// string（绝对路径！）</span>
  <span class="token comment">// webpack 的主目录</span>
  <span class="token comment">// <a class="code-link" href="/configuration/entry-context">entry</a> 和 <a class="code-link" href="/configuration/module#rule-loader">module.rules.loader</a> 选项</span>
  <span class="token comment">// 相对于此目录解析</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"web"</span><span class="token punctuation">,</span> <span class="token comment">// 枚举</span></span></summary>  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"webworker"</span><span class="token punctuation">,</span> <span class="token comment">// WebWorker</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"node"</span><span class="token punctuation">,</span> <span class="token comment">// node.js 通过 require</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"async-node"</span><span class="token punctuation">,</span> <span class="token comment">// Node.js 通过 fs 和 vm</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"node-webkit"</span><span class="token punctuation">,</span> <span class="token comment">// nw.js</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"electron-main"</span><span class="token punctuation">,</span> <span class="token comment">// electron，主进程(main process)</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token string">"electron-renderer"</span><span class="token punctuation">,</span> <span class="token comment">// electron，渲染进程(renderer process)</span>
  <a class="code-link" href="/configuration/target">target</a><span class="token punctuation">:</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 自定义</span>
</details>  <span class="token comment">// bundle 应该运行的环境</span>
  <span class="token comment">// 更改 块加载行为(chunk loading behavior) 和 可用模块(available module)</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/configuration/externals">externals</a><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"react"</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">^</span>@angular\<span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span></summary>  <a class="code-link" href="/configuration/externals">externals</a><span class="token punctuation">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span> <span class="token comment">// string（精确匹配）</span>
  <a class="code-link" href="/configuration/externals">externals</a><span class="token punctuation">:</span> <span class="token regex">/^[a-z\-]+($|\/)/</span><span class="token punctuation">,</span> <span class="token comment">// 正则</span>
  <a class="code-link" href="/configuration/externals">externals</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 对象</span>
    angular<span class="token punctuation">:</span> <span class="token string">"this angular"</span><span class="token punctuation">,</span> <span class="token comment">// this["angular"]</span>
    react<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// UMD</span>
      commonjs<span class="token punctuation">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
      commonjs2<span class="token punctuation">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
      amd<span class="token punctuation">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
      root<span class="token punctuation">:</span> <span class="token string">"React"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="/configuration/externals">externals</a><span class="token punctuation">:</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token keyword">return</span> <span class="token string">"commonjs "</span> <span class="token operator">+</span> request <span class="token punctuation">}</span>
</details>  <span class="token comment">// 不要遵循/打包这些模块，而是在运行时从环境中请求他们</span>
  <a class="code-link" href="https://github.com/webpack-contrib/webpack-serve#options">serve</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">//object</span>
    port<span class="token punctuation">:</span> <span class="token number">1337</span><span class="token punctuation">,</span>
    content<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 为 webpack-serve 提供选项</span>
<details><summary><span class="code-details-summary-span">  <a class="code-link" href="/configuration/stats">stats</a><span class="token punctuation">:</span> <span class="token string">"errors-only"</span><span class="token punctuation">,</span></span></summary>  <a class="code-link" href="/configuration/stats">stats</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">//object</span>
    assets<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    colors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errorDetails<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    hash<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</details>  <span class="token comment">// 精确控制要显示的 bundle 信息</span>
  <a class="code-link" href="/configuration/dev-server">devServer</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// proxy URLs to backend development server</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// boolean | string | array, static file location</span>
    compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// enable gzip compression</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// true for index.html upon 404, object for multiple paths</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// hot module replacement. Depends on HotModuleReplacementPlugin</span>
    https<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true for self-signed, object for cert authority</span>
    noInfo<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// only errors &amp; warns on hot reload</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="plugins">plugins</a><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 附加插件列表</span>
<details><summary><span class="code-details-summary-span">  <span class="token comment">/* 高级配置（点击展示） */</span></span></summary>  <a class="code-link" href="/configuration/resolve#resolveloader">resolveLoader</a><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">/* 等同于 resolve */</span> <span class="token punctuation">}</span>
  <span class="token comment">// 独立解析选项的 loader</span>
  <a class="code-link" href="other-options#parallelism">parallelism</a><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// number</span>
  <span class="token comment">// 限制并行处理模块的数量</span>
  <a class="code-link" href="other-options#profile">profile</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 捕获时机信息</span>
  <a class="code-link" href="other-options#bail">bail</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//boolean</span>
  <span class="token comment">// 在第一个错误出错时抛出，而不是无视错误。</span>
  <a class="code-link" href="other-options#cache">cache</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 禁用/启用缓存</span>
  <a class="code-link" href="watch#watch">watch</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
  <span class="token comment">// 启用观察</span>
  <a class="code-link" href="watch#watchoptions">watchOptions</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <a class="code-link" href="watch#watchoptions-aggregatetimeout">aggregateTimeout</a><span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// in ms</span>
    <span class="token comment">// 将多个更改聚合到单个重构建(rebuild)</span>
    <a class="code-link" href="watch#watchoptions-poll">poll</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <a class="code-link" href="watch#watchoptions-poll">poll</a><span class="token punctuation">:</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token comment">// 间隔单位 ms</span>
    <span class="token comment">// 启用轮询观察模式</span>
    <span class="token comment">// 必须用在不通知更改的文件系统中</span>
    <span class="token comment">// 即 nfs shares（译者注：<a class="code-link" href="http://linux.vbird.org/linux_server/0330nfs/0330nfs.php">Network FileSystem</a>，最大的功能就是可以透過網路，讓不同的機器、不同的作業系統、可以彼此分享個別的檔案 ( share file )）</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="node">node</a><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Polyfills and mocks to run Node.js-</span>
    <span class="token comment">// environment code in non-Node environments.</span>
    <a class="code-link" href="node#node-console">console</a><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// boolean | "mock"</span>
    <a class="code-link" href="node#node-global">global</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean | "mock"</span>
    <a class="code-link" href="node#node-process">process</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean</span>
    <a class="code-link" href="node#node-__filename">__filename</a><span class="token punctuation">:</span> <span class="token string">"mock"</span><span class="token punctuation">,</span> <span class="token comment">// boolean | "mock"</span>
    <a class="code-link" href="node#node-__dirname">__dirname</a><span class="token punctuation">:</span> <span class="token string">"mock"</span><span class="token punctuation">,</span> <span class="token comment">// boolean | "mock"</span>
    <a class="code-link" href="node#node-buffer">Buffer</a><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// boolean | "mock"</span>
    <a class="code-link" href="node#node-setimmediate">setImmediate</a><span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// boolean | "mock" | "empty"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <a class="code-link" href="other-options#recordspath">recordsPath</a><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"build/records.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <a class="code-link" href="other-options#recordsinputpath">recordsInputPath</a><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"build/records.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <a class="code-link" href="other-options#recordsoutputpath">recordsOutputPath</a><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"build/records.json"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">// TODO</span>
</details><span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#use-custom-configuration-file" id="use-custom-configuration-file"></a>
<span class="text">Use custom configuration file</span>
<a aria-label="Use custom configuration file" class="icon-link" href="#use-custom-configuration-file"></a>
</h2>
<p>If for some reason you want to use custom configuration file depending on certain situations you can change this via command line by using the <code>--config</code> flag.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --config prod.config.js"</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#configuration-file-generators" id="configuration-file-generators"></a>
<span class="text">Configuration file generators</span>
<a aria-label="Configuration file generators" class="icon-link" href="#configuration-file-generators"></a>
</h2>
<p>Want to rapidly generate webpack configuration file for your project requirements with just a few clicks away?</p>
<p><a href="https://generatewebpackconfig.netlify.com/">Generate Custom Webpack Configuration</a> is an interactive portal you can play around by selecting custom webpack configuration options tailored for your frontend project. It automatically generates a minimal webpack configuration based on your selection of loaders/plugins, etc.</p>
<p><a href="https://webpack.jakoblind.no/">Visual tool for creating webpack configs</a> is an online configuration tool for creating webpack configuration file where you can select any combination of features you need. It also generates a full example project based on your webpack configs.</p>
</div>
<br/><h1>使用不同语言进行配置(configuration languages)</h1>
<div><p>webpack 接受以多种编程和数据语言编写的配置文件。支持的文件扩展名列表，可以在 <a href="https://github.com/js-cli/js-interpret">node-interpret</a> 包中找到。使用 <a href="https://github.com/js-cli/js-interpret">node-interpret</a>，webpack 可以处理许多不同类型的配置文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#typescript" id="typescript"></a>
<span class="text">TypeScript</span>
<a aria-label="TypeScript" class="icon-link" href="#typescript"></a>
</h2>
<p>为了用 <a href="http://www.typescriptlang.org/">TypeScript</a> 书写 webpack 的配置文件，必须先安装相关依赖，i.e., TypeScript and the relevant type definitions from the <a href="https://definitelytyped.org/">DefinitelyTyped</a> project:：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev typescript ts-node @types/node @types/webpack
<span class="token comment"># and, if using webpack-dev-server</span>
npm <span class="token function">install</span> --save-dev @types/webpack-dev-server
</code></pre>
<p>之后就可以使用 TypeScript 书写 webpack 的配置文件了：</p>
<p><strong>webpack.config.ts</strong></p>
<pre><code class="lang-typescript"><span class="token keyword">import</span> path from <span class="token string">'path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> webpack from <span class="token string">'webpack'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config<span class="token punctuation">:</span> webpack<span class="token punctuation">.</span>Configuration <span class="token operator">=</span> <span class="token punctuation">{</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./foo.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'foo.bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> config<span class="token punctuation">;</span>
</code></pre>
<p>以上示例假定 webpack 版本 &gt;= 2.7，或者，在  <code>tsconfig.json</code> 文件中，具有 <code>esModuleInterop</code> 和 <code>allowSyntheticDefaultImports</code> 这两个新的编译器选项的较新版本 TypeScript。</p>
<p>注意，你还需要核对 <code>tsconfig.json</code> 文件。如果 <code>tsconfig.json</code> 中的 <code>compilerOptions</code> 中的 module 字段是 <code>commonjs</code> ，则配置是正确的，否则 webpack 将因为错误而构建失败。发生这种情况，是因为 <code>ts-node</code> 不支持 <code>commonjs</code> 以外的任何模块语法。</p>
<p>这个问题有两种解决方案：</p>
<ul>
<li>修改 <code>tsconfig.json</code>。</li>
<li>安装 <code>tsconfig-paths</code>。</li>
</ul>
<p>__第一个选项_是指，打开你的 <code>tsconfig.json</code> 文件并查找 <code>compilerOptions</code>。将 <code>target</code> 设置为 <code>"ES5"</code>，以及将 <code>module</code> 设置为 <code>"CommonJS"</code>（或者完全移除 <code>module</code> 选项）。</p>
<p>__第二个选项_是指，安装 <code>tsconfig-paths</code> 包：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev tsconfig-paths
</code></pre>
<p>然后，为你的 webpack 配置，专门创建一个单独的 TypeScript 配置：</p>
<p><strong>tsconfig-for-webpack-config.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"commonjs"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
    <span class="token property">"esModuleInterop"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> <code>ts-node</code> 可以使用 <code>tsconfig-path</code> 提供的环境变量来解析 <code>tsconfig.json</code> 文件。 </div></blockquote><p>然后，设置 <code>tsconfig-path</code> 提供的环境变量 <code>process.env.TS_NODE_PROJECT</code>，如下所示：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"cross-env TS_NODE_PROJECT=\"</span>tsconfig-for-webpack-config.json\<span class="token string">" webpack"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> We had been getting reports that <code>TS_NODE_PROJECT</code> might not work with <code>"TS_NODE_PROJECT" unrecognized command</code> error. Therefore running it with <code>cross-env</code> seems to fix the issue, for more info <a href="https://github.com/webpack/webpack.js.org/issues/2733">see this issue</a>. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#coffeescript" id="coffeescript"></a>
<span class="text">CoffeeScript</span>
<a aria-label="CoffeeScript" class="icon-link" href="#coffeescript"></a>
</h2>
<p>类似的，为了使用 <a href="http://coffeescript.org/">CoffeeScript</a> 来书写配置文件, 同样需要安装相关的依赖：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev coffee-script
</code></pre>
<p>之后就可以使用 Coffeecript 书写配置文件了：</p>
<p><strong>webpack.config.coffee</strong></p>
<!-- eslint-skip -->
<pre><code class="lang-js">HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span>
webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span>
path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

config <span class="token operator">=</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./path/to/my/entry/file.js'</span>
  output<span class="token punctuation">:</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    filename<span class="token punctuation">:</span> <span class="token string">'my-first-webpack.bundle.js'</span>
  module<span class="token punctuation">:</span> rules<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.(js|jsx)$/</span>
    use<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
  <span class="token punctuation">}</span> <span class="token punctuation">]</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span>template<span class="token punctuation">:</span> <span class="token string">'./src/index.html'</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#babel-and-jsx" id="babel-and-jsx"></a>
<span class="text">Babel and JSX</span>
<a aria-label="Babel and JSX" class="icon-link" href="#babel-and-jsx"></a>
</h2>
<p>在以下的例子中，使用了 JSX（React 形式的 javascript）以及 Babel 来创建 JSON 形式的 webpack 配置文件：</p>
<blockquote>
<p>感谢 <a href="https://twitter.com/_developit/status/769583291666169862">Jason Miller</a></p>
</blockquote>
<p>首先安装依赖：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev babel-register jsxobj babel-preset-es2015
</code></pre>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token string">"es2015"</span> <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>webpack.config.babel.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> jsxobj <span class="token keyword">from</span> <span class="token string">'jsxobj'</span><span class="token punctuation">;</span>

<span class="token comment">// example of an imported plugin</span>
<span class="token keyword">const</span> CustomPlugin <span class="token operator">=</span> config <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>config<span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'custom-plugin'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>webpack target<span class="token operator">=</span><span class="token string">"web"</span> watch mode<span class="token operator">=</span><span class="token string">"production"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>entry path<span class="token operator">=</span><span class="token string">"src/index.js"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>resolve<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>alias <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">{</span>
        react<span class="token punctuation">:</span> <span class="token string">'preact-compat'</span><span class="token punctuation">,</span>
        <span class="token string">'react-dom'</span><span class="token punctuation">:</span> <span class="token string">'preact-compat'</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>resolve<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>plugins<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>CustomPlugin foo<span class="token operator">=</span><span class="token string">"bar"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>plugins<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>webpack<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 如果你在其他地方也使用了 Babel 并且把<code>模块(modules)</code>设置为了 <code>false</code>，那么你要么同时维护两份单独的 <code>.babelrc</code> 文件，要么使用 <code>conts jsxobj = requrie('jsxobj');</code> 并且使用 <code>moduel.exports</code> 而不是新版本的 <code>import</code> 和 <code>export</code> 语法。这是因为尽管 Node.js 已经支持了许多 ES6 的新特性，然而还无法支持 ES6 模块语法。 </div></blockquote></div>
<br/><h1>多种配置类型(configuration types)</h1>
<div><p>除了导出单个配置对象，还有一些方式满足其他需求。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#导出为一个函数" id="导出为一个函数"></a>
<span class="text">导出为一个函数</span>
<a aria-label="导出为一个函数" class="icon-link" href="#导出为一个函数"></a>
</h2>
<p>最终，你会发现需要在<a href="/guides/development">开发</a>和<a href="/guides/production">生产构建</a>之间，消除 <code>webpack.config.js</code> 的差异。（至少）有两种选项：</p>
<p>作为导出一个配置对象的替代，还有一种可选的导出方式是，从 webpack 配置文件中导出一个函数。该函数在调用时，可传入两个参数：</p>
<ul>
<li>环境对象(environment)作为第一个参数。有关语法示例，请查看<a href="/api/cli#environment-options">CLI 文档的环境选项</a>。</li>
<li>一个选项 map 对象（<code>argv</code>）作为第二个参数。这个对象描述了传递给 webpack 的选项，并且具有 <a href="/api/cli/#output-options"><code>output-filename</code></a> 和 <a href="/api/cli/#optimize-options"><code>optimize-minimize</code></a> 等 key。</li>
</ul>
<pre><code class="lang-diff"><span class="token deleted">-module.exports = {</span>
<span class="token inserted">+module.exports = function(env, argv) {</span>
<span class="token inserted">+  return {</span>
<span class="token inserted">+    mode: env.production ? 'production' : 'development',</span>
<span class="token inserted">+    devtool: env.production ? 'source-maps' : 'eval',</span>
     plugins: [
       new TerserPlugin({
         terserOptions: {
<span class="token inserted">+          compress: argv['optimize-minimize'] // 只有传入 -p 或 --optimize-minimize</span>
         }
       })
     ]
<span class="token inserted">+  };</span>
};
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#导出一个-promise" id="导出一个-promise"></a>
<span class="text">导出一个 Promise</span>
<a aria-label="导出一个 Promise" class="icon-link" href="#导出一个-promise"></a>
</h2>
<p>webpack 将运行由配置文件导出的函数，并且等待 Promise 返回。便于需要异步地加载所需的配置变量。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
        <span class="token comment">/* ... */</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#导出多个配置对象" id="导出多个配置对象"></a>
<span class="text">导出多个配置对象</span>
<a aria-label="导出多个配置对象" class="icon-link" href="#导出多个配置对象"></a>
</h2>
<p>作为导出一个配置对象/配置函数的替代，你可能需要导出多个配置对象（从 webpack 3.1.0 开始支持导出多个函数）。当运行 webpack 时，所有的配置对象都会构建。例如，导出多个配置对象，对于针对多个<a href="/configuration/output#output-librarytarget">构建目标</a>（例如 AMD 和 CommonJS）<a href="/guides/author-libraries">打包一个 library</a> 非常有用。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'./dist-amd.js'</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'amd'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'amd'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'./dist-commonjs.js'</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'commonjs'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'commonjs'</span><span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'production'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> If you pass a name to <a href="/api/cli/#config-options"><code>--config-name</code></a> flag, webpack will only build that specific configuration. </div></blockquote></div>
<br/><h1>入口和上下文(entry and context)</h1>
<div><p>entry 对象是用于 webpack 查找启动并构建 bundle。其上下文是入口文件所处的目录的绝对路径的字符串。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h2>
<p><code>string</code></p>
<p>基础目录，<strong>绝对路径</strong>，用于从配置中解析入口起点(entry point)和 loader</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  context<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'app'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>默认使用当前目录，但是推荐在配置中传递一个值。这使得你的配置独立于 CWD(current working directory - 当前执行路径)。</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#entry" id="entry"></a>
<span class="text"><code>entry</code></span>
<a aria-label="&lt;code&gt;entry&lt;/code&gt;" class="icon-link" href="#entry"></a>
</h2>
<p><code>string | [string] | object { &lt;key&gt;: string | [string] } | (function: () =&gt; string | [string] | object { &lt;key&gt;: string | [string] })</code></p>
<p>起点或是应用程序的起点入口。从这个起点开始，应用程序启动执行。如果传递一个数组，那么数组的每一项都会执行。</p>
<p>动态加载的模块<strong>不是</strong>入口起点。</p>
<p>简单规则：每个 HTML 页面都有一个入口起点。单页应用(SPA)：一个入口起点，多页应用(MPA)：多个入口起点。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    home<span class="token punctuation">:</span> <span class="token string">'./home.js'</span><span class="token punctuation">,</span>
    about<span class="token punctuation">:</span> <span class="token string">'./about.js'</span><span class="token punctuation">,</span>
    contact<span class="token punctuation">:</span> <span class="token string">'./contact.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#命名" id="命名"></a>
<span class="text">命名</span>
<a aria-label="命名" class="icon-link" href="#命名"></a>
</h3>
<p>如果传入一个字符串或字符串数组，chunk 会被命名为 <code>main</code>。如果传入一个对象，则每个键(key)会是 chunk 的名称，该值描述了 chunk 的入口起点。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#动态入口" id="动态入口"></a>
<span class="text">动态入口</span>
<a aria-label="动态入口" class="icon-link" href="#动态入口"></a>
</h3>
<p>If a function is passed then it will be invoked on every <a href="/api/compiler-hooks/#make">make</a> event.</p>
<blockquote>
<p>Note that the make event triggers when webpack starts and for every invalidation when <a href="/configuration/watch/">watching for file changes</a>.</p>
</blockquote>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'./demo'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./demo'</span><span class="token punctuation">,</span> <span class="token string">'./demo2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>For example: you can use dynamic entries to get the actual entries from an external source (remote server, file system content or database):</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">entry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">fetchPathsFromSomeExternalSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// returns a promise that will be resolved with something like ['src/main-layout.js', 'src/admin-layout.js']</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>当结合 <a href="/configuration/output#output-library"><code>output.library</code></a> 选项时：如果传入数组，则只导出最后一项。</p>
</div>
<br/><h1>输出(output)</h1>
<div><p><code>output</code> 位于对象最顶级键(key)，包括了一组选项，指示 webpack 如何去输出、以及在哪里输出你的「bundle、asset 和其他你所打包或使用 webpack 载入的任何内容」。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-auxiliarycomment" id="output-auxiliarycomment"></a>
<span class="text"><code>output.auxiliaryComment</code></span>
<a aria-label="&lt;code&gt;output.auxiliaryComment&lt;/code&gt;" class="icon-link" href="#output-auxiliarycomment"></a>
</h2>
<p><code>string</code> <code>object</code></p>
<p>在和 <a href="#output-library"><code>output.library</code></a> 和 <a href="#output-librarytarget"><code>output.libraryTarget</code></a> 一起使用时，此选项允许用户向导出容器(export wrapper)中插入注释。要为 <code>libraryTarget</code> 每种类型都插入相同的注释，将 <code>auxiliaryComment</code> 设置为一个字符串：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">:</span> <span class="token string">'someLibName'</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'umd'</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'someLibName.js'</span><span class="token punctuation">,</span>
    auxiliaryComment<span class="token punctuation">:</span> <span class="token string">'Test Comment'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>将会生成如下：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    exports<span class="token punctuation">[</span><span class="token string">'someLibName'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// Test Comment</span>
  <span class="token keyword">else</span>
    root<span class="token punctuation">[</span><span class="token string">'someLibName'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>root<span class="token punctuation">[</span><span class="token string">'_'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>__WEBPACK_EXTERNAL_MODULE_1__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>对于 <code>libraryTarget</code> 每种类型的注释进行更细粒度地控制，请传入一个对象：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    auxiliaryComment<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">:</span> <span class="token string">'Root Comment'</span><span class="token punctuation">,</span>
      commonjs<span class="token punctuation">:</span> <span class="token string">'CommonJS Comment'</span><span class="token punctuation">,</span>
      commonjs2<span class="token punctuation">:</span> <span class="token string">'CommonJS2 Comment'</span><span class="token punctuation">,</span>
      amd<span class="token punctuation">:</span> <span class="token string">'AMD Comment'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-chunkfilename" id="output-chunkfilename"></a>
<span class="text"><code>output.chunkFilename</code></span>
<a aria-label="&lt;code&gt;output.chunkFilename&lt;/code&gt;" class="icon-link" href="#output-chunkfilename"></a>
</h2>
<p><code>string</code></p>
<p>此选项决定了非入口(non-entry) chunk 文件的名称。有关可取的值的详细信息，请查看 <a href="#output-filename"><code>output.filename</code></a> 选项。</p>
<p>注意，这些文件名需要在 runtime 根据 chunk 发送的请求去生成。因此，需要在 webpack runtime 输出 bundle 值时，将 chunk id 的值对应映射到占位符(如 <code>[name]</code> 和 <code>[chunkhash]</code>)。这会增加文件大小，并且在任何 chunk 的占位符值修改后，都会使 bundle 失效。</p>
<p>默认使用 <code>[id].js</code> 或从 <a href="#output-filename"><code>output.filename</code></a> 中推断出的值（<code>[name]</code> 会被预先替换为 <code>[id]</code> 或 <code>[id].</code>）。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-chunkloadtimeout" id="output-chunkloadtimeout"></a>
<span class="text"><code>output.chunkLoadTimeout</code></span>
<a aria-label="&lt;code&gt;output.chunkLoadTimeout&lt;/code&gt;" class="icon-link" href="#output-chunkloadtimeout"></a>
</h2>
<p><code>integer</code></p>
<p>chunk 请求到期之前的毫秒数，默认为 120 000。从 webpack 2.6.0 开始支持此选项。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-crossoriginloading" id="output-crossoriginloading"></a>
<span class="text"><code>output.crossOriginLoading</code></span>
<a aria-label="&lt;code&gt;output.crossOriginLoading&lt;/code&gt;" class="icon-link" href="#output-crossoriginloading"></a>
</h2>
<p><code>boolean</code> <code>string</code></p>
<p>只用于 <a href="/configuration/target"><code>target</code></a> 是 web，使用了通过 script 标签的 JSONP 来按需加载 chunk。</p>
<p>启用 <a href="https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin">cross-origin 属性</a> 加载 chunk。以下是可接收的值……</p>
<p><code>crossOriginLoading: false</code> - 禁用跨域加载（默认）</p>
<p><code>crossOriginLoading: 'anonymous'</code> - <strong>不带凭据(credential)</strong>启用跨域加载</p>
<p><code>crossOriginLoading: 'use-credentials'</code> - <strong>带凭据(credential)</strong>启用跨域加载 <strong>with credentials</strong></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-jsonpscripttype" id="output-jsonpscripttype"></a>
<span class="text"><code>output.jsonpScriptType</code></span>
<a aria-label="&lt;code&gt;output.jsonpScriptType&lt;/code&gt;" class="icon-link" href="#output-jsonpscripttype"></a>
</h2>
<p><code>string</code></p>
<p>允许自定义 <code>script</code> 的类型，webpack 会将 <code>script</code> 标签注入到 DOM 中以下载异步 chunk。可以使用以下选项：</p>
<ul>
<li><code>'text/javascript'</code>（默认）</li>
<li><code>'module'</code>：与 ES6 就绪代码一起使用。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-devtoolfallbackmodulefilenametemplate" id="output-devtoolfallbackmodulefilenametemplate"></a>
<span class="text"><code>output.devtoolFallbackModuleFilenameTemplate</code></span>
<a aria-label="&lt;code&gt;output.devtoolFallbackModuleFilenameTemplate&lt;/code&gt;" class="icon-link" href="#output-devtoolfallbackmodulefilenametemplate"></a>
</h2>
<p><code>string | function(info)</code></p>
<p>当上面的模板字符串或函数产生重复时使用的备用内容。</p>
<p>查看 <a href="#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-devtoollinetoline" id="output-devtoollinetoline"></a>
<span class="text"><code>output.devtoolLineToLine</code></span>
<a aria-label="&lt;code&gt;output.devtoolLineToLine&lt;/code&gt;" class="icon-link" href="#output-devtoollinetoline"></a>
</h2>
<p><code>boolean | object</code></p>
<blockquote>
<p>避免使用此选项，因为它们已废弃，并将很快删除。 it is <strong>deprecated</strong> and will soon be removed.</p>
</blockquote>
<p>对所有或某些模块启用「行到行映射(line to line mapping)」。这将生成基本的源映射(source map)，即生成资源(generated source)的每一行，映射到原始资源(original source)的同一行。这是一个性能优化点，并且应该只需要输入行(input line)和生成行(generated line)相匹配时才使用。</p>
<p>传入 boolean 值，对所有模块启用或禁用此功能（默认 <code>false</code>）。对象可有 <code>test</code>, <code>include</code>, <code>exclude</code> 三种属性。例如，对某个特定目录中所有 javascript 文件启用此功能：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    devtoolLineToLine<span class="token punctuation">:</span> <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span> include<span class="token punctuation">:</span> <span class="token string">'src/utilities'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-devtoolmodulefilenametemplate" id="output-devtoolmodulefilenametemplate"></a>
<span class="text"><code>output.devtoolModuleFilenameTemplate</code></span>
<a aria-label="&lt;code&gt;output.devtoolModuleFilenameTemplate&lt;/code&gt;" class="icon-link" href="#output-devtoolmodulefilenametemplate"></a>
</h2>
<p><code>string | function(info)</code></p>
<p>此选项仅在 「<a href="/configuration/devtool"><code>devtool</code></a> 使用了需要模块名称的选项」时使用。</p>
<p>自定义每个 source map 的 <code>sources</code> 数组中使用的名称。可以通过传递模板字符串(template string)或者函数来完成。例如，当使用 <code>devtool: 'eval'</code>，默认值是：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    devtoolModuleFilenameTemplate<span class="token punctuation">:</span> <span class="token string">'webpack://[namespace]/[resource-path]?[loaders]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>模板字符串(template string)中做以下替换（通过 webpack 内部的 <a href="https://github.com/webpack/webpack/blob/master/lib/ModuleFilenameHelpers.js"><code>ModuleFilenameHelpers</code></a>）：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">模板</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [absolute-resource-path]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        绝对路径文件名
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [all-loaders]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        自动和显式的 loader，并且参数取决于第一个 loader 名称
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [hash]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块标识符的 hash
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [id]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块标识符
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [loaders]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        显式的 loader，并且参数取决于第一个 loader 名称
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [resource]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        用于解析文件的路径和用于第一个 loader 的任意查询参数
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [resource-path]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        不带任何查询参数，用于解析文件的路径
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [namespace]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块命名空间。在构建成为一个 library 之后，通常也是 library 名称，否则为空
    </div>
</div></div>
</div>
</div>
</div><p>当使用一个函数，同样的选项要通过 <code>info</code> 参数并使用驼峰式(camel-cased)：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    devtoolModuleFilenameTemplate<span class="token punctuation">:</span> info <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> `webpack<span class="token punctuation">:</span><span class="token operator">/</span><span class="token comment">//${info.resourcePath}?${info.loaders}`;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果多个模块产生相同的名称，使用 <a href="#output-devtoolfallbackmodulefilenametemplate"><code>output.devtoolFallbackModuleFilenameTemplate</code></a> 来代替这些模块。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-devtoolnamespace" id="output-devtoolnamespace"></a>
<span class="text"><code>output.devtoolNamespace</code></span>
<a aria-label="&lt;code&gt;output.devtoolNamespace&lt;/code&gt;" class="icon-link" href="#output-devtoolnamespace"></a>
</h2>
<p><code>string</code></p>
<p>此选项确定 <a href="#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a> 使用的模块名称空间。未指定时的默认值为：<a href="#output-library"><code>output.library</code></a>。在加载多个通过 webpack 构建的 library 时，用于防止 source map 中源文件路径冲突。</p>
<p>例如，如果你有两个 library，分别使用命名空间 <code>library1</code> 和 <code>library2</code>，并且都有一个文件 <code>./src/index.js</code>（可能具有不同内容），它们会将这些文件暴露为 <code>webpack://library1/./src/index.js</code> 和 <code>webpack://library2/./src/index.js</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-filename" id="output-filename"></a>
<span class="text"><code>output.filename</code></span>
<a aria-label="&lt;code&gt;output.filename&lt;/code&gt;" class="icon-link" href="#output-filename"></a>
</h2>
<p><code>string</code> <code>function</code></p>
<p>此选项决定了每个输出 bundle 的名称。这些 bundle 将写入到 <a href="#output-path"><code>output.path</code></a> 选项指定的目录下。</p>
<p>对于单个<a href="/configuration/entry-context#entry"><code>入口</code></a>起点，filename 会是一个静态名称。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>然而，当通过多个入口起点(entry point)、代码拆分(code splitting)或各种插件(plugin)创建多个 bundle，应该使用以下一种替换方式，来赋予每个 bundle 一个唯一的名称……</p>
<p>使用入口名称：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>使用内部 chunk id</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[id].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>使用每次构建过程中，唯一的 hash 生成</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].[hash].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>使用基于每个 chunk 内容的 hash：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[chunkhash].bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Using hashes generated for extracted content:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[contenthash].bundle.css'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Using function to return the filename:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token punctuation">(</span>chunkData<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> chunkData<span class="token punctuation">.</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'main'</span> <span class="token operator">?</span> <span class="token string">'[name].js'</span><span class="token punctuation">:</span> <span class="token string">'[name]/[name].js'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>请确保已阅读过 <a href="/guides/caching">指南 - 缓存</a> 的详细信息。这里涉及更多步骤，不仅仅是设置此选项。</p>
<p>注意此选项被称为文件名，但是你还是可以使用像 <code>'js/[name]/bundle.js'</code> 这样的文件夹结构。</p>
<p>注意，此选项不会影响那些「按需加载 chunk」的输出文件。对于这些文件，请使用 <a href="#output-chunkfilename"><code>output.chunkFilename</code></a> 选项来控制输出。通过 loader 创建的文件也不受影响。在这种情况下，你必须尝试 loader 特定的可用选项。</p>
<p>可以使用以下替换模板字符串（通过 webpack 内部的[<code>TemplatedPathPlugin</code>]<a href="https://github.com/webpack/webpack/blob/master/lib/TemplatedPathPlugin.js"><code>TemplatedPathPlugin</code></a>）：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">模板</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [hash]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块标识符(module identifier)的 hash
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [chunkhash]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        chunk 内容的 hash
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [name]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块名称
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [id]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块标识符(module identifier)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [query]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块的 query，例如，文件名 <code>?</code> 后面的字符串
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [function]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        The function, which can return filename [string]
    </div>
</div></div>
</div>
</div>
</div><p><code>[hash]</code> 和 <code>[chunkhash]</code> 的长度可以使用 <code>[hash:16]</code>（默认为20）来指定。或者，通过指定<a href="#output-hashdigestlength"><code>output.hashDigestLength</code></a> 在全局配置长度。</p>
<p>如果将这个选项设为一个函数，函数将返回一个包含上面表格中替换信息的对象。</p>
<blockquote class="tip"><div class="tip-content"> 在使用 <a href="/plugins/extract-text-webpack-plugin"><code>ExtractTextWebpackPlugin</code></a> 时，可以用 <code>[contenthash]</code> 来获取提取文件的 hash（既不是 <code>[hash]</code> 也不是 <code>[chunkhash]</code>）。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hashdigest" id="output-hashdigest"></a>
<span class="text"><code>output.hashDigest</code></span>
<a aria-label="&lt;code&gt;output.hashDigest&lt;/code&gt;" class="icon-link" href="#output-hashdigest"></a>
</h2>
<p>在生成 hash 时使用的编码方式，默认为 <code>'hex'</code>。支持 Node.js <a href="https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding"><code>hash.digest</code></a> 的所有编码。对文件名使用 <code>'base64'</code>，可能会出现问题，因为 base64 字母表中具有 <code>/</code> 这个字符(character)。同样的，<code>'latin1'</code> 规定可以含有任何字符(character)。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hashdigestlength" id="output-hashdigestlength"></a>
<span class="text"><code>output.hashDigestLength</code></span>
<a aria-label="&lt;code&gt;output.hashDigestLength&lt;/code&gt;" class="icon-link" href="#output-hashdigestlength"></a>
</h2>
<p>散列摘要的前缀长度，默认为 <code>20</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hashfunction" id="output-hashfunction"></a>
<span class="text"><code>output.hashFunction</code></span>
<a aria-label="&lt;code&gt;output.hashFunction&lt;/code&gt;" class="icon-link" href="#output-hashfunction"></a>
</h2>
<p><code>string|function</code></p>
<p>散列算法，默认为 <code>'md4'</code>。支持 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options"><code>crypto.createHash</code></a> 的所有功能。从 <code>4.0.0-alpha2</code> 开始，<code>hashFunction</code> 现在可以是一个返回自定义 hash 的构造函数。出于性能原因，你可以提供一个不加密的哈希函数(non-crypto hash function)。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hashFunction<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'metrohash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MetroHash64
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>确保 hash 函数有可访问的 <code>update</code> and <code>digest</code> 方法。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hashsalt" id="output-hashsalt"></a>
<span class="text"><code>output.hashSalt</code></span>
<a aria-label="&lt;code&gt;output.hashSalt&lt;/code&gt;" class="icon-link" href="#output-hashsalt"></a>
</h2>
<p>一个可选的加盐值，通过 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding"><code>hash.update</code></a> 来更新哈希。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hotupdatechunkfilename" id="output-hotupdatechunkfilename"></a>
<span class="text"><code>output.hotUpdateChunkFilename</code></span>
<a aria-label="&lt;code&gt;output.hotUpdateChunkFilename&lt;/code&gt;" class="icon-link" href="#output-hotupdatechunkfilename"></a>
</h2>
<p><code>string</code> <code>function</code></p>
<p>自定义热更新 chunk 的文件名。可选的值的详细信息，请查看 <a href="#output-filename"><code>output.filename</code></a> 选项。</p>
<p>占位符只能是 <code>[id]</code> 和 <code>[hash]</code>，默认值是：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hotUpdateChunkFilename<span class="token punctuation">:</span> <span class="token string">'[id].[hash].hot-update.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这里没有必要修改它。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hotupdatefunction" id="output-hotupdatefunction"></a>
<span class="text"><code>output.hotUpdateFunction</code></span>
<a aria-label="&lt;code&gt;output.hotUpdateFunction&lt;/code&gt;" class="icon-link" href="#output-hotupdatefunction"></a>
</h2>
<p><code>function</code></p>
<p>只在 <a href="/configuration/target"><code>target</code></a> 是 web 时使用，用于加载热更新(hot update)的 JSONP 函数。</p>
<p>JSONP 函数用于异步加载(async load)热更新(hot-update) chunk。</p>
<p>详细请查看 <a href="#output-jsonpfunction"><code>output.jsonpFunction</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-hotupdatemainfilename" id="output-hotupdatemainfilename"></a>
<span class="text"><code>output.hotUpdateMainFilename</code></span>
<a aria-label="&lt;code&gt;output.hotUpdateMainFilename&lt;/code&gt;" class="icon-link" href="#output-hotupdatemainfilename"></a>
</h2>
<p><code>string</code> <code>function</code></p>
<p>自定义热更新的主文件名(main filename)。可选的值的详细信息，请查看 <a href="#output-filename"><code>output.filename</code></a> 选项</p>
<p>占位符只能是 <code>[hash]</code>，默认值是：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hotUpdateMainFilename<span class="token punctuation">:</span> <span class="token string">'[hash].hot-update.json'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这里没有必要修改它。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-jsonpfunction" id="output-jsonpfunction"></a>
<span class="text"><code>output.jsonpFunction</code></span>
<a aria-label="&lt;code&gt;output.jsonpFunction&lt;/code&gt;" class="icon-link" href="#output-jsonpfunction"></a>
</h2>
<p><code>string</code></p>
<p>只在 <a href="/configuration/target"><code>target</code></a> 是 web 时使用，用于按需加载(load on-demand) chunk 的 JSONP 函数。</p>
<p>JSONP 函数用于异步加载(async load) chunk，或者拼接多个初始 chunk(SplitChunksPlugin, AggressiveSplittingPlugin)。</p>
<p>如果在同一网页中使用了多个（来自不同编译过程(compilation)的）webpack runtime，则需要修改此选项。</p>
<p>如果使用了 <a href="#output-library"><code>output.library</code></a> 选项，library 名称时自动追加的。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-library" id="output-library"></a>
<span class="text"><code>output.library</code></span>
<a aria-label="&lt;code&gt;output.library&lt;/code&gt;" class="icon-link" href="#output-library"></a>
</h2>
<p><code>string</code> 或 <code>object</code>（从 webpack 3.1.0 开始；用于 <code>libraryTarget: 'umd'</code>）</p>
<p><code>output.library</code> 的值的作用，取决于<a href="#output-librarytarget"><code>output.libraryTarget</code></a> 选项的值；完整的详细信息请查阅该章节。注意，<code>output.libraryTarget</code> 的默认选项是 <code>var</code>，所以如果使用以下配置选项：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">:</span> <span class="token string">'MyLibrary'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果生成的输出文件，是在 HTML 页面中作为一个 script 标签引入，则变量 <code>MyLibrary</code> 将与入口文件的返回值绑定。</p>
<blockquote class="warning"><div class="tip-content"> 注意，如果将<code>数组</code>作为 <code>entry</code>，那么只会暴露数组中的最后一个模块。如果将<code>对象</code>作为 <code>entry</code>，还可以使用 <code>array</code> 语法暴露（具体查看<a href="https://github.com/webpack/webpack/tree/master/examples/multi-part-library">这个示例</a> for details)）。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 有关 <code>output.library</code> 以及 <code>output.libraryTarget</code> 详细信息，请查看<a href="/guides/author-libraries">创建 library 指南</a>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-libraryexport" id="output-libraryexport"></a>
<span class="text"><code>output.libraryExport</code></span>
<a aria-label="&lt;code&gt;output.libraryExport&lt;/code&gt;" class="icon-link" href="#output-libraryexport"></a>
</h2>
<p><code>string | string[]</code></p>
<p>Configure which module or modules will be exposed via the <code>libraryTarget</code>. It is <code>undefined</code> by default, same behaviour will be applied if you set <code>libraryTarget</code> to an empty string e.g. <code>''</code> it will export the whole (namespace) object. The examples below demonstrate the effect of this config when using <code>libraryTarget: 'var'</code>.</p>
<p>The following configurations are supported:</p>
<p><code>libraryExport: 'default'</code> - The <strong>default export of your entry point</strong> will be assigned to the library target:</p>
<pre><code class="lang-javascript"><span class="token comment">// if your entry has a default export of `MyDefaultModule`</span>
<span class="token keyword">var</span> MyDefaultModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>
</code></pre>
<p><code>libraryExport: 'MyModule'</code> - The <strong>specified module</strong> will be assigned to the library target:</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> MyModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">;</span>
</code></pre>
<p><code>libraryExport: ['MyModule', 'MySubModule']</code> - The array is interpreted as a <strong>path to a module</strong> to be assigned to the library target:</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> MySubModule <span class="token operator">=</span> _entry_return_<span class="token punctuation">.</span>MyModule<span class="token punctuation">.</span>MySubModule<span class="token punctuation">;</span>
</code></pre>
<p>With the <code>libraryExport</code> configurations specified above, the resulting libraries could be utilized as such:</p>
<pre><code class="lang-javascript">MyDefaultModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MySubModule<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-librarytarget" id="output-librarytarget"></a>
<span class="text"><code>output.libraryTarget</code></span>
<a aria-label="&lt;code&gt;output.libraryTarget&lt;/code&gt;" class="icon-link" href="#output-librarytarget"></a>
</h2>
<p><code>string: 'var'</code></p>
<p>配置如何暴露 library。可以使用下面的选项中的任意一个。注意，此选项与分配给 <a href="#output-library"><code>output.library</code></a> 的值一同使用。对于下面的所有示例，都假定将 <code>output.library</code> 的值配置为 <code>MyLibrary</code>。</p>
<blockquote class="tip"><div class="tip-content"> 注意，下面的示例代码中的 <code>_entry_return_</code> 是入口起点返回的值。在 bundle 本身中，它是从入口起点、由 webpack 生成的函数的输出结果。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#暴露为一个变量" id="暴露为一个变量"></a>
<span class="text">暴露为一个变量</span>
<a aria-label="暴露为一个变量" class="icon-link" href="#暴露为一个变量"></a>
</h3>
<p>这些选项将入口起点的返回值（例如，入口起点的任何导出值），在 bundle 包所引入的位置，赋值给 output.library 提供的变量名。</p>
<p><code>libraryTarget: 'var'</code> - （默认值）当 library 加载完成，<strong>入口起点的返回值</strong>将分配给一个变量：</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在一个单独的 script……</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 当使用此选项时，将 <code>output.library</code> 设置为空，会因为没有变量导致无法赋值。 </div></blockquote><p><code>libraryTarget: 'assign'</code> - 这将产生一个隐含的全局变量，可能会潜在地重新分配到全局中已存在的值（谨慎使用）。.</p>
<pre><code class="lang-javascript">MyLibrary <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>
</code></pre>
<p>注意，如果 <code>MyLibrary</code> 在作用域中未在前面代码进行定义，则你的 library 将被设置在全局作用域内。</p>
<blockquote class="warning"><div class="tip-content"> 当使用此选项时，将 <code>output.library</code> 设置为空，将产生一个破损的输出 bundle。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#通过在对象上赋值暴露" id="通过在对象上赋值暴露"></a>
<span class="text">通过在对象上赋值暴露</span>
<a aria-label="通过在对象上赋值暴露" class="icon-link" href="#通过在对象上赋值暴露"></a>
</h3>
<p>这些选项将入口起点的返回值（例如，入口起点的任何导出值）赋值给一个特定对象的属性（此名称由 <code>output.library</code> 定义）下。</p>
<p>如果 <code>output.library</code> 未赋值为一个非空字符串，则默认行为是，将入口起点返回的所有属性都赋值给一个对象（此对象由 <code>output.libraryTarget</code> 特定），通过如下代码片段：</p>
<pre><code class="lang-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">{</span> e<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">(</span>output<span class="token punctuation">.</span>libraryTarget<span class="token punctuation">,</span> _entry_return_<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 注意，不设置 <code>output.library</code> 将导致由入口起点返回的所有属性，都会被赋值给给定的对象；这里并不会检查现有的属性名是否存在。 </div></blockquote><p><code>libraryTarget: "this"</code> - <strong>入口起点的返回值</strong>将分配给 this 的一个属性（此名称由 <code>output.library</code> 定义）下，<code>this</code> 的含义取决于你：</p>
<pre><code class="lang-javascript"><span class="token keyword">this</span><span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token comment">// 在一个单独的 script……</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 如果 this 是 window</span>
</code></pre>
<p><code>libraryTarget: 'window'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>window</code> 对象的这个属性下。</p>
<pre><code class="lang-javascript">window<span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

window<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>libraryTarget: 'global'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 <code>global</code> 对象的这个属性下。</p>
<pre><code class="lang-javascript">global<span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

global<span class="token punctuation">.</span>MyLibrary<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>libraryTarget: 'commonjs'</code> - <strong>入口起点的返回值</strong>将使用 <code>output.library</code> 中定义的值，分配给 exports 对象。这个名称也意味着，模块用于 CommonJS 环境：</p>
<pre><code class="lang-javascript">exports<span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'MyLibrary'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#模块定义系统" id="模块定义系统"></a>
<span class="text">模块定义系统</span>
<a aria-label="模块定义系统" class="icon-link" href="#模块定义系统"></a>
</h3>
<p>这些选项将导致 bundle 带有更完整的模块头部，以确保与各种模块系统的兼容性。根据 <code>output.libraryTarget</code> 选项不同，<code>output.library</code> 选项将具有不同的含义。</p>
<p><code>libraryTarget: 'commonjs2'</code> - <strong>入口起点的返回值</strong>将分配给 <code>module.exports</code> 对象。这个名称也意味着模块用于 CommonJS 环境：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> _entry_return_<span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'MyLibrary'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，<code>output.library</code> 会被省略，因此对于此特定的 <code>output.libraryTarget</code>，无需再设置 <code>output.library</code> 。</p>
<blockquote class="tip"><div class="tip-content"> 想要弄清楚 CommonJS 和 CommonJS2 之间的区别？虽然它们很相似，但二者之间存在一些微妙的差异，这通常与 webpack 上下文没有关联。（更多详细信息，请<a href="https://github.com/webpack/webpack/issues/1114">阅读此 issue</a>。） </div></blockquote><p><code>libraryTarget: 'amd'</code> - 将你的 library 暴露为 AMD 模块。</p>
<p>AMD 模块要求入口 chunk（例如使用 <code>&lt;script&gt;</code> 标签加载的第一个脚本）通过特定的属性定义，例如 <code>define</code> 和 <code>require</code>，它们通常由 RequireJS 或任何兼容的模块加载器提供（例如 almond）。否则，直接加载生成的 AMD bundle 将导致报错，如 <code>define is not defined</code>。</p>
<p>所以，使用以下配置……</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">:</span> <span class="token string">'MyLibrary'</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'amd'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>生成的 output 将会使用 "MyLibrary" 作为模块名定义，即</p>
<pre><code class="lang-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'MyLibrary'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>可以在 script 标签中，将 bundle 作为一个模块整体引入，并且可以像这样调用 bundle：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>MyLibrary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 library 做一些事……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>如果 <code>output.library</code> 未定义，将会生成以下内容。</p>
<pre><code class="lang-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span> <span class="token comment">// 此模块返回值，是入口 chunk 返回的值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>如果直接加载 <code>&lt;script&gt;</code> 标签，此 bundle 无法按预期运行，或者根本无法正常运行（在 almond loader 中）。只能通过文件的实际路径，在 RequireJS 兼容的异步模块加载器中运行，因此在这种情况下，如果这些设置直接暴露在服务器上，那么 <code>output.path</code> 和 <code>output.filename</code> 对于这个特定的设置可能变得很重要。</p>
<p><code>libraryTarget: 'amd-require'</code> - This packages your output with an immediately-executed AMD <code>require(dependencies, factory)</code> wrapper.</p>
<p>The <code>'amd-require'</code> target allows for the use of AMD dependencies without needing a separate later invocation. As with the <code>'amd'</code> target, this depends on the appropriate <a href="https://github.com/amdjs/amdjs-api/blob/master/require.md"><code>require</code> function</a> being available in the environment in which the webpack output is loaded.</p>
<p>With this target, the library name is ignored.</p>
<p><code>libraryTarget: 'umd'</code> - 将你的 library 暴露为所有的模块定义下都可运行的方式。它将在 CommonJS, AMD 环境下运行，或将模块导出到 global 下的变量。了解更多请查看 <a href="https://github.com/umdjs/umd">UMD 仓库</a>。</p>
<p>在这个例子中，你需要 <code>library</code> 属性来命名你的模块：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">:</span> <span class="token string">'MyLibrary'</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'umd'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>最终输出如下：</p>
<pre><code class="lang-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    exports<span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span>
    root<span class="token punctuation">[</span><span class="token string">'MyLibrary'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> self <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span> <span class="token comment">// 此模块返回值，是入口 chunk 返回的值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，省略 <code>library</code> 会导致将入口起点返回的所有属性，直接赋值给 root 对象，就像<a href="#expose-via-object-assignment">对象分配章节</a>。例如：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'umd'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>输出结果如下：</p>
<pre><code class="lang-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">webpackUniversalModuleDefinition</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> factory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> module <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> a<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> exports <span class="token punctuation">:</span> root<span class="token punctuation">)</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> a<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> self <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> self <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _entry_return_<span class="token punctuation">;</span> <span class="token comment">// 此模块返回值，是入口 chunk 返回的值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>从 webpack 3.1.0 开始，你可以将 <code>library</code> 指定为一个对象，用于给每个 target 起不同的名称：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">:</span> <span class="token string">'MyLibrary'</span><span class="token punctuation">,</span>
      amd<span class="token punctuation">:</span> <span class="token string">'my-library'</span><span class="token punctuation">,</span>
      commonjs<span class="token punctuation">:</span> <span class="token string">'my-common-library'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    libraryTarget<span class="token punctuation">:</span> <span class="token string">'umd'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>模块验证 library。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#其他-targets" id="其他-targets"></a>
<span class="text">其他 Targets</span>
<a aria-label="其他 Targets" class="icon-link" href="#其他-targets"></a>
</h3>
<p><code>libraryTarget: 'jsonp'</code> - 这将把入口起点的返回值，包裹到一个 jsonp 包装容器中</p>
<pre><code class="lang-javascript"><span class="token function">MyLibrary</span><span class="token punctuation">(</span>_entry_return_<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>你的 library 的依赖将由 <a href="/configuration/externals/"><code>externals</code></a> 配置定义。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-path" id="output-path"></a>
<span class="text"><code>output.path</code></span>
<a aria-label="&lt;code&gt;output.path&lt;/code&gt;" class="icon-link" href="#output-path"></a>
</h2>
<p><code>string</code></p>
<p>output 目录对应一个<strong>绝对路径</strong>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist/assets'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，<code>[hash]</code> 在参数中被替换为编译过程(compilation)的 hash。详细信息请查看<a href="/guides/caching">指南 - 缓存</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-pathinfo" id="output-pathinfo"></a>
<span class="text"><code>output.pathinfo</code></span>
<a aria-label="&lt;code&gt;output.pathinfo&lt;/code&gt;" class="icon-link" href="#output-pathinfo"></a>
</h2>
<p><code>boolean</code></p>
<p>告知 webpack 在 bundle 中引入「所包含模块信息」的相关注释。此选项在 <code>development</code> <a href="/concepts/mode/">模式</a>时的默认值是 <code>true</code>，而在 <code>production</code> <a href="/concepts/mode/">模式</a>时的默认值是 <code>false</code>。</p>
<blockquote class="warning"><div class="tip-content"> 对于在开发环境(development)下阅读生成代码时，虽然通过这些注释可以提供非常有用的数据信息，但在生产环境(production)下，<strong>不应该</strong>使用。 </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pathinfo<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，这些注释也会被添加至经过 tree shaking 后生成的 bundle 中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-publicpath" id="output-publicpath"></a>
<span class="text"><code>output.publicPath</code></span>
<a aria-label="&lt;code&gt;output.publicPath&lt;/code&gt;" class="icon-link" href="#output-publicpath"></a>
</h2>
<p><code>string: ''</code> <code>function</code></p>
<p>对于按需加载(on-demand-load)或加载外部资源(external resources)（如图片、文件等）来说，output.publicPath 是很重要的选项。如果指定了一个错误的值，则在加载这些资源时会收到 404 错误。</p>
<p>此选项指定在浏览器中所引用的「此输出目录对应的<strong>公开 URL</strong>」。相对 URL(relative URL) 会被相对于 HTML 页面（或 <code>&lt;base&gt;</code> 标签）解析。相对于服务的 URL(Server-relative URL)，相对于协议的 URL(protocol-relative URL) 或绝对 URL(absolute URL) 也可是可能用到的，或者有时必须用到，例如：当将资源托管到 CDN 时。</p>
<p>该选项的值是以 runtime(运行时) 或 loader(载入时) 所创建的每个 URL 为前缀。因此，在多数情况下，<strong>此选项的值都会以 <code>/</code> 结束</strong>。</p>
<p>简单规则如下：<a href="#output-path"><code>output.path</code></a> 中的 URL 以 HTML 页面为基准。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public/assets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'https://cdn.example.com/assets/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>对于这个配置：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'/assets/'</span><span class="token punctuation">,</span>
    chunkFilename<span class="token punctuation">:</span> <span class="token string">'[id].chunk.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>对于一个 chunk 请求，看起来像这样 <code>/assets/4.chunk.js</code>。</p>
<p>对于一个输出 HTML 的 loader 可能会像这样输出：</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/assets/spinner.gif<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
<p>或者在加载 CSS 的一个图片时：</p>
<pre><code class="lang-css"><span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(/assets/spinner.gif)</span><span class="token punctuation">;</span>
</code></pre>
<p>webpack-dev-server 也会默认从 <code>publicPath</code> 为基准，使用它来决定在哪个目录下启用服务，来访问 webpack 输出的文件。</p>
<p>注意，参数中的 <code>[hash]</code> 将会被替换为编译过程(compilation) 的 hash。详细信息请查看<a href="/guides/caching">指南 - 缓存</a>。</p>
<p>示例：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// One of the below</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'https://cdn.example.com/assets/'</span><span class="token punctuation">,</span> <span class="token comment">// CDN（总是 HTTPS 协议）</span>
    publicPath<span class="token punctuation">:</span> '<span class="token comment">//cdn.example.com/assets/', // CDN（协议相同）</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'/assets/'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于服务(server-relative)</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'assets/'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'../assets/'</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 相对于 HTML 页面（目录相同）</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>在编译时(compile time)无法知道输出文件的 <code>publicPath</code> 的情况下，可以留空，然后在入口文件(entry file)处使用<a href="https://stackoverflow.com/questions/12934929/what-are-free-variables">自由变量(free variable)</a> <code>__webpack_public_path__</code>，以便在运行时(runtime)进行动态设置。</p>
<pre><code class="lang-javascript">__webpack_public_path__ <span class="token operator">=</span> myRuntimePublicPath<span class="token punctuation">;</span>

<span class="token comment">// 应用程序入口的其他部分</span>
</code></pre>
<p>有关 <code>__webpack_public_path__</code> 的更多信息，请查看<a href="https://github.com/webpack/webpack/issues/2776#issuecomment-233208623">此讨论</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-sourcemapfilename" id="output-sourcemapfilename"></a>
<span class="text"><code>output.sourceMapFilename</code></span>
<a aria-label="&lt;code&gt;output.sourceMapFilename&lt;/code&gt;" class="icon-link" href="#output-sourcemapfilename"></a>
</h2>
<p><code>string</code></p>
<p> 此选项会向硬盘写入一个输出文件，只在 <a href="/configuration/devtool"><code>devtool</code></a> 启用了 SourceMap 选项时才使用。</p>
<p>配置 source map 的命名方式。默认使用 <code>'[file].map'</code>。</p>
<p>可以使用 <a href="#output-filename">#output-filename</a> 中的 <code>[name]</code>, <code>[id]</code>, <code>[hash]</code> 和 <code>[chunkhash]</code> 替换符号。除此之外，还可以使用以下替换符号。<code>[file]</code> 占位符会被替换为原始文件的文件名。我们建议<strong>只使用 <code>[file]</code> 占位符</strong>，因为其他占位符在非 chunk 文件(non-chunk files)生成的 SourceMap 时不起作用。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">模板</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [file]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块文件名称
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        模板
    </div>
<div class="table-td-content">
        [filebase]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        模块 <a href="https://nodejs.org/api/path.html#path_path_basename_path_ext">basename</a>
</div>
</div></div>
</div>
</div>
</div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-sourceprefix" id="output-sourceprefix"></a>
<span class="text"><code>output.sourcePrefix</code></span>
<a aria-label="&lt;code&gt;output.sourcePrefix&lt;/code&gt;" class="icon-link" href="#output-sourceprefix"></a>
</h2>
<p><code>string</code></p>
<p>修改输出 bundle 中每行的前缀。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sourcePrefix<span class="token punctuation">:</span> <span class="token string">'\t'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，默认情况下使用空字符串。使用一些缩进会看起来更美观，但是可能导致多行字符串中的问题。</p>
<p>这里没有必要修改它。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-strictmoduleexceptionhandling" id="output-strictmoduleexceptionhandling"></a>
<span class="text"><code>output.strictModuleExceptionHandling</code></span>
<a aria-label="&lt;code&gt;output.strictModuleExceptionHandling&lt;/code&gt;" class="icon-link" href="#output-strictmoduleexceptionhandling"></a>
</h2>
<p><code>boolean</code></p>
<p>如果一个模块是在 <code>require</code> 时抛出异常，告诉 webpack 从模块实例缓存(<code>require.cache</code>)中删除这个模块。</p>
<p>出于性能原因，默认为 <code>false</code>。</p>
<p>当设置为 <code>false</code> 时，该模块不会从缓存中删除，这将造成仅在第一次 <code>require</code> 调用时抛出异常（会导致与 node.js 不兼容）。</p>
<p>例如，设想一下 <code>module.js</code>：</p>
<pre><code class="lang-javascript"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'error'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>将 <code>strictModuleExceptionHandling</code> 设置为 <code>false</code>，只有第一个 <code>require</code> 抛出异常：</p>
<pre><code class="lang-javascript"><span class="token comment">// with strictModuleExceptionHandling = false</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 抛出</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 不抛出</span>
</code></pre>
<p>相反，将 <code>strictModuleExceptionHandling</code> 设置为 <code>true</code>，这个模块所有的 <code>require</code> 都抛出异常：</p>
<pre><code class="lang-javascript"><span class="token comment">// with strictModuleExceptionHandling = true</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 抛出</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;- 仍然抛出</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output-umdnameddefine" id="output-umdnameddefine"></a>
<span class="text"><code>output.umdNamedDefine</code></span>
<a aria-label="&lt;code&gt;output.umdNamedDefine&lt;/code&gt;" class="icon-link" href="#output-umdnameddefine"></a>
</h2>
<p><code>boolean</code></p>
<p>当使用了 <code>libraryTarget: "umd"</code>，设置：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    umdNamedDefine<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>会对 UMD 的构建过程中的 AMD 模块进行命名。否则就使用匿名的 <code>define</code>。</p>
</div>
<br/><h1>模块(module)</h1>
<div><p>这些选项决定了如何处理项目中的<a href="/concepts/modules">不同类型的模块</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#module-noparse" id="module-noparse"></a>
<span class="text"><code>module.noParse</code></span>
<a aria-label="&lt;code&gt;module.noParse&lt;/code&gt;" class="icon-link" href="#module-noparse"></a>
</h2>
<p><code>RegExp</code> <code>[RegExp]</code> <code>function(resource)</code> <code>string</code> <code>[string]</code></p>
<p>防止 webpack 解析那些任何与给定正则表达式相匹配的文件。忽略的文件中<strong>不应该含有</strong> <code>import</code>, <code>require</code>, <code>define</code> 的调用，或任何其他导入机制。忽略大型的 library 可以提高构建性能。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    noParse<span class="token punctuation">:</span> <span class="token regex">/jquery|lodash/</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    noParse<span class="token punctuation">:</span> <span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token regex">/jquery|lodash/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#module-rules" id="module-rules"></a>
<span class="text"><code>module.rules</code></span>
<a aria-label="&lt;code&gt;module.rules&lt;/code&gt;" class="icon-link" href="#module-rules"></a>
</h2>
<p><code>[Rule]</code></p>
<p>创建模块时，匹配请求的<a href="#rule">规则</a>数组。这些规则能够修改模块的创建方式。这些规则能够对模块(module)应用 loader，或者修改解析器(parser)。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule" id="rule"></a>
<span class="text">Rule</span>
<a aria-label="Rule" class="icon-link" href="#rule"></a>
</h2>
<p><code>object</code></p>
<p>每个规则可以分为三部分 - 条件(condition)，结果(result)和嵌套规则(nested rule)。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#rule-条件" id="rule-条件"></a>
<span class="text">Rule 条件</span>
<a aria-label="Rule 条件" class="icon-link" href="#rule-条件"></a>
</h3>
<p>条件有两种输入值：</p>
<ol start="undefined">
<li><p>resource：请求文件的绝对路径。它已经根据 <a href="/configuration/resolve"><code>resolve</code> 规则</a>解析。</p>
</li>
<li><p>issuer: 被请求资源(requested the resource)的模块文件的绝对路径。是导入时的位置。</p>
</li>
</ol>
<p><strong>例如:</strong> 从 <code>app.js</code> <code>导入 './style.css'</code>，resource 是 <code>/path/to/style.css</code>. issuer 是 <code>/path/to/app.js</code>。</p>
<p>在规则中，属性 <a href="#rule-test"><code>test</code></a>, <a href="#rule-include"><code>include</code></a>, <a href="#rule-exclude"><code>exclude</code></a> 和 <a href="#rule-resource"><code>resource</code></a> 对 resource 匹配，并且属性 <a href="#rule-issuer"><code>issuer</code></a> 对 issuer 匹配。</p>
<p>当使用多个条件时，所有条件都匹配。</p>
<blockquote class="warning"><div class="tip-content"> 小心！resource 是文件的_解析<em>路径，这意味着符号链接的资源是真正的路径，</em>而不是_符号链接位置。在使用工具来符号链接包的时候（如 <code>npm link</code>）比较好记，像 <code>/node_modules/</code> 等常见条件可能会不小心错过符号链接的文件。注意，可以通过 <a href="/configuration/resolve#resolve-symlinks"><code>resolve.symlinks</code></a> 关闭符号链接解析（以便将资源解析为符号链接路径）。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#rule-结果" id="rule-结果"></a>
<span class="text">Rule 结果</span>
<a aria-label="Rule 结果" class="icon-link" href="#rule-结果"></a>
</h3>
<p>规则结果只在规则条件匹配时使用。</p>
<p>规则有两种输入值：</p>
<ol start="undefined">
<li>应用的 loader：应用在 resource 上的 loader 数组。</li>
<li>Parser 选项：用于为模块创建解析器的选项对象。</li>
</ol>
<p>这些属性会影响 loader：<a href="#rule-loader"><code>loader</code></a>, <a href="#rule-options-rule-query"><code>options</code></a>, <a href="#rule-use"><code>use</code></a>。</p>
<p>也兼容这些属性：<a href="#rule-options-rule-query"><code>query</code></a>, <a href="#rule-loaders"><code>loaders</code></a>。</p>
<p><a href="#rule-enforce"><code>enforce</code></a> 属性会影响 loader 种类。不论是普通的，前置的，后置的 loader。</p>
<p><a href="#rule-parser"><code>parser</code></a> 属性会影响 parser 选项。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#嵌套的-rule" id="嵌套的-rule"></a>
<span class="text">嵌套的 Rule</span>
<a aria-label="嵌套的 Rule" class="icon-link" href="#嵌套的-rule"></a>
</h2>
<p>可以使用属性 <a href="#rule-rules"><code>rules</code></a> 和 <a href="#rule-oneof"><code>oneOf</code></a> 指定嵌套规则。</p>
<p>这些规则用于在规则条件(rule condition)匹配时进行取值。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-enforce" id="rule-enforce"></a>
<span class="text"><code>Rule.enforce</code></span>
<a aria-label="&lt;code&gt;Rule.enforce&lt;/code&gt;" class="icon-link" href="#rule-enforce"></a>
</h2>
<p><code>string</code></p>
<p>可能的值有：<code>"pre" | "post"</code></p>
<p>指定 loader 种类。没有值表示是普通 loader。</p>
<p>还有一个额外的种类"行内 loader"，loader 被应用在 import/require 行内。</p>
<p>所有一个接一个地进入的 loader，都有两个阶段：</p>
<ol start="undefined">
<li><strong>pitching</strong> 阶段：loader 上的 pitch 方法，按照 <code>后置(post)、行内(normal)、普通(inline)、前置(pre)</code> 的顺序调用。更多详细信息，请查看 <a href="/api/loaders/#pitching-loader"> 越过 loader(pitching loader)</a>。</li>
<li><strong>normal</strong>阶段：loader 上的 常规方法，按照 <code>前置(pre)、行内(normal)、普通(inline)、后置(post)</code> 的顺序调用。模块源码的转换，发生在这个阶段。</li>
</ol>
<p>所有普通 loader 可以通过在请求中加上 <code>!</code> 前缀来忽略（覆盖）。</p>
<p>所有普通和前置 loader 可以通过在请求中加上 <code>-!</code> 前缀来忽略（覆盖）。</p>
<p>所有普通，后置和前置 loader 可以通过在请求中加上 <code>!!</code> 前缀来忽略（覆盖）。</p>
<p>不应该使用行内 loader 和 <code>!</code> 前缀，因为它们是非标准的。它们可在由 loader 生成的代码中使用。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-exclude" id="rule-exclude"></a>
<span class="text"><code>Rule.exclude</code></span>
<a aria-label="&lt;code&gt;Rule.exclude&lt;/code&gt;" class="icon-link" href="#rule-exclude"></a>
</h2>
<p><code>Rule.exclude</code> 是 <code>Rule.resource.exclude</code> 的简写。如果你提供了 <code>Rule.exclude</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#rule-resource"><code>Rule.resource</code></a> 和 <a href="#条件"><code>Condition.exclude</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-include" id="rule-include"></a>
<span class="text"><code>Rule.include</code></span>
<a aria-label="&lt;code&gt;Rule.include&lt;/code&gt;" class="icon-link" href="#rule-include"></a>
</h2>
<p><code>Rule.include</code> 是 <code>Rule.resource.include</code> 的简写。如果你提供了 <code>Rule.include</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#rule-resource"><code>Rule.resource</code></a> 和 <a href="#条件"><code>Condition.include</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-issuer" id="rule-issuer"></a>
<span class="text"><code>Rule.issuer</code></span>
<a aria-label="&lt;code&gt;Rule.issuer&lt;/code&gt;" class="icon-link" href="#rule-issuer"></a>
</h2>
<p>一个<a href="#条件"><code>条件</code></a>，用来与被发布的 request 对应的模块项匹配。在以下示例中，a.js request 的<code>发布者(issuer)</code>是 index.js 文件的路径。</p>
<p><strong>index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> A <span class="token keyword">from</span> <span class="token string">'./a.js'</span><span class="token punctuation">;</span>
</code></pre>
<p>这个选项可以用来将 loader 应用到一个特定模块或一组模块的依赖中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-loader" id="rule-loader"></a>
<span class="text"><code>Rule.loader</code></span>
<a aria-label="&lt;code&gt;Rule.loader&lt;/code&gt;" class="icon-link" href="#rule-loader"></a>
</h2>
<p><code>Rule.loader</code> 是 <code>Rule.use: [ { loader } ]</code> 的简写。详细请查看 <a href="#rule-use"><code>Rule.use</code></a> 和 <a href="#useentry"><code>UseEntry.loader</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-loaders" id="rule-loaders"></a>
<span class="text"><code>Rule.loaders</code></span>
<a aria-label="&lt;code&gt;Rule.loaders&lt;/code&gt;" class="icon-link" href="#rule-loaders"></a>
</h2>
<blockquote class="warning"><div class="tip-content"> 由于需要支持 <code>Rule.use</code>，此选项<strong>已废弃</strong>。 </div></blockquote><p><code>Rule.loaders</code> 是 <code>Rule.use</code> 的别名。详细请查看 <a href="#rule-use"><code>Rule.use</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-oneof" id="rule-oneof"></a>
<span class="text"><code>Rule.oneOf</code></span>
<a aria-label="&lt;code&gt;Rule.oneOf&lt;/code&gt;" class="icon-link" href="#rule-oneof"></a>
</h2>
<p><a href="#rule"><code>规则</code></a>数组，当规则匹配时，只使用第一个匹配规则。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        oneOf<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token punctuation">:</span> <span class="token regex">/inline/</span><span class="token punctuation">,</span> <span class="token comment">// foo.css?inline</span>
            use<span class="token punctuation">:</span> <span class="token string">'url-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            resourceQuery<span class="token punctuation">:</span> <span class="token regex">/external/</span><span class="token punctuation">,</span> <span class="token comment">// foo.css?external</span>
            use<span class="token punctuation">:</span> <span class="token string">'file-loader'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-options-rule-query" id="rule-options-rule-query"></a>
<span class="text"><code>Rule.options / Rule.query</code></span>
<a aria-label="&lt;code&gt;Rule.options / Rule.query&lt;/code&gt;" class="icon-link" href="#rule-options-rule-query"></a>
</h2>
<p><code>Rule.options</code> 和 <code>Rule.query</code> 是 <code>Rule.use: [ { options } ]</code> 的简写。详细请查看 <a href="#rule-use"><code>Rule.use</code></a> 和 <a href="#useentry"><code>UseEntry.options</code></a>。</p>
<blockquote class="warning"><div class="tip-content"> 由于需要支持 <code>Rule.options</code> 和 <code>UseEntry.options</code>，<code>Rule.use</code>，<code>Rule.query</code> 已废弃。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-parser" id="rule-parser"></a>
<span class="text"><code>Rule.parser</code></span>
<a aria-label="&lt;code&gt;Rule.parser&lt;/code&gt;" class="icon-link" href="#rule-parser"></a>
</h2>
<p>解析选项对象。所有应用的解析选项都将合并。</p>
<p>解析器(parser)可以查阅这些选项，并相应地禁用或重新配置。大多数默认插件，会如下解释值：</p>
<ul>
<li>将选项设置为 <code>false</code>，将禁用解析器。</li>
<li>将选项设置为 <code>true</code>，或不修改将其保留为 <code>undefined</code>，可以启用解析器。</li>
</ul>
<p>然而，一些解析器(parser)插件可能不光只接收一个布尔值。例如，内部的 <code>NodeStuffPlugin</code> 差距，可以接收一个对象，而不是 <code>true</code>，来为特定的规则添加额外的选项。</p>
<p><strong>示例</strong>（默认的插件解析器选项）：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        parser<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          amd<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 AMD</span>
          commonjs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 CommonJS</span>
          system<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 SystemJS</span>
          harmony<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 ES2015 Harmony import/export</span>
          requireInclude<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.include</span>
          requireEnsure<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.ensure</span>
          requireContext<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 require.context</span>
          browserify<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用特殊处理的 browserify bundle</span>
          requireJs<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 requirejs.*</span>
          node<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 禁用 __dirname, __filename, module, require.extensions, require.main 等。</span>
          node<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span> <span class="token comment">// 在模块级别(module level)上重新配置 <a class="code-link" href="/configuration/node">node</a> 层(layer)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-resource" id="rule-resource"></a>
<span class="text"><code>Rule.resource</code></span>
<a aria-label="&lt;code&gt;Rule.resource&lt;/code&gt;" class="icon-link" href="#rule-resource"></a>
</h2>
<p><a href="#条件"><code>条件</code></a>会匹配 resource。既可以提供 <code>Rule.resource</code> 选项，也可以使用快捷选项 <code>Rule.test</code>，<code>Rule.exclude</code> 和 <code>Rule.include</code>。在 <a href="#rule-conditions"><code>Rule</code> 条件</a> 中查看详细。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-resourcequery" id="rule-resourcequery"></a>
<span class="text"><code>Rule.resourceQuery</code></span>
<a aria-label="&lt;code&gt;Rule.resourceQuery&lt;/code&gt;" class="icon-link" href="#rule-resourcequery"></a>
</h2>
<p>A <a href="#条件"><code>Condition</code></a> matched with the resource query. This option is used to test against the query section of a request string (i.e. from the question mark onwards). If you were to <code>import Foo from './foo.css?inline'</code>, the following condition would match:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        resourceQuery<span class="token punctuation">:</span> <span class="token regex">/inline/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'url-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-rules" id="rule-rules"></a>
<span class="text"><code>Rule.rules</code></span>
<a aria-label="&lt;code&gt;Rule.rules&lt;/code&gt;" class="icon-link" href="#rule-rules"></a>
</h2>
<p><a href="#rule"><code>规则</code></a>数组，当规则匹配时使用。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-sideeffects" id="rule-sideeffects"></a>
<span class="text"><code>Rule.sideEffects</code></span>
<a aria-label="&lt;code&gt;Rule.sideEffects&lt;/code&gt;" class="icon-link" href="#rule-sideeffects"></a>
</h2>
<p><code>bool</code></p>
<p>标示出模块的哪些部分包含外部作用(side effect)。更多详细信息，请查看 <a href="/guides/tree-shaking/#mark-the-file-as-side-effect-free">tree shaking</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-test" id="rule-test"></a>
<span class="text"><code>Rule.test</code></span>
<a aria-label="&lt;code&gt;Rule.test&lt;/code&gt;" class="icon-link" href="#rule-test"></a>
</h2>
<p><code>Rule.test</code> 是 <code>Rule.resource.test</code> 的简写。如果你提供了一个 <code>Rule.test</code> 选项，就不能再提供 <code>Rule.resource</code>。详细请查看 <a href="#rule-resource"><code>Rule.resource</code></a> 和 <a href="#条件"><code>Condition.test</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-type" id="rule-type"></a>
<span class="text"><code>Rule.type</code></span>
<a aria-label="&lt;code&gt;Rule.type&lt;/code&gt;" class="icon-link" href="#rule-type"></a>
</h2>
<p><code>string</code></p>
<p>Possible values: <code>'javascript/auto' | 'javascript/dynamic' | 'javascript/esm' | 'json' | 'webassembly/experimental'</code></p>
<p><code>Rule.type</code> sets the type for a matching module. This prevents defaultRules and their default importing behaviors from occurring. For example, if you want to load a <code>.json</code> file through a custom loader, you'd need to set the <code>type</code> to <code>javascript/auto</code> to bypass webpack's built-in json importing. (See <a href="https://github.com/webpack/webpack/releases/tag/v4.0.0">v4.0 changelog</a> for more details)</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token comment">//...</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.json$/</span><span class="token punctuation">,</span>
        type<span class="token punctuation">:</span> <span class="token string">'javascript/auto'</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'custom-json-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#rule-use" id="rule-use"></a>
<span class="text"><code>Rule.use</code></span>
<a aria-label="&lt;code&gt;Rule.use&lt;/code&gt;" class="icon-link" href="#rule-use"></a>
</h2>
<p><code>[UseEntry]</code> <code>function(info)</code></p>
<p><strong><code>[UseEntry]</code></strong></p>
<p><code>Rule.use</code> 可以是一个应用于模块的 <a href="#useentry">UseEntries</a> 数组。每个入口(entry)指定使用一个 loader。</p>
<p>传递字符串（如：<code>use: [ 'style-loader' ]</code>）是 loader 属性的简写方式（如：<code>use: [ { loader: 'style-loader'} ]</code>）。</p>
<p>Loaders can be chained by passing multiple loaders, which will be applied from right to left (last to first configured).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token punctuation">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              noIeCompat<span class="token punctuation">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong><code>function(info)</code></strong></p>
<p><code>Rule.use</code> can also be a function which receives the object argument describing the module being loaded, and must return an array of <code>UseEntry</code> items.</p>
<p>The <code>info</code> object parameter has the following fields:</p>
<ul>
<li><code>compiler</code>: The current webpack compiler (can be undefined)</li>
<li><code>issuer</code>: The path to the module that is importing the module being loaded</li>
<li><code>realResource</code>: Always the path to the module being loaded</li>
<li><code>resource</code>: The path to the module being loaded, it is usually equal to <code>realResource</code> except when the resource name is overwritten via <code>!=!</code> in request string</li>
</ul>
<p>The same shortcut as an array can be used for the return value (i.e. <code>use: [ 'style-loader' ]</code>).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'custom-svg-loader'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'svgo-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                cleanupIDs<span class="token punctuation">:</span> <span class="token punctuation">{</span> prefix<span class="token punctuation">:</span> <span class="token function">basename</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>详细信息请查看 <a href="#useentry">UseEntry</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#条件" id="条件"></a>
<span class="text"><code>条件</code></span>
<a aria-label="&lt;code&gt;条件&lt;/code&gt;" class="icon-link" href="#条件"></a>
</h2>
<p>条件可以是这些之一：</p>
<ul>
<li>字符串：匹配输入必须以提供的字符串开始。是的。目录绝对路径或文件绝对路径。</li>
<li>正则表达式：test 输入值。</li>
<li>函数：调用输入的函数，必须返回一个真值(truthy value)以匹配。</li>
<li>条件数组：至少一个匹配条件。</li>
<li>对象：匹配所有属性。每个属性都有一个定义行为。</li>
</ul>
<p><code>{ test: Condition }</code>：匹配特定条件。一般是提供一个正则表达式或正则表达式的数组，但这不是强制的。</p>
<p><code>{ include: Condition }</code>：匹配特定条件。一般是提供一个字符串或者字符串数组，但这不是强制的。</p>
<p><code>{ exclude: Condition }</code>：排除特定条件。一般是提供一个字符串或字符串数组，但这不是强制的。</p>
<p><code>{ and: [Condition] }</code>：必须匹配数组中的所有条件</p>
<p><code>{ or: [Condition] }</code>：匹配数组中任何一个条件</p>
<p><code>{ not: [Condition] }</code>：必须排除这个条件</p>
<p><strong>示例：</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'app/styles'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
          path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'vendor/styles'</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#useentry" id="useentry"></a>
<span class="text"><code>UseEntry</code></span>
<a aria-label="&lt;code&gt;UseEntry&lt;/code&gt;" class="icon-link" href="#useentry"></a>
</h2>
<p><code>object</code> <code>function(info)</code></p>
<p><strong><code>object</code></strong></p>
<p>必须有一个 <code>loader</code> 属性是字符串。它使用 loader 解析选项（<a href="/configuration/resolve#resolveloader">resolveLoader</a>），相对于配置中的 <a href="/configuration/entry-context#context"><code>context</code></a> 来解析。</p>
<p>可以有一个 <code>options</code> 属性为字符串或对象。值可以传递到 loader 中，将其理解为 loader 选项。</p>
<p>由于兼容性原因，也可能有 <code>query</code> 属性，它是 <code>options</code> 属性的别名。使用 <code>options</code> 属性替代。</p>
<p>注意，webpack 需要生成资源和所有 loader 的独立模块标识，包括选项。它尝试对选项对象使用 <code>JSON.stringify</code>。这在 99.9% 的情况下是可以的，但是如果将相同的 loader 应用于相同资源的不同选项，并且选项具有一些带字符的值，则可能不是唯一的。</p>
<p>如果选项对象不被字符化（例如循环 JSON），它也会中断。因此，你可以在选项对象使用 <code>ident</code> 属性，作为唯一标识符。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong><code>function(info)</code></strong></p>
<p>A <code>UseEntry</code> can also be a function which receives the object argument describing the module being loaded, and must return an options object. This can be used to vary the loader options on a per-module basis.</p>
<p>The <code>info</code> object parameter has the following fields:</p>
<ul>
<li><code>compiler</code>: The current webpack compiler (can be undefined)</li>
<li><code>issuer</code>: The path to the module that is importing the module being loaded</li>
<li><code>realResource</code>: Always the path to the module being loaded</li>
<li><code>resource</code>: The path to the module being loaded, it is usually equal to <code>realResource</code> except when the resource name is overwritten via <code>!=!</code> in request string</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          outputPath<span class="token punctuation">:</span> <span class="token string">'svgs'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'svgo-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            cleanupIDs<span class="token punctuation">:</span> <span class="token punctuation">{</span> prefix<span class="token punctuation">:</span> <span class="token function">basename</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模块上下文-module-context-" id="模块上下文-module-context-"></a>
<span class="text">模块上下文(module context)</span>
<a aria-label="模块上下文(module context)" class="icon-link" href="#模块上下文-module-context-"></a>
</h2>
<blockquote>
<p>避免使用这些选项，因为它们<strong>已废弃</strong>，并将很快删除。</p>
</blockquote>
<p>这些选项描述了当遇到动态依赖时，创建上下文的默认设置。</p>
<p>例如，<code>未知的(unknown)</code> 动态依赖：<code>require</code>。</p>
<p>例如，<code>表达式(expr)</code> 动态依赖：<code>require(expr)</code>。</p>
<p>例如，<code>包裹的(wrapped)</code> 动态依赖：<code>require('./templates/' + expr)</code>。</p>
<p>以下是其<a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js">默认值</a>的可用选项</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    exprContextCritical<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    exprContextRegExp<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    exprContextRequest<span class="token punctuation">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
    unknownContextCritical<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unknownContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    unknownContextRegExp<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    unknownContextRequest<span class="token punctuation">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
    wrappedContextCritical<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    wrappedContextRecursive<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    wrappedContextRegExp<span class="token punctuation">:</span> <span class="token regex">/.*/</span><span class="token punctuation">,</span>
    strictExportPresence<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token comment">// since webpack 2.3.0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 你可以使用 <code>ContextReplacementPlugin</code> 来修改这些单个依赖的值。这也会删除警告。 </div></blockquote><p>几个用例：</p>
<ul>
<li>动态依赖的警告：<code>wrappedContextCritical: true</code>。</li>
<li><code>require(expr)</code> 应该包含整个目录：<code>exprContextRegExp: /^\.\//</code></li>
<li><code>require("./templates/" + expr)</code> 不应该包含默认子目录：<code>wrappedContextRecursive: false</code></li>
<li><code>strictExportPresence</code> makes missing exports an error instead of warning</li>
</ul>
</div>
<br/><h1>解析(resolve)</h1>
<div><p>这些选项能设置模块如何被解析。webpack 提供合理的默认值，但是还是可能会修改一些解析的细节。关于 resolver 具体如何工作的更多解释说明，请查看<a href="/concepts/module-resolution">模块解析</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolve" id="resolve"></a>
<span class="text"><code>resolve</code></span>
<a aria-label="&lt;code&gt;resolve&lt;/code&gt;" class="icon-link" href="#resolve"></a>
</h2>
<p><code>object</code></p>
<p>配置模块如何解析。例如，当在 ES2015 中调用 <code>import 'lodash'</code>，<code>resolve</code> 选项能够对 webpack 查找 <code>'lodash'</code> 的方式去做修改（查看<a href="#resolve-modules"><code>模块</code></a>）。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// configuration options</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-alias" id="resolve-alias"></a>
<span class="text"><code>resolve.alias</code></span>
<a aria-label="&lt;code&gt;resolve.alias&lt;/code&gt;" class="icon-link" href="#resolve-alias"></a>
</h3>
<p><code>object</code></p>
<p>创建 <code>import</code> 或 <code>require</code> 的别名，来确保模块引入变得更简单。例如，一些位于 <code>src/</code> 文件夹下的常用模块：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      Utilities<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/utilities/'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      Templates<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/templates/'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>现在，替换「在导入时使用相对路径」这种方式，就像这样：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Utility <span class="token keyword">from</span> <span class="token string">'../../utilities/utility'</span><span class="token punctuation">;</span>
</code></pre>
<p>你可以这样使用别名：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Utility <span class="token keyword">from</span> <span class="token string">'Utilities/utility'</span><span class="token punctuation">;</span>
</code></pre>
<p>也可以在给定对象的键后的末尾添加 <code>$</code>，以表示精准匹配：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    alias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      xyz$<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'path/to/file.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这将产生以下结果：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> Test1 <span class="token keyword">from</span> <span class="token string">'xyz'</span><span class="token punctuation">;</span> <span class="token comment">// 精确匹配，所以 path/to/file.js 被解析和导入</span>
<span class="token keyword">import</span> Test2 <span class="token keyword">from</span> <span class="token string">'xyz/file.js'</span><span class="token punctuation">;</span> <span class="token comment">// 非精确匹配，触发普通解析</span>
</code></pre>
<p>下面的表格展示了一些其他情况：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th"><code>别名：</code></div><div class="table-th"><code>import 'xyz'</code></div><div class="table-th"><code>import 'xyz/file.js'</code></div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: '/abs/path/to/file.js' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abs/path/to/file.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
        error
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz$: '/abs/path/to/file.js' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abs/path/to/file.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: './dir/file.js' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/dir/file.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
        error
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz$: './dir/file.js' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/dir/file.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: '/some/dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/some/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/some/dir/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz$: '/some/dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/some/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: './dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/dir/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: 'modu' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/modu/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/modu/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz$: 'modu' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/modu/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: 'modu/some/file.js' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/modu/some/file.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
        error
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: 'modu/dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/modu/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/dir/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz: 'xyz/dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/dir/file.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>别名：</code>
</div>
<div class="table-td-content">
<code>{ xyz$: 'xyz/dir' }</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/dir/index.js</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import 'xyz/file.js'</code>
</div>
<div class="table-td-content">
<code>/abc/node_modules/xyz/file.js</code>
</div>
</div></div>
</div>
</div>
</div><p>如果在 <code>package.json</code> 中定义，<code>index.js</code> 可能会被解析为另一个文件。</p>
<p><code>/abc/node_modules</code> 也可能在 <code>/node_modules</code> 中解析。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-aliasfields" id="resolve-aliasfields"></a>
<span class="text"><code>resolve.aliasFields</code></span>
<a aria-label="&lt;code&gt;resolve.aliasFields&lt;/code&gt;" class="icon-link" href="#resolve-aliasfields"></a>
</h3>
<p><code>[string]: ['browser']</code></p>
<p>指定一个字段，例如 <code>browser</code>，根据<a href="https://github.com/defunctzombie/package-browser-field-spec">此规范</a>进行解析。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    aliasFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'browser'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-cachewithcontext" id="resolve-cachewithcontext"></a>
<span class="text"><code>resolve.cacheWithContext</code></span>
<a aria-label="&lt;code&gt;resolve.cacheWithContext&lt;/code&gt;" class="icon-link" href="#resolve-cachewithcontext"></a>
</h3>
<p><code>boolean</code>（从 webpack 3.1.0 开始）</p>
<p>如果启用了不安全缓存，请在缓存键(cache key)中引入 <code>request.context</code>。这个选项被 <a href="https://github.com/webpack/enhanced-resolve/"><code>enhanced-resolve</code></a> 模块考虑在内。从 webpack 3.1.0 开始，在配置了 resolve 或 resolveLoader 插件时，解析缓存(resolve caching)中的上下文(context)会被忽略。这解决了性能衰退的问题。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-descriptionfiles" id="resolve-descriptionfiles"></a>
<span class="text"><code>resolve.descriptionFiles</code></span>
<a aria-label="&lt;code&gt;resolve.descriptionFiles&lt;/code&gt;" class="icon-link" href="#resolve-descriptionfiles"></a>
</h3>
<p><code>[string]: ['package.json']</code></p>
<p>用于描述的 JSON 文件。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    descriptionFiles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'package.json'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-enforceextension" id="resolve-enforceextension"></a>
<span class="text"><code>resolve.enforceExtension</code></span>
<a aria-label="&lt;code&gt;resolve.enforceExtension&lt;/code&gt;" class="icon-link" href="#resolve-enforceextension"></a>
</h3>
<p><code>boolean: false</code></p>
<p>如果是 <code>true</code>，将不允许无扩展名(extension-less)文件。默认如果 <code>./foo</code> 有 <code>.js</code> 扩展，<code>require('./foo')</code> 可以正常运行。但如果启用此选项，只有 <code>require('./foo.js')</code> 能够正常工作。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    enforceExtension<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-enforcemoduleextension" id="resolve-enforcemoduleextension"></a>
<span class="text"><code>resolve.enforceModuleExtension</code></span>
<a aria-label="&lt;code&gt;resolve.enforceModuleExtension&lt;/code&gt;" class="icon-link" href="#resolve-enforcemoduleextension"></a>
</h3>
<p><code>boolean: false</code></p>
<p>对模块是否需要使用的扩展（例如 loader）。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    enforceModuleExtension<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-extensions" id="resolve-extensions"></a>
<span class="text"><code>resolve.extensions</code></span>
<a aria-label="&lt;code&gt;resolve.extensions&lt;/code&gt;" class="icon-link" href="#resolve-extensions"></a>
</h3>
<p><code>[string]: ['.wasm', '.mjs', '.js', '.json']</code></p>
<p>自动解析确定的扩展。默认值为：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.wasm'</span><span class="token punctuation">,</span> <span class="token string">'.mjs'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>能够使用户在引入模块时不带扩展：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> File <span class="token keyword">from</span> <span class="token string">'../path/to/file'</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 使用此选项，会<strong>覆盖默认数组</strong>，这就意味着 webpack 将不再尝试使用默认扩展来解析模块。对于使用其扩展导入的模块，例如，<code>import SomeFile from "./somefile.ext"</code>，要想正确的解析，一个包含“*”的字符串必须包含在数组中。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-mainfields" id="resolve-mainfields"></a>
<span class="text"><code>resolve.mainFields</code></span>
<a aria-label="&lt;code&gt;resolve.mainFields&lt;/code&gt;" class="icon-link" href="#resolve-mainfields"></a>
</h3>
<p><code>[string]</code></p>
<p>当从 npm 包中导入模块时（例如，<code>import * as D3 from 'd3'</code>），此选项将决定在 <code>package.json</code> 中使用哪个字段导入模块。根据 webpack 配置中指定的 <a href="/concepts/targets"><code>target</code></a> 不同，默认值也会有所不同。</p>
<p>当 <code>target</code> 属性设置为 <code>webworker</code>, <code>web</code> 或者没有指定，默认值为：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mainFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'browser'</span><span class="token punctuation">,</span> <span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>对于其他任意的 target（包括 <code>node</code>），默认值为：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mainFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>例如，考虑任意一个名为 <code>upstream</code> 的 library，其 <code>package.json</code> 包含以下字段：</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"browser"</span><span class="token operator">:</span> <span class="token string">"build/upstream.js"</span><span class="token punctuation">,</span>
  <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"index"</span>
<span class="token punctuation">}</span>
</code></pre>
<p>在我们 <code>import * as Upstream from 'upstream'</code> 时，这实际上会从 <code>browser</code> 属性解析文件。在这里 <code>browser</code> 属性是最优先选择的，因为它是 <code>mainFields</code> 的第一项。同时，由 webpack 打包的 Node.js 应用程序首先会尝试从 <code>module</code> 字段中解析文件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-mainfiles" id="resolve-mainfiles"></a>
<span class="text"><code>resolve.mainFiles</code></span>
<a aria-label="&lt;code&gt;resolve.mainFiles&lt;/code&gt;" class="icon-link" href="#resolve-mainfiles"></a>
</h3>
<p><code>[string]: ['index']</code></p>
<p>解析目录时要使用的文件名。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mainFiles<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-modules" id="resolve-modules"></a>
<span class="text"><code>resolve.modules</code></span>
<a aria-label="&lt;code&gt;resolve.modules&lt;/code&gt;" class="icon-link" href="#resolve-modules"></a>
</h3>
<p><code>[string]: ['node_modules']</code></p>
<p>告诉 webpack 解析模块时应该搜索的目录。</p>
<p>绝对路径和相对路径都能使用，但是要知道它们之间有一点差异。</p>
<p>通过查看当前目录以及祖先路径（即 <code>./node_modules</code>, <code>../node_modules</code> 等等），相对路径将类似于 Node 查找 'node_modules' 的方式进行查找。</p>
<p>使用绝对路径，将只在给定目录中搜索。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果你想要添加一个目录到模块搜索目录，此目录优先于 <code>node_modules/</code> 搜索：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-unsafecache" id="resolve-unsafecache"></a>
<span class="text"><code>resolve.unsafeCache</code></span>
<a aria-label="&lt;code&gt;resolve.unsafeCache&lt;/code&gt;" class="icon-link" href="#resolve-unsafecache"></a>
</h3>
<p><code>regex</code> <code>array</code> <code>boolean: true</code></p>
<p>启用，会主动缓存模块，但并<strong>不安全</strong>。传递 <code>true</code> 将缓存一切。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    unsafeCache<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>正则表达式，或正则表达式数组，可以用于匹配文件路径或只缓存某些模块。例如，只缓存 utilities 模块：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    unsafeCache<span class="token punctuation">:</span> <span class="token regex">/src\/utilities/</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 修改缓存路径可能在极少数情况下导致失败。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-plugins" id="resolve-plugins"></a>
<span class="text"><code>resolve.plugins</code></span>
<a aria-label="&lt;code&gt;resolve.plugins&lt;/code&gt;" class="icon-link" href="#resolve-plugins"></a>
</h3>
<p><a href="/plugins/"><code>[Plugin]</code></a></p>
<p>应该使用的额外的解析插件列表。它允许插件，如 <a href="https://www.npmjs.com/package/directory-named-webpack-plugin"><code>DirectoryNamedWebpackPlugin</code></a>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">DirectoryNamedWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-symlinks" id="resolve-symlinks"></a>
<span class="text"><code>resolve.symlinks</code></span>
<a aria-label="&lt;code&gt;resolve.symlinks&lt;/code&gt;" class="icon-link" href="#resolve-symlinks"></a>
</h3>
<p><code>boolean: true</code></p>
<p>是否将符号链接(symlink)解析到它们的符号链接位置(symlink location)。默认：</p>
<p>启用时，符号链接(symlink)的资源，将解析为其_真实_路径，而不是其符号链接(symlink)位置。注意，当使用符号链接 package 包工具时（如 <code>npm link</code>），可能会导致模块解析失败。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    symlinks<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-cachepredicate" id="resolve-cachepredicate"></a>
<span class="text"><code>resolve.cachePredicate</code></span>
<a aria-label="&lt;code&gt;resolve.cachePredicate&lt;/code&gt;" class="icon-link" href="#resolve-cachepredicate"></a>
</h3>
<p><code>function: function (module) { return true; }</code></p>
<p>决定请求是否应该被缓存的函数。函数传入一个带有 <code>path</code> 和 <code>request</code> 属性的对象。必须返回一个 boolean 值。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    cachePredicate<span class="token punctuation">:</span> <span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// additional logic</span>
      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolveloader" id="resolveloader"></a>
<span class="text"><code>resolveLoader</code></span>
<a aria-label="&lt;code&gt;resolveLoader&lt;/code&gt;" class="icon-link" href="#resolveloader"></a>
</h2>
<p><code>object</code></p>
<p>这组选项与上面的 <code>resolve</code> 对象的属性集合相同，但仅用于解析 webpack 的 <a href="/concepts/loaders">loader</a> 包。默认：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolveLoader<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.json'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    mainFields<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'loader'</span><span class="token punctuation">,</span> <span class="token string">'main'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 注意，这里你可以使用别名，并且其他特性类似于 resolve 对象。例如，<code>{ txt: 'raw-loader' }</code> 会使用 <code>raw-loader</code> 去 shim(填充) <code>txt!templates/demo.txt</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolveloader-moduleextensions" id="resolveloader-moduleextensions"></a>
<span class="text"><code>resolveLoader.moduleExtensions</code></span>
<a aria-label="&lt;code&gt;resolveLoader.moduleExtensions&lt;/code&gt;" class="icon-link" href="#resolveloader-moduleextensions"></a>
</h2>
<p><code>[string]</code></p>
<p>解析 loader 时，用到扩展名(extensions)/后缀(suffixes)。从 webpack 2 开始，我们 <a href="/migrate/3/#automatic-loader-module-name-extension-removed">强烈建议</a> 使用全名，例如 <code>example-loader</code>，以尽可能清晰。然而，如果你确实想省略 <code>-loader</code>，也就是说只使用 <code>example</code>，则可以使用此选项来实现：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  resolveLoader<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    moduleExtensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'-loader'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>优化(optimization)</h1>
<div><p>从 webpack 4 开始，会根据你选择的 <a href="/concepts/mode/"><code>mode</code></a> 来执行不同的优化，不过所有的优化还是可以手动配置和重写。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-minimize" id="optimization-minimize"></a>
<span class="text"><code>optimization.minimize</code></span>
<a aria-label="&lt;code&gt;optimization.minimize&lt;/code&gt;" class="icon-link" href="#optimization-minimize"></a>
</h2>
<p><code>boolean</code></p>
<p>告知 webpack 使用 <a href="/plugins/terser-webpack-plugin/">TerserPlugin</a> 压缩 bundle。</p>
<p><code>production</code> 模式下，这里默认是 <code>true</code>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimize<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 了解 <a href="/concepts/mode/">mode</a> 工作机制。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-minimizer" id="optimization-minimizer"></a>
<span class="text"><code>optimization.minimizer</code></span>
<a aria-label="&lt;code&gt;optimization.minimizer&lt;/code&gt;" class="icon-link" href="#optimization-minimizer"></a>
</h2>
<p><code>[&lt;plugin&gt;]</code> and or <code>[function (compiler)]</code></p>
<p>允许你通过提供一个或多个定制过的 <a href="/plugins/terser-webpack-plugin/">TerserPlugin</a> 实例，覆盖默认压缩工具(minimizer)。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Must be set to true if using source-maps in production</span>
        terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://github.com/webpack-contrib/terser-webpack-plugin#terseroptions</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Or, as function:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* your config */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-splitchunks" id="optimization-splitchunks"></a>
<span class="text"><code>optimization.splitChunks</code></span>
<a aria-label="&lt;code&gt;optimization.splitChunks&lt;/code&gt;" class="icon-link" href="#optimization-splitchunks"></a>
</h2>
<p><code>object</code></p>
<p>对于动态导入模块，默认使用 webpack v4+ 提供的全新的通用分块策略(common chunk strategy)。请在 <a href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a> 页面中查看配置其行为的可用选项。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-runtimechunk" id="optimization-runtimechunk"></a>
<span class="text"><code>optimization.runtimeChunk</code></span>
<a aria-label="&lt;code&gt;optimization.runtimeChunk&lt;/code&gt;" class="icon-link" href="#optimization-runtimechunk"></a>
</h2>
<p><code>object</code> <code>string</code> <code>boolean</code></p>
<p>将 <code>optimization.runtimeChunk</code> 设置为 <code>true</code> 或 <code>"multiple"</code>，会为每个仅含有 runtime 的入口起点添加一个额外 chunk。此设置是如下设置的别名：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> entrypoint <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token template-string"><span class="token string">`runtime~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>值 <code>"single"</code> 会创建一个在所有生成 chunk 之间共享的运行时文件。此设置是如下设置的别名：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'runtime'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>通过将 <code>optimization.runtimeChunk</code> 设置为 <code>object</code>，对象中可以设置只有 <code>name</code> 属性，其中属性值可以是名称或者返回名称的函数，用于为 runtime chunks 命名。</p>
<p>默认值是 <code>false</code>：每个入口 chunk 中直接嵌入 runtime。</p>
<blockquote class="warning"><div class="tip-content"> 对于每个 runtime chunk，导入的模块会被分别初始化，因此如果你在同一个页面中引用多个入口起点，请注意此行为。你或许应该将其设置为 <code>single</code>，或者使用其他只有一个 runtime 实例的配置。 </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    runtimeChunk<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> entrypoint <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token template-string"><span class="token string">`runtimechunk~</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>entrypoint<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-noemitonerrors" id="optimization-noemitonerrors"></a>
<span class="text"><code>optimization.noEmitOnErrors</code></span>
<a aria-label="&lt;code&gt;optimization.noEmitOnErrors&lt;/code&gt;" class="icon-link" href="#optimization-noemitonerrors"></a>
</h2>
<p><code>boolean</code></p>
<p>在编译出错时，使用 <code>optimization.noEmitOnErrors</code> 来跳过生成阶段(emitting phase)。这可以确保没有生成出错误资源。而 stats 中所有 assets 中的 <code>emitted</code> 标记都是 <code>false</code>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    noEmitOnErrors<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 如果你正在使用 webpack <a href="/api/cli/">CLI</a>，在此插件开启时，webpack 处理过程不会因为错误代码而退出。如果你希望在使用 CLI 时 webpack "失败(fail)"，请查看 <a href="/api/cli/#advanced-options"><code>bail</code> 选项</a>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-namedmodules" id="optimization-namedmodules"></a>
<span class="text"><code>optimization.namedModules</code></span>
<a aria-label="&lt;code&gt;optimization.namedModules&lt;/code&gt;" class="icon-link" href="#optimization-namedmodules"></a>
</h2>
<p><code>boolean: false</code></p>
<p>告知 webpack 使用可读取模块标识符(readable module identifiers)，来帮助更好地调试。webpack 配置中如果没有设置此选项，默认会在 <a href="/concepts/mode/">mode</a> <code>development</code> 启用，在 <a href="/concepts/mode/">mode</a> <code>production</code> 禁用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    namedModules<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-namedchunks" id="optimization-namedchunks"></a>
<span class="text"><code>optimization.namedChunks</code></span>
<a aria-label="&lt;code&gt;optimization.namedChunks&lt;/code&gt;" class="icon-link" href="#optimization-namedchunks"></a>
</h2>
<p><code>boolean: false</code></p>
<p>告知 webpack 使用可读取 chunk 标识符(readable chunk identifiers)，来帮助更好地调试。webpack 配置中如果没有设置此选项，默认会在 <a href="/concepts/mode/">mode</a> <code>development</code> 启用，在 <a href="/concepts/mode/">mode</a> <code>production</code> 禁用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    namedChunks<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-moduleids" id="optimization-moduleids"></a>
<span class="text"><code>optimization.moduleIds</code></span>
<a aria-label="&lt;code&gt;optimization.moduleIds&lt;/code&gt;" class="icon-link" href="#optimization-moduleids"></a>
</h2>
<p><code>bool: false</code> <code>string: natural, named, hashed, size, total-size</code></p>
<p>Tells webpack which algorithm to use when choosing module ids. Setting <code>optimization.moduleIds</code> to <code>false</code> tells webpack that none of built-in algorithms should be used, as custom one can be provided via plugin. By default <code>optimization.moduleIds</code> is set to <code>false</code>.</p>
<p>The following string values are supported:</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Option</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>natural</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Numeric ids in order of usage.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>named</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Readable ids for better debugging.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>hashed</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Short hashes as ids for better long term caching.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>size</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Numeric ids focused on minimal initial download size.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>total-size</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        numeric ids focused on minimal total download size.
    </div>
</div></div>
</div>
</div>
</div><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    moduleIds<span class="token punctuation">:</span> <span class="token string">'hashed'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-chunkids" id="optimization-chunkids"></a>
<span class="text"><code>optimization.chunkIds</code></span>
<a aria-label="&lt;code&gt;optimization.chunkIds&lt;/code&gt;" class="icon-link" href="#optimization-chunkids"></a>
</h2>
<p><code>bool: false</code> <code>string: natural, named, size, total-size</code></p>
<p>Tells webpack which algorithm to use when choosing chunk ids. Setting <code>optimization.chunkIds</code> to <code>false</code> tells webpack that none of built-in algorithms should be used, as custom one can be provided via plugin. There are couple of defaults for <code>optimization.chunkIds</code>:</p>
<ul>
<li>if <a href="#optimization-occurrenceorder"><code>optimization.occurrenceOrder</code></a> is enabled <code>optimization.chunkIds</code> is set to <code>'total-size'</code></li>
<li>Disregarding previous if, if <a href="#optimization-namedchunks"><code>optimization.namedChunks</code></a> is enabled <code>optimization.chunkIds</code> is set to <code>'named'</code></li>
<li>if none of the above, <code>optimization.namedChunks</code> will be defaulted to <code>'natural'</code></li>
</ul>
<p>The following string values are supported:</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Option</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>'natural'</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Numeric ids in order of usage.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>'named'</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Readable ids for better debugging.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>'size'</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Numeric ids focused on minimal initial download size.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Option
    </div>
<div class="table-td-content">
<code>'total-size'</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        numeric ids focused on minimal total download size.
    </div>
</div></div>
</div>
</div>
</div><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    chunkIds<span class="token punctuation">:</span> <span class="token string">'named'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-nodeenv" id="optimization-nodeenv"></a>
<span class="text"><code>optimization.nodeEnv</code></span>
<a aria-label="&lt;code&gt;optimization.nodeEnv&lt;/code&gt;" class="icon-link" href="#optimization-nodeenv"></a>
</h2>
<p><code>string</code> <code>bool: false</code></p>
<p>告知 webpack 将 <code>process.env.NODE_ENV</code> 设置为一个给定字符串。如果 <code>optimization.nodeEnv</code> 不是 <code>false</code>，则会使用 <a href="/plugins/define-plugin/">DefinePlugin</a>，<code>optimization.nodeEnv</code> <strong>默认值</strong>取决于 <a href="/concepts/mode/">mode</a>，如果为 falsy 值，则会回退到 <code>"production"</code>。</p>
<p>可能的值有：</p>
<ul>
<li>任何字符串：用于设置 <code>process.env.NODE_ENV</code> 的值。</li>
<li>false：不修改/设置 <code>process.env.NODE_ENV</code>的值。</li>
</ul>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    nodeEnv<span class="token punctuation">:</span> <span class="token string">'production'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-manglewasmimports" id="optimization-manglewasmimports"></a>
<span class="text"><code>optimization.mangleWasmImports</code></span>
<a aria-label="&lt;code&gt;optimization.mangleWasmImports&lt;/code&gt;" class="icon-link" href="#optimization-manglewasmimports"></a>
</h2>
<p><code>bool: false</code></p>
<p>在设置为 <code>true</code> 时，告知 webpack 通过将导入修改为更短的字符串，来减少 WASM 大小。这会破坏模块和导出名称。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mangleWasmImports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-removeavailablemodules" id="optimization-removeavailablemodules"></a>
<span class="text"><code>optimization.removeAvailableModules</code></span>
<a aria-label="&lt;code&gt;optimization.removeAvailableModules&lt;/code&gt;" class="icon-link" href="#optimization-removeavailablemodules"></a>
</h2>
<p><code>bool: true</code></p>
<p>如果模块已经包含在所有父级模块中，告知 webpack 从 chunk 中检测出这些模块，或移除这些模块。将 <code>optimization.removeAvailableModules</code> 设置为 <code>false</code> 以禁用这项优化。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    removeAvailableModules<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-removeemptychunks" id="optimization-removeemptychunks"></a>
<span class="text"><code>optimization.removeEmptyChunks</code></span>
<a aria-label="&lt;code&gt;optimization.removeEmptyChunks&lt;/code&gt;" class="icon-link" href="#optimization-removeemptychunks"></a>
</h2>
<p><code>bool: true</code></p>
<p>如果 chunk 为空，告知 webpack 检测或移除这些 chunk。将 <code>optimization.removeEmptyChunks</code> 设置为 <code>false</code> 以禁用这项优化。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    removeEmptyChunks<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-mergeduplicatechunks" id="optimization-mergeduplicatechunks"></a>
<span class="text"><code>optimization.mergeDuplicateChunks</code></span>
<a aria-label="&lt;code&gt;optimization.mergeDuplicateChunks&lt;/code&gt;" class="icon-link" href="#optimization-mergeduplicatechunks"></a>
</h2>
<p><code>bool: true</code></p>
<p>告知 webpack 合并含有相同模块的 chunk。将 <code>optimization.mergeDuplicateChunks</code> 设置为 <code>false</code> 以禁用这项优化。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mergeDuplicateChunks<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-flagincludedchunks" id="optimization-flagincludedchunks"></a>
<span class="text"><code>optimization.flagIncludedChunks</code></span>
<a aria-label="&lt;code&gt;optimization.flagIncludedChunks&lt;/code&gt;" class="icon-link" href="#optimization-flagincludedchunks"></a>
</h2>
<p><code>bool</code></p>
<p>告知 webpack 确定和标记出作为其他 chunk 子集的那些 chunk，其方式是在已经加载过较大的 chunk 之后，就不再去加载这些 chunk 子集。<code>optimization.flagIncludedChunks</code> 默认会在 <code>production</code> <a href="/concepts/mode/">mode</a> 中启用，其他情况禁用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flagIncludedChunks<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-occurrenceorder" id="optimization-occurrenceorder"></a>
<span class="text"><code>optimization.occurrenceOrder</code></span>
<a aria-label="&lt;code&gt;optimization.occurrenceOrder&lt;/code&gt;" class="icon-link" href="#optimization-occurrenceorder"></a>
</h2>
<p><code>bool</code></p>
<p>Tells webpack to figure out an order of modules which will result in the smallest initial bundle. By default <code>optimization.occurrenceOrder</code> is enabled in <code>production</code> <a href="/concepts/mode/">mode</a> and disabled elsewise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    occurrenceOrder<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-providedexports" id="optimization-providedexports"></a>
<span class="text"><code>optimization.providedExports</code></span>
<a aria-label="&lt;code&gt;optimization.providedExports&lt;/code&gt;" class="icon-link" href="#optimization-providedexports"></a>
</h2>
<p><code>bool</code></p>
<p>Tells webpack to figure out which exports are provided by modules to generate more efficient code for <code>export * from ...</code>. By default  <code>optimization.providedExports</code> is enabled.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    providedExports<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-usedexports" id="optimization-usedexports"></a>
<span class="text"><code>optimization.usedExports</code></span>
<a aria-label="&lt;code&gt;optimization.usedExports&lt;/code&gt;" class="icon-link" href="#optimization-usedexports"></a>
</h2>
<p><code>bool</code></p>
<p>Tells webpack to determine used exports for each module. This depends on <a href="#optimization-occurrenceorder"><code>optimization.providedExports</code></a>. Information collected by <code>optimization.usedExports</code> is used by other optimizations or code generation i.e. exports are not generated for unused exports, export names are mangled to single char identifiers when all usages are compatible.
Dead code elimination in minimizers will benefit from this and can remove unused exports.
By default <code>optimization.usedExports</code> is enabled in <code>production</code> <a href="/concepts/mode/">mode</a> and disabled elsewise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-concatenatemodules" id="optimization-concatenatemodules"></a>
<span class="text"><code>optimization.concatenateModules</code></span>
<a aria-label="&lt;code&gt;optimization.concatenateModules&lt;/code&gt;" class="icon-link" href="#optimization-concatenatemodules"></a>
</h2>
<p><code>bool</code></p>
<p>Tells webpack to find segments of the module graph which can be safely concatenated into a single module. Depends on <a href="#optimization-providedexports"><code>optimization.providedExports</code></a> and <a href="#optimization-usedexports"><code>optimization.usedExports</code></a>.
By default <code>optimization.concatenateModules</code> is enabled in <code>production</code> <a href="/concepts/mode/">mode</a> and disabled elsewise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    concatenateModules<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-sideeffects" id="optimization-sideeffects"></a>
<span class="text"><code>optimization.sideEffects</code></span>
<a aria-label="&lt;code&gt;optimization.sideEffects&lt;/code&gt;" class="icon-link" href="#optimization-sideeffects"></a>
</h2>
<p><code>bool</code></p>
<p>Tells webpack to recognise the <a href="https://github.com/webpack/webpack/blob/master/examples/side-effects/README.md"><code>sideEffects</code></a> flag in <code>package.json</code> or rules to skip over modules which are flagged to contain no side effects when exports are not used.</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"awesome npm module"</span><span class="token punctuation">,</span>
  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> Please note that <code>sideEffects</code> should be in the npm module's <code>package.json</code> file and doesn't mean that you need to set <code>sideEffects</code> to <code>false</code> in your own project's <code>package.json</code> which requires that big module. </div></blockquote><p><code>optimization.sideEffects</code> depends on <a href="#optimization-providedexports"><code>optimization.providedExports</code></a> to be enabled. This dependency has a build time cost, but eliminating modules has positive impact on performance because of less code generation. Effect of this optimization depends on your codebase, try it for possible performance wins.</p>
<p>By default <code>optimization.sideEffects</code> is enabled in <code>production</code> <a href="/concepts/mode/">mode</a> and disabled elsewise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sideEffects<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-portablerecords" id="optimization-portablerecords"></a>
<span class="text"><code>optimization.portableRecords</code></span>
<a aria-label="&lt;code&gt;optimization.portableRecords&lt;/code&gt;" class="icon-link" href="#optimization-portablerecords"></a>
</h2>
<p><code>bool</code></p>
<p><code>optimization.portableRecords</code> tells webpack to generate records with relative paths to be able to move the context folder.</p>
<p>By default <code>optimization.portableRecords</code> is disabled. Automatically enabled if at least one of the records options provided to webpack config: <a href="/configuration/other-options/#recordspath"><code>recordsPath</code></a>, <a href="/configuration/other-options/#recordsinputpath"><code>recordsInputPath</code></a>, <a href="/configuration/other-options/#recordsoutputpath"><code>recordsOutputPath</code></a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    portableRecords<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>插件(plugins)</h1>
<div><p><code>plugins</code> 选项用于以各种方式自定义 webpack 构建过程。webpack 附带了各种内置插件，可以通过 <code>webpack.[plugin-name]</code> 访问这些插件。请查看 <a href="/plugins">插件页面</a> 获取插件列表和对应文档，但请注意这只是其中一部分，社区中还有许多插件。</p>
<blockquote class="tip"><div class="tip-content"> 注意：本页面仅讨论使用插件，如果你有兴趣编写自己的插件，请访问 <a href="/contribute/writing-a-plugin/">编写一个插件</a> 页面。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#plugins" id="plugins"></a>
<span class="text"><code>plugins</code></span>
<a aria-label="&lt;code&gt;plugins&lt;/code&gt;" class="icon-link" href="#plugins"></a>
</h2>
<p><a href="/plugins/"><code>[Plugin]</code></a></p>
<p>一组 webpack 插件。例如，<a href="/plugins/define-plugin/"><code>DefinePlugin</code></a> 允许你创建可在编译时配置的全局常量。这对需要再开发环境构建和生产环境构建之间产生不同行为来说非常有用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Definitions...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>一个复杂示例，使用多个插件，可能看起来就像这样：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导入非 webpack 自带默认插件</span>
<span class="token keyword">var</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> DashboardPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dashboard/plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在配置中添加插件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'build.min.css'</span><span class="token punctuation">,</span>
      allChunks<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span> <span class="token regex">/moment$/</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 编译时(compile time)插件</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'process.env.NODE_ENV'</span><span class="token punctuation">:</span> <span class="token string">'"production"'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// webpack-dev-server 强化插件</span>
    <span class="token keyword">new</span> <span class="token class-name">DashboardPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>开发中 server(devServer)</h1>
<div><p><a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 能够用于快速开发应用程序。起步请查看 <a href="/guides/development/">开发</a> 指南。</p>
<p>此页面描述影响 webpack-dev-server(简写为：dev-server) 行为的选项。</p>
<blockquote class="tip"><div class="tip-content"> 与 <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> 兼容的选项旁边有 🔑。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver" id="devserver"></a>
<span class="text"><code>devServer</code></span>
<a aria-label="&lt;code&gt;devServer&lt;/code&gt;" class="icon-link" href="#devserver"></a>
</h2>
<p><code>object</code></p>
<p>通过来自 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 的这些选项，能够用多种方式改变其行为。这里有一个简单的例子，会 gzip(压缩) 和 serve(服务) 所有来自项目根路径下 <code>dist/</code> 目录的文件：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    compress<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    port<span class="token punctuation">:</span> <span class="token number">9000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>当服务器启动时，在解析模块列表之前会有一条消息：</p>
<pre><code class="lang-bash">http://localhost:9000/
webpack 的服务路径是 /build/
非 webpack 的内容的服务路径是 /path/to/dist/
</code></pre>
<p>这将给出一些背景知识，就能知道服务器的访问位置，并且知道服务已启动。</p>
<p>如果你通过 Node.js API 来使用 dev-server， <code>devServer</code> 中的选项将被忽略。将选项作为第二个参数传入： <code>new WebpackDevServer(compiler, {...})</code>。关于如何通过 Node.js API 使用 webpack-dev-server 的示例，请 <a href="https://github.com/webpack/webpack-dev-server/tree/master/examples/api/simple">查看此处</a>。</p>
<blockquote class="warning"><div class="tip-content"> 请注意，在 <a href="/configuration/configuration-types/#exporting-multiple-configurations">导出多个配置</a> 时，只会使用第一个配置中的 devServer 选项，并将其用于数组中的其他所有配置。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 如果遇到问题，导航到 <code>/webpack-dev-server</code> 路径，可以显示出文件的服务位置。 例如，<code>http://localhost:9000/webpack-dev-server</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-after" id="devserver-after"></a>
<span class="text"><code>devServer.after</code></span>
<a aria-label="&lt;code&gt;devServer.after&lt;/code&gt;" class="icon-link" href="#devserver-after"></a>
</h2>
<p><code>function (app, server)</code></p>
<p>在服务内部的所有其他中间件之后，
提供执行自定义中间件的功能。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    after<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 做些有趣的事</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-allowedhosts" id="devserver-allowedhosts"></a>
<span class="text"><code>devServer.allowedHosts</code></span>
<a aria-label="&lt;code&gt;devServer.allowedHosts&lt;/code&gt;" class="icon-link" href="#devserver-allowedhosts"></a>
</h2>
<p><code>array</code></p>
<p>此选项允许你添加白名单服务，允许一些开发服务器访问。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    allowedHosts<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'subdomain.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'subdomain2.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'host2.com'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>模仿 django 的 <code>ALLOWED_HOSTS</code>，以 <code>.</code> 开头的值可以用作子域通配符。<code>.host.com</code> 将会匹配 <code>host.com</code>, <code>www.host.com</code> 和 <code>host.com</code> 的任何其他子域名。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 这实现了与第一个示例相同的效果，</span>
    <span class="token comment">// 如果新的子域名需要访问 dev server，</span>
    <span class="token comment">// 则无需更新您的配置</span>
    allowedHosts<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'.host.com'</span><span class="token punctuation">,</span>
      <span class="token string">'host2.com'</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>想要在 CLI 中使用这个选项，请向 <code>--allowed-hosts</code> 选项传入一个以逗号分隔的字符串。</p>
<pre><code class="lang-bash">webpack-dev-server --entry /entry/file --output-path /output/path --allowed-hosts .host.com,host2.com
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-before" id="devserver-before"></a>
<span class="text"><code>devServer.before</code></span>
<a aria-label="&lt;code&gt;devServer.before&lt;/code&gt;" class="icon-link" href="#devserver-before"></a>
</h2>
<p><code>function (app, server)</code></p>
<p>在服务内部的所有其他中间件之前，
提供执行自定义中间件的功能。
这可以用来配置自定义处理程序，例如：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    before<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/some/path'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token punctuation">:</span> <span class="token string">'response'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-bonjour" id="devserver-bonjour"></a>
<span class="text"><code>devServer.bonjour</code></span>
<a aria-label="&lt;code&gt;devServer.bonjour&lt;/code&gt;" class="icon-link" href="#devserver-bonjour"></a>
</h2>
<p>此选项在启动时，通过 <a href="http://www.zeroconf.org/">ZeroConf</a> 网络广播服务</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    bonjour<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --bonjour
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-clientloglevel" id="devserver-clientloglevel"></a>
<span class="text"><code>devServer.clientLogLevel</code></span>
<a aria-label="&lt;code&gt;devServer.clientLogLevel&lt;/code&gt;" class="icon-link" href="#devserver-clientloglevel"></a>
</h2>
<p><code>string: 'none' | 'info' | 'error' | 'warning'</code></p>
<p>当使用<em>内联模式(inline mode)</em>时，会在开发工具(DevTools)的控制台(console)显示消息，例如：在重新加载之前，在一个错误之前，或者 <a href="/concepts/hot-module-replacement/">模块热替换(Hot Module Replacement)</a> 启用时。默认值是 <code>info</code>。</p>
<p><code>devServer.clientLogLevel</code> 可能会显得很繁琐，你可以通过将其设置为  <code>'none'</code> 来关闭 log。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    clientLogLevel<span class="token punctuation">:</span> <span class="token string">'none'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --client-log-level none
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-color-只用于命令行工具-cli-" id="devserver-color-只用于命令行工具-cli-"></a>
<span class="text"><code>devServer.color</code> - 只用于命令行工具(CLI)</span>
<a aria-label="&lt;code&gt;devServer.color&lt;/code&gt; - 只用于命令行工具(CLI)" class="icon-link" href="#devserver-color-只用于命令行工具-cli-"></a>
</h2>
<p><code>boolean</code></p>
<p>启用/禁用控制台的彩色输出。</p>
<pre><code class="lang-bash">webpack-dev-server --color
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-compress" id="devserver-compress"></a>
<span class="text"><code>devServer.compress</code></span>
<a aria-label="&lt;code&gt;devServer.compress&lt;/code&gt;" class="icon-link" href="#devserver-compress"></a>
</h2>
<p><code>boolean</code></p>
<p>一切服务都启用 <a href="https://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/">gzip 压缩</a>：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    compress<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --compress
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-contentbase" id="devserver-contentbase"></a>
<span class="text"><code>devServer.contentBase</code></span>
<a aria-label="&lt;code&gt;devServer.contentBase&lt;/code&gt;" class="icon-link" href="#devserver-contentbase"></a>
</h2>
<p><code>boolean: false</code> <code>string</code> <code>[string]</code> <code>number</code></p>
<p>告诉服务器从哪个目录中提供内容。只有在你想要提供静态文件时才需要。<a href="#devserver-publicpath-"><code>devServer.publicPath</code></a> 将用于确定应该从哪里提供 bundle，并且此选项优先。</p>
<blockquote class="tip"><div class="tip-content"> 推荐使用一个绝对路径。 </div></blockquote><p>默认情况下，将使用当前工作目录作为提供内容的目录。将其设置为 <code>false</code> 以禁用 <code>contentBase</code>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>也可以从多个目录提供内容：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    contentBase<span class="token punctuation">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'public'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --content-base /path/to/content/dir
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-disablehostcheck" id="devserver-disablehostcheck"></a>
<span class="text"><code>devServer.disableHostCheck</code></span>
<a aria-label="&lt;code&gt;devServer.disableHostCheck&lt;/code&gt;" class="icon-link" href="#devserver-disablehostcheck"></a>
</h2>
<p><code>boolean</code></p>
<p>设置为 <code>true</code> 时，此选项绕过主机检查。<strong>不建议这样做</strong>，因为不检查主机的应用程序容易受到 DNS 重新连接攻击。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    disableHostCheck<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --disable-host-check
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-filename-" id="devserver-filename-"></a>
<span class="text"><code>devServer.filename</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.filename&lt;/code&gt; 🔑" class="icon-link" href="#devserver-filename-"></a>
</h2>
<p><code>string</code></p>
<p>在 <a href="#devserver-lazy-">lazy mode(惰性模式)</a> 中，此选项可减少编译。
默认在 <a href="#devserver-lazy-">lazy mode(惰性模式)</a>，每个请求结果都会产生全新的编译。使用 <code>filename</code>，可以只在某个文件被请求时编译。</p>
<p>如果 <a href="/configuration/output/#output-filename"><code>output.filename</code></a> 设置为 <code>'bundle.js'</code> ，<code>devServer.filename</code> 用法如下：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    lazy<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>现在只有在请求 <code>/bundle.js</code> 时候，才会编译 bundle。</p>
<blockquote class="tip"><div class="tip-content"> <code>filename</code> 在不使用 <a href="#devserver-lazy-">lazy mode(惰性模式)</a> 时没有效果。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-headers-" id="devserver-headers-"></a>
<span class="text"><code>devServer.headers</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.headers&lt;/code&gt; 🔑" class="icon-link" href="#devserver-headers-"></a>
</h2>
<p><code>object</code></p>
<p>在所有响应中添加首部内容：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'X-Custom-Foo'</span><span class="token punctuation">:</span> <span class="token string">'bar'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-historyapifallback" id="devserver-historyapifallback"></a>
<span class="text"><code>devServer.historyApiFallback</code></span>
<a aria-label="&lt;code&gt;devServer.historyApiFallback&lt;/code&gt;" class="icon-link" href="#devserver-historyapifallback"></a>
</h2>
<p><code>boolean</code> <code>object</code></p>
<p>当使用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/History">HTML5 History API</a> 时，任意的 <code>404</code> 响应都可能需要被替代为 <code>index.html</code>。<code>devServer.historyApiFallback</code> 默认禁用。通过传入以下启用：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>通过传入一个对象，比如使用 <code>rewrites</code> 这个选项，此行为可进一步地控制：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      rewrites<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/$/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/landing.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/^\/subpage/</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/subpage.html'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token regex">/./</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'/views/404.html'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>当路径中使用点(dot)（常见于 Angular），你可能需要使用 <code>disableDotRule</code>：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    historyApiFallback<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      disableDotRule<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --history-api-fallback
</code></pre>
<p>更多选项和信息，查看 <a href="https://github.com/bripkens/connect-history-api-fallback">connect-history-api-fallback</a> 文档。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-host" id="devserver-host"></a>
<span class="text"><code>devServer.host</code></span>
<a aria-label="&lt;code&gt;devServer.host&lt;/code&gt;" class="icon-link" href="#devserver-host"></a>
</h2>
<p><code>string</code></p>
<p>指定使用一个 host。默认是 <code>localhost</code>。如果你希望服务器外部可访问，指定如下：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    host<span class="token punctuation">:</span> <span class="token string">'0.0.0.0'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --host 0.0.0.0
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-hot" id="devserver-hot"></a>
<span class="text"><code>devServer.hot</code></span>
<a aria-label="&lt;code&gt;devServer.hot&lt;/code&gt;" class="icon-link" href="#devserver-hot"></a>
</h2>
<p><code>boolean</code></p>
<p>启用 webpack 的 <a href="/concepts/hot-module-replacement/">模块热替换</a> 功能：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hot<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 注意，必须有 <a href="/plugins/hot-module-replacement-plugin/"><code>webpack.HotModuleReplacementPlugin</code></a> 才能完全启用 HMR。如果 <code>webpack</code> 或 <code>webpack-dev-server</code> 是通过 <code>--hot</code> 选项启动的，那么这个插件会被自动添加，所以你可能不需要把它添加到 <code>webpack.config.js</code> 中。关于更多信息，请查看 <a href="/concepts/hot-module-replacement/">HMR 概念</a> 页面。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-hotonly" id="devserver-hotonly"></a>
<span class="text"><code>devServer.hotOnly</code></span>
<a aria-label="&lt;code&gt;devServer.hotOnly&lt;/code&gt;" class="icon-link" href="#devserver-hotonly"></a>
</h2>
<p><code>boolean</code></p>
<p>Enables Hot Module Replacement (see <a href="#devserver-hot"><code>devServer.hot</code></a>) without page refresh as fallback in case of build failures.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hotOnly<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --hot-only
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-https" id="devserver-https"></a>
<span class="text"><code>devServer.https</code></span>
<a aria-label="&lt;code&gt;devServer.https&lt;/code&gt;" class="icon-link" href="#devserver-https"></a>
</h2>
<p><code>boolean</code> <code>object</code></p>
<p>默认情况下，dev-server 通过 HTTP 提供服务。也可以选择带有 HTTPS 的 HTTP/2 提供服务：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    https<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>以上设置使用了自签名证书，但是你可以提供自己的：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    https<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      key<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.key'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      cert<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/server.crt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      ca<span class="token punctuation">:</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'/path/to/ca.pem'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>此对象直接传递到 Node.js HTTPS 模块，所以更多信息请查看 <a href="https://nodejs.org/api/https.html">HTTPS 文档</a>。</p>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --https
</code></pre>
<p>想要向 CLI 传入你自己的证书，请使用以下选项</p>
<pre><code class="lang-bash">webpack-dev-server --https --key /path/to/server.key --cert /path/to/server.crt --cacert /path/to/ca.pem
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-index" id="devserver-index"></a>
<span class="text"><code>devServer.index</code></span>
<a aria-label="&lt;code&gt;devServer.index&lt;/code&gt;" class="icon-link" href="#devserver-index"></a>
</h2>
<p><code>string</code></p>
<p>被作为索引文件的文件名。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token string">'index.html'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-info-只用于命令行工具-cli-" id="devserver-info-只用于命令行工具-cli-"></a>
<span class="text"><code>devServer.info</code> - 只用于命令行工具(CLI)</span>
<a aria-label="&lt;code&gt;devServer.info&lt;/code&gt; - 只用于命令行工具(CLI)" class="icon-link" href="#devserver-info-只用于命令行工具-cli-"></a>
</h2>
<p><code>boolean</code></p>
<p>输出 cli 信息。默认启用。</p>
<pre><code class="lang-bash">webpack-dev-server --info<span class="token operator">=</span>false
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-inline" id="devserver-inline"></a>
<span class="text"><code>devServer.inline</code></span>
<a aria-label="&lt;code&gt;devServer.inline&lt;/code&gt;" class="icon-link" href="#devserver-inline"></a>
</h2>
<p><code>boolean</code></p>
<p>在 dev-server 的两种不同模式之间切换。默认情况下，应用程序启用<em>内联模式(inline mode)</em>。这意味着一段处理实时重载的脚本被插入到你的包(bundle)中，并且构建消息将会出现在浏览器控制台。</p>
<p>也可以使用 <strong>iframe 模式</strong>，它在通知栏下面使用 <code>&lt;iframe&gt;</code> 标签，包含了关于构建的消息。切换到 <strong>iframe 模式</strong>：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    inline<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --inline<span class="token operator">=</span>false
</code></pre>
<blockquote class="tip"><div class="tip-content"> 推荐使用 <a href="/plugins/hot-module-replacement-plugin/">模块热替换</a> 的内联模式，因为它包含来自 websocket 的 HMR 触发器。轮询模式可以作为替代方案，但需要一个额外的入口点：<code>'webpack/hot/poll?1000'</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-lazy-" id="devserver-lazy-"></a>
<span class="text"><code>devServer.lazy</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.lazy&lt;/code&gt; 🔑" class="icon-link" href="#devserver-lazy-"></a>
</h2>
<p><code>boolean</code></p>
<p>当启用 <code>devServer.lazy</code> 时，dev-server 只有在请求时才编译包(bundle)。这意味着 webpack 不会监视任何文件改动。我们称之为<strong>惰性模式</strong>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    lazy<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --lazy
</code></pre>
<blockquote class="tip"><div class="tip-content"> <a href="#devserver-watchoptions-"><code>watchOptions</code></a> 在使用<strong>惰性模式</strong>时无效。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 如果使用命令行工具(CLI)，请确保<strong>内联模式(inline mode)</strong>被禁用。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-noinfo-" id="devserver-noinfo-"></a>
<span class="text"><code>devServer.noInfo</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.noInfo&lt;/code&gt; 🔑" class="icon-link" href="#devserver-noinfo-"></a>
</h2>
<p><code>boolean</code></p>
<p>告诉 dev-server 隐藏 webpack bundle 信息之类的消息。<code>devServer.noInfo</code> 默认禁用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    noInfo<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-open" id="devserver-open"></a>
<span class="text"><code>devServer.open</code></span>
<a aria-label="&lt;code&gt;devServer.open&lt;/code&gt;" class="icon-link" href="#devserver-open"></a>
</h2>
<p><code>boolean</code> <code>string</code></p>
<p>告诉 dev-server 在 server 启动后打开浏览器。默认禁用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    open<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>If no browser is provided (as shown above), your default browser will be used. To specify a different browser, just pass its name instead of boolean:</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    open<span class="token punctuation">:</span> <span class="token string">'Google Chrome'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --open
</code></pre>
<p>Or with specified browser:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    open<span class="token punctuation">:</span> <span class="token string">'Chrome'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>And via the CLI</p>
<pre><code class="lang-bash">webpack-dev-server --open <span class="token string">'Chrome'</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> The browser application name is platform dependent. Don't hard code it in reusable modules. For example, <code>'Chrome'</code> is Google Chrome on macOS, <code>'google-chrome'</code> on Linux and <code>'chrome'</code> on Windows. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-openpage" id="devserver-openpage"></a>
<span class="text"><code>devServer.openPage</code></span>
<a aria-label="&lt;code&gt;devServer.openPage&lt;/code&gt;" class="icon-link" href="#devserver-openpage"></a>
</h2>
<p><code>string</code></p>
<p>指定打开浏览器时的导航页面。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    openPage<span class="token punctuation">:</span> <span class="token string">'/different/page'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --open-page <span class="token string">"/different/page"</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-overlay" id="devserver-overlay"></a>
<span class="text"><code>devServer.overlay</code></span>
<a aria-label="&lt;code&gt;devServer.overlay&lt;/code&gt;" class="icon-link" href="#devserver-overlay"></a>
</h2>
<p><code>boolean</code> <code>object: { boolean errors, boolean warnings }</code></p>
<p>当出现编译器错误或警告时，在浏览器中显示全屏覆盖层。默认禁用。如果你想要只显示编译器错误：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    overlay<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果想要显示警告和错误：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    overlay<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      warnings<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      errors<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-pfx" id="devserver-pfx"></a>
<span class="text"><code>devServer.pfx</code></span>
<a aria-label="&lt;code&gt;devServer.pfx&lt;/code&gt;" class="icon-link" href="#devserver-pfx"></a>
</h2>
<p><code>string</code></p>
<p>当CLI 用法时，路径是一个 .pfx 后缀的 SSL 文件。如果用在选项中，它应该是 .pfx 文件的字节流(bytestream)。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pfx<span class="token punctuation">:</span> <span class="token string">'/path/to/file.pfx'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --pfx /path/to/file.pfx
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-pfxpassphrase" id="devserver-pfxpassphrase"></a>
<span class="text"><code>devServer.pfxPassphrase</code></span>
<a aria-label="&lt;code&gt;devServer.pfxPassphrase&lt;/code&gt;" class="icon-link" href="#devserver-pfxpassphrase"></a>
</h2>
<p><code>string</code></p>
<p>SSL PFX文件的密码。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pfxPassphrase<span class="token punctuation">:</span> <span class="token string">'passphrase'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --pfx-passphrase passphrase
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-port" id="devserver-port"></a>
<span class="text"><code>devServer.port</code></span>
<a aria-label="&lt;code&gt;devServer.port&lt;/code&gt;" class="icon-link" href="#devserver-port"></a>
</h2>
<p><code>number</code></p>
<p>指定要监听请求的端口号：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    port<span class="token punctuation">:</span> <span class="token number">8080</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --port 8080
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-proxy" id="devserver-proxy"></a>
<span class="text"><code>devServer.proxy</code></span>
<a aria-label="&lt;code&gt;devServer.proxy&lt;/code&gt;" class="icon-link" href="#devserver-proxy"></a>
</h2>
<p><code>object</code> <code>[object, function]</code></p>
<p>如果你有单独的后端开发服务器 API，并且希望在同域名下发送 API 请求 ，那么代理某些 URL 会很有用。</p>
<p>dev-server 使用了非常强大的 <a href="https://github.com/chimurai/http-proxy-middleware">http-proxy-middleware</a> 包。更多高级用法，请查阅其 <a href="https://github.com/chimurai/http-proxy-middleware#options">文档</a>。Note that some of <code>http-proxy-middleware</code>'s features do not require a <code>target</code> key, e.g. its <code>router</code> feature, but you will still need to include a <code>target</code> key in your config here, otherwise <code>webpack-dev-server</code> won't pass it along to <code>http-proxy-middleware</code>).</p>
<p>在 <code>localhost:3000</code> 上有后端服务的话，你可以这样启用代理：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>请求到 <code>/api/users</code> 现在会被代理到请求 <code>http://localhost:3000/api/users</code>。</p>
<p>如果你不想始终传递 <code>/api</code> ，则需要重写路径：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        pathRewrite<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'^/api'</span> <span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>默认情况下，不接受运行在 HTTPS 上，且使用了无效证书的后端服务器。如果你想要接受，修改配置如下：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'https://other-server.example.com'</span><span class="token punctuation">,</span>
        secure<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>有时你不想代理所有的请求。可以基于一个函数的返回值绕过代理。</p>
<p>在函数中你可以访问请求体、响应体和代理选项。必须返回 <code>false</code> 或路径，来跳过代理请求。</p>
<p>例如：对于浏览器请求，你想要提供一个 HTML 页面，但是对于 API 请求则保持代理。你可以这样做：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
        bypass<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> proxyOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>accept<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Skipping proxy for browser request.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token string">'/index.html'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果你想要代理多个路径特定到同一个 target 下，你可以使用由一个或多个「具有 <code>context</code> 属性的对象」构成的数组：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      context<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'/auth'</span><span class="token punctuation">,</span> <span class="token string">'/api'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，默认情况下，根请求不会被代理。要启用根代理，应该将 <code>devServer.index</code> 选项指定为 falsy 值：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    index<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// specify to enable root proxying</span>
    host<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    contentBase<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      context<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      target<span class="token punctuation">:</span> <span class="token string">'http://localhost:1234'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>The origin of the host header is kept when proxying by default, you can set <code>changeOrigin</code> to <code>true</code> to override this behaviour. It is useful in some cases like using <a href="https://en.wikipedia.org/wiki/Virtual_hosting#Name-based">name-based virtual hosted sites</a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    proxy<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'/api'</span><span class="token punctuation">:</span> <span class="token string">'http://localhost:3000'</span><span class="token punctuation">,</span>
      changeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-progress-只用于命令行工具-cli-" id="devserver-progress-只用于命令行工具-cli-"></a>
<span class="text"><code>devServer.progress</code> - 只用于命令行工具(CLI)</span>
<a aria-label="&lt;code&gt;devServer.progress&lt;/code&gt; - 只用于命令行工具(CLI)" class="icon-link" href="#devserver-progress-只用于命令行工具-cli-"></a>
</h2>
<p><code>boolean</code></p>
<p>将运行进度输出到控制台。</p>
<pre><code class="lang-bash">webpack-dev-server --progress
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-public" id="devserver-public"></a>
<span class="text"><code>devServer.public</code></span>
<a aria-label="&lt;code&gt;devServer.public&lt;/code&gt;" class="icon-link" href="#devserver-public"></a>
</h2>
<p><code>string</code></p>
<p>当使用<em>内联模式(inline mode)</em>并代理 dev-server 时，内联的客户端脚本并不总是知道要连接到什么地方。它会尝试根据 <code>window.location</code> 来猜测服务器的 URL，但是如果失败，你需要使用这个配置。</p>
<p>例如，dev-server 被代理到 nginx，并且在 <code>myapp.test</code> 上可用：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span><span class="token punctuation">:</span> <span class="token string">'myapp.test:80'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --public myapp.test:80
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-publicpath-" id="devserver-publicpath-"></a>
<span class="text"><code>devServer.publicPath</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.publicPath&lt;/code&gt; 🔑" class="icon-link" href="#devserver-publicpath-"></a>
</h2>
<p><code>string</code></p>
<p>此路径下的打包文件可在浏览器中访问。</p>
<p>假设服务器运行在 <code>http://localhost:8080</code> 并且 <a href="/configuration/output/#output-filename"><code>output.filename</code></a> 被设置为 <code>bundle.js</code>。默认 <code>devServer.publicPath</code> 是 <code>'/'</code>，所以你的包(bundle)可以通过 <code>http://localhost:8080/bundle.js</code> 访问。</p>
<p>修改 <code>devServer.publicPath</code>，将 bundle 放在指定目录下：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'/assets/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>现在可以通过 <code>http://localhost:8080/assets/bundle.js</code> 访问 bundle。</p>
<blockquote class="tip"><div class="tip-content"> 确保 <code>devServer.publicPath</code> 总是以斜杠(/)开头和结尾。 </div></blockquote><p>也可以使用一个完整的 URL。这是 <a href="/concepts/hot-module-replacement/">模块热替换</a> 所必需的。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">'http://localhost:8080/assets/'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>可以通过 <code>http://localhost:8080/assets/bundle.js</code> 访问 bundle。</p>
<blockquote class="tip"><div class="tip-content"> <code>devServer.publicPath</code> 和 <a href="/configuration/output/#output-publicpath"><code>output.publicPath</code></a> 一样被推荐。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-quiet-" id="devserver-quiet-"></a>
<span class="text"><code>devServer.quiet</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.quiet&lt;/code&gt; 🔑" class="icon-link" href="#devserver-quiet-"></a>
</h2>
<p><code>boolean</code></p>
<p>启用 <code>devServer.quiet</code> 后，除了初始启动信息之外的任何内容都不会被打印到控制台。这也意味着来自 webpack 的错误或警告在控制台不可见。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    quiet<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --quiet
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-setup" id="devserver-setup"></a>
<span class="text"><code>devServer.setup</code></span>
<a aria-label="&lt;code&gt;devServer.setup&lt;/code&gt;" class="icon-link" href="#devserver-setup"></a>
</h2>
<p><code>function (app, server)</code></p>
<blockquote class="warning"><div class="tip-content"> 此选项__已废弃_，并将在 v3.0.0 中被删除。应当使用 <a href="#devserver-before"><code>devServer.before</code></a>。 </div></blockquote><p>这里你可以访问 Express 应用程序对象，并且添加你的自定义中间件。
例如，想要为一些路径定义自定义处理函数：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    setup<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/some/path'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> custom<span class="token punctuation">:</span> <span class="token string">'response'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-socket" id="devserver-socket"></a>
<span class="text"><code>devServer.socket</code></span>
<a aria-label="&lt;code&gt;devServer.socket&lt;/code&gt;" class="icon-link" href="#devserver-socket"></a>
</h2>
<p><code>string</code></p>
<p>用于监听的 Unix socket（而不是 host）。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    socket<span class="token punctuation">:</span> <span class="token string">'socket'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --socket socket
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-staticoptions" id="devserver-staticoptions"></a>
<span class="text"><code>devServer.staticOptions</code></span>
<a aria-label="&lt;code&gt;devServer.staticOptions&lt;/code&gt;" class="icon-link" href="#devserver-staticoptions"></a>
</h2>
<p>可以用于对 <code>contentBase</code> 路径下提供的静态文件，进行高级选项配置。有关可能的选项，请查看 <a href="http://expressjs.com/en/4x/api.html#express.static">Express文档</a>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    staticOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      redirect<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 这只有在使用 <a href="#devserver-contentbase"><code>devServer.contentBase</code></a> 是一个 <code>string</code> 时才有效。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-stats-" id="devserver-stats-"></a>
<span class="text"><code>devServer.stats</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.stats&lt;/code&gt; 🔑" class="icon-link" href="#devserver-stats-"></a>
</h2>
<p><code>string: 'none' | 'errors-only' | 'minimal' | 'normal' | 'verbose'</code> <code>object</code></p>
<p>通过此选项，可以精确控制要显示的 bundle 信息。如果你想要显示一些打包信息，但又不是显示全部，这可能是一个不错的妥协。</p>
<p>想要在 bundle 中只显示错误：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    stats<span class="token punctuation">:</span> <span class="token string">'errors-only'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>关于更多信息，请查看 <a href="/configuration/stats"><strong>stats 文档</strong></a>。</p>
<blockquote class="tip"><div class="tip-content"> 此选项在配置 <code>quiet</code> 或 <code>noInfo</code> 时无效。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-stdin-只用于命令行工具-cli-" id="devserver-stdin-只用于命令行工具-cli-"></a>
<span class="text"><code>devServer.stdin</code> - 只用于命令行工具(CLI)</span>
<a aria-label="&lt;code&gt;devServer.stdin&lt;/code&gt; - 只用于命令行工具(CLI)" class="icon-link" href="#devserver-stdin-只用于命令行工具-cli-"></a>
</h2>
<p><code>boolean</code></p>
<p>此选项在 stdin 结束时关闭服务。</p>
<pre><code class="lang-bash">webpack-dev-server --stdin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-uselocalip" id="devserver-uselocalip"></a>
<span class="text"><code>devServer.useLocalIp</code></span>
<a aria-label="&lt;code&gt;devServer.useLocalIp&lt;/code&gt;" class="icon-link" href="#devserver-uselocalip"></a>
</h2>
<p><code>boolean</code></p>
<p>此选项允许浏览器使用本地 IP 打开。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    useLocalIp<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --useLocalIp
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-watchcontentbase" id="devserver-watchcontentbase"></a>
<span class="text"><code>devServer.watchContentBase</code></span>
<a aria-label="&lt;code&gt;devServer.watchContentBase&lt;/code&gt;" class="icon-link" href="#devserver-watchcontentbase"></a>
</h2>
<p><code>boolean</code></p>
<p>告知 dev-server，serve(服务) <a href="#devserver-contentbase"><code>devServer.contentBase</code></a> 选项下的文件。开启此选项后，在文件修改之后，会触发一次完整的页面重载。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    watchContentBase<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>CLI 用法</p>
<pre><code class="lang-bash">webpack-dev-server --watch-content-base
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-watchoptions-" id="devserver-watchoptions-"></a>
<span class="text"><code>devServer.watchOptions</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.watchOptions&lt;/code&gt; 🔑" class="icon-link" href="#devserver-watchoptions-"></a>
</h2>
<p><code>object</code></p>
<p>与监视文件相关的控制选项。</p>
<p>webpack 使用文件系统(file system)获取文件改动的通知。在某些情况下，不会正常工作。例如，当使用 Network File System (NFS) 时。<a href="https://www.vagrantup.com/">Vagrant</a> 也有很多问题。在这些情况下，请使用轮询：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      poll<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果这对文件系统来说太重了的话，你可以修改间隔时间（以毫秒为单位），将其设置为一个整数。</p>
<p>更多选项请查看 <a href="/configuration/watch">WatchOptions</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devserver-writetodisk-" id="devserver-writetodisk-"></a>
<span class="text"><code>devServer.writeToDisk</code> 🔑</span>
<a aria-label="&lt;code&gt;devServer.writeToDisk&lt;/code&gt; 🔑" class="icon-link" href="#devserver-writetodisk-"></a>
</h2>
<p><code>boolean: false</code> <code>function (filePath)</code></p>
<p>Tells <code>devServer</code> to write generated assets to the disk.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    writeToDisk<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Providing a <code>Function</code> to <code>devServer.writeToDisk</code> can be used for filtering. The function follows the same premise as <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter"><code>Array#filter</code></a> in which a boolean return value tells if the file should be written to disk.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  devServer<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    writeToDisk<span class="token punctuation">:</span> <span class="token punctuation">(</span>filePath<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token regex">/superman\.css$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>devtool</h1>
<div><p>此选项控制是否生成，以及如何生成 source map。</p>
<p>使用 <a href="/plugins/source-map-dev-tool-plugin"><code>SourceMapDevToolPlugin</code></a> 进行更细粒度的配置。查看 <a href="/loaders/source-map-loader"><code>source-map-loader</code></a> 来处理已有的 source map。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#devtool" id="devtool"></a>
<span class="text"><code>devtool</code></span>
<a aria-label="&lt;code&gt;devtool&lt;/code&gt;" class="icon-link" href="#devtool"></a>
</h2>
<p><code>string</code> <code>false</code></p>
<p>选择一种 <a href="http://blog.teamtreehouse.com/introduction-source-maps">source map</a> 格式来增强调试过程。不同的值会明显影响到构建(build)和重新构建(rebuild)的速度。</p>
<blockquote class="tip"><div class="tip-content"> webpack 仓库中包含一个 <a href="https://github.com/webpack/webpack/tree/master/examples/source-map">显示所有 <code>devtool</code> 变体效果的示例</a>。这些例子或许会有助于你理解这些差异之处。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 你可以直接使用 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 来替代使用 <code>devtool</code> 选项，因为它有更多的选项。切勿同时使用 <code>devtool</code> 选项和 <code>SourceMapDevToolPlugin</code>/<code>EvalSourceMapDevToolPlugin</code> 插件。<code>devtool</code> 选项在内部添加过这些插件，所以你最终将应用两次插件。 </div></blockquote>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">devtool</div><div class="table-th">构建速度</div><div class="table-th">重新构建速度</div><div class="table-th">生产环境</div><div class="table-th">品质(quality)</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        (none)
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        +++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        +++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        打包后的代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        eval
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        +++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        +++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        生成后的代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        cheap-eval-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        +
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        ++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        转换过的代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        cheap-module-eval-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        o
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        ++
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        eval-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        +
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        cheap-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        +
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        o
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        转换过的代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        cheap-module-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        o
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        -
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        inline-cheap-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        +
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        o
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        转换过的代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        inline-cheap-module-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        o
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        -
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码（仅限行）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        inline-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        no
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        hidden-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        原始源代码
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        devtool
    </div>
<div class="table-td-content">
        nosources-source-map
    </div>
</div><div class="table-td">
<div class="table-td-title">
        构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        重新构建速度
    </div>
<div class="table-td-content">
        --
    </div>
</div><div class="table-td">
<div class="table-td-title">
        生产环境
    </div>
<div class="table-td-content">
        yes
    </div>
</div><div class="table-td">
<div class="table-td-title">
        品质(quality)
    </div>
<div class="table-td-content">
        无源代码内容
    </div>
</div></div>
</div>
</div>
</div><blockquote class="tip"><div class="tip-content"> <code>+++</code> 非常快速, <code>++</code> 快速, <code>+</code> 比较快, <code>o</code> 中等, <code>-</code> 比较慢, <code>--</code> 慢 </div></blockquote><p>其中一些值适用于开发环境，一些适用于生产环境。对于开发环境，通常希望更快速的 source map，需要添加到 bundle 中以增加体积为代价，但是对于生产环境，则希望更精准的 source map，需要从 bundle 中分离并独立存在。</p>
<blockquote class="warning"><div class="tip-content"> Chrome 中的 source map 有一些问题。<a href="https://github.com/webpack/webpack/issues/3165">我们需要你的帮助！</a>。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 查看 <a href="/configuration/output#output-sourcemapfilename"><code>output.sourceMapFilename</code></a> 自定义生成的 source map 的文件名。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#品质说明-quality-" id="品质说明-quality-"></a>
<span class="text">品质说明(quality)</span>
<a aria-label="品质说明(quality)" class="icon-link" href="#品质说明-quality-"></a>
</h3>
<p><code>打包后的代码</code> - 将所有生成的代码视为一大块代码。你看不到相互分离的模块。</p>
<p><code>生成后的代码</code> - 每个模块相互分离，并用模块名称进行注释。可以看到 webpack 生成的代码。示例：你会看到类似 <code>var module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42); module__WEBPACK_IMPORTED_MODULE_1__.a();</code>，而不是 <code>import {test} from "module"; test();</code>。</p>
<p><code>转换过的代码</code> - 每个模块相互分离，并用模块名称进行注释。可以看到 webpack 转换前、loader 转译后的代码。示例：你会看到类似 <code>import {test} from "module"; var A = function(_test) { ... }(test);</code>，而不是 <code>import {test} from "module"; class A extends test {}</code>。</p>
<p><code>原始源代码</code> - 每个模块相互分离，并用模块名称进行注释。你会看到转译之前的代码，正如编写它时。这取决于 loader 支持。</p>
<p><code>无源代码内容</code> - source map 中不包含源代码内容。浏览器通常会尝试从 web 服务器或文件系统加载源代码。你必须确保正确设置 <a href="/configuration/output/#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>，以匹配源代码的 url。</p>
<p><code>（仅限行）</code> - source map 被简化为每行一个映射。这通常意味着每个语句只有一个映射（假设你使用这种方式）。这会妨碍你在语句级别上调试执行，也会妨碍你在每行的一些列上设置断点。与压缩后的代码组合后，映射关系是不可能实现的，因为压缩工具通常只会输出一行。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#对于开发环境" id="对于开发环境"></a>
<span class="text">对于开发环境</span>
<a aria-label="对于开发环境" class="icon-link" href="#对于开发环境"></a>
</h3>
<p>以下选项非常适合开发环境：</p>
<p><code>eval</code> - 每个模块都使用 <code>eval()</code> 执行，并且都有 <code>//@ sourceURL</code>。此选项会非常快地构建。主要缺点是，由于会映射到转换后的代码，而不是映射到原始代码（没有从 loader 中获取 source map），所以不能正确的显示行数。</p>
<p><code>eval-source-map</code> - 每个模块使用 <code>eval()</code> 执行，并且 source map 转换为 DataUrl 后添加到 <code>eval()</code> 中。初始化 source map 时比较慢，但是会在重新构建时提供比较快的速度，并且生成实际的文件。行数能够正确映射，因为会映射到原始代码中。它会生成用于开发环境的最佳品质的 source map。</p>
<p><code>cheap-eval-source-map</code> - 类似 <code>eval-source-map</code>，每个模块使用 <code>eval()</code> 执行。这是 "cheap(低开销)" 的 source map，因为它没有生成列映射(column mapping)，只是映射行数。它会忽略源自 loader 的 source map，并且仅显示转译后的代码，就像 <code>eval</code> devtool。</p>
<p><code>cheap-module-eval-source-map</code> - 类似 <code>cheap-eval-source-map</code>，并且，在这种情况下，源自 loader 的 source map 会得到更好的处理结果。然而，loader source map 会被简化为每行一个映射(mapping)。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#特定场景" id="特定场景"></a>
<span class="text">特定场景</span>
<a aria-label="特定场景" class="icon-link" href="#特定场景"></a>
</h3>
<p>以下选项对于开发环境和生产环境并不理想。他们是一些特定场景下需要的，例如，针对一些第三方工具。</p>
<p><code>inline-source-map</code> - source map 转换为 DataUrl 后添加到 bundle 中。</p>
<p><code>cheap-source-map</code> - 没有列映射(column mapping)的 source map，忽略 loader source map。</p>
<p><code>inline-cheap-source-map</code> - 类似 <code>cheap-source-map</code>，但是 source map 转换为 DataUrl 后添加到 bundle 中。</p>
<p><code>cheap-module-source-map</code> - 没有列映射(column mapping)的 source map，将 loader source map 简化为每行一个映射(mapping)。</p>
<p><code>inline-cheap-module-source-map</code> - 类似 <code>cheap-module-source-map</code>，但是 source mapp 转换为 DataUrl 添加到 bundle 中。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#对于生产环境" id="对于生产环境"></a>
<span class="text">对于生产环境</span>
<a aria-label="对于生产环境" class="icon-link" href="#对于生产环境"></a>
</h3>
<p>这些选项通常用于生产环境中：</p>
<p><code>(none)</code>（省略 <code>devtool</code> 选项） - 不生成 source map。这是一个不错的选择。</p>
<p><code>source-map</code> - 整个 source map 作为一个单独的文件生成。它为 bundle 添加了一个引用注释，以便开发工具知道在哪里可以找到它。</p>
<blockquote class="warning"><div class="tip-content"> 你应该将你的服务器配置为，不允许普通用户访问 source map 文件！ </div></blockquote><p><code>hidden-source-map</code> - 与 <code>source-map</code> 相同，但不会为 bundle 添加引用注释。如果你只想 source map 映射那些源自错误报告的错误堆栈跟踪信息，但不想为浏览器开发工具暴露你的 source map，这个选项会很有用。</p>
<blockquote class="warning"><div class="tip-content"> 你不应将 source map 文件部署到 web 服务器。而是只将其用于错误报告工具。 </div></blockquote><p><code>nosources-source-map</code> - 创建的 source map 不包含 <code>sourcesContent(源代码内容)</code>。它可以用来映射客户端上的堆栈跟踪，而无须暴露所有的源代码。你可以将 source map 文件部署到 web 服务器。</p>
<blockquote class="warning"><div class="tip-content"> 这仍然会暴露反编译后的文件名和结构，但它不会暴露原始代码。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 在使用 <code>terser-webpack-plugin</code> 时，你必须提供 <code>sourceMap：true</code> 选项来启用 source map 支持。 </div></blockquote></div>
<br/><h1>构建目标(targets)</h1>
<div><p>webpack 能够为多种环境或 <em>target</em> 构建编译。想要理解什么是 <code>target</code> 的详细信息，请阅读 <a href="/concepts/targets/">target 概念页面</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#target" id="target"></a>
<span class="text"><code>target</code></span>
<a aria-label="&lt;code&gt;target&lt;/code&gt;" class="icon-link" href="#target"></a>
</h2>
<p><code>string | function (compiler)</code></p>
<p>告知 webpack 为目标(target)指定一个环境。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>string</code></span>
<a aria-label="&lt;code&gt;string&lt;/code&gt;" class="icon-link" href="#string"></a>
</h3>
<p>通过 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js"><code>WebpackOptionsApply</code></a> ，可以支持以下字符串值：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">选项</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>async-node</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为类 Node.js 环境可用（使用 fs 和 vm 异步加载分块）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>electron-main</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为 <a href="https://electronjs.org/">Electron</a> 主进程。
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>electron-renderer</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为 <a href="https://electronjs.org/">Electron</a> 渲染进程，使用 <code>JsonpTemplatePlugin</code>, <code>FunctionModulePlugin</code> 来为浏览器环境提供目标，使用 <code>NodeTargetPlugin</code> 和 <code>ExternalsPlugin</code> 为 CommonJS 和 Electron 内置模块提供目标。
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>node</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为类 Node.js 环境可用（使用 Node.js <code>require</code> 加载 chunk）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>node-webkit</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为 Webkit 可用，并且使用 jsonp 去加载分块。支持 Node.js 内置模块和 <a href="http://docs.nwjs.io/en/latest/"><code>nw.gui</code></a> 导入（实验性质）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>web</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译为类浏览器环境里可用<strong>（默认）</strong>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        选项
    </div>
<div class="table-td-content">
<code>webworker</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        编译成一个 WebWorker
    </div>
</div></div>
</div>
</div>
</div><p>例如，当 <code>target</code> 设置为 <code>"electron-main"</code>，webpack 引入多个 electron 特定的变量。有关使用哪些模板和 externals 的更多信息，你可以 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js#L70-L185">直接参考 webpack 源码</a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>function</code></span>
<a aria-label="&lt;code&gt;function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h3>
<p>如果传入一个函数，此函数调用时会传入一个 compiler 作为参数。如果以上列表中没有一个预定义的目标(target)符合你的要求，请将其设置为一个函数。</p>
<p>例如，如果你不需要使用以上任何插件：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> undefined
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或者可以使用你想要指定的插件</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  target<span class="token punctuation">:</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    compiler<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>JsonpTemplatePlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>output<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>LoaderTargetPlugin</span><span class="token punctuation">(</span><span class="token string">'web'</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>watch 和 watchOptions</h1>
<div><p>webpack 可以监听文件变化，当它们修改后会重新编译。这个页面介绍了如何启用这个功能，以及当 watch 无法正常运行的时候你可以做的一些调整。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#watch" id="watch"></a>
<span class="text"><code>watch</code></span>
<a aria-label="&lt;code&gt;watch&lt;/code&gt;" class="icon-link" href="#watch"></a>
</h2>
<p><code>boolean: false</code></p>
<p>启用 Watch 模式。这意味着在初始构建之后，webpack 将继续监听任何已解析文件的更改。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watch<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 和 <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> 里 Watch 模式默认开启。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#watchoptions" id="watchoptions"></a>
<span class="text"><code>watchOptions</code></span>
<a aria-label="&lt;code&gt;watchOptions&lt;/code&gt;" class="icon-link" href="#watchoptions"></a>
</h2>
<p><code>object</code></p>
<p>一组用来定制 Watch 模式的选项：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
    poll<span class="token punctuation">:</span> <span class="token number">1000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#watchoptions-aggregatetimeout" id="watchoptions-aggregatetimeout"></a>
<span class="text"><code>watchOptions.aggregateTimeout</code></span>
<a aria-label="&lt;code&gt;watchOptions.aggregateTimeout&lt;/code&gt;" class="icon-link" href="#watchoptions-aggregatetimeout"></a>
</h2>
<p><code>number: 300</code></p>
<p>当第一个文件更改，会在重新构建前增加延迟。这个选项允许 webpack 将这段时间内进行的任何其他更改都聚合到一次重新构建里。以毫秒为单位：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    aggregateTimeout<span class="token punctuation">:</span> <span class="token number">600</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#watchoptions-ignored" id="watchoptions-ignored"></a>
<span class="text"><code>watchOptions.ignored</code></span>
<a aria-label="&lt;code&gt;watchOptions.ignored&lt;/code&gt;" class="icon-link" href="#watchoptions-ignored"></a>
</h2>
<p><code>RegExp</code> <a href="https://github.com/micromatch/anymatch"><code>anymatch</code></a></p>
<p>对于某些系统，监听大量文件系统会导致大量的 CPU 或内存占用。这个选项可以排除一些巨大的文件夹，例如 <code>node_modules</code>：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ignored<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>也可以使用多种 <a href="https://github.com/micromatch/anymatch">anymatch</a> 模式：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ignored<span class="token punctuation">:</span> <span class="token punctuation">[</span>'files<span class="token comment">/**/</span><span class="token operator">*</span><span class="token punctuation">.</span>js<span class="token string">', '</span>node_modules'<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果你使用 <code>require.context</code>，webpack 会观察你的整个目录。你应该忽略一些文件和/或(and/or)目录，以便那些不需要监听的文件修改，不会触发重新构建。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#watchoptions-poll" id="watchoptions-poll"></a>
<span class="text"><code>watchOptions.poll</code></span>
<a aria-label="&lt;code&gt;watchOptions.poll&lt;/code&gt;" class="icon-link" href="#watchoptions-poll"></a>
</h2>
<p><code>boolean: false</code> <code>number</code></p>
<p>通过传递 <code>true</code> 开启 <a href="https://whatis.techtarget.com/definition/polling">polling</a>，或者指定毫秒为单位进行轮询。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  watchOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    poll<span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token comment">// 每秒检查一次变动</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果监听没生效，试试这个选项吧。Watch 在 NFS 和 VirtualBox 机器上不适用。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#info-verbosity" id="info-verbosity"></a>
<span class="text"><code>info-verbosity</code></span>
<a aria-label="&lt;code&gt;info-verbosity&lt;/code&gt;" class="icon-link" href="#info-verbosity"></a>
</h2>
<p><code>string: 'none', 'info', 'verbose'</code></p>
<p>控制生命周期消息的详细程度，例如 <code>Started watching files(开始监听文件)...</code> 日志。将 <code>info-verbosity</code> 设置为 <code>verbose</code>，还会额外在增量构建的开始和结束时，向控制台发送消息。<code>info-verbosity</code> 默认设置为 <code>info</code>。</p>
<pre><code class="lang-bash">webpack --watch --info-verbosity verbose
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#故障排除" id="故障排除"></a>
<span class="text">故障排除</span>
<a aria-label="故障排除" class="icon-link" href="#故障排除"></a>
</h2>
<p>如果您遇到任何问题，请查看以下注意事项。对于 webpack 为何会忽略文件修改，这里有多种原因。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#发现修改-但并未做处理" id="发现修改-但并未做处理"></a>
<span class="text">发现修改，但并未做处理</span>
<a aria-label="发现修改，但并未做处理" class="icon-link" href="#发现修改-但并未做处理"></a>
</h3>
<p>在运行 webpack 时，通过使用 --progress 标志，来验证文件修改后，是否没有通知 webpack。如果进度显示保存，但没有输出文件，则可能是配置问题，而不是文件监视问题。</p>
<pre><code class="lang-bash">webpack --watch --progress
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#没有足够的文件观察者" id="没有足够的文件观察者"></a>
<span class="text">没有足够的文件观察者</span>
<a aria-label="没有足够的文件观察者" class="icon-link" href="#没有足够的文件观察者"></a>
</h3>
<p>确认系统中有足够多的文件观察者。如果这个值太低，webpack 中的文件观察者将无法识别修改：</p>
<pre><code class="lang-bash"><span class="token function">cat</span> /proc/sys/fs/inotify/max_user_watches
</code></pre>
<p>Arch 用户，请将 <code>fs.inotify.max_user_watches=524288</code> 添加到 <code>/etc/sysctl.d/99-sysctl.conf</code> 中，然后执行 <code>sysctl --system</code>。 Ubuntu 用户（可能还有其他用户）请执行：<code>echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf &amp;&amp; sudo sysctl -p</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#macos-fsevents-bug" id="macos-fsevents-bug"></a>
<span class="text">macOS fsevents Bug</span>
<a aria-label="macOS fsevents Bug" class="icon-link" href="#macos-fsevents-bug"></a>
</h3>
<p>在 macOS 中，某些情况下文件夹可能会损坏。请参阅<a href="https://github.com/livereload/livereload-site/blob/master/livereload.com/_articles/troubleshooting/os-x-fsevents-bug-may-prevent-monitoring-of-certain-folders.md">这篇文章</a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#windows-paths" id="windows-paths"></a>
<span class="text">Windows Paths</span>
<a aria-label="Windows Paths" class="icon-link" href="#windows-paths"></a>
</h3>
<p>因为 webpack 期望获得多个配置选项的绝对路径（如 <code>__dirname + '/app/folder'</code>），所以 Windows 的路径分隔符 <code>\</code> 可能会破坏某些功能。</p>
<p>使用正确的分隔符。即 <code>path.resolve(__dirname, 'app/folder')</code> 或 <code>path.join(__dirname, 'app', 'folder')</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#vim" id="vim"></a>
<span class="text">Vim</span>
<a aria-label="Vim" class="icon-link" href="#vim"></a>
</h3>
<p>在某些机器上，Vim 预先将 <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#'backupcopy'">backupcopy 选项</a> 设置为 <code>auto</code>。这可能会导致系统的文件监视机制出现问题。将此选项设置为 <code>yes</code> 可以确保创建文件的副本，并在保存时覆盖原始文件。</p>
<p><code>:set backupcopy=yes</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在-webstorm-中保存" id="在-webstorm-中保存"></a>
<span class="text">在 WebStorm 中保存</span>
<a aria-label="在 WebStorm 中保存" class="icon-link" href="#在-webstorm-中保存"></a>
</h3>
<p>使用 JetBrains WebStorm IDE 时，你可能会发现保存修改过的文件，并不会按照预期触发观察者。尝试在设置中禁用<code>安全写入(safe write)</code>选项，该选项确定在原文件被覆盖之前，文件是否先保存到临时位置：取消选中 <code>File &gt; {Settings|Preferences} &gt; Appearance &amp; Behavior &gt; System Settings &gt; Use "safe write" (save changes to a temporary file first)</code>。</p>
</div>
<br/><h1>外部扩展(externals)</h1>
<div><p><code>externals</code> 配置选项提供了「从输出的 bundle 中排除依赖」的方法。相反，所创建的 bundle 依赖于那些存在于用户环境(consumer's environment)中的依赖。此功能通常对 <strong>library 开发人员</strong>来说是最有用的，然而也会有各种各样的应用程序用到它。</p>
<blockquote class="tip"><div class="tip-content"> <strong>用户(consumer)</strong>，在这里是指，引用了「使用 webpack 打包的 library」的所有终端用户的应用程序(end user application)。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#externals" id="externals"></a>
<span class="text"><code>externals</code></span>
<a aria-label="&lt;code&gt;externals&lt;/code&gt;" class="icon-link" href="#externals"></a>
</h2>
<p><code>string</code> <code>object</code> <code>function</code> <code>regex</code></p>
<p><strong>防止</strong>将某些 <code>import</code> 的包(package)<strong>打包</strong>到 bundle 中，而是在运行时(runtime)再去从外部获取这些<em>扩展依赖(external dependencies)</em>。</p>
<p>例如，从 CDN 引入 <a href="https://jquery.com/">jQuery</a>，而不是把它打包：</p>
<p><strong>index.html</strong></p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://code.jquery.com/jquery-3.1.0.js<span class="token punctuation">"</span></span>
  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk<span class="token punctuation">=</span><span class="token punctuation">"</span></span>
  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>anonymous<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    jquery<span class="token punctuation">:</span> <span class="token string">'jQuery'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这样就剥离了那些不需要改动的依赖模块，换句话，下面展示的代码还可以正常运行：</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> $ <span class="token keyword">from</span> <span class="token string">'jquery'</span><span class="token punctuation">;</span>

<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.my-element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>具有外部依赖(external dependency)的 bundle 可以在各种模块上下文(module context)中使用，例如 <a href="/concepts/modules">CommonJS, AMD, 全局变量和 ES2015 模块</a>。外部 library 可能是以下任何一种形式：</p>
<ul>
<li><strong>root</strong>：可以通过一个全局变量访问 library（例如，通过 script 标签）。</li>
<li><strong>commonjs</strong>：可以将 library 作为一个 CommonJS 模块访问。</li>
<li><strong>commonjs2</strong>：和上面的类似，但导出的是 <code>module.exports.default</code>.</li>
<li><strong>amd</strong>：类似于 <code>commonjs</code>，但使用 AMD 模块系统。</li>
</ul>
<p>可以接受各种语法……</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text">string</span>
<a aria-label="string" class="icon-link" href="#string"></a>
</h3>
<p>请查看上面的例子。属性名称是 <code>jquery</code>，表示应该排除 <code>import $ from 'jquery'</code> 中的 <code>jquery</code> 模块。为了替换这个模块，<code>jQuery</code> 的值将被用来检索一个全局的 <code>jQuery</code> 变量。换句话说，当设置为一个字符串时，它将被视为<code>全局的</code>（定义在上面和下面）。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#array" id="array"></a>
<span class="text">array</span>
<a aria-label="array" class="icon-link" href="#array"></a>
</h3>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    subtract<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./math'</span><span class="token punctuation">,</span> <span class="token string">'subtract'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><code>subtract: ['./math', 'subtract']</code> 转换为父子结构，其中 <code>./math</code> 是父模块，而 bundle 只引用 <code>subtract</code> 变量下的子集。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#object" id="object"></a>
<span class="text">object</span>
<a aria-label="object" class="icon-link" href="#object"></a>
</h3>
<blockquote class="warning"><div class="tip-content"> An object with <code>{ root, amd, commonjs, ... }</code> is only allowed for <a href="/configuration/output/#output-librarytarget"><code>libraryTarget: 'umd'</code></a>. It's not allowed for other library targets. </div></blockquote><pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    react<span class="token punctuation">:</span> <span class="token string">'react'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 或者</span>

  externals <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    lodash <span class="token punctuation">:</span> <span class="token punctuation">{</span>
      commonjs<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
      amd<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
      root<span class="token punctuation">:</span> <span class="token string">'_'</span> <span class="token comment">// 指向全局变量</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token comment">// 或者</span>

  externals <span class="token punctuation">:</span> <span class="token punctuation">{</span>
    subtract <span class="token punctuation">:</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'math'</span><span class="token punctuation">,</span> <span class="token string">'subtract'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>此语法用于描述外部 library 所有可用的访问方式。这里 <code>lodash</code> 这个外部 library 可以在 AMD 和 CommonJS 模块系统中通过 <code>lodash</code> 访问，但在全局变量形式下用 <code>_</code> 访问。<code>subtract</code> 可以通过全局 <code>math</code> 对象下的属性 <code>subtract</code> 访问（例如 <code>window['math']['subtract']</code>）。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text">function</span>
<a aria-label="function" class="icon-link" href="#function"></a>
</h3>
<p>对于 webpack 外部化，通过定义函数来控制行为，可能会很有帮助。例如，<a href="https://www.npmjs.com/package/webpack-node-externals">webpack-node-externals</a> 能够排除 <code>node_modules</code> 目录中所有模块，还提供一些选项，比如白名单 package(whitelist package)。</p>
<p>基本配置如下：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/^yourregex$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'commonjs '</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><code>'commonjs'+ request</code> 定义了需要外部化的模块类型。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#regex" id="regex"></a>
<span class="text">regex</span>
<a aria-label="regex" class="icon-link" href="#regex"></a>
</h3>
<p>匹配给定正则表达式的每个依赖，都将从输出 bundle 中排除。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token regex">/^(jquery|\$)$/i</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这个示例中，所有名为 <code>jQuery</code> 的依赖（忽略大小写），或者 <code>$</code>，都会被外部化。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#combining-syntaxes" id="combining-syntaxes"></a>
<span class="text">Combining syntaxes</span>
<a aria-label="Combining syntaxes" class="icon-link" href="#combining-syntaxes"></a>
</h3>
<p>Sometimes you may want to use a combination of the above syntaxes. This can be done in the following manner:</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token comment">// String</span>
      react<span class="token punctuation">:</span> <span class="token string">'react'</span><span class="token punctuation">,</span>
      <span class="token comment">// Object</span>
      lodash <span class="token punctuation">:</span> <span class="token punctuation">{</span>
        commonjs<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
        amd<span class="token punctuation">:</span> <span class="token string">'lodash'</span><span class="token punctuation">,</span>
        root<span class="token punctuation">:</span> <span class="token string">'_'</span> <span class="token comment">// indicates global variable</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token comment">// Array</span>
      subtract<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./math'</span><span class="token punctuation">,</span> <span class="token string">'subtract'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Function</span>
    <span class="token keyword">function</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> request<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/^yourregex$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">'commonjs '</span> <span class="token operator">+</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Regex</span>
    <span class="token regex">/^(jquery|\$)$/i</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>关于如何使用此 externals 配置的更多信息，请参考<a href="/guides/author-libraries">如何编写 library</a>。</p>
</div>
<br/><h1>Node.js</h1>
<div><p>这些选项可以配置是否 polyfill 或 mock 某些 <a href="https://nodejs.org/docs/latest/api/globals.html">Node.js 全局变量</a>和模块。这可以使最初为 Node.js 环境编写的代码，在其他环境（如浏览器）中运行。</p>
<p>此功能由 webpack 内部的 <a href="https://github.com/webpack/webpack/blob/master/lib/NodeStuffPlugin.js"><code>NodeStuffPlugin</code></a> 插件提供。如果 target 是 "web"（默认）或 "webworker"，那么 <a href="https://github.com/webpack/webpack/blob/master/lib/node/NodeSourcePlugin.js"><code>NodeSourcePlugin</code></a> 插件也会被激活。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node" id="node"></a>
<span class="text"><code>node</code></span>
<a aria-label="&lt;code&gt;node&lt;/code&gt;" class="icon-link" href="#node"></a>
</h2>
<p><code>object</code></p>
<p>是一个对象，其中每个属性都是 Node.js 全局变量或模块的名称，每个 value 是以下其中之一……</p>
<ul>
<li><code>true</code>：提供 polyfill。</li>
<li><code>"mock"</code>：提供 mock 实现预期接口，但功能很少或没有。</li>
<li><code>"empty"</code>：提供空对象。</li>
<li><code>false</code>: 什么都不提供。预期获取此对象的代码，可能会因为获取不到此对象，触发 <code>ReferenceError</code> 而崩溃。尝试使用 <code>require('modulename')</code> 导入模块的代码，可能会触发 <code>Cannot find module "modulename"</code> 错误。</li>
</ul>
<blockquote class="warning"><div class="tip-content"> 注意，不是每个 Node 全局变量都支持所有选项。对于不支持的键值组合(property-value combination)，compiler 会抛出错误。更多细节请查看接下来的章节。 </div></blockquote><p>这里是默认值：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  node<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    global<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    process<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    __filename<span class="token punctuation">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span>
    __dirname<span class="token punctuation">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span>
    Buffer<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    setImmediate<span class="token punctuation">:</span> <span class="token boolean">true</span>

    <span class="token comment">// 更多选项，请查看“其他 Node.js 核心库”。</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>从 webpack 3.0.0 开始，<code>node</code> 选项可能被设置为 <code>false</code>，以完全关闭 <code>NodeStuffPlugin</code> 和 <code>NodeSourcePlugin</code> 插件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-console" id="node-console"></a>
<span class="text"><code>node.console</code></span>
<a aria-label="&lt;code&gt;node.console&lt;/code&gt;" class="icon-link" href="#node-console"></a>
</h2>
<p><code>boolean | "mock"</code></p>
<p>默认值：<code>false</code></p>
<p>浏览器提供一个 <code>console</code> 对象，具有非常类似 Node.js <code>console</code> 的接口，所以通常不需要 polyfill。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-process" id="node-process"></a>
<span class="text"><code>node.process</code></span>
<a aria-label="&lt;code&gt;node.process&lt;/code&gt;" class="icon-link" href="#node-process"></a>
</h2>
<p><code>boolean | "mock"</code></p>
<p>默认值：<code>true</code></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-global" id="node-global"></a>
<span class="text"><code>node.global</code></span>
<a aria-label="&lt;code&gt;node.global&lt;/code&gt;" class="icon-link" href="#node-global"></a>
</h2>
<p><code>boolean</code></p>
<p>默认值：<code>true</code></p>
<p>关于此对象的准确行为，请查看<a href="https://github.com/webpack/webpack/blob/master/buildin/global.js">源码</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-__filename" id="node-__filename"></a>
<span class="text"><code>node.__filename</code></span>
<a aria-label="&lt;code&gt;node.__filename&lt;/code&gt;" class="icon-link" href="#node-__filename"></a>
</h2>
<p><code>boolean | "mock"</code></p>
<p>默认值：<code>"mock"</code></p>
<p>选项：</p>
<ul>
<li><code>true</code>: <strong>输入</strong>文件的文件名，是相对于 <a href="https://webpack.js.org/configuration/entry-context/#context"><code>context</code> 选项</a>。</li>
<li><code>false</code>: 常规的 Node.js <code>__filename</code> 行为。在 Node.js 环境中运行时，<strong>输出</strong>文件的文件名。</li>
<li><code>"mock"</code>: value 填充为 <code>"index.js"</code>.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-__dirname" id="node-__dirname"></a>
<span class="text"><code>node.__dirname</code></span>
<a aria-label="&lt;code&gt;node.__dirname&lt;/code&gt;" class="icon-link" href="#node-__dirname"></a>
</h2>
<p><code>boolean | "mock"</code></p>
<p>默认值：<code>"mock"</code></p>
<p>选项：</p>
<ul>
<li><code>true</code>: <strong>输入</strong>文件的目录名，是相对于 <a href="https://webpack.js.org/configuration/entry-context/#context"><code>context</code> 选项</a>。</li>
<li><code>false</code>: 常规的 Node.js <code>__dirname</code> 行为。在 Node.js 环境中运行时，<strong>输出</strong>文件的目录名。</li>
<li><code>"mock"</code>: value 填充为 <code>"/"</code>。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-buffer" id="node-buffer"></a>
<span class="text"><code>node.Buffer</code></span>
<a aria-label="&lt;code&gt;node.Buffer&lt;/code&gt;" class="icon-link" href="#node-buffer"></a>
</h2>
<p><code>boolean | "mock"</code></p>
<p>默认值：<code>true</code></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-setimmediate" id="node-setimmediate"></a>
<span class="text"><code>node.setImmediate</code></span>
<a aria-label="&lt;code&gt;node.setImmediate&lt;/code&gt;" class="icon-link" href="#node-setimmediate"></a>
</h2>
<p><code>boolean | "mock" | "empty"</code></p>
<p>默认值：<code>true</code></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#其他-node-js-核心库-node-js-core-libraries-" id="其他-node-js-核心库-node-js-core-libraries-"></a>
<span class="text">其他 Node.js 核心库(Node.js core libraries)</span>
<a aria-label="其他 Node.js 核心库(Node.js core libraries)" class="icon-link" href="#其他-node-js-核心库-node-js-core-libraries-"></a>
</h2>
<p><code>boolean | "mock" | "empty"</code></p>
<blockquote class="warning"><div class="tip-content"> 只有当 target 是未指定、"web" 或 "webworker" 这三种情况时，此选项才会被激活（通过 <code>NodeSourcePlugin</code>）。 </div></blockquote><p>当 <code>NodeSourcePlugin</code> 插件启用时，则会使用 <a href="https://github.com/webpack/node-libs-browser"><code>node-libs-browser</code></a> 来对 Node.js 核心库 polyfill。请查看 <a href="https://github.com/webpack/node-libs-browser#readme">Node.js 核心库及其 polyfills</a> 列表。</p>
<p>默认情况下，如果有一个已知的 polyfill，webpack 会对每个 library 进行 polyfill，如果没有，则 webpack 不会执行任何操作。在后一种情况下，如果模块名称配置为 <code>false</code> 值，webpack 表现为不会执行任何操作。</p>
<blockquote class="tip"><div class="tip-content"> 为了导入内置的模块，使用 <a href="/api/module-variables/#__non_webpack_require__-webpack-specific-"><code>__non_webpack_require__</code></a>，例如，使用 <code>__non_webpack_require__('modulename')</code> 而不是 <code>require('modulename')</code>。 </div></blockquote><p>示例：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  node<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    dns<span class="token punctuation">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span>
    fs<span class="token punctuation">:</span> <span class="token string">'empty'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>性能(performance)</h1>
<div><p>这些选项可以控制 webpack 如何通知「资源(asset)和入口起点超过指定文件限制」。
此功能受到 <a href="https://github.com/webpack/webpack/issues/3216">webpack 性能评估</a>的启发。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#performance" id="performance"></a>
<span class="text"><code>performance</code></span>
<a aria-label="&lt;code&gt;performance&lt;/code&gt;" class="icon-link" href="#performance"></a>
</h2>
<p><code>object</code></p>
<p>配置如何展示性能提示。例如，如果一个资源超过 250kb，webpack 会对此输出一个警告来通知你。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#performance-hints" id="performance-hints"></a>
<span class="text"><code>performance.hints</code></span>
<a aria-label="&lt;code&gt;performance.hints&lt;/code&gt;" class="icon-link" href="#performance-hints"></a>
</h2>
<p><code>false | "error" | "warning"</code></p>
<p>打开/关闭提示。此外，当找到提示时，告诉 webpack 抛出一个错误或警告。此属性默认设置为 <code>"warning"</code>。</p>
<p>给定一个创建后超过 250kb 的资源：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hints<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>不展示警告或错误提示。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hints<span class="token punctuation">:</span> <span class="token string">'warning'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>将展示一条警告，通知你这是体积大的资源。在开发环境，我们推荐这样。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hints<span class="token punctuation">:</span> <span class="token string">'error'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>将展示一条错误，通知你这是体积大的资源。在生产环境构建时，我们推荐使用 <code>hints: "error"</code>，有助于防止把体积巨大的 bundle 部署到生产环境，从而影响网页的性能。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#performance-maxentrypointsize" id="performance-maxentrypointsize"></a>
<span class="text"><code>performance.maxEntrypointSize</code></span>
<a aria-label="&lt;code&gt;performance.maxEntrypointSize&lt;/code&gt;" class="icon-link" href="#performance-maxentrypointsize"></a>
</h2>
<p><code>int</code></p>
<p>入口起点表示针对指定的入口，对于所有资源，要充分利用初始加载时(initial load time)期间。此选项根据入口起点的最大体积，控制 webpack 何时生成性能提示。默认值是：<code>250000</code> (bytes)。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    maxEntrypointSize<span class="token punctuation">:</span> <span class="token number">400000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#performance-maxassetsize" id="performance-maxassetsize"></a>
<span class="text"><code>performance.maxAssetSize</code></span>
<a aria-label="&lt;code&gt;performance.maxAssetSize&lt;/code&gt;" class="icon-link" href="#performance-maxassetsize"></a>
</h2>
<p><code>int</code></p>
<p>资源(asset)是从 webpack 生成的任何文件。此选项根据单个资源体积，控制 webpack 何时生成性能提示。默认值是：<code>250000</code> (bytes)。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    maxAssetSize<span class="token punctuation">:</span> <span class="token number">100000</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#performance-assetfilter" id="performance-assetfilter"></a>
<span class="text"><code>performance.assetFilter</code></span>
<a aria-label="&lt;code&gt;performance.assetFilter&lt;/code&gt;" class="icon-link" href="#performance-assetfilter"></a>
</h2>
<p><code>Function</code></p>
<p>此属性允许 webpack 控制用于计算性能提示的文件。默认函数如下：</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">assetFilter</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">!</span><span class="token punctuation">(</span><span class="token regex">/\.map$/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>你可以通过传递自己的函数来覆盖此属性：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  performance<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    assetFilter<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>assetFilename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> assetFilename<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">'.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>以上示例将只给出 <code>.js</code> 文件的性能提示。</p>
</div>
<br/><h1>统计信息(stats)</h1>
<div><p>如果你不希望使用 <code>quiet</code> 或 <code>noInfo</code> 这样的不显示信息，而是又不想得到全部的信息，只是想要获取某部分 bundle 的信息，使用 stats 选项是比较好的折衷方式。</p>
<blockquote class="tip"><div class="tip-content"> 对于 webpack-dev-server，这个属性要放在 <code>devServer</code> 对象里。 </div></blockquote><blockquote class="warning"><div class="tip-content"> 在使用 Node.js API 时，此选项无效。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#stats" id="stats"></a>
<span class="text"><code>stats</code></span>
<a aria-label="&lt;code&gt;stats&lt;/code&gt;" class="icon-link" href="#stats"></a>
</h2>
<p><code>object</code> <code>string</code></p>
<p>有一些预设选项，可作为快捷方式。像这样使用它们：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token punctuation">:</span> <span class="token string">'errors-only'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Preset</div><div class="table-th">Alternative</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Preset
    </div>
<div class="table-td-content">
<code>"errors-only"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Alternative
    </div>
<div class="table-td-content">
<em>none</em>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        只在发生错误时输出
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Preset
    </div>
<div class="table-td-content">
<code>"minimal"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Alternative
    </div>
<div class="table-td-content">
<em>none</em>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        只在发生错误或有新的编译时输出
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Preset
    </div>
<div class="table-td-content">
<code>"none"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Alternative
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        没有输出
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Preset
    </div>
<div class="table-td-content">
<code>"normal"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Alternative
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        标准输出
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Preset
    </div>
<div class="table-td-content">
<code>"verbose"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Alternative
    </div>
<div class="table-td-content">
<em>none</em>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        全部输出
    </div>
</div></div>
</div>
</div>
</div><p>对于更加精细的控制，下列这些选项可以准确地控制并展示你想要的信息。请注意，此对象中的所有选项都是可选的。</p>
<!-- eslint-skip -->
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 未定义选项时，stats 选项的备用值(fallback value)（优先级高于 webpack 本地默认值）</span>
    all<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span>

    <span class="token comment">// 添加资源信息</span>
    assets<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 对资源按指定的字段进行排序</span>
    <span class="token comment">// 你可以使用 `!field` 来反转排序。</span>
    <span class="token comment">// Some possible values: 'id' (default), 'name', 'size', 'chunks', 'failed', 'issuer'</span>
    <span class="token comment">// For a complete list of fields see the bottom of the page</span>
    assetsSort<span class="token punctuation">:</span> <span class="token string">"field"</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加构建日期和构建时间信息</span>
    builtAt<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加缓存（但未构建）模块的信息</span>
    cached<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 显示缓存的资源（将其设置为 `false` 则仅显示输出的文件）</span>
    cachedAssets<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 children 信息</span>
    children<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 chunk 信息（设置为 `false` 能允许较少的冗长输出）</span>
    chunks<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 namedChunkGroups 信息</span>
    chunkGroups<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 将构建模块信息添加到 chunk 信息</span>
    chunkModules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 chunk 和 chunk merge 来源的信息</span>
    chunkOrigins<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 按指定的字段，对 chunk 进行排序</span>
    <span class="token comment">// 你可以使用 `!field` 来反转排序。默认是按照 `id` 排序。</span>
    <span class="token comment">// Some other possible values: 'name', 'size', 'chunks', 'failed', 'issuer'</span>
    <span class="token comment">// For a complete list of fields see the bottom of the page</span>
    chunksSort<span class="token punctuation">:</span> <span class="token string">"field"</span><span class="token punctuation">,</span>

    <span class="token comment">// 用于缩短 request 的上下文目录</span>
    context<span class="token punctuation">:</span> <span class="token string">"../src/"</span><span class="token punctuation">,</span>

    <span class="token comment">// `webpack --colors` 等同于</span>
    colors<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 显示每个模块到入口起点的距离(distance)</span>
    depth<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 通过对应的 bundle 显示入口起点</span>
    entrypoints<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 --env information</span>
    env<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加错误信息</span>
    errors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加错误的详细信息（就像解析日志一样）</span>
    errorDetails<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 将资源显示在 stats 中的情况排除</span>
    <span class="token comment">// 这可以通过 String, RegExp, 获取 assetName 的函数来实现</span>
    <span class="token comment">// 并返回一个布尔值或如下所述的数组。</span>
    excludeAssets<span class="token punctuation">:</span> <span class="token string">"filter"</span> <span class="token operator">|</span> <span class="token operator">/</span>filter<span class="token operator">/</span> <span class="token operator">|</span> <span class="token punctuation">(</span>assetName<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token operator">|</span>
      <span class="token punctuation">[</span><span class="token string">"filter"</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">/</span>filter<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>assetName<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// 将模块显示在 stats 中的情况排除</span>
    <span class="token comment">// 这可以通过 String, RegExp, 获取 moduleSource 的函数来实现</span>
    <span class="token comment">// 并返回一个布尔值或如下所述的数组。</span>
    excludeModules<span class="token punctuation">:</span> <span class="token string">"filter"</span> <span class="token operator">|</span> <span class="token operator">/</span>filter<span class="token operator">/</span> <span class="token operator">|</span> <span class="token punctuation">(</span>moduleSource<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token operator">|</span>
      <span class="token punctuation">[</span><span class="token string">"filter"</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">/</span>filter<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>moduleSource<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// 查看 excludeModules</span>
    exclude<span class="token punctuation">:</span> <span class="token string">"filter"</span> <span class="token operator">|</span> <span class="token operator">/</span>filter<span class="token operator">/</span> <span class="token operator">|</span> <span class="token punctuation">(</span>moduleSource<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span> <span class="token operator">|</span> <span class="token boolean">false</span> <span class="token operator">|</span>
          <span class="token punctuation">[</span><span class="token string">"filter"</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token operator">/</span>filter<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token punctuation">(</span>moduleSource<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 compilation 的哈希值</span>
    hash<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 设置要显示的模块的最大数量</span>
    maxModules<span class="token punctuation">:</span> <span class="token number">15</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加构建模块信息</span>
    modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 按指定的字段，对模块进行排序</span>
    <span class="token comment">// 你可以使用 `!field` 来反转排序。默认是按照 `id` 排序。</span>
    <span class="token comment">// Some other possible values: 'name', 'size', 'chunks', 'failed', 'issuer'</span>
    <span class="token comment">// For a complete list of fields see the bottom of the page</span>
    modulesSort<span class="token punctuation">:</span> <span class="token string">"field"</span><span class="token punctuation">,</span>

    <span class="token comment">// 显示警告/错误的依赖和来源（从 webpack 2.5.0 开始）</span>
    moduleTrace<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 当文件大小超过 `performance.maxAssetSize` 时显示性能提示</span>
    performance<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 显示模块的导出</span>
    providedExports<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 public path 的信息</span>
    publicPath<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加模块被引入的原因</span>
    reasons<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加模块的源码</span>
    source<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加时间信息</span>
    timings<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 显示哪个模块导出被用到</span>
    usedExports<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加 webpack 版本信息</span>
    version<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 添加警告</span>
    warnings<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 过滤警告显示（从 webpack 2.4.0 开始），</span>
    <span class="token comment">// 可以是 String, Regexp, 一个获取 warning 的函数</span>
    <span class="token comment">// 并返回一个布尔值或上述组合的数组。第一个匹配到的为胜(First match wins.)。</span>
    warningsFilter<span class="token punctuation">:</span> <span class="token string">"filter"</span> <span class="token operator">|</span> <span class="token operator">/</span>filter<span class="token operator">/</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token string">"filter"</span><span class="token punctuation">,</span> <span class="token operator">/</span>filter<span class="token operator">/</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">(</span>warning<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>If you want to use one of the pre-defined behaviours e.g. <code>'minimal'</code> but still override one or more of the rules, see <a href="https://github.com/webpack/webpack/blob/master/lib/Stats.js#L1394-L1401">the source code</a>. You would want to copy the configuration options from <code>case 'minimal': ...</code> and add your additional rules while providing an object to <code>stats</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//..</span>
  stats<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// copied from `'minimal'`</span>
    all<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    maxModules<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    errors<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    warnings<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// our additional options</span>
    moduleTrace<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    errorDetails<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sorting-fields" id="sorting-fields"></a>
<span class="text">Sorting fields</span>
<a aria-label="Sorting fields" class="icon-link" href="#sorting-fields"></a>
</h3>
<p>For <code>assetsSort</code>, <code>chunksSort</code> and <code>moduleSort</code> there are several possible fields that you can sort items by:</p>
<ul>
<li><code>id</code> is the item's id;</li>
<li><code>name</code> - a item's name that was assigned to it upon importing;</li>
<li><code>size</code> - a size of item in bytes;</li>
<li><code>chunks</code> - what chunks the item originates from (for example, if there are multiple subchunks for one chunk - the subchunks will be grouped together according to their main chunk);</li>
<li><code>errors</code> - amount of errors in items;</li>
<li><code>warnings</code> - amount of warnings in items;</li>
<li><code>failed</code> - whether the item has failed compilation;</li>
<li><code>cacheable</code> - whether the item is cacheable;</li>
<li><code>built</code> - whether the asset has been built;</li>
<li><code>prefetched</code> - whether the asset will be prefetched;</li>
<li><code>optional</code> - whether the asset is optional;</li>
<li><code>identifier</code> - identifier of the item;</li>
<li><code>index</code> - item's processing index;</li>
<li><code>index2</code></li>
<li><code>profile</code></li>
<li><code>issuer</code> - an identifier of the issuer;</li>
<li><code>issuerId</code> - an id of the issuer;</li>
<li><code>issuerName</code> - a name of the issuer;</li>
<li><code>issuerPath</code> - a full issuer object. There's no real need to sort by this field;</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#colors" id="colors"></a>
<span class="text">Colors</span>
<a aria-label="Colors" class="icon-link" href="#colors"></a>
</h3>
<p>You can specify your own terminal output colors using <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">ANSI escape sequences</a></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  colors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    green<span class="token punctuation">:</span> <span class="token string">'\u001b[32m'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>其它选项(other options)</h1>
<div><p>这里是 webpack 支持的其它选项。</p>
<blockquote class="warning"><div class="tip-content"> 寻求帮助：这个页面还在更新中，如果你发现本页面内有描述不准确或者不完整，请在 <a href="https://github.com/webpack/webpack.js.org">webpack 的文档仓库</a>中创建 issue 或者 pull request </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#amd" id="amd"></a>
<span class="text"><code>amd</code></span>
<a aria-label="&lt;code&gt;amd&lt;/code&gt;" class="icon-link" href="#amd"></a>
</h2>
<p><code>object</code></p>
<p>设置 <code>require.amd</code> 或 <code>define.amd</code> 的值：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  amd<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    jQuery<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>某些流行的模块是按照 AMD 规范编写的，最引人瞩目的 jQuery 版本在 1.7.0 到 1.9.1，如果 loader 提示它对页面包含的多个版本采取了<a href="https://github.com/amdjs/amdjs-api/wiki/jQuery-and-AMD">特殊许可</a>时，才会注册为 AMD 模块。</p>
<p>许可权限是具有「限制指定版本注册」或「支持有不同定义模块的不同沙盒」的能力。</p>
<p>此选项允许将模块查找的键(key)设置为真值(truthy value)。
发生这种情况时，webpack 中的 AMD 支持将忽略定义的名称。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#bail" id="bail"></a>
<span class="text"><code>bail</code></span>
<a aria-label="&lt;code&gt;bail&lt;/code&gt;" class="icon-link" href="#bail"></a>
</h2>
<p><code>boolean</code></p>
<p>在第一个错误出现时抛出失败结果，而不是容忍它。默认情况下，当使用 HMR 时，webpack 会将在终端以及浏览器控制台中，以红色文字记录这些错误，但仍然继续进行打包。要启用它：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  bail<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这将迫使 webpack 退出其打包过程。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#cache" id="cache"></a>
<span class="text"><code>cache</code></span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt;" class="icon-link" href="#cache"></a>
</h2>
<p><code>boolean</code> <code>object</code></p>
<p>缓存生成的 webpack 模块和 chunk，来改善构建速度。缓存默认在观察模式(watch mode)启用。禁用缓存只需简单传入：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果传递一个对象，webpack 将使用这个对象进行缓存。保持对此对象的引用，将可以在 compiler 调用之间共享同一缓存：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">let</span> SharedCache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  cache<span class="token punctuation">:</span> SharedCache
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 不要在不同选项的调用之间共享缓存。 </div></blockquote><blockquote class="todo"><div class="tip-content"> Elaborate on the warning and example - calls with different configuration options? </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader" id="loader"></a>
<span class="text"><code>loader</code></span>
<a aria-label="&lt;code&gt;loader&lt;/code&gt;" class="icon-link" href="#loader"></a>
</h2>
<p><code>object</code></p>
<p>在 loader 上下文中暴露自定义值。</p>
<blockquote class="todo"><div class="tip-content"> Add an example... </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#parallelism" id="parallelism"></a>
<span class="text"><code>parallelism</code></span>
<a aria-label="&lt;code&gt;parallelism&lt;/code&gt;" class="icon-link" href="#parallelism"></a>
</h2>
<p><code>number: 100</code></p>
<p>Limit the number of parallel processed modules. Can be used to fine tune performance or to get more reliable profiling results.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#profile" id="profile"></a>
<span class="text"><code>profile</code></span>
<a aria-label="&lt;code&gt;profile&lt;/code&gt;" class="icon-link" href="#profile"></a>
</h2>
<p><code>boolean</code></p>
<p>捕获一个应用程序"配置文件"，包括统计和提示，然后可以使用 <a href="https://webpack.github.io/analyse/">Analyze</a> 分析工具进行详细分析。</p>
<blockquote class="tip"><div class="tip-content"> 使用 <a href="https://www.npmjs.com/package/stats-webpack-plugin">StatsPlugin</a> 可以更好地控制生成的配置文件。 </div></blockquote><blockquote class="tip"><div class="tip-content"> Combine with <code>parallelism: 1</code> for better results. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#recordspath" id="recordspath"></a>
<span class="text"><code>recordsPath</code></span>
<a aria-label="&lt;code&gt;recordsPath&lt;/code&gt;" class="icon-link" href="#recordspath"></a>
</h2>
<p><code>string</code></p>
<p>开启这个选项可以生成一个 JSON 文件，其中含有 webpack 的 "records" 记录 - 即「用于存储跨多次构建(across multiple builds)的模块标识符」的数据片段。可以使用此文件来跟踪在每次构建之间的模块变化。只要简单的设置一下路径,就可以生成这个 JSON 文件：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  recordsPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'records.json'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果你使用了<a href="/guides/code-splitting">代码分离(code splittnig)</a>这样的复杂配置，records 会特别有用。这些数据用于确保拆分 bundle，以便实现你需要的<a href="/guides/caching">缓存(caching)</a>行为。</p>
<blockquote class="tip"><div class="tip-content"> 注意，虽然这个文件是由编译器(compiler)生成的，但你可能仍然希望在源代码管理中追踪它，以便随时记录它的变化情况。 </div></blockquote><blockquote class="warning"><div class="tip-content"> 设置 <code>recordsPath</code> 本质上会把 <code>recordsInputPath</code> 和 <code>recordsOutputPath</code> 都设置成相同的路径。通常来讲这也是符合逻辑的，除非你决定改变记录文件的名称。可以查看下面的实例： </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#recordsinputpath" id="recordsinputpath"></a>
<span class="text"><code>recordsInputPath</code></span>
<a aria-label="&lt;code&gt;recordsInputPath&lt;/code&gt;" class="icon-link" href="#recordsinputpath"></a>
</h2>
<p><code>string</code></p>
<p>指定读取最后一条记录的文件的名称。这可以用来重命名一个记录文件，可以查看下面的实例：</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#recordsoutputpath" id="recordsoutputpath"></a>
<span class="text"><code>recordsOutputPath</code></span>
<a aria-label="&lt;code&gt;recordsOutputPath&lt;/code&gt;" class="icon-link" href="#recordsoutputpath"></a>
</h2>
<p><code>string</code></p>
<p>指定记录要写入的位置。以下示例描述了如何用这个选项和 <code>recordsInptuPaht</code> 来重命名一个记录文件：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  recordsInputPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'records.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  recordsOutputPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'newRecords.json'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#name" id="name"></a>
<span class="text"><code>name</code></span>
<a aria-label="&lt;code&gt;name&lt;/code&gt;" class="icon-link" href="#name"></a>
</h2>
<p><code>string</code></p>
<p>Name of the configuration. Used when loading multiple configurations.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  name<span class="token punctuation">:</span> <span class="token string">'admin-app'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>引导</h1>
<div><p>可以使用各种接口来定制化编译过程。
一些特性会在几个接口之间重叠，例如，其中一些配置选项可能会从 CLI 标记(flag)中获取，
而另一些配置选项，则只能从单个接口获取。
以下高级信息可以帮助你起步。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#cli" id="cli"></a>
<span class="text">CLI</span>
<a aria-label="CLI" class="icon-link" href="#cli"></a>
</h2>
<p>命令行接口(Command Line Interface - CLI)，
用来对构建(build)进行配置和交互。
这在早期的原型设计和概要分析时特别有用。
在大多数情况下，CLI 仅用于使用配置文件和几个标记(flag)（例如 <code>--env</code>）启动该进程。</p>
<p><a href="/api/cli">了解更多关于 CLI 的信息！</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模块" id="模块"></a>
<span class="text">模块</span>
<a aria-label="模块" class="icon-link" href="#模块"></a>
</h2>
<p>当使用 webpack 处理模块时，理解不同的模块语法
（特别是<a href="/api/module-methods">模块方法</a>和<a href="/api/module-variables">模块变量</a>）是很重要的。 -
这些模块语法 webpack 都可以支持。</p>
<p><a href="/api/module-methods">了解更多关于模块的信息！</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node" id="node"></a>
<span class="text">Node</span>
<a aria-label="Node" class="icon-link" href="#node"></a>
</h2>
<p>虽然大多数用户只要用到配置文件足矣，
然而对编译的更细粒度控制，
则需要通过 Node 接口实现。
包括传递多个配置文件、可编程方式的编译执行或观察文件，以及收集概要信息。</p>
<p><a href="/api/node">了解更多关于 Node API 的信息！</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader" id="loader"></a>
<span class="text">loader</span>
<a aria-label="loader" class="icon-link" href="#loader"></a>
</h2>
<p>loader 是转译模块源代码的转换规则。
loader 被编写为，接受源代码作为参数的函数，
并返回这些转换过的新版本代码。</p>
<p><a href="/api/loaders">了解更多关于 loader 的信息！</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#plugin" id="plugin"></a>
<span class="text">plugin</span>
<a aria-label="plugin" class="icon-link" href="#plugin"></a>
</h2>
<p>插件接口可以帮助用户直接触及到编译过程(compilation process)。
插件可以将处理函数(handler)注册到编译过程中的不同事件点上运行的生命周期钩子函数上。
当执行每个钩子时，
插件能够完全访问到编译(compilation)的当前状态。</p>
<p><a href="/api/plugins">了解更多关于插件的信息！</a></p>
</div>
<br/><h1>命令行接口</h1>
<div><p>为了更合适且方便地使用配置，可以在 <code>webpack.config.js</code> 中对 webpack 进行配置。CLI 中传入的任何参数会在配置文件中映射为对应的参数。</p>
<p>如果你还没有安装过 webpack 和 CLI，请先阅读 <a href="/guides/installation">安装指南</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用配置文件的用法" id="使用配置文件的用法"></a>
<span class="text">使用配置文件的用法</span>
<a aria-label="使用配置文件的用法" class="icon-link" href="#使用配置文件的用法"></a>
</h2>
<pre><code class="lang-sh">webpack <span class="token punctuation">[</span>--config webpack.config.js<span class="token punctuation">]</span>
</code></pre>
<p>配置文件中的相关选项，请参阅<a href="/configuration">配置</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#不使用配置文件的用法" id="不使用配置文件的用法"></a>
<span class="text">不使用配置文件的用法</span>
<a aria-label="不使用配置文件的用法" class="icon-link" href="#不使用配置文件的用法"></a>
</h2>
<pre><code class="lang-sh">webpack <span class="token operator">&lt;</span>entry<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>entry<span class="token operator">&gt;</span><span class="token punctuation">]</span> -o <span class="token operator">&lt;</span>output<span class="token operator">&gt;</span>
</code></pre>
<p><strong><code>&lt;entry&gt;</code></strong></p>
<p>一个文件名或一组被命名的文件名，作为构建项目的入口起点。你可以传递多个入口（每个入口在启动时加载）。如果传递一个形式为 <code>&lt;name&gt; = &lt;request&gt;</code> 的键值对，则可以创建一个额外的入口起点。它将被映射到配置选项(configuration option)的 <code>entry</code> 属性。</p>
<p><strong><code>&lt;output&gt;</code></strong></p>
<p>要保存的 bundled 文件的路径和文件名。它将映射到配置选项 <code>output.path</code> 和 <code>output.filename</code>。</p>
<p><strong>示例</strong></p>
<p>假设你的项目结构像下面这样：</p>
<pre><code class="lang-bash"><span class="token keyword">.</span>
├── dist
├── index.html
└── src
    ├── index.js
    ├── index2.js
    └── others.js
</code></pre>
<pre><code class="lang-bash">webpack src/index.js -o dist/bundle.js
</code></pre>
<p>打包源码，入口为 <code>index.js</code>，并且输出文件的路径为 <code>dist</code>，文件名为 <code>bundle.js</code></p>
<pre><code class="lang-bash">    <span class="token operator">|</span> Asset     <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names <span class="token operator">|</span>
    <span class="token operator">|</span>-----------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>-------------<span class="token operator">|</span>
    <span class="token operator">|</span> bundle.js <span class="token operator">|</span> 1.54 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index       <span class="token operator">|</span>
    <span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre>
<pre><code class="lang-bash">webpack index<span class="token operator">=</span>./src/index.js entry2<span class="token operator">=</span>./src/index2.js dist/bundle.js
</code></pre>
<p>以多个入口的方式打包文件</p>
<pre><code class="lang-bash">    <span class="token operator">|</span> Asset     <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks        <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
    <span class="token operator">|</span>-----------<span class="token operator">|</span>---------<span class="token operator">|</span>---------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
    <span class="token operator">|</span> bundle.js <span class="token operator">|</span> 1.55 kB <span class="token operator">|</span> 0,1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index, entry2 <span class="token operator">|</span>
    <span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#常用配置" id="常用配置"></a>
<span class="text">常用配置</span>
<a aria-label="常用配置" class="icon-link" href="#常用配置"></a>
</h3>
<blockquote class="warning"><div class="tip-content"> 注意，命令行接口(Command Line Interface)参数的优先级，高于配置文件参数。例如，如果将 <a href="/concepts/mode/#usage"><code>--mode="production"</code></a> 传入 webpack CLI，而配置文件使用的是 <code>development</code>，最终会使用 <code>production</code>。 </div></blockquote><p><strong>列出命令行所有可用的配置选项</strong></p>
<pre><code class="lang-bash">webpack --help
webpack -h
</code></pre>
<p><strong>使用配置文件进行构建</strong></p>
<p>指定其它的<a href="/configuration">配置</a>文件。配置文件默认为 <code>webpack.config.js</code>，如果你想使用其它配置文件，可以加入这个参数。</p>
<pre><code class="lang-bash">webpack --config example.config.js
</code></pre>
<p><strong>以 JSON 格式输出 webpack 的运行结果</strong></p>
<pre><code class="lang-bash">webpack --json
webpack --json <span class="token operator">&gt;</span> stats.json
</code></pre>
<p>在其他每个情况下，webpack 会打印一组统计信息，用于显示 bundle, chunk 和用时等详细信息。使用此选项，输出可以是 JSON 对象。此输出文件(response)可被 webpack 的<a href="https://webpack.github.com/analyse">分析工具</a>，或 chrisbateman 的 <a href="https://chrisbateman.github.io/webpack-visualizer/">webpack 可视化工具</a>，或 th0r 的 <a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack bundle 分析工具</a>接收后进行分析。分析工具将接收 JSON 并以图形形式提供构建的所有细节。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#环境选项" id="环境选项"></a>
<span class="text">环境选项</span>
<a aria-label="环境选项" class="icon-link" href="#环境选项"></a>
</h3>
<p>当 webpack 配置对象<a href="/configuration/configuration-types#exporting-a-function">导出为一个函数</a>时，可以向起传入一个"环境对象(environment)"。</p>
<pre><code class="lang-bash">webpack --env.production    <span class="token comment"># 设置 env.production == true</span>
webpack --env.platform<span class="token operator">=</span>web  <span class="token comment"># 设置 env.platform == "web"</span>
</code></pre>
<p><code>--env</code> 参数具有多种语法 accepts various syntaxes:</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Invocation</div><div class="table-th">Resulting environment</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env prod</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>"prod"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>{ prod: true }</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod=1</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>{ prod: 1 }</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod=foo</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>{ prod: "foo" }</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod --env.min</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>{ prod: true, min: true }</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod --env min</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>[{ prod: true }, "min"]</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Invocation
    </div>
<div class="table-td-content">
<code>webpack --env.prod=foo --env.prod=bar</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Resulting environment
    </div>
<div class="table-td-content">
<code>{prod: [ "foo", "bar" ]}</code>
</div>
</div></div>
</div>
</div>
</div><blockquote class="tip"><div class="tip-content"> See the <a href="/guides/environment-variables">environment variables</a> guide for more information on its usage. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置选项" id="配置选项"></a>
<span class="text">配置选项</span>
<a aria-label="配置选项" class="icon-link" href="#配置选项"></a>
</h3>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">输入类型</div><div class="table-th">默认值</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--config</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        配置文件的路径
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        webpack.config.js 或 webpackfile.js
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--config-register, -r</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在 webpack 配置文件加载前先预加载一个或多个模块
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        array
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--config-name</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        要使用的配置名称
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--env</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        当配置文件是一个函数时，会将环境变量传给这个函数
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--mode</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        用到的模式，"development" 或 "production" 之中的一个
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#输出配置" id="输出配置"></a>
<span class="text">输出配置</span>
<a aria-label="输出配置" class="icon-link" href="#输出配置"></a>
</h3>
<p>通过以下这些配置，你可以调整构建流程的某些<a href="/configuration/output">输出</a>参数。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">输入类型</div><div class="table-th">默认值</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-chunk-filename</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        输出的附带 chunk 的文件名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        含有 [id] 的文件名，而不是 [name] 或者 [id] 作为前缀
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-filename</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        打包文件的文件名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        [name].js
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-jsonp-function</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        加载 chunk 时使用的 JSONP 函数名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        webpackJsonp
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-library</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        以库的形式导出入口文件
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-library-target</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        以库的形式导出入口文件时，输出的类型
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        var
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-path</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        输出的路径（在公共路径的基础上）
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        当前目录
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-pathinfo</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        加入一些依赖信息的注解
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        boolean
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        false
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-public-path</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        The 输出文件时使用的公共路径
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        /
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--output-source-map-filename</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        生成的 SourceMap 的文件名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        [name].map or [outputFilename].map
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--build-delimiter</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在构建输出之后，显示的自定义文本
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        默认字符串是 null。你可以提供一个 <code>=== Build done ===</code> 这样的字符串
    </div>
</div></div>
</div>
</div>
</div><h4 class="header">
<a aria-hidden="true" class="anchor" href="#示例用法" id="示例用法"></a>
<span class="text">示例用法</span>
<a aria-label="示例用法" class="icon-link" href="#示例用法"></a>
</h4>
<pre><code class="lang-bash">webpack index<span class="token operator">=</span>./src/index.js index2<span class="token operator">=</span>./src/index2.js --output-path<span class="token operator">=</span><span class="token string">'./dist'</span> --output-filename<span class="token operator">=</span><span class="token string">'[name][hash].bundle.js'</span>

<span class="token operator">|</span> Asset                                <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
<span class="token operator">|</span>--------------------------------------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
<span class="token operator">|</span> index2740fdca26e9348bedbec.bundle.js <span class="token operator">|</span>  2.6 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span> index740fdca26e9348bedbec.bundle.js  <span class="token operator">|</span> 2.59 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
    <span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>2<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre>
<pre><code class="lang-bash">webpack.js index<span class="token operator">=</span>./src/index.js index2<span class="token operator">=</span>./src/index2.js --output-path<span class="token operator">=</span><span class="token string">'./dist'</span> --output-filename<span class="token operator">=</span><span class="token string">'[name][hash].bundle.js'</span> --devtool source-map --output-source-map-filename<span class="token operator">=</span><span class="token string">'[name]123.map'</span>

<span class="token operator">|</span> Asset                                <span class="token operator">|</span> Size    <span class="token operator">|</span> Chunks      <span class="token operator">|</span> Chunk Names   <span class="token operator">|</span>
<span class="token operator">|</span>--------------------------------------<span class="token operator">|</span>---------<span class="token operator">|</span>-------------<span class="token operator">|</span>---------------<span class="token operator">|</span>
<span class="token operator">|</span> index2740fdca26e9348bedbec.bundle.js <span class="token operator">|</span> 2.76 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span>  index740fdca26e9348bedbec.bundle.js <span class="token operator">|</span> 2.74 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
<span class="token operator">|</span>                        index2123.map <span class="token operator">|</span> 2.95 kB <span class="token operator">|</span> 0 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index2        <span class="token operator">|</span>
<span class="token operator">|</span>                         index123.map <span class="token operator">|</span> 2.95 kB <span class="token operator">|</span> 1 <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span> <span class="token operator">|</span> index         <span class="token operator">|</span>
    <span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/others.js 29 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>1<span class="token punctuation">]</span> ./src/index.js 51 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>2<span class="token punctuation">]</span> ./src/index2.js 54 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#debug-配置" id="debug-配置"></a>
<span class="text">Debug 配置</span>
<a aria-label="Debug 配置" class="icon-link" href="#debug-配置"></a>
</h3>
<p>以下这些配置可以帮助你在 Webpack 编译过程中更好地 debug。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">输入类型</div><div class="table-th">默认值</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--debug</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        把 loader 设置为 debug 模式
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        boolean
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        false
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--devtool</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        为打包好的资源定义 [source map 的类型]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        string
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        -
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--progress</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        打印出编译进度的百分比值
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        boolean
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        false
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-error-details</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        展示错误细节
    </div>
</div><div class="table-td">
<div class="table-td-title">
        输入类型
    </div>
<div class="table-td-content">
        boolean
    </div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
        false
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#模块配置" id="模块配置"></a>
<span class="text">模块配置</span>
<a aria-label="模块配置" class="icon-link" href="#模块配置"></a>
</h3>
<p>这些配置可以用于绑定 Webpack 允许的<a href="/configuration/module/">模块</a>。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">用法</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--module-bind</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        为 loader 绑定一个文件扩展
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--module-bind js=babel-loader</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--module-bind-post</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        为 post loader 绑定一个文件扩展
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--module-bind-pre</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        为 pre loader 绑定一个文件扩展
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#watch-选项" id="watch-选项"></a>
<span class="text">Watch 选项</span>
<a aria-label="Watch 选项" class="icon-link" href="#watch-选项"></a>
</h3>
<p>这些配置可以用于<a href="/configuration/watch/">观察</a>依赖文件的变化，一旦有变化，则可以重新执行构建流程。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--watch</code>, <code>-w</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        观察文件系统的变化
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--watch-aggregate-timeout</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        指定一个毫秒数，在这个时间内，文件若发送了多次变化，会被合并
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--watch-poll</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        轮询观察文件变化的时间间隔（同时会打开轮询机制）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--watch-stdin</code>, <code>--stdin</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        当 stdin 关闭时，退出进程
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#性能优化配置" id="性能优化配置"></a>
<span class="text">性能优化配置</span>
<a aria-label="性能优化配置" class="icon-link" href="#性能优化配置"></a>
</h3>
<p>在生产环境的构建时，这些配置可以用于调整的一些性能相关的配置。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">使用的插件</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--optimize-max-chunks</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        限制 chunk 的数量
    </div>
</div><div class="table-td">
<div class="table-td-title">
        使用的插件
    </div>
<div class="table-td-content">
<a href="/plugins/limit-chunk-count-plugin">LimitChunkCountPlugin</a>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--optimize-min-chunk-size</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        限制 chunk 的最小体积
    </div>
</div><div class="table-td">
<div class="table-td-title">
        使用的插件
    </div>
<div class="table-td-content">
<a href="/plugins/min-chunk-size-plugin">MinChunkSizePlugin</a>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--optimize-minimize</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        压缩混淆 javascript，并且把 loader 设置为 minimizing
    </div>
</div><div class="table-td">
<div class="table-td-title">
        使用的插件
    </div>
<div class="table-td-content">
<a href="/plugins/terser-webpack-plugin/">TerserPlugin</a> &amp; <a href="/plugins/loader-options-plugin/">LoaderOptionsPlugin</a>
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-配置" id="resolve-配置"></a>
<span class="text">Resolve 配置</span>
<a aria-label="Resolve 配置" class="icon-link" href="#resolve-配置"></a>
</h3>
<p>这些配置可以用于设置 webpack <a href="/configuration/resolve/">resolver</a> 时使用的别名(alias)和扩展名(extension)。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">示例</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--resolve-alias</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        指定模块的别名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        示例
    </div>
<div class="table-td-content">
        --resolve-alias jquery-plugin=jquery.plugin
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--resolve-extensions</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        指定需要被处理的文件的扩展名
    </div>
</div><div class="table-td">
<div class="table-td-title">
        示例
    </div>
<div class="table-td-content">
        --resolve-extensions .es6 .js .ts
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--resolve-loader-alias</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        最小化 JavaScript，并且将 loader 切换到最简
    </div>
</div><div class="table-td">
<div class="table-td-title">
        示例
    </div>
<div class="table-td-content">
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#统计数据配置" id="统计数据配置"></a>
<span class="text">统计数据配置</span>
<a aria-label="统计数据配置" class="icon-link" href="#统计数据配置"></a>
</h3>
<p>以下选项用于配置 Webpack 在控制台输出的<a href="/configuration/stats/">统计数据</a>，以及这些数据的样式。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">Type</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--color</code>, <code>--colors</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        强制在控制台开启颜色 [默认：仅对 TTY 输出启用]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--no-color</code>, <code>--no-colors</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        强制在控制台关闭颜色
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        选择<a href="/configuration/stats">显示预设</a>(verbose - 繁琐, detailed - 细节, normal - 正常, minimal - 最小, errors-only - 仅错误, none - 无; 从 webpack 3.0.0 开始)
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        string
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-cached</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示缓存的模块
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-cached-assets</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示缓存的 assets
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-chunks</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示 chunks
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-depth</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示从入口起点到每个模块的距离
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-entrypoints</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示入口文件
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-error-details</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示详细的错误信息
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-exclude</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示被排除的文件
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-max-modules</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        设置输出中可见模块的最大数量
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        number
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-modules</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示所有模块，包括被排除的模块
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-optimization-bailout</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        作用域提升回退触发器(Scope hoisting fallback trigger)（从 webpack 3.0.0 开始）
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-origins</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在输出中显示最初的 chunk
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-provided-exports</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示有关从模块导出的信息
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-reasons</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示模块包含在输出中的原因
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--display-used-exports</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示模块中被使用的接口（Tree Shaking）
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--hide-modules</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        隐藏关于模块的信息
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--sort-assets-by</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        对 assets 列表以某种属性排序
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        string
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--sort-chunks-by</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        对 chunks 列表以某种属性排序
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        string
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--sort-modules-by</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        对模块列表以某种属性排序
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        string
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--verbose</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        显示更多信息
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
        boolean
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#高级配置" id="高级配置"></a>
<span class="text">高级配置</span>
<a aria-label="高级配置" class="icon-link" href="#高级配置"></a>
</h3>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">参数</div><div class="table-th">说明</div><div class="table-th">用法</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--bail</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        一旦发生错误，立即终止
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--cache</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        开启缓存 [watch 时会默认打开]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--cache=false</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--define</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        定义 bundle 中的任意自由变量，查看 <a href="/guides/shimming">shimming</a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--define process.env.NODE_ENV="'development'"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--hot</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        开启<a href="/concepts/hot-module-replacement">模块热替换</a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--hot=true</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--labeled-modules</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        开启模块标签 [使用 LabeledModulesPlugin]
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--plugin</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        加载某个<a href="/configuration/plugins/">插件</a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--prefetch</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        预加载某个文件
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--prefetch=./files.js</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--provide</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        在所有模块中将这些模块提供为自由变量，查看 <a href="/guides/shimming">shimming</a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--provide jQuery=jquery</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--records-input-path</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        记录文件的路径（读取）
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--records-output-path</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        记录文件的路径（写入）
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--records-path</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
        记录文件的路径
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        参数
    </div>
<div class="table-td-content">
<code>--target</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        说明
    </div>
<div class="table-td-content">
<a href="/configuration/target/">目标</a>的执行环境
    </div>
</div><div class="table-td">
<div class="table-td-title">
        用法
    </div>
<div class="table-td-content">
<code>--target='node'</code>
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#简写" id="简写"></a>
<span class="text">简写</span>
<a aria-label="简写" class="icon-link" href="#简写"></a>
</h3>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">简写</div><div class="table-th">含义</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        简写
    </div>
<div class="table-td-content">
        -d
    </div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>--debug --devtool cheap-module-eval-source-map --output-pathinfo</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        简写
    </div>
<div class="table-td-content">
        -p
    </div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>--optimize-minimize --define process.env.NODE_ENV="production"</code>, see <a href="/guides/production">building for production</a>
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#profiling" id="profiling"></a>
<span class="text">Profiling</span>
<a aria-label="Profiling" class="icon-link" href="#profiling"></a>
</h3>
<p><code>--profile</code> 选项捕获编译时每个步骤的时间信息，并且将这些信息包含在输出中。</p>
<pre><code class="lang-bash">webpack --profile

⋮
<span class="token punctuation">[</span>0<span class="token punctuation">]</span> ./src/index.js 90 bytes <span class="token punctuation">{</span>0<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    factory:22ms building:16ms <span class="token operator">=</span> 38ms
</code></pre>
<p>For each module, the following details are included in the output as applicable:</p>
<ul>
<li><code>factory</code>: time to collect module metadata (e.g. resolving the filename)</li>
<li><code>building</code>: time to build the module (e.g. loaders and parsing)</li>
<li><code>dependencies</code>: time to identify and connect the module’s dependencies</li>
</ul>
<p>Paired with <code>--progress</code>, <code>--profile</code> gives you an in depth idea of which step in the compilation is taking how long. This can help you optimise your build in a more informed manner.</p>
<pre><code class="lang-bash">webpack --progress --profile

30ms building modules
1ms sealing
1ms optimizing
0ms basic module optimization
1ms module optimization
1ms advanced module optimization
0ms basic chunk optimization
0ms chunk optimization
1ms advanced chunk optimization
0ms module and chunk tree optimization
1ms module reviving
0ms module order optimization
1ms module <span class="token function">id</span> optimization
1ms chunk reviving
0ms chunk order optimization
1ms chunk <span class="token function">id</span> optimization
10ms hashing
0ms module assets processing
13ms chunk assets processing
1ms additional chunk assets processing
0ms recording
0ms additional asset processing
26ms chunk asset optimization
1ms asset optimization
6ms emitting
⋮
</code></pre>
</div>
<br/><h1>包含统计数据的文件</h1>
<div><p>通过 webpack 编译源文件时，用户可以生成包含有关于模块的统计数据的 JSON 文件。这些统计数据不仅可以帮助开发者来分析应用的依赖图表，还可以优化编译的速度。这个 JSON 文件可以通过以下的命令来生成:</p>
<pre><code class="lang-bash">webpack --profile --json <span class="token operator">&gt;</span> compilation-stats.json
</code></pre>
<p>这个标识是告诉 webpack <code>compilation-stats.json</code> 要包含依赖的图表以及各种其他的编译信息。一般来说，也会把 <code>--profile</code> 一起加入，这样每一个包含自身编译数据的<a href="#modules-object"><code>模块</code>对象(<code>modules</code> object)</a> 都会添加 <code>profile</code> 。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结构-structure-" id="结构-structure-"></a>
<span class="text">结构 (Structure)</span>
<a aria-label="结构 (Structure)" class="icon-link" href="#结构-structure-"></a>
</h2>
<p>最外层的输出 JSON 文件比较容易理解，但是其中还是有一小部分嵌套的数据不是那么容易理解。不过放心，这其中的每一部分都在后面有更详细的解释，并且注释中还附带有超链接可以直接跳入相应的章节。</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"version"</span><span class="token punctuation">:</span> <span class="token string">"1.4.13"</span><span class="token punctuation">,</span> <span class="token comment">// 用来编译的 webpack 的版本</span>
  <span class="token string">"hash"</span><span class="token punctuation">:</span> <span class="token string">"11593e3b3ac85436984a"</span><span class="token punctuation">,</span> <span class="token comment">// 编译使用的 hash</span>
  <span class="token string">"time"</span><span class="token punctuation">:</span> <span class="token number">2469</span><span class="token punctuation">,</span> <span class="token comment">// 编译耗时 (ms)</span>
  <span class="token string">"filteredModules"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 当 <a class="code-link" href="/configuration/stats/#stats">`exclude`</a>传入<a class="code-link" href="/api/node/#stats-tojson-options-">`toJson`</a> 函数时，统计被无视的模块的数量</span>
  <span class="token string">"outputPath"</span><span class="token punctuation">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token comment">// path to webpack 输出目录的 path 路径</span>
  <span class="token string">"assetsByChunkName"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 用作映射的 chunk 的名称</span>
    <span class="token string">"main"</span><span class="token punctuation">:</span> <span class="token string">"web.js?h=11593e3b3ac85436984a"</span><span class="token punctuation">,</span>
    <span class="token string">"named-chunk"</span><span class="token punctuation">:</span> <span class="token string">"named-chunk.web.js"</span><span class="token punctuation">,</span>
    <span class="token string">"other-chunk"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">"other-chunk.js"</span><span class="token punctuation">,</span>
      <span class="token string">"other-chunk.css"</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"assets"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#asset-objects">asset 对象 (asset objects)</a> 的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"chunks"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#chunk-objects">chunk 对象 (chunk objects)</a> 的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"modules"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#module-objects">模块对象 (module objects)</a> 的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"errors"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#errors-and-warnings">错误字符串 (error string)</a> 的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"warnings"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#errors-and-warnings">警告字符串 (warning string)</a> 的数组</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#asset对象-asset-objects-" id="asset对象-asset-objects-"></a>
<span class="text">Asset对象 (Asset Objects)</span>
<a aria-label="Asset对象 (Asset Objects)" class="icon-link" href="#asset对象-asset-objects-"></a>
</h3>
<p>每一个 <code>assets</code> 对象都表示一个编译出的 <code>output</code> 文件。 <code>assets</code> 都会有一个共同的结构：</p>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"chunkNames"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 这个 asset 包含的 chunk</span>
  <span class="token string">"chunks"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">6</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 这个 asset 包含的 chunk 的 id</span>
  <span class="token string">"emitted"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个 asset 是否会让它输出到 output 目录</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"10.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 输出的文件名</span>
  <span class="token string">"size"</span><span class="token punctuation">:</span> <span class="token number">1058</span> <span class="token comment">// 文件的大小</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#chunk-对象-chunk-objects-" id="chunk-对象-chunk-objects-"></a>
<span class="text">Chunk 对象 (Chunk Objects)</span>
<a aria-label="Chunk 对象 (Chunk Objects)" class="icon-link" href="#chunk-对象-chunk-objects-"></a>
</h3>
<p>每一个 <code>chunks</code> 表示一组称为 <a href="/glossary#c">chunk</a> 的模块。每一个对象都满足以下的结构。</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"entry"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个 chunk 是否包含 webpack 的运行时</span>
  <span class="token string">"files"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 一个包含这个 chunk 的文件名的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"filteredModules"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 见上文的 <a class="code-link" href="#Structure">结构</a></span>
  <span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 这个 chunk 的id</span>
  <span class="token string">"initial"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个 chunk 是开始就要加载还是 <a class="code-link" href="/guides/lazy-loading">懒加载(lazy-loading)</a></span>
  <span class="token string">"modules"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#module-objects">模块对象 (module objects)</a>的数组</span>
    <span class="token string">"web.js?h=11593e3b3ac85436984a"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"names"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 包含在这个 chunk 内的 chunk 的名字的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"origins"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 下文详述</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"parents"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 父 chunk 的 ids</span>
  <span class="token string">"rendered"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个 chunk 是否会参与进编译</span>
  <span class="token string">"size"</span><span class="token punctuation">:</span> <span class="token number">188057</span> <span class="token comment">// chunk 的大小(byte)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>chunks</code> 对象还会包含一个 <code>来源 (origins)</code> ，来表示每一个 chunk 是从哪里来的。 <code>来源 (origins)</code> 是以下的形式</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// 具体是哪行生成了这个chunk</span>
  <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 模块的位置</span>
  <span class="token string">"moduleId"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 模块的ID</span>
  <span class="token string">"moduleIdentifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 模块的地址</span>
  <span class="token string">"moduleName"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 模块的相对地址</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"main"</span><span class="token punctuation">,</span> <span class="token comment">// chunk的名称</span>
  <span class="token string">"reasons"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#模块对象">模块对象</a>中`reason`的数组</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#模块对象-module-objects-" id="模块对象-module-objects-"></a>
<span class="text">模块对象 (Module Objects)</span>
<a aria-label="模块对象 (Module Objects)" class="icon-link" href="#模块对象-module-objects-"></a>
</h3>
<p>缺少了对实际参与进编译的模块的描述，这些数据又有什么意义呢。每一个在依赖图表中的模块都可以表示成以下的形式。</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"assets"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// <a class="code-link" href="#asset-objects">asset对象 (asset objects)</a>的数组</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"built"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个模块会参与 <a class="code-link" href="/concepts/loaders">Loaders</a> , 解析, 并被编译</span>
  <span class="token string">"cacheable"</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个模块是否会被缓存</span>
  <span class="token string">"chunks"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 包含这个模块的 chunks 的 id</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"errors"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 处理这个模块发现的错误的数量</span>
  <span class="token string">"failed"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 编译是否失败</span>
  <span class="token string">"id"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 这个模块的ID (类似于 <a class="code-link" href="/api/module-variables#module-id-commonjs-">`module.id`</a>)</span>
  <span class="token string">"identifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// webpack内部使用的唯一的标识</span>
  <span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 实际文件的地址</span>
  <span class="token string">"optional"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 每一个对这个模块的请求都会包裹在 `try... catch` 内 (与ESM无关)</span>
  <span class="token string">"prefetched"</span><span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 表示这个模块是否会被 <a class="code-link" href="/plugins/prefetch-plugin">prefetched</a></span>
  <span class="token string">"profile"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 有关 <a class="code-link" href="/api/cli#profiling">`--profile` flag</a> 的这个模块特有的编译数据 (ms)</span>
    <span class="token string">"building"</span><span class="token punctuation">:</span> <span class="token number">73</span><span class="token punctuation">,</span> <span class="token comment">// 载入和解析</span>
    <span class="token string">"dependencies"</span><span class="token punctuation">:</span> <span class="token number">242</span><span class="token punctuation">,</span> <span class="token comment">// 编译依赖</span>
    <span class="token string">"factory"</span><span class="token punctuation">:</span> <span class="token number">11</span> <span class="token comment">// 解决依赖</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">"reasons"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 见下文描述</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">"size"</span><span class="token punctuation">:</span> <span class="token number">3593</span><span class="token punctuation">,</span> <span class="token comment">// 预估模块的大小 (byte)</span>
  <span class="token string">"source"</span><span class="token punctuation">:</span> "<span class="token comment">// Should not break it...\r\nif(typeof...", // 字符串化的输入</span>
  <span class="token string">"warnings"</span><span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment">// 处理模块时警告的数量</span>
<span class="token punctuation">}</span>
</code></pre>
<p>每一个模块都包含一个 <code>理由 (reasons)</code> 对象，这个对象描述了这个模块被加入依赖图表的理由。每一个 <code>理由 (reasons)</code> 都类似于上文 <a href="#chunk-objects">chunk objects</a>中的 <code>来源 (origins)</code>:</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token string">"loc"</span><span class="token punctuation">:</span> <span class="token string">"33:24-93"</span><span class="token punctuation">,</span> <span class="token comment">// 导致这个被加入依赖图标的代码行数</span>
  <span class="token string">"module"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 所基于模块的相对地址 <a class="code-link" href="/configuration/entry-context/#context">context</a></span>
  <span class="token string">"moduleId"</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 模块的 ID</span>
  <span class="token string">"moduleIdentifier"</span><span class="token punctuation">:</span> <span class="token string">"(webpack)\\test\\browsertest\\lib\\index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 模块的地址</span>
  <span class="token string">"moduleName"</span><span class="token punctuation">:</span> <span class="token string">"./lib/index.web.js"</span><span class="token punctuation">,</span> <span class="token comment">// 可读性更好的模块名称 (用于 "更好的打印 (pretty-printing)")</span>
  <span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"require.context"</span><span class="token punctuation">,</span> <span class="token comment">// 使用的<a class="code-link" href="/api/module-methods">请求的种类 (type of request)</a></span>
  <span class="token string">"userRequest"</span><span class="token punctuation">:</span> <span class="token string">"../../cases"</span> <span class="token comment">// 用来 `import` 或者 `require` 的源字符串</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#错误与警告" id="错误与警告"></a>
<span class="text">错误与警告</span>
<a aria-label="错误与警告" class="icon-link" href="#错误与警告"></a>
</h3>
<p><code>错误 (errors)</code> 和 <code>警告 (warnings)</code> 会包含一个字符串数组。每个字符串包含了信息和栈的追溯:</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>/cases/parsing/browserify/index.js
Critical dependencies:
2:114-121 This seem to be a pre-built javascript file. Even <span class="token keyword">while</span> this is possible, it's not recommended. Try to require to original <span class="token function">source</span> to get better results.
 @ <span class="token punctuation">..</span>/cases/parsing/browserify/index.js 2:114-121
</code></pre>
<blockquote class="warning"><div class="tip-content"> 需要注意的是，当 <code>错误详情为false(errorDetails:false)</code>传入<code>toJson</code>函数时，对栈的追溯就不会被显示。<code>错误详情(errorDetils)</code> 默认值为 <code>true</code> </div></blockquote></div>
<br/><h1>Node.js API</h1>
<div><p>webpack 提供了 Node.js API，可以在 Node.js 运行时下直接使用。</p>
<p>当你需要自定义构建或开发流程时，Node.js API 非常有用，因为此时所有的报告和错误处理都必须自行实现，webpack 仅仅负责编译的部分。所以 <a href="/configuration/stats"><code>stats</code></a> 配置选项不会在 <code>webpack()</code> 调用中生效。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装-installation-" id="安装-installation-"></a>
<span class="text">安装(Installation)</span>
<a aria-label="安装(Installation)" class="icon-link" href="#安装-installation-"></a>
</h2>
<p>开始使用 webpack 的 Node.js API 之前，首先你需要安装 webpack：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack
</code></pre>
<p>然后在 Node.js 脚本中 <code>require</code> webpack module：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>或者如果你喜欢 ES2015：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#webpack-" id="webpack-"></a>
<span class="text"><code>webpack()</code></span>
<a aria-label="&lt;code&gt;webpack()&lt;/code&gt;" class="icon-link" href="#webpack-"></a>
</h2>
<p>导入的 <code>webpack</code> 函数需要传入一个 webpack <a href="/configuration/">配置对象</a>，当同时传入回调函数时就会执行 webpack compiler：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/">配置对象</a></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err <span class="token operator">||</span> stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// <a class="code-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86-error-handling-">在这里处理错误</a></span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 处理完成</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 编译错误<strong>不</strong>在 <code>err</code> 对象内，而是需要使用 <code>stats.hasErrors()</code> 单独处理，你可以在指南的 <a href="#错误处理-error-handling-">错误处理</a> 部分查阅到更多细节。<code>err</code> 对象只会包含 webpack 相关的问题，比如配置错误等。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 你可以向 <code>webpack</code> 函数提供一个由配置选项对象构成的数组。更多详细信息，请查看 <a href="#multicompiler">MultiCompiler</a> 章节。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#compiler-实例-compiler-instance-" id="compiler-实例-compiler-instance-"></a>
<span class="text">Compiler 实例(Compiler Instance)</span>
<a aria-label="Compiler 实例(Compiler Instance)" class="icon-link" href="#compiler-实例-compiler-instance-"></a>
</h2>
<p>如果你不向 <code>webpack</code> 执行函数传入回调函数，就会得到一个 webpack <code>Compiler</code> 实例。你可以通过它手动触发 webpack 执行器，或者是让它执行构建并监听变更。和 <a href="/api/cli/">CLI</a> API 很类似。<code>Compiler</code> 实例提供了以下方法：</p>
<ul>
<li><code>.run(callback)</code></li>
<li><code>.watch(watchOptions, handler)</code></li>
</ul>
<p>通常情况下，虽然可以创建一些子 compiler 来代理到特定任务，然而只会创建一个主要 <code>Compiler</code> 示例。<code>Compiler</code> 基本上只是执行最低限度的功能，以维持生命周期运行的功能。它将所有的加载、打包和写入工作，都委托到注册过的插件上。</p>
<p><code>Compiler</code> 实例上的 <code>hooks</code> 属性，用于将一个插件，注册到 <code>Compiler</code> 的生命周期中的所有钩子事件上。webpack 使用 [<code>WebpackOptionsDefaulter</code>] (<a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js">https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js</a>) 和 <a href="https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js"><code>WebpackOptionsApply</code></a> 这两个工具，通过所有内置插件，来配置 <code>Compiler</code> 实例。</p>
<p><code>run</code> 方法用于触发所有编译时工作。完成之后，执行给定的 <code>callback</code> 函数。最终记录下来的概括信息(stats)和错误(errors)，应该在这个 <code>callback</code> 函数中获取。</p>
<blockquote class="warning"><div class="tip-content"> 这个 API 一次只支持一个并发编译。当使用 <code>run</code> 时，会等待它完成后，然后才能再次调用 <code>run</code> 或 <code>watch</code>。当使用 <code>watch</code> 时，调用 <code>close</code>，等待它完成后，然后才能再次调用 <code>run</code> 或 <code>watch</code>。多个并发编译会损坏输出文件。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#执行-run-" id="执行-run-"></a>
<span class="text">执行(run)</span>
<a aria-label="执行(run)" class="icon-link" href="#执行-run-"></a>
</h2>
<p>调用 <code>Compiler</code> 实例的 <code>run</code> 方法跟上文提到的快速执行方法很相似：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/">配置对象</a></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#监听-watching-" id="监听-watching-"></a>
<span class="text">监听(watching)</span>
<a aria-label="监听(watching)" class="icon-link" href="#监听-watching-"></a>
</h2>
<p>调用 <code>watch</code> 方法会触发 webpack 执行器，但之后会监听变更（很像 CLI 命令: <code>webpack --watch</code>），一旦 webpack 检测到文件变更，就会重新执行编译。该方法返回一个 <code>Watching</code> 实例。</p>
<pre><code class="lang-js"><span class="token function">watch</span><span class="token punctuation">(</span>watchOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/">配置对象</a></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> watching <span class="token operator">=</span> compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/watch/#watchoptions">watchOptions</a> 示例</span>
  aggregateTimeout<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>
  poll<span class="token punctuation">:</span> undefined
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在这里打印 watch/build 结果...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>Watching</code> 配置选项的细节可以在 <a href="/configuration/watch/#watchoptions">这里</a> 查阅。</p>
<blockquote class="warning"><div class="tip-content"> 文件系统不正确的问题，可能会对单次修改触发多次构建。因此，在上面的示例中，一次修改可能会多次触发 <code>console.log</code> 语句。用户应该预知此行为，并且可能需要检查 <code>stats.hash</code> 来查看文件哈希是否确实变更。- </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#关闭-watching-close-watching-" id="关闭-watching-close-watching-"></a>
<span class="text">关闭 <code>Watching</code>(Close <code>Watching</code>)</span>
<a aria-label="关闭 &lt;code&gt;Watching&lt;/code&gt;(Close &lt;code&gt;Watching&lt;/code&gt;)" class="icon-link" href="#关闭-watching-close-watching-"></a>
</h3>
<p><code>watch</code> 方法返回一个 <code>Watching</code> 实例，它会暴露一个 <code>.close(callback)</code> 方法。调用该方法将会结束监听：</p>
<pre><code class="lang-js">watching<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Watching Ended.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 不允许在当前监听器已经关闭或失效前再次监听或执行。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#作废-watching-invalidate-watching-" id="作废-watching-invalidate-watching-"></a>
<span class="text">作废 <code>Watching</code>(Invalidate <code>Watching</code>)</span>
<a aria-label="作废 &lt;code&gt;Watching&lt;/code&gt;(Invalidate &lt;code&gt;Watching&lt;/code&gt;)" class="icon-link" href="#作废-watching-invalidate-watching-"></a>
</h3>
<p>使用 <code>watching.invalidate</code>，你可以手动使当前编译循环(compiling round)无效，而不会停止监视进程：</p>
<pre><code class="lang-js">watching<span class="token punctuation">.</span><span class="token function">invalidate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#stats-对象-stats-object-" id="stats-对象-stats-object-"></a>
<span class="text">Stats 对象(Stats Object)</span>
<a aria-label="Stats 对象(Stats Object)" class="icon-link" href="#stats-对象-stats-object-"></a>
</h2>
<p><code>stats</code> 对象会被作为 <a href="#webpack-"><code>webpack()</code></a> 回调函数的第二个参数传入，可以通过它获取到代码编译过程中的有用信息，包括：</p>
<ul>
<li>错误和警告（如果有的话）</li>
<li>计时信息</li>
<li>module 和 chunk 信息</li>
</ul>
<p><a href="/api/cli">webpack CLI</a> 正是基于这些信息在控制台展示友好的格式输出。</p>
<blockquote class="tip"><div class="tip-content"> 当使用 <a href="/api/compiler#multicompiler"><code>MultiCompiler</code></a> 时，会返回一个 <code>MultiStats</code> 实例，它实现与 <code>stats</code> 相同的接口，也就是下面描述的方法。 </div></blockquote><p><code>stats</code> 对象暴露了以下方法：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#stats-haserrors-" id="stats-haserrors-"></a>
<span class="text"><code>stats.hasErrors()</code></span>
<a aria-label="&lt;code&gt;stats.hasErrors()&lt;/code&gt;" class="icon-link" href="#stats-haserrors-"></a>
</h3>
<p>可以用来检查编译期是否有错误，返回 <code>true</code> 或 <code>false</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#stats-haswarnings-" id="stats-haswarnings-"></a>
<span class="text"><code>stats.hasWarnings()</code></span>
<a aria-label="&lt;code&gt;stats.hasWarnings()&lt;/code&gt;" class="icon-link" href="#stats-haswarnings-"></a>
</h3>
<p>可以用来检查编译期是否有警告，返回 <code>true</code> 或 <code>false</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#stats-tojson-options-" id="stats-tojson-options-"></a>
<span class="text"><code>stats.toJson(options)</code></span>
<a aria-label="&lt;code&gt;stats.toJson(options)&lt;/code&gt;" class="icon-link" href="#stats-tojson-options-"></a>
</h3>
<p>以 JSON 对象形式返回编译信息。<code>options</code> 可以是一个字符串（预设值）或是颗粒化控制的对象：</p>
<pre><code class="lang-js">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token string">"minimal"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// <a class="code-link" href="/configuration/stats">更多选项如: "verbose" 等</a>.</span>
</code></pre>
<pre><code class="lang-js">stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  assets<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  hash<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>所有可用的配置选项和预设值都可查询 stats <a href="/configuration/stats">文档</a>。</p>
<blockquote>
<p>这里有一个该函数输出的 <a href="https://github.com/webpack/analyse/blob/master/app/pages/upload/example.json">示例</a>。</p>
</blockquote>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#stats-tostring-options-" id="stats-tostring-options-"></a>
<span class="text"><code>stats.toString(options)</code></span>
<a aria-label="&lt;code&gt;stats.toString(options)&lt;/code&gt;" class="icon-link" href="#stats-tostring-options-"></a>
</h3>
<p>以格式化的字符串形式返回描述编译信息（类似 <a href="/api/cli">CLI</a> 的输出）。</p>
<p>配置对象与 <a href="/api/node#stats-tojson-options-"><code>stats.toJson(options)</code></a> 一致，除了额外增加的一个选项：</p>
<pre><code class="lang-js">stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 增加控制台颜色开关</span>
  colors<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>下面是 <code>stats.toString()</code> 用法的示例：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/">配置对象</a></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    chunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>  <span class="token comment">// 使构建过程更静默无输出</span>
    colors<span class="token punctuation">:</span> <span class="token boolean">true</span>    <span class="token comment">// 在控制台展示颜色</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#multicompiler" id="multicompiler"></a>
<span class="text">MultiCompiler</span>
<a aria-label="MultiCompiler" class="icon-link" href="#multicompiler"></a>
</h2>
<p><code>MultiCompiler</code> 模块可以让 webpack 在单个 compiler 中执行多个配置。如果传给 webpack 的 Node.js API 的 <code>options</code> 参数，是一个由配置对象构成的数组，则 webpack 会应用单独 compiler，并且在每次 compiler 执行结束时，都会调用 <code>callback</code> 方法。</p>
<pre><code class="lang-js"><span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">{</span> entry<span class="token punctuation">:</span> <span class="token string">'./index1.js'</span><span class="token punctuation">,</span> output<span class="token punctuation">:</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'bundle1.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> entry<span class="token punctuation">:</span> <span class="token string">'./index2.js'</span><span class="token punctuation">,</span> output<span class="token punctuation">:</span> <span class="token punctuation">{</span> filename<span class="token punctuation">:</span> <span class="token string">'bundle2.js'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> <a class="code-link" href="#stats-object">stats</a><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 多个配置对象在执行时，<strong>不会并行执行</strong>。每个配置都只会在前一个处理结束后，才进行处理。想要并行处理，你可以使用第三方解决方案，例如 <a href="https://www.npmjs.com/package/parallel-webpack">parallel-webpack</a>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#错误处理-error-handling-" id="错误处理-error-handling-"></a>
<span class="text">错误处理(error handling)</span>
<a aria-label="错误处理(error handling)" class="icon-link" href="#错误处理-error-handling-"></a>
</h2>
<p>完备的错误处理中需要考虑以下三种类型的错误：</p>
<ul>
<li>致命的 wepback 错误（配置出错等）</li>
<li>编译错误（缺失的 module，语法错误等）</li>
<li>编译警告</li>
</ul>
<p>下面是一个覆盖这些场景的示例：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"webpack"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// <a class="code-link" href="/configuration/">配置对象</a></span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>stack <span class="token operator">||</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>details<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> info <span class="token operator">=</span> stats<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>stats<span class="token punctuation">.</span><span class="token function">hasWarnings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span>warnings<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 记录结果...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#自定义文件系统-custom-file-systems-" id="自定义文件系统-custom-file-systems-"></a>
<span class="text">自定义文件系统(Custom File Systems)</span>
<a aria-label="自定义文件系统(Custom File Systems)" class="icon-link" href="#自定义文件系统-custom-file-systems-"></a>
</h2>
<p>默认情况下，webpack 使用普通文件系统来读取文件并将文件写入磁盘。但是，还可以使用不同类型的文件系统（内存(memory), webDAV 等）来更改输入或输出行为。为了实现这一点，可以改变 <code>inputFileSystem</code> 或 <code>outputFileSystem</code>。例如，可以使用 <a href="https://github.com/webpack/memory-fs"><code>memory-fs</code></a> 替换默认的 <code>outputFileSystem</code>，以将文件写入到内存中，而不是写入到磁盘：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> MemoryFS <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'memory-fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MemoryFS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">/* options*/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>outputFileSystem <span class="token operator">=</span> fs<span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> stats<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 之后读取输出：</span>
  <span class="token keyword">const</span> content <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>值得一提的是，被 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 及众多其他包依赖的 <a href="https://github.com/webpack/webpack-dev-middleware">webpack-dev-middleware</a> 就是通过这种方式，将你的文件神秘地隐藏起来，但却仍然可以用它们为浏览器提供服务！</p>
<blockquote class="tip"><div class="tip-content"> 你指定的输出文件系统需要兼容 Node 自身的 <a href="https://nodejs.org/api/fs.html"><code>fs</code></a> 模块接口，接口需要提供 <code>mkdirp</code> 和 <code>join</code> 工具方法。 </div></blockquote></div>
<br/><h1>模块热替换</h1>
<div><p>如果已经通过 <a href="/plugins/hot-module-replacement-plugin"><code>HotModuleReplacementPlugin</code></a> 启用了<a href="/concepts/hot-module-replacement">模块热替换(Hot Module Replacement)</a>，则它的接口将被暴露在 <a href="/api/module-variables#module-hot-webpack-specific-"><code>module.hot</code> 属性</a>下面。通常，用户先要检查这个接口是否可访问，然后再开始使用它。举个例子，你可以这样 <code>accept</code> 一个更新的模块：</p>
<pre><code class="lang-js"><span class="token keyword">if</span> <span class="token punctuation">(</span>module<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span><span class="token string">'./library.js'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用更新过的 library 模块执行某些操作...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>支持以下方法……</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模块-api" id="模块-api"></a>
<span class="text">模块 API</span>
<a aria-label="模块 API" class="icon-link" href="#模块-api"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#accept" id="accept"></a>
<span class="text"><code>accept</code></span>
<a aria-label="&lt;code&gt;accept&lt;/code&gt;" class="icon-link" href="#accept"></a>
</h3>
<p>接受(accept)给定<code>依赖模块(dependencies)</code>的更新，并触发一个 <code>回调函数</code> 来对这些更新做出响应。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  dependencies<span class="token punctuation">,</span> <span class="token comment">// 可以是一个字符串或字符串数组</span>
  callback <span class="token comment">// 用于在模块更新后触发的函数</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>当使用 ESM <code>import</code> 时，所有引用<code>依赖模块(dependencies)</code>的导入符号都会被自动更新。注意：依赖模块字符串必须和 <code>import</code> 中的 <code>from</code> 字符串相匹配。在一些情况中 <code>callback</code> 可以省略。在 <code>callback</code> 中使用的 <code>require()</code> 在这里没有任何意义。</p>
<p>在使用 CommonJS 时，你应该通过 <code>callback</code> 中的 <code>require()</code> 手动更新依赖模块。这时省略 <code>callback</code> 在这里没有任何意义。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#accept-自身-" id="accept-自身-"></a>
<span class="text"><code>accept</code>（自身）</span>
<a aria-label="&lt;code&gt;accept&lt;/code&gt;（自身）" class="icon-link" href="#accept-自身-"></a>
</h3>
<p>接受自身更新。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">accept</span><span class="token punctuation">(</span>
  errorHandler <span class="token comment">// 在计算新版本时处理错误的函数</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>在此模块或依赖模块更新时，在不通知父母的情况下，可以对此模块处理和重新取值。 如果此模块没有导出（或以其他方式更新的导出），这是有意义的。</p>
<p>当对此模块（或依赖模块）进行取值而引发异常时，会触发 <code>errorHandler</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#decline" id="decline"></a>
<span class="text"><code>decline</code></span>
<a aria-label="&lt;code&gt;decline&lt;/code&gt;" class="icon-link" href="#decline"></a>
</h3>
<p>拒绝给定<code>依赖模块</code>的更新，使用 <code>'decline'</code> 方法强制更新失败。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span>
  dependencies <span class="token comment">// 可以是一个字符串或字符串数组</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>将依赖模块标记为不可更新(not-update-able)。在处理「依赖的导出正在更新」或「尚未实现处理」时，这是有意义的。取决于你的 HMR 管理代码，此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#decline-自身-" id="decline-自身-"></a>
<span class="text"><code>decline</code>（自身）</span>
<a aria-label="&lt;code&gt;decline&lt;/code&gt;（自身）" class="icon-link" href="#decline-自身-"></a>
</h3>
<p>拒绝自身更新。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">decline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>将依赖模块标记为不可更新(not-update-able)。当此模块具有无法避免的外部作用(side-effect)，或者尚未对此模块进行 HMR 处理时，这是有意义的。取决于你的 HMR 管理代码，此依赖模块（或其未接受的依赖模块）更新，通常会导致页面被完全重新加载。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#dispose-或-adddisposehandler-" id="dispose-或-adddisposehandler-"></a>
<span class="text"><code>dispose</code>（或 <code>addDisposeHandler</code>）</span>
<a aria-label="&lt;code&gt;dispose&lt;/code&gt;（或 &lt;code&gt;addDisposeHandler&lt;/code&gt;）" class="icon-link" href="#dispose-或-adddisposehandler-"></a>
</h3>
<p>添加一个处理函数，在当前模块代码被替换时执行。此函数应该用于移除你声明或创建的任何持久资源。如果要将状态传入到更新过的模块，请添加给定 <code>data</code> 参数。更新后，此对象在更新之后可通过 <code>module.hot.data</code> 调用。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span>data <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 清理并将 data 传递到更新后的模块……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#removedisposehandler" id="removedisposehandler"></a>
<span class="text"><code>removeDisposeHandler</code></span>
<a aria-label="&lt;code&gt;removeDisposeHandler&lt;/code&gt;" class="icon-link" href="#removedisposehandler"></a>
</h3>
<p>删除由 <code>dispose</code> 或 <code>addDisposeHandler</code> 添加的回调函数。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeDisposeHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#管理-api" id="管理-api"></a>
<span class="text">管理 API</span>
<a aria-label="管理 API" class="icon-link" href="#管理-api"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#status" id="status"></a>
<span class="text"><code>status</code></span>
<a aria-label="&lt;code&gt;status&lt;/code&gt;" class="icon-link" href="#status"></a>
</h3>
<p>取得模块热替换进程的当前状态。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回以下字符串之一……</span>
</code></pre>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Status</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        idle
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        该进程正在等待调用 <code>check</code>（见下文）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        check
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        该进程正在检查以更新
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        prepare
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        该进程正在准备更新（例如，下载已更新的模块）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        ready
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        此更新已准备并可用
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        dispose
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        该进程正在调用将被替换模块的 <code>dispose</code> 处理函数
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        apply
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        该进程正在调用 <code>accept</code> 处理函数，并重新执行自我接受(self-accepted)的模块
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        abort
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        更新已中止，但系统仍处于之前的状态
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Status
    </div>
<div class="table-td-content">
        fail
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        更新已抛出异常，系统状态已被破坏
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#check" id="check"></a>
<span class="text"><code>check</code></span>
<a aria-label="&lt;code&gt;check&lt;/code&gt;" class="icon-link" href="#check"></a>
</h3>
<p>测试所有加载的模块以进行更新，如果有更新，则应用它们。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span>autoApply<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>outdatedModules <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 超时的模块……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 捕获错误</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>autoApply</code> 参数可以是布尔值，也可以是 <code>options</code>，当被调用时可以传递给 <code>apply</code> 方法。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#apply" id="apply"></a>
<span class="text"><code>apply</code></span>
<a aria-label="&lt;code&gt;apply&lt;/code&gt;" class="icon-link" href="#apply"></a>
</h3>
<p>继续更新进程（只要 <code>module.hot.status() === 'ready'</code>）。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>outdatedModules <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 超时的模块……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 捕获错误</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>可选的 <code>options</code> 对象可以包含以下属性：</p>
<ul>
<li><code>ignoreUnaccepted</code> (boolean): Ignore changes made to unaccepted modules.</li>
<li><code>ignoreDeclined</code> (boolean): Ignore changes made to declined modules.</li>
<li><code>ignoreErrored</code> (boolean): Ignore errors throw in accept handlers, error handlers and while reevaluating module.</li>
<li><code>onDeclined</code> (function(info)): Notifier for declined modules</li>
<li><code>onUnaccepted</code> (function(info)): Notifier for unaccepted modules</li>
<li><code>onAccepted</code> (function(info)): Notifier for accepted modules</li>
<li><code>onDisposed</code> (function(info)): Notifier for disposed modules</li>
<li><code>onErrored</code> (function(info)): Notifier for errors</li>
</ul>
<p>The <code>info</code> parameter will be an object containing some of the following values:</p>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">"self-declined"</span> <span class="token operator">|</span> <span class="token string">"declined"</span> <span class="token operator">|</span>
        <span class="token string">"unaccepted"</span> <span class="token operator">|</span> <span class="token string">"accepted"</span> <span class="token operator">|</span>
        <span class="token string">"disposed"</span> <span class="token operator">|</span> <span class="token string">"accept-errored"</span> <span class="token operator">|</span>
        <span class="token string">"self-accept-errored"</span> <span class="token operator">|</span> <span class="token string">"self-accept-error-handler-errored"</span><span class="token punctuation">,</span>
  moduleId<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">// The module in question.</span>
  dependencyId<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// For errors: the module id owning the accept handler.</span>
  chain<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// For declined/accepted/unaccepted: the chain from where the update was propagated.</span>
  parentId<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token comment">// For declined: the module id of the declining parent</span>
  outdatedModules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// For accepted: the modules that are outdated and will be disposed</span>
  outdatedDependencies<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// For accepted: The location of accept handlers that will handle the update</span>
    <span class="token number">5</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// For errors: the thrown error</span>
  originalError<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">// For self-accept-error-handler-errored:</span>
                                <span class="token comment">// the error thrown by the module before the error handler tried to handle it.</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#addstatushandler" id="addstatushandler"></a>
<span class="text"><code>addStatusHandler</code></span>
<a aria-label="&lt;code&gt;addStatusHandler&lt;/code&gt;" class="icon-link" href="#addstatushandler"></a>
</h3>
<p>注册一个函数来监听 <code>status</code>的变化。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">addStatusHandler</span><span class="token punctuation">(</span>status <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 响应当前状态……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#removestatushandler" id="removestatushandler"></a>
<span class="text"><code>removeStatusHandler</code></span>
<a aria-label="&lt;code&gt;removeStatusHandler&lt;/code&gt;" class="icon-link" href="#removestatushandler"></a>
</h3>
<p>移除一个注册的状态处理函数。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">removeStatusHandler</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>loader API</h1>
<div><p>所谓 loader 只是一个导出为函数的 JavaScript 模块。<a href="https://github.com/webpack/loader-runner">loader runner</a> 会调用这个函数，然后把上一个 loader 产生的结果或者资源文件(resource file)传入进去。函数的 <code>this</code> 上下文将由 webpack 填充，并且 <a href="https://github.com/webpack/loader-runner">loader runner</a> 具有一些有用方法，可以使 loader 改变为异步调用方式，或者获取 query 参数。</p>
<p>第一个 loader 的传入参数只有一个：资源文件(resource file)的内容。compiler 需要得到最后一个 loader 产生的处理结果。这个处理结果应该是 <code>String</code> 或者 <code>Buffer</code>（被转换为一个 string），代表了模块的 JavaScript 源码。另外还可以传递一个可选的 SourceMap 结果（格式为 JSON 对象）。</p>
<p>如果是单个处理结果，可以在<strong>同步模式</strong>中直接返回。如果有多个处理结果，则必须调用 <code>this.callback()</code>。在<strong>异步模式</strong>中，必须调用 <code>this.async()</code>，来指示 <a href="https://github.com/webpack/loader-runner">loader runner</a> 等待异步结果，它会返回 <code>this.callback()</code> 回调函数，随后 loader 必须返回 <code>undefined</code> 并且调用该回调函数。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>以下部分提供了不同类型的 loader 的一些基本示例。注意，<code>map</code> 和 <code>meta</code> 参数是可选的，查看下面的 <a href="/api/loaders#this-callback"><code>this.callback</code></a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#同步-loader" id="同步-loader"></a>
<span class="text">同步 loader</span>
<a aria-label="同步 loader" class="icon-link" href="#同步-loader"></a>
</h3>
<p>无论是 <code>return</code> 还是 <code>this.callback</code> 都可以同步地返回转换后的 <code>content</code> 内容：</p>
<p><strong>sync-loader.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><code>this.callback</code> 方法则更灵活，因为它允许传递多个参数，而不仅仅是<code>content</code>。</p>
<p><strong>sync-loader-with-multiple-results.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 当调用 callback() 时总是返回 undefined</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#异步-loader" id="异步-loader"></a>
<span class="text">异步 loader</span>
<a aria-label="异步 loader" class="icon-link" href="#异步-loader"></a>
</h3>
<p>对于异步 loader，使用 <a href="/api/loaders#this-async"><code>this.async</code></a> 来获取 <code>callback</code> 函数：</p>
<p><strong>async-loader.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>async-loader-with-multiple-results.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> map<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">someAsyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> sourceMaps<span class="token punctuation">,</span> meta<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> loader 最初被设计为可以在同步 loader pipeline（如 Node.js ，使用 <a href="https://github.com/webpack/enhanced-require">enhanced-require</a>），_以及_在异步 pipeline（如 webpack ）中运行。然而在 Node.js 这样的单线程环境下进行耗时长的同步计算不是个好主意，我们建议尽可能地使你的 loader 异步化。但如果计算量很小，同步 loader 也是可以的。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#-raw-loader" id="-raw-loader"></a>
<span class="text">"Raw" loader</span>
<a aria-label='"Raw" loader' class="icon-link" href="#-raw-loader"></a>
</h3>
<p>默认情况下，资源文件会被转化为 UTF-8 字符串，然后传给 loader。通过设置 <code>raw</code>，loader 可以接收原始的 <code>Buffer</code>。每一个 loader 都可以用 <code>String</code> 或者 <code>Buffer</code> 的形式传递它的处理结果。Complier 将会把它们在 loader 之间相互转换。</p>
<p><strong>raw-loader.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">assert</span><span class="token punctuation">(</span>content <span class="token keyword">instanceof</span> <span class="token class-name">Buffer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 返回值也可以是一个 `Buffer`</span>
  <span class="token comment">// 即使不是 raw loader 也没问题</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>raw <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#越过-loader-pitching-loader-" id="越过-loader-pitching-loader-"></a>
<span class="text">越过 loader(Pitching loader)</span>
<a aria-label="越过 loader(Pitching loader)" class="icon-link" href="#越过-loader-pitching-loader-"></a>
</h3>
<p>loader <strong>总是</strong>从右到左地被调用。有些情况下，loader 只关心 request 后面的<strong>元数据(metadata)</strong>，并且忽略前一个 loader 的结果。在实际（从右到左）执行 loader 之前，会先<strong>从左到右</strong>调用 loader 上的 <code>pitch</code> 方法。对于以下 <a href="/configuration/module#rule-use"><code>use</code></a> 配置：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">//...</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'a-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'b-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'c-loader'</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>将会发生这些步骤：</p>
<pre><code class="lang-diff">|- a-loader `pitch`
  |- b-loader `pitch`
    |- c-loader `pitch`
      |- requested module is picked up as a dependency
    |- c-loader normal execution
  |- b-loader normal execution
|- a-loader normal execution
</code></pre>
<p>那么，为什么 loader 可以利用 "跳跃(pitching)" 阶段呢？</p>
<p>首先，传递给 <code>pitch</code> 方法的 <code>data</code>，在执行阶段也会暴露在 <code>this.data</code> 之下，并且可以用于在循环时，捕获和共享前面的信息。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>pitch <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>其次，如果某个 loader 在 <code>pitch</code> 方法中给出一个结果，那么这个过程会回过身来，并跳过剩下的 loader。在我们上面的例子中，如果 <code>b-loader</code> 的 <code>pitch</code> 方法返回了一些东西：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">someSyncOperation</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>pitch <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>remainingRequest<span class="token punctuation">,</span> precedingRequest<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">someCondition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'module.exports = require('</span> <span class="token operator">+</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'-!'</span> <span class="token operator">+</span> remainingRequest<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">');'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>上面的步骤将被缩短为：</p>
<pre><code class="lang-diff">|- a-loader `pitch`
  |- b-loader `pitch` returns a module
|- a-loader normal execution
</code></pre>
<p>查看 <a href="https://github.com/webpack-contrib/bundle-loader">bundle-loader</a>，了解如何以更有意义的方式使用此过程。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader-上下文" id="loader-上下文"></a>
<span class="text">loader 上下文</span>
<a aria-label="loader 上下文" class="icon-link" href="#loader-上下文"></a>
</h2>
<p>loader context 表示在 loader 内使用 <code>this</code> 可以访问的一些方法或属性。</p>
<p>假设我们这样请求加载别的模块：
在 <code>/abc/file.js</code> 中：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader1?xyz!loader2!./resource?rrr'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-version" id="this-version"></a>
<span class="text"><code>this.version</code></span>
<a aria-label="&lt;code&gt;this.version&lt;/code&gt;" class="icon-link" href="#this-version"></a>
</h3>
<p><strong>loader API 的版本号。</strong>目前是 <code>2</code>。这对于向后兼容性有一些用处。通过这个版本号，你可以为不同版本间的破坏性变更编写不同的逻辑，或做降级处理。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-context" id="this-context"></a>
<span class="text"><code>this.context</code></span>
<a aria-label="&lt;code&gt;this.context&lt;/code&gt;" class="icon-link" href="#this-context"></a>
</h3>
<p><strong>模块所在的目录。</strong>可以用作解析其他模块路径的上下文。</p>
<p>在我们的例子中：这个属性为 <code>/abc</code>，因为 <code>resource.js</code> 在这个目录中</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-rootcontext" id="this-rootcontext"></a>
<span class="text"><code>this.rootContext</code></span>
<a aria-label="&lt;code&gt;this.rootContext&lt;/code&gt;" class="icon-link" href="#this-rootcontext"></a>
</h3>
<p>从 webpack 4 开始，原先的 <code>this.options.context</code> 被改进为 <code>this.rootContext</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-request" id="this-request"></a>
<span class="text"><code>this.request</code></span>
<a aria-label="&lt;code&gt;this.request&lt;/code&gt;" class="icon-link" href="#this-request"></a>
</h3>
<p>被解析出来的 request 字符串。</p>
<p>在我们的例子中：<code>"/abc/loader1.js?xyz!/abc/node_modules/loader2/index.js!/abc/resource.js?rrr"</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-query" id="this-query"></a>
<span class="text"><code>this.query</code></span>
<a aria-label="&lt;code&gt;this.query&lt;/code&gt;" class="icon-link" href="#this-query"></a>
</h3>
<ol start="undefined">
<li>如果这个 loader 配置了 <a href="/configuration/module/#useentry"><code>options</code></a> 对象的话，<code>this.query</code> 就指向这个 option 对象。</li>
<li>如果 loader 中没有 <code>options</code>，而是以 query 字符串作为参数调用时，<code>this.query</code> 就是一个以 <code>?</code> 开头的字符串。</li>
</ol>
<blockquote class="tip"><div class="tip-content"> 使用 <code>loader-utils</code> 中提供的 <a href="https://github.com/webpack/loader-utils#getoptions"><code>getOptions</code> 方法</a> 来提取给定 loader 的 option。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-callback" id="this-callback"></a>
<span class="text"><code>this.callback</code></span>
<a aria-label="&lt;code&gt;this.callback&lt;/code&gt;" class="icon-link" href="#this-callback"></a>
</h3>
<p>一个可以同步或者异步调用的可以返回多个结果的函数。预期的参数是：</p>
<!-- eslint-skip -->
<pre><code class="lang-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">callback</span><span class="token punctuation">(</span>
  err<span class="token punctuation">:</span> Error <span class="token operator">|</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
  content<span class="token punctuation">:</span> string <span class="token operator">|</span> Buffer<span class="token punctuation">,</span>
  sourceMap<span class="token operator">?</span><span class="token punctuation">:</span> SourceMap<span class="token punctuation">,</span>
  meta<span class="token operator">?</span><span class="token punctuation">:</span> any
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ol start="undefined">
<li>第一个参数必须是 <code>Error</code> 或者 <code>null</code></li>
<li>第二个参数是一个 <code>string</code> 或者 <a href="https://nodejs.org/api/buffer.html"><code>Buffer</code></a>。</li>
<li>可选的：第三个参数必须是一个可以被<a href="https://github.com/mozilla/source-map">这个模块</a>解析的 source map。</li>
<li>可选的：第四个选项，会被 webpack 忽略，可以是任何东西（例如一些元数据）。</li>
</ol>
<blockquote class="tip"><div class="tip-content"> 可以将抽象语法树(abstract syntax tree - AST)（例如 <a href="https://github.com/estree/estree"><code>ESTree</code></a>）作为第四个参数（<code>meta</code>），如果你想在多个 loader 之间共享通用的 AST，这样做有助于加速编译时间。 </div></blockquote><p>如果这个函数被调用的话，你应该返回 undefined 从而避免含糊的 loader 结果。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-async" id="this-async"></a>
<span class="text"><code>this.async</code></span>
<a aria-label="&lt;code&gt;this.async&lt;/code&gt;" class="icon-link" href="#this-async"></a>
</h3>
<p>告诉 <a href="https://github.com/webpack/loader-runner">loader-runner</a> 这个 loader 将会异步地回调。返回 <code>this.callback</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-data" id="this-data"></a>
<span class="text"><code>this.data</code></span>
<a aria-label="&lt;code&gt;this.data&lt;/code&gt;" class="icon-link" href="#this-data"></a>
</h3>
<p>在 pitch 阶段和正常阶段之间共享的 data 对象。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-cacheable" id="this-cacheable"></a>
<span class="text"><code>this.cacheable</code></span>
<a aria-label="&lt;code&gt;this.cacheable&lt;/code&gt;" class="icon-link" href="#this-cacheable"></a>
</h3>
<p>设置是否可缓存标志的函数：</p>
<pre><code class="lang-typescript"><span class="token function">cacheable</span><span class="token punctuation">(</span>flag <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">:</span> <span class="token keyword">boolean</span><span class="token punctuation">)</span>
</code></pre>
<p>默认情况下，loader 的处理结果会被标记为可缓存。调用这个方法然后传入 <code>false</code>，可以关闭 loader 的缓存。</p>
<p>一个可缓存的 loader 在输入和相关依赖没有变化时，必须返回相同的结果。这意味着 loader 除了 <code>this.addDependency</code> 里指定的以外，不应该有其它任何外部依赖。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-loaders" id="this-loaders"></a>
<span class="text"><code>this.loaders</code></span>
<a aria-label="&lt;code&gt;this.loaders&lt;/code&gt;" class="icon-link" href="#this-loaders"></a>
</h3>
<p>所有 loader 组成的数组。它在 pitch 阶段的时候是可以写入的。</p>
<!-- eslint-skip -->
<pre><code class="lang-javascript">loaders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>request<span class="token punctuation">:</span> string<span class="token punctuation">,</span> path<span class="token punctuation">:</span> string<span class="token punctuation">,</span> query<span class="token punctuation">:</span> string<span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre>
<p>在我们的示例中：</p>
<pre><code class="lang-javascript"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    request<span class="token punctuation">:</span> <span class="token string">'/abc/loader1.js?xyz'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token string">'/abc/loader1.js'</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span> <span class="token string">'?xyz'</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    request<span class="token punctuation">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> <span class="token string">'/abc/node_modules/loader2/index.js'</span><span class="token punctuation">,</span>
    query<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">[</span>Function<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-loaderindex" id="this-loaderindex"></a>
<span class="text"><code>this.loaderIndex</code></span>
<a aria-label="&lt;code&gt;this.loaderIndex&lt;/code&gt;" class="icon-link" href="#this-loaderindex"></a>
</h3>
<p>当前 loader 在 loader 数组中的索引。</p>
<p>在我们的示例中：loader1 中得到：<code>0</code>，loader2 中得到：<code>1</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-resource" id="this-resource"></a>
<span class="text"><code>this.resource</code></span>
<a aria-label="&lt;code&gt;this.resource&lt;/code&gt;" class="icon-link" href="#this-resource"></a>
</h3>
<p>request 中的资源部分，包括 query 参数。</p>
<p>在我们的示例中：<code>"/abc/resource.js?rrr"</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-resourcepath" id="this-resourcepath"></a>
<span class="text"><code>this.resourcePath</code></span>
<a aria-label="&lt;code&gt;this.resourcePath&lt;/code&gt;" class="icon-link" href="#this-resourcepath"></a>
</h3>
<p>资源文件的路径。</p>
<p>在我们的示例中：<code>"/abc/resource.js"</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-resourcequery" id="this-resourcequery"></a>
<span class="text"><code>this.resourceQuery</code></span>
<a aria-label="&lt;code&gt;this.resourceQuery&lt;/code&gt;" class="icon-link" href="#this-resourcequery"></a>
</h3>
<p>资源的 query 参数。</p>
<p>在我们的示例中：<code>"?rrr"</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-target" id="this-target"></a>
<span class="text"><code>this.target</code></span>
<a aria-label="&lt;code&gt;this.target&lt;/code&gt;" class="icon-link" href="#this-target"></a>
</h3>
<p>编译的目标。从配置选项中传递过来的。</p>
<p>示例：<code>"web"</code>, <code>"node"</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-webpack" id="this-webpack"></a>
<span class="text"><code>this.webpack</code></span>
<a aria-label="&lt;code&gt;this.webpack&lt;/code&gt;" class="icon-link" href="#this-webpack"></a>
</h3>
<p>如果是由 webpack 编译的，这个布尔值会被设置为真。</p>
<blockquote class="tip"><div class="tip-content"> loader 最初被设计为可以同时当 Babel transform 用。如果你编写了一个 loader 可以同时兼容二者，那么可以使用这个属性了解是否存在可用的 loaderContext 和 webpack 特性。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-sourcemap" id="this-sourcemap"></a>
<span class="text"><code>this.sourceMap</code></span>
<a aria-label="&lt;code&gt;this.sourceMap&lt;/code&gt;" class="icon-link" href="#this-sourcemap"></a>
</h3>
<p>应该生成一个 source map。因为生成 source map 可能会非常耗时，你应该确认 source map 确实有必要请求。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-emitwarning" id="this-emitwarning"></a>
<span class="text"><code>this.emitWarning</code></span>
<a aria-label="&lt;code&gt;this.emitWarning&lt;/code&gt;" class="icon-link" href="#this-emitwarning"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">emitWarning</span><span class="token punctuation">(</span>warning<span class="token punctuation">:</span> Error<span class="token punctuation">)</span>
</code></pre>
<p>发出一个警告，在输出中显示如下：</p>
<pre><code class="lang-bash">WARNING <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Warning <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is a Warning<span class="token operator">!</span>
 @ ./src/index.js 1:0-25
</code></pre>
<blockquote class="tip"><div class="tip-content"> Note that the warnings will not be displayed if <code>stats.warnings</code> is set to <code>false</code>, or some other omit setting is used to <code>stats</code> such as <code>none</code> or <code>errors-only</code>. See the <a href="/configuration/stats/#stats">stats configuration</a>. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-emiterror" id="this-emiterror"></a>
<span class="text"><code>this.emitError</code></span>
<a aria-label="&lt;code&gt;this.emitError&lt;/code&gt;" class="icon-link" href="#this-emiterror"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">emitError</span><span class="token punctuation">(</span>error<span class="token punctuation">:</span> Error<span class="token punctuation">)</span>
</code></pre>
<p>发出一个错误，在输出中显示如下：</p>
<pre><code class="lang-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module Error <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Here is an Error<span class="token operator">!</span>
 @ ./src/index.js 1:0-25
</code></pre>
<blockquote class="tip"><div class="tip-content"> Unlike throwing an Error directly, it will NOT interrupt the compilation process of the current module. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-loadmodule" id="this-loadmodule"></a>
<span class="text"><code>this.loadModule</code></span>
<a aria-label="&lt;code&gt;this.loadModule&lt;/code&gt;" class="icon-link" href="#this-loadmodule"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">loadModule</span><span class="token punctuation">(</span>request<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> source<span class="token punctuation">,</span> sourceMap<span class="token punctuation">,</span> <span class="token keyword">module</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>解析给定的 request 到一个模块，应用所有配置的 loader ，并且在回调函数中传入生成的 source 、sourceMap 和 模块实例（通常是 <a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js"><code>NormalModule</code></a> 的一个实例）。如果你需要获取其他模块的源代码来生成结果的话，你可以使用这个函数。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-resolve" id="this-resolve"></a>
<span class="text"><code>this.resolve</code></span>
<a aria-label="&lt;code&gt;this.resolve&lt;/code&gt;" class="icon-link" href="#this-resolve"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">resolve</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> request<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>像 require 表达式一样解析一个 request 。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-adddependency" id="this-adddependency"></a>
<span class="text"><code>this.addDependency</code></span>
<a aria-label="&lt;code&gt;this.addDependency&lt;/code&gt;" class="icon-link" href="#this-adddependency"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">addDependency</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span>
<span class="token function">dependency</span><span class="token punctuation">(</span>file<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token comment">// 简写</span>
</code></pre>
<p>加入一个文件作为产生 loader 结果的依赖，使它们的任何变化可以被监听到。例如，<a href="https://github.com/webpack-contrib/html-loader"><code>html-loader</code></a> 就使用了这个技巧，当它发现 <code>src</code> 和 <code>src-set</code> 属性时，就会把这些属性上的 url 加入到被解析的 html 文件的依赖中。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-addcontextdependency" id="this-addcontextdependency"></a>
<span class="text"><code>this.addContextDependency</code></span>
<a aria-label="&lt;code&gt;this.addContextDependency&lt;/code&gt;" class="icon-link" href="#this-addcontextdependency"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">addContextDependency</span><span class="token punctuation">(</span>directory<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span>
</code></pre>
<p>把文件夹作为 loader 结果的依赖加入。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-cleardependencies" id="this-cleardependencies"></a>
<span class="text"><code>this.clearDependencies</code></span>
<a aria-label="&lt;code&gt;this.clearDependencies&lt;/code&gt;" class="icon-link" href="#this-cleardependencies"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">clearDependencies</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>移除 loader 结果的所有依赖。甚至自己和其它 loader 的初始依赖。考虑使用 <code>pitch</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-emitfile" id="this-emitfile"></a>
<span class="text"><code>this.emitFile</code></span>
<a aria-label="&lt;code&gt;this.emitFile&lt;/code&gt;" class="icon-link" href="#this-emitfile"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">emitFile</span><span class="token punctuation">(</span>name<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> content<span class="token punctuation">:</span> Buffer<span class="token operator">|</span><span class="token keyword">string</span><span class="token punctuation">,</span> sourceMap<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>产生一个文件。这是 webpack 特有的。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-fs" id="this-fs"></a>
<span class="text"><code>this.fs</code></span>
<a aria-label="&lt;code&gt;this.fs&lt;/code&gt;" class="icon-link" href="#this-fs"></a>
</h3>
<p>用于访问 <code>compilation</code> 的 <code>inputFileSystem</code> 属性。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#废弃的上下文属性" id="废弃的上下文属性"></a>
<span class="text">废弃的上下文属性</span>
<a aria-label="废弃的上下文属性" class="icon-link" href="#废弃的上下文属性"></a>
</h2>
<blockquote class="warning"><div class="tip-content"> 强烈建议不要使用这些属性，因为我们打算移除它们。它们仍然列在此处用于文档目的。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-exec" id="this-exec"></a>
<span class="text"><code>this.exec</code></span>
<a aria-label="&lt;code&gt;this.exec&lt;/code&gt;" class="icon-link" href="#this-exec"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">exec</span><span class="token punctuation">(</span>code<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> filename<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span>
</code></pre>
<p>以模块的方式执行一些代码片段。如果需要，请查看<a href="https://github.com/webpack/webpack.js.org/issues/1268#issuecomment-313513988">这里的评论</a>以获取替换方法。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-resolvesync" id="this-resolvesync"></a>
<span class="text"><code>this.resolveSync</code></span>
<a aria-label="&lt;code&gt;this.resolveSync&lt;/code&gt;" class="icon-link" href="#this-resolvesync"></a>
</h3>
<pre><code class="lang-typescript"><span class="token function">resolveSync</span><span class="token punctuation">(</span>context<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">,</span> request<span class="token punctuation">:</span> <span class="token keyword">string</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token keyword">string</span>
</code></pre>
<p>像 require 表达式一样解析一个 request。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-value" id="this-value"></a>
<span class="text"><code>this.value</code></span>
<a aria-label="&lt;code&gt;this.value&lt;/code&gt;" class="icon-link" href="#this-value"></a>
</h3>
<p>向下一个 loader 传值。如果你知道了作为模块执行后的结果，请在这里赋值（以单元素数组的形式）。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-inputvalue" id="this-inputvalue"></a>
<span class="text"><code>this.inputValue</code></span>
<a aria-label="&lt;code&gt;this.inputValue&lt;/code&gt;" class="icon-link" href="#this-inputvalue"></a>
</h3>
<p>从上一个 loader 那里传递过来的值。如果你会以模块的方式处理输入参数，建议预先读入这个变量（为了性能因素）。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-options" id="this-options"></a>
<span class="text"><code>this.options</code></span>
<a aria-label="&lt;code&gt;this.options&lt;/code&gt;" class="icon-link" href="#this-options"></a>
</h3>
<blockquote class="warning"><div class="tip-content"> <code>options</code> 属性，在 webpack 3 中已经废弃(deprecated)，在 webpack 4 中已经移除(removed)。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-debug" id="this-debug"></a>
<span class="text"><code>this.debug</code></span>
<a aria-label="&lt;code&gt;this.debug&lt;/code&gt;" class="icon-link" href="#this-debug"></a>
</h3>
<p>一个布尔值，当处于 debug 模式时为 true。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-minimize" id="this-minimize"></a>
<span class="text"><code>this.minimize</code></span>
<a aria-label="&lt;code&gt;this.minimize&lt;/code&gt;" class="icon-link" href="#this-minimize"></a>
</h3>
<p>决定处理结果是否应该被压缩。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-_compilation" id="this-_compilation"></a>
<span class="text"><code>this._compilation</code></span>
<a aria-label="&lt;code&gt;this._compilation&lt;/code&gt;" class="icon-link" href="#this-_compilation"></a>
</h3>
<p>一种 hack 写法。用于访问 webpack 的 Compilation 对象。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-_compiler" id="this-_compiler"></a>
<span class="text"><code>this._compiler</code></span>
<a aria-label="&lt;code&gt;this._compiler&lt;/code&gt;" class="icon-link" href="#this-_compiler"></a>
</h3>
<p>一种 hack 写法。用于访问 webpack 的 Compiler 对象。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#this-_module" id="this-_module"></a>
<span class="text"><code>this._module</code></span>
<a aria-label="&lt;code&gt;this._module&lt;/code&gt;" class="icon-link" href="#this-_module"></a>
</h3>
<p>一种 hack 写法。用于访问当前加载的 Module 对象。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#error-reporting" id="error-reporting"></a>
<span class="text">Error Reporting</span>
<a aria-label="Error Reporting" class="icon-link" href="#error-reporting"></a>
</h2>
<p>You can report errors from inside a loader by:</p>
<ul>
<li>Using <a href="/api/loaders/#this-emiterror">this.emitError</a>. Will report the errors without interrupting module's compilation.</li>
<li>Using <code>throw</code> (or other uncaught exception). Throwing an error while a loader is running will cause current module compilation failure.</li>
<li>Using <code>callback</code> (in async mode). Pass an error to the callback will also cause module compilation failure.</li>
</ul>
<p>For example:</p>
<p><strong>./src/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./loader!./lib'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Throwing an error from loader:</p>
<p><strong>./src/loader.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Or pass an error to the callback in async mode:</p>
<p><strong>./src/loader.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> callback <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token keyword">async</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//...</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'This is a Fatal Error!'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>The module will get bundled like this:</p>
<!-- eslint-skip -->
<pre><code class="lang-javascript"><span class="token comment">/***/</span> <span class="token string">"./src/loader.js!./src/lib.js"</span><span class="token punctuation">:</span>
<span class="token comment">/*!************************************!*\
  !*** ./src/loader.js!./src/lib.js ***!
  \************************************/</span>
<span class="token comment">/*! no static exports found */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">"Module build failed (from ./src/loader.js):\nError: This is a Fatal Error!\n    at Object.module.exports (/workspace/src/loader.js:3:9)"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/***/</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>Then the build output will also display the error (Similar to <code>this.emitError</code>):</p>
<pre><code class="lang-bash">ERROR <span class="token keyword">in</span> ./src/lib.js <span class="token punctuation">(</span>./src/loader.js<span class="token operator">!</span>./src/lib.js<span class="token punctuation">)</span>
Module build failed <span class="token punctuation">(</span>from ./src/loader.js<span class="token punctuation">)</span>:
Error: This is a Fatal Error<span class="token operator">!</span>
    at Object.module.exports <span class="token punctuation">(</span>/workspace/src/loader.js:2:9<span class="token punctuation">)</span>
 @ ./src/index.js 1:0-25
</code></pre>
<p>As you can see below, not only error message, but also details about which loader and module are involved:</p>
<ul>
<li>the module path: <code>ERROR in ./src/lib.js</code></li>
<li>the request string: <code>(./src/loader.js!./src/lib.js)</code></li>
<li>the loader path: <code>(from ./src/loader.js)</code></li>
<li>the caller path: <code>@ ./src/index.js 1:0-25</code></li>
</ul>
<blockquote class="warning"><div class="tip-content"> The loader path in the error is displayed since webpack 4.12 </div></blockquote><blockquote class="tip"><div class="tip-content"> All the errors and warnings will be recorded into <code>stats</code>. Please see <a href="/api/stats/#errors-and-warnings">Stats Data</a>. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#inline-matchresource" id="inline-matchresource"></a>
<span class="text">Inline matchResource</span>
<a aria-label="Inline matchResource" class="icon-link" href="#inline-matchresource"></a>
</h3>
<p>A new inline request syntax was introduced in webpack v4. Prefixing <code>&lt;match-resource&gt;!=!</code> to a request will set the <code>matchResource</code> for this request.</p>
<blockquote class="warning"><div class="tip-content"> It is not recommended to use this syntax in application code.
Inline request syntax is intended to only be used by loader generated code.
Not following this recommendation will make your code webpack-specific and non-standard. </div></blockquote><blockquote class="tip"><div class="tip-content"> A relative <code>matchResource</code> will resolve relative to the current context of the containing module. </div></blockquote><p>When a <code>matchResource</code> is set, it will be used to match with the <a href="/configuration/module/#module-rules"><code>module.rules</code></a> instead of the original resource. This can be useful if further loaders should be applied to the resource, or if the module type need to be changed. It's also displayed in the stats and used for matching <a href="/configuration/module/#rule-issuer"><code>Rule.issuer</code></a> and <a href="/plugins/split-chunks-plugin/#splitchunks-cachegroups-cachegroup-test"><code>test</code> in <code>splitChunks</code></a>.</p>
<p>Example:</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-javascript"><span class="token comment">/* STYLE: body { background: red; } */</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>A loader could transform the file into the following file and use the <code>matchResource</code> to apply the user-specified CSS processing rules:</p>
<p><strong>file.js</strong> (transformed by loader)</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token string">'./file.js.css!=!extract-style-loader/getStyles!./file.js'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>This will add a dependency to <code>extract-style-loader/getStyles!./file.js</code> and treat the result as <code>file.js.css</code>. Because <a href="/configuration/module/#module-rules"><code>module.rules</code></a> has a rule matching <code>/\.css$/</code> and it will apply to this dependency.</p>
<p>The loader could look like this:</p>
<p><strong>extract-style-loader/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> stringifyRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>stringifyRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getRemainingRequest <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'loader-utils'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getRemainingRequest<span class="token punctuation">;</span>
<span class="token keyword">const</span> getStylesLoader <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./getStyle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>STYLES_REGEXP<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    source <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>STYLES_REGEXP<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> remReq <span class="token operator">=</span> <span class="token function">getRemainingRequest</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`import ${stringifyRequest(`</span></span>$<span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>resource<span class="token punctuation">}</span><span class="token punctuation">.</span>css<span class="token operator">!=</span><span class="token operator">!</span>$<span class="token punctuation">{</span>getStylesLoader<span class="token punctuation">}</span><span class="token operator">!</span>$<span class="token punctuation">{</span>remReq<span class="token punctuation">}</span><span class="token template-string"><span class="token string">`)};</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>source<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>extract-style-loader/getStyles.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> match <span class="token operator">=</span> STYLES_REGEXP<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> match<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>模块方法</h1>
<div><p>本节涵盖了使用 webpack 编译代码的所有方法。在 webpack 打包应用程序时，你可以选择各种模块语法风格，包括 <a href="https://en.wikipedia.org/wiki/ECMAScript#6th_Edition_-_ECMAScript_2015">ES6</a>, <a href="https://en.wikipedia.org/wiki/CommonJS">CommonJS</a> 和 <a href="https://en.wikipedia.org/wiki/Asynchronous_module_definition">AMD</a>。</p>
<blockquote class="warning"><div class="tip-content"> 虽然 webpack 支持多种模块语法，但我们建议尽量遵循一致的语法，避免一些奇怪的行为和 bug。这是一个混合使用了 ES6 和 CommonJS 的<a href="https://github.com/webpack/webpack.js.org/issues/552">示例</a>，但我们确定还有其他的 BUG 会产生。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#es6-推荐-" id="es6-推荐-"></a>
<span class="text">ES6（推荐）</span>
<a aria-label="ES6（推荐）" class="icon-link" href="#es6-推荐-"></a>
</h2>
<p>webpack 2 支持原生的 ES6 模块语法，意味着你可以无须额外引入 babel 这样的工具，就可以使用 <code>import</code> 和 <code>export</code>。但是注意，如果使用其他的 ES6+ 特性，仍然需要引入 babel。webpack 支持以下的方法：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#import" id="import"></a>
<span class="text"><code>import</code></span>
<a aria-label="&lt;code&gt;import&lt;/code&gt;" class="icon-link" href="#import"></a>
</h3>
<p>通过 <code>import</code> 以静态的方式，导入另一个通过 <code>export</code> 导出的模块。</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> MyModule <span class="token keyword">from</span> <span class="token string">'./my-module.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NamedExport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./other-module.js'</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 这里的关键词是<strong>静态的</strong>。标准的 <code>import</code> 语句中，模块语句中不能以「具有逻辑或含有变量」的动态方式去引入其他模块。关于 import 的更多信息和 <code>import()</code> 动态用法，请查看这里的<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">说明</a>。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#export" id="export"></a>
<span class="text"><code>export</code></span>
<a aria-label="&lt;code&gt;export&lt;/code&gt;" class="icon-link" href="#export"></a>
</h3>
<p><code>默认</code>导出整个模块，或具名导出模块</p>
<pre><code class="lang-javascript"><span class="token comment">// 具名导出</span>
<span class="token keyword">export</span> <span class="token keyword">var</span> Count <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">Multiply</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">*</span> b<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 默认导出</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// Some data...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#import-" id="import-"></a>
<span class="text"><code>import()</code></span>
<a aria-label="&lt;code&gt;import()&lt;/code&gt;" class="icon-link" href="#import-"></a>
</h3>
<p><code>import('path/to/module') -&gt; Promise</code></p>
<p>动态地加载模块。调用 <code>import()</code> 之处，被作为分离的模块起点，意思是，被请求的模块和它引用的所有子模块，会分离到一个单独的 chunk 中。</p>
<blockquote class="tip"><div class="tip-content"> <a href="https://whatwg.github.io/loader/">ES2015 loader 规范</a> 定义了 <code>import()</code> 方法，可以在运行时动态地加载 ES2015 模块。 </div></blockquote><pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>_ <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Do something with lodash (a.k.a '_')...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> import() 特性依赖于内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果想在低版本浏览器使用 import()，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或者 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样 polyfill 库，来预先填充(shim) <code>Promise</code> 环境。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#magic-comments" id="magic-comments"></a>
<span class="text">Magic Comments</span>
<a aria-label="Magic Comments" class="icon-link" href="#magic-comments"></a>
</h2>
<p>Inline comments to make features work. By adding comments to the import we can do things such as name our chunk or select different modes. For a full list of these magic comments see the code below followed by an explanation of what these comments do.</p>
<pre><code class="lang-js"><span class="token comment">// 单个目标</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token string">'module'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 多个可能目标</span>
<span class="token keyword">import</span><span class="token punctuation">(</span>
  <span class="token comment">/* webpackInclude: /\.json$/ */</span>
  <span class="token comment">/* webpackExclude: /\.noimport\.json$/ */</span>
  <span class="token comment">/* webpackChunkName: "my-chunk-name" */</span>
  <span class="token comment">/* webpackMode: "lazy" */</span>
  <span class="token comment">/* webpackPrefetch: true */</span>
  <span class="token comment">/* webpackPreload: true */</span>
  <span class="token template-string"><span class="token string">`./locale/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>language<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackIgnore: true */</span> <span class="token string">'ignored-module.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>webpackIgnore</code>: Disables dynamic import parsing when set to <code>true</code>.</p>
<blockquote class="warning"><div class="tip-content"> Note that setting <code>webpackIgnore</code> to <code>true</code> opts out of code splitting. </div></blockquote><p><code>webpackChunkName</code>：新 chunk 的名称。从 webpack 2.6.0 开始，<code>[index]</code> and <code>[request]</code> 占位符，分别支持赋予一个递增的数字和实际解析的文件名。Adding this comment will cause our separate chunk to be named [my-chunk-name].js instead of [id].js.</p>
<p><code>webpackMode</code>：从 webpack 2.6.0 开始，可以指定以不同的模式解析动态导入。支持以下选项：</p>
<ul>
<li><code>"lazy"</code>（默认）：为每个 <code>import()</code> 导入的模块，生成一个可延迟加载(lazy-loadable) chunk。</li>
<li><code>"lazy-once"</code>：生成一个可以满足所有 <code>import()</code> 调用的单个可延迟加载(lazy-loadable) chunk。此 chunk 将在第一次 <code>import()</code> 调用时获取，随后的 <code>import()</code> 调用将使用相同的网络响应。注意，这种模式仅在部分动态语句中有意义，例如 <code>import(`./locales/${language}.json`)</code>，其中可能含有多个被请求的模块路径。</li>
<li><code>"eager"</code>：不会生成额外的 chunk，所有模块都被当前 chunk 引入，并且没有额外的网络请求。仍然会返回 <code>Promise</code>，但是是 resolved 状态。和静态导入相对比，在调用 import（）完成之前，该模块不会被执行。</li>
<li><code>"weak"</code>：尝试加载模块，如果该模块函数已经以其他方式加载（即，另一个 chunk 导入过此模块，或包含模块的脚本被加载）。仍然会返回 <code>Promise</code>，但是只有在客户端上已经有该 chunk 时才成功解析。如果该模块不可用，<code>Promise</code> 将会是 rejected 状态，并且网络请求永远不会执行。当需要的 chunks 始终在（嵌入在页面中的）初始请求中手动提供，而不是在应用程序导航在最初没有提供的模块导入的情况触发，这对于通用渲染（SSR）是非常有用的。</li>
</ul>
<p><code>webpackPrefetch</code>: Tells the browser that the resource is probably needed for some navigation in the future. Check out the guide for more information on <a href="/guides/code-splitting/#prefetching-preloading-modules">how webpackPrefetch works</a>.</p>
<p><code>webpackPreload</code>: Tells the browser that the resource might be needed during the current navigation. Check out the guide for more information on <a href="/guides/code-splitting/#prefetching-preloading-modules">how webpackPreload works</a>.</p>
<blockquote class="tip"><div class="tip-content"> 注意，所有这些选项都可以组合起来使用，如 <code>/* webpackMode: "lazy-once", webpackChunkName: "all-i18n-data" */</code>，这会按没有花括号的 JSON5 对象去解析。它会被包裹在 JavaScript 对象中，并使用 <a href="https://nodejs.org/dist/latest-v8.x/docs/api/vm.html">node VM</a> 执行。所有你不需要添加花括号。 </div></blockquote><p><code>webpackInclude</code>：在导入解析(import resolution)过程中，用于匹配的正则表达式。只有匹配到的模块<strong>才会被打包</strong>。</p>
<p><code>webpackExclude</code>：在导入解析(import resolution)过程中，用于匹配的正则表达式。所有匹配到的模块<strong>都不会被打包</strong>。</p>
<blockquote class="tip"><div class="tip-content"> 注意，<code>webpackInclude</code> 和 <code>webpackExclude</code> 选项不会影响到前缀，例如：<code>./locale</code>。 </div></blockquote><blockquote class="warning"><div class="tip-content"> 完全动态的语句（如 <code>import(foo)</code>），因为 webpack 至少需要一些文件的路径信息，而 <code>foo</code> 可能是系统或项目中任何文件的任何路径，因此 <code>foo</code> 将会解析失败。<code>import()</code> 必须至少包含模块位于何处的路径信息，所以打包应当限制在一个指定目录或一组文件中。 </div></blockquote><blockquote class="warning"><div class="tip-content"> 调用 <code>import()</code> 时，包含在其中的动态表达式 request，会潜在的请求的每个模块。例如，<code>import(`./locale/${language}.json`)</code> 会导致 <code>./locale</code> 目录下的每个 <code>.json</code> 文件，都被打包到新的 chunk 中。在运行时，当计算出变量 <code>language</code> 时，任何文件（如 <code>english.json</code> 或 <code>german.json</code>）都可能会被用到。 Using the <code>webpackInclude</code> and <code>webpackExclude</code> options allows us to add regex patterns that reduce the files that webpack will bundle for this import. </div></blockquote><blockquote class="warning"><div class="tip-content"> 在 webpack 中使用 <code>System.import</code> <a href="https://github.com/webpack/webpack/issues/2163">不符合提案规范</a>，所以在<a href="https://github.com/webpack/webpack/releases/tag/v2.1.0-beta.28">2.1.0-beta.28</a> 后被弃用，并且建议使用 <code>import()</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#commonjs" id="commonjs"></a>
<span class="text">CommonJS</span>
<a aria-label="CommonJS" class="icon-link" href="#commonjs"></a>
</h2>
<p>CommonJS 致力于为浏览器之外的 JavaScript 指定一个生态系统。webpack 支持以下的 CommonJS 方法：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require" id="require"></a>
<span class="text"><code>require</code></span>
<a aria-label="&lt;code&gt;require&lt;/code&gt;" class="icon-link" href="#require"></a>
</h3>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>以同步的方式检索其他模块的导出。由编译器(compiler)来确保依赖项在最终输出 bundle 中可用。</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> myModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'my-module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 以异步的方式使用，可能不会达到预期的效果。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-resolve" id="require-resolve"></a>
<span class="text"><code>require.resolve</code></span>
<a aria-label="&lt;code&gt;require.resolve&lt;/code&gt;" class="icon-link" href="#require-resolve"></a>
</h3>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>以同步的方式获取模块的 ID。由编译器(compiler)来确保依赖项在最终输出 bundle 中可用。更多关于模块的信息，请点击这里 <a href="/api/module-variables#module-id-commonjs-"><code>module.id</code></a>。</p>
<blockquote class="warning"><div class="tip-content"> webpack 中模块 ID 是一个数字（而在 NodeJS 中是一个字符串 -- 也就是文件名）。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-cache" id="require-cache"></a>
<span class="text"><code>require.cache</code></span>
<a aria-label="&lt;code&gt;require.cache&lt;/code&gt;" class="icon-link" href="#require-cache"></a>
</h3>
<p>多处引用同一个模块，最终只会产生一次模块执行和一次导出。所以，会在运行时(runtime)中会保存一份缓存。删除此缓存，会产生新的模块执行和新的导出。</p>
<blockquote class="warning"><div class="tip-content"> 只有很少数的情况需要考虑兼容性！ </div></blockquote><pre><code class="lang-javascript"><span class="token keyword">var</span> d1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">===</span> d1<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'dependency'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> d1<span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="token comment">// in file.js</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> module<span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">===</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
<span class="token keyword">delete</span> require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">===</span> undefined<span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span> <span class="token operator">!==</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span> <span class="token comment">// 这是理论上的操作不相等；在实际运行中，会导致栈溢出</span>
require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>module<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">!==</span> module<span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-ensure" id="require-ensure"></a>
<span class="text"><code>require.ensure</code></span>
<a aria-label="&lt;code&gt;require.ensure&lt;/code&gt;" class="icon-link" href="#require-ensure"></a>
</h3>
<blockquote class="warning"><div class="tip-content"> <code>require.ensure()</code> 是 webpack 特有的，已经被 <code>import()</code> 取代。 </div></blockquote><!-- eslint-skip -->
<pre><code class="lang-js">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span>
  dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span><span class="token punctuation">,</span>
  errorCallback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">,</span>
  chunkName<span class="token punctuation">:</span> String
<span class="token punctuation">)</span>
</code></pre>
<p>给定 <code>dependencies</code> 参数，将其对应的文件拆分到一个单独的 bundle 中，此 bundle 会被异步加载。当使用 CommonJS 模块语法时，这是动态加载依赖的唯一方法。意味着，可以在模块执行时才运行代码，只有在满足某些条件时才加载<code>依赖项</code>。</p>
<blockquote class="warning"><div class="tip-content"> 这个特性依赖于内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果想在低版本浏览器使用 <code>require.ensure</code>，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或者 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样 polyfill 库，来预先填充(shim) <code>Promise</code> 环境。 </div></blockquote><pre><code class="lang-javascript"><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'normal-dep'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> module<span class="token punctuation">.</span>hot <span class="token punctuation">)</span> <span class="token punctuation">{</span>
  require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Do something special...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>按照上面指定的顺序，webpack 支持以下参数：</p>
<ul>
<li><code>dependencies</code>：字符串构成的数组，声明 <code>callback</code> 回调函数中所需的所有模块。</li>
<li><code>callback</code>：只要加载好全部依赖，webpack 就会执行此函数。<code>require</code> 函数的实现，作为参数传入此函数。当程序运行需要依赖时，可以使用 <code>require()</code> 来加载依赖。函数体可以使用此参数，来进一步执行 <code>require()</code> 模块。</li>
<li><code>errorCallback</code>：当 webpack 加载依赖失败时，会执行此函数。</li>
<li><code>chunkName</code>：由 <code>require.ensure()</code> 创建出的 chunk 的名字。通过将同一个 <code>chunkName</code> 传递给不同的 <code>require.ensure()</code> 调用，我们可以将它们的代码合并到一个单独的 chunk 中，从而只产生一个浏览器必须加载的 bundle。</li>
</ul>
<blockquote class="warning"><div class="tip-content"> 虽然我们将 <code>require</code> 的实现，作为参数传递给回调函数，然而如果使用随意的名字，例如 <code>require.ensure([], function(request) { request('someModule'); })</code> 则无法被 webpack 静态解析器处理，所以还是请使用 <code>require</code>，例如 <code>require.ensure([], function(require) { require('someModule'); })</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#amd" id="amd"></a>
<span class="text">AMD</span>
<a aria-label="AMD" class="icon-link" href="#amd"></a>
</h2>
<p>AMD(Asynchronous Module Definition) 是一种定义了写入模块接口和加载模块接口的 JavaScript 规范。webpack 支持以下的 AMD 方法：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#define-通过-factory-方法导出-" id="define-通过-factory-方法导出-"></a>
<span class="text"><code>define</code>（通过 factory 方法导出）</span>
<a aria-label="&lt;code&gt;define&lt;/code&gt;（通过 factory 方法导出）" class="icon-link" href="#define-通过-factory-方法导出-"></a>
</h3>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span>name<span class="token punctuation">:</span> String<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factoryMethod<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<p>如果提供 <code>dependencies</code> 参数，将会调用 <code>factoryMethod</code> 方法，并（以相同的顺序）传入每个依赖项的导出。如果未提供 <code>dependencies</code> 参数，则调用 <code>factoryMethod</code> 方法时传入 <code>require</code>, <code>exports</code> 和 <code>module</code>（用于兼容）。如果此方法返回一个值，则返回值会作为此模块的导出。由编译器(compiler)来确保依赖项在最终输出 bundle 中可用。</p>
<blockquote class="warning"><div class="tip-content"> 注意：webpack 会忽略 <code>name</code> 参数。 </div></blockquote><pre><code class="lang-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'my-module'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>$<span class="token punctuation">,</span> myModule<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 使用 $ 和 myModule 做一些操作……</span>

  <span class="token comment">// 导出一个函数</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 此 define 导出方式不能在异步函数中调用。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#define-通过-value-导出-" id="define-通过-value-导出-"></a>
<span class="text"><code>define</code>（通过 value 导出）</span>
<a aria-label="&lt;code&gt;define&lt;/code&gt;（通过 value 导出）" class="icon-link" href="#define-通过-value-导出-"></a>
</h3>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token function">define</span><span class="token punctuation">(</span>value<span class="token punctuation">:</span> <span class="token operator">!</span>Function<span class="token punctuation">)</span>
</code></pre>
<p>只会将提供的 <code>value</code> 导出。这里的 <code>value</code> 可以是除函数外的任何值。</p>
<pre><code class="lang-javascript"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  answer<span class="token punctuation">:</span> <span class="token number">42</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 此 define 导出方式不能在异步函数中调用。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-amd-版本-" id="require-amd-版本-"></a>
<span class="text"><code>require</code>（AMD 版本）</span>
<a aria-label="&lt;code&gt;require&lt;/code&gt;（AMD 版本）" class="icon-link" href="#require-amd-版本-"></a>
</h3>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">:</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>callback<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre>
<p>与 <code>require.ensure</code> 类似，给定 <code>dependencies</code> 参数，将其对应的文件拆分到一个单独的 bundle 中，此 bundle 会被异步加载。然后会调用 <code>callback</code> 回调函数，并传入 <code>dependencies</code> 数组中每一项的导出。</p>
<blockquote class="warning"><div class="tip-content"> 这个特性依赖于内置的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>。如果想在低版本浏览器使用 <code>require.ensure</code>，记得使用像 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或者 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a> 这样 polyfill 库，来预先填充(shim) <code>Promise</code> 环境。 </div></blockquote><pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 这里没有提供命名 chunk 名称的选项。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#标签模块-labeled-modules-" id="标签模块-labeled-modules-"></a>
<span class="text">标签模块(Labeled Modules)</span>
<a aria-label="标签模块(Labeled Modules)" class="icon-link" href="#标签模块-labeled-modules-"></a>
</h2>
<p>webpack 内置的 <code>LabeledModulesPlugin</code> 插件，允许使用下面的方法导出和导入模块：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#export-标签" id="export-标签"></a>
<span class="text"><code>export</code> 标签</span>
<a aria-label="&lt;code&gt;export&lt;/code&gt; 标签" class="icon-link" href="#export-标签"></a>
</h3>
<p>导出给定的 <code>value</code>。<code>export</code> 标记可以出现在函数声明或变量声明之前。函数名或变量名是导出值的标识符。</p>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 做一些操作……</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 以异步的方式使用，可能不会达到预期的效果。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-标签" id="require-标签"></a>
<span class="text"><code>require</code> 标签</span>
<a aria-label="&lt;code&gt;require&lt;/code&gt; 标签" class="icon-link" href="#require-标签"></a>
</h3>
<p>使当前作用域下，可访问所依赖模块的所有导出。<code>require</code> 标签可以放置在一个字符串之前。依赖模块必须使用 <code>export</code> 标签导出值。CommonJS 或 AMD 模块无法通过这种方式，使用标签模块的导出。</p>
<p><strong>some-dependency.js</strong></p>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
<span class="token keyword">export</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token function">method</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 执行一些操作……</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<!-- eslint-skip -->
<pre><code class="lang-js">require<span class="token punctuation">:</span> <span class="token string">'some-dependency'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>answer<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#webpack" id="webpack"></a>
<span class="text">webpack</span>
<a aria-label="webpack" class="icon-link" href="#webpack"></a>
</h2>
<p>webpack 除了支持上述的语法之外，还可以使用一些 webpack 特定的方法：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-context" id="require-context"></a>
<span class="text"><code>require.context</code></span>
<a aria-label="&lt;code&gt;require.context&lt;/code&gt;" class="icon-link" href="#require-context"></a>
</h3>
<!-- eslint-skip -->
<pre><code class="lang-js">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>
  directory<span class="token punctuation">:</span> String<span class="token punctuation">,</span>
  includeSubdirs<span class="token punctuation">:</span> Boolean <span class="token comment">/* 可选的，默认值是 true */</span><span class="token punctuation">,</span>
  filter<span class="token punctuation">:</span> RegExp <span class="token comment">/* 可选的，默认值是 /^\.\/.*$/，所有文件 */</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> String  <span class="token comment">/* 可选的，'sync' | 'eager' | 'weak' | 'lazy' | 'lazy-once'，默认值是 'sync' */</span>
<span class="token punctuation">)</span>
</code></pre>
<p>指定一系列完整的依赖关系，通过一个 <code>directory</code> 路径、一个 <code>includeSubdirs</code> 选项、一个 <code>filter</code> 更细粒度的控制模块引入和一个 <code>mode</code> 定义加载方式。然后可以很容易地解析模块：</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'components'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.html$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> componentA <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'componentA'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>If <code>mode</code> is specified as "lazy", the underlying modules will be loaded asynchronously:</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> context <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'locales'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.json$/</span><span class="token punctuation">,</span> <span class="token string">'lazy'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'localeA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>locale <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// do something with locale</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The full list of available modes and its behavior is described in <a href="#import-"><code>import()</code></a> documentation.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-include" id="require-include"></a>
<span class="text"><code>require.include</code></span>
<a aria-label="&lt;code&gt;require.include&lt;/code&gt;" class="icon-link" href="#require-include"></a>
</h3>
<!-- eslint-skip -->
<pre><code class="lang-js">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>dependency<span class="token punctuation">:</span> String<span class="token punctuation">)</span>
</code></pre>
<p>引入一个不需要执行的<code>依赖</code>，这可以用于优化输出 chunk 中的依赖模块的位置。</p>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这会产生以下输出:</p>
<ul>
<li>entry chunk: <code>file.js</code> and <code>a</code></li>
<li>anonymous chunk: <code>b</code></li>
<li>anonymous chunk: <code>c</code></li>
</ul>
<p>如果不使用 <code>require.include('a')</code>，输出的两个匿名 chunk 都有模块 a。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-resolveweak" id="require-resolveweak"></a>
<span class="text"><code>require.resolveWeak</code></span>
<a aria-label="&lt;code&gt;require.resolveWeak&lt;/code&gt;" class="icon-link" href="#require-resolveweak"></a>
</h3>
<p>与 <code>require.resolve</code> 类似，但是这不会将 <code>module</code> 引入到 bundle 中。这就是所谓的"弱(weak)"依赖。</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模块可用时，执行一些操作……</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span>cache<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token string">'module'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 在模块被加载之前，执行一些操作……</span>
<span class="token punctuation">}</span>

<span class="token comment">// 你可以像执行其他 require/import 方法一样，</span>
<span class="token comment">// 执行动态解析（“上下文”）。</span>
<span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token string">'Foo'</span><span class="token punctuation">;</span>
__webpack_modules__<span class="token punctuation">[</span>require<span class="token punctuation">.</span><span class="token function">resolveWeak</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./page/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>page<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> <code>require.resolveWeak</code> 是<em>通用渲染</em>（SSR + 代码分离）的基础，例如在 <a href="https://github.com/faceyspacey/react-universal-component">react-universal-component</a> 等包中的用法。它允许代码在服务器端和客户端初始页面的加载上同步渲染。它要求手动或以某种方式提供 chunk。它可以在不需要指示应该被打包的情况下引入模块。它与 <code>import()</code> 一起使用，当用户导航触发额外的导入时，它会被接管。 </div></blockquote></div>
<br/><h1>模块变量</h1>
<div><p>本章节涵盖了使用 webpack 编译的代码中所有的<strong>变量</strong>。模块将通过 <code>module</code> 和其他变量，来访问编译过程中的某些数据。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#module-loaded-nodejs-" id="module-loaded-nodejs-"></a>
<span class="text"><code>module.loaded</code> (NodeJS)</span>
<a aria-label="&lt;code&gt;module.loaded&lt;/code&gt; (NodeJS)" class="icon-link" href="#module-loaded-nodejs-"></a>
</h3>
<p><code>false</code> 表示该模块正在执行， <code>true</code> 表示同步执行已经完成。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#module-hot-webpack-特有变量-" id="module-hot-webpack-特有变量-"></a>
<span class="text"><code>module.hot</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;module.hot&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#module-hot-webpack-特有变量-"></a>
</h3>
<p>表示 <a href="/concepts/hot-module-replacement">模块热替换(Hot Module Replacement)</a> 是否启用，并给进程提供一个接口。详细说明请查看 <a href="/api/hot-module-replacement">模块热替换 API 页面</a></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#module-id-commonjs-" id="module-id-commonjs-"></a>
<span class="text"><code>module.id</code> (CommonJS)</span>
<a aria-label="&lt;code&gt;module.id&lt;/code&gt; (CommonJS)" class="icon-link" href="#module-id-commonjs-"></a>
</h3>
<p>当前模块的 ID。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>id <span class="token operator">===</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#module-exports-commonjs-" id="module-exports-commonjs-"></a>
<span class="text"><code>module.exports</code> (CommonJS)</span>
<a aria-label="&lt;code&gt;module.exports&lt;/code&gt; (CommonJS)" class="icon-link" href="#module-exports-commonjs-"></a>
</h3>
<p>调用者通过 <code>require</code> 对模块进行调用时返回的值（默认为一个新对象）。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 做一些操作……</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 无法在异步函数中访问该变量 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#exports-commonjs-" id="exports-commonjs-"></a>
<span class="text"><code>exports</code> (CommonJS)</span>
<a aria-label="&lt;code&gt;exports&lt;/code&gt; (CommonJS)" class="icon-link" href="#exports-commonjs-"></a>
</h3>
<p>该变量默认值为 <code>module.exports</code>（即一个对象）。 如果 <code>module.exports</code> 被重写的话， <code>exports</code> 不再会被导出。</p>
<pre><code class="lang-javascript">exports<span class="token punctuation">.</span>someValue <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>anObject <span class="token operator">=</span> <span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">123</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
exports<span class="token punctuation">.</span>aFunction <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Do something</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#global-nodejs-" id="global-nodejs-"></a>
<span class="text"><code>global</code> (NodeJS)</span>
<a aria-label="&lt;code&gt;global&lt;/code&gt; (NodeJS)" class="icon-link" href="#global-nodejs-"></a>
</h3>
<p>见 <a href="https://nodejs.org/api/globals.html#globals_global">Node.js global</a>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#process-nodejs-" id="process-nodejs-"></a>
<span class="text"><code>process</code> (NodeJS)</span>
<a aria-label="&lt;code&gt;process&lt;/code&gt; (NodeJS)" class="icon-link" href="#process-nodejs-"></a>
</h3>
<p>见 <a href="https://nodejs.org/api/process.html">Node.js process</a>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__dirname-nodejs-" id="__dirname-nodejs-"></a>
<span class="text"><code>__dirname</code> (NodeJS)</span>
<a aria-label="&lt;code&gt;__dirname&lt;/code&gt; (NodeJS)" class="icon-link" href="#__dirname-nodejs-"></a>
</h3>
<p>取决于 <code>node.__dirname</code> 配置选项：</p>
<ul>
<li><code>false</code>: Not defined</li>
<li><code>mock</code>: equal "/"</li>
<li><code>true</code>: <a href="https://nodejs.org/api/globals.html#globals_dirname">Node.js __dirname</a></li>
</ul>
<p>如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 <code>true</code> 处理。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__filename-nodejs-" id="__filename-nodejs-"></a>
<span class="text"><code>__filename</code> (NodeJS)</span>
<a aria-label="&lt;code&gt;__filename&lt;/code&gt; (NodeJS)" class="icon-link" href="#__filename-nodejs-"></a>
</h3>
<p>取决于 <code>node.__filename</code> 配置选项：</p>
<ul>
<li><code>false</code>: Not defined</li>
<li><code>mock</code>: equal "/index.js"</li>
<li><code>true</code>: <a href="https://nodejs.org/api/globals.html#globals_filename">Node.js __filename</a></li>
</ul>
<p>如果在一个被 Parser 解析的表达式内部使用，则配置选项会被当作 <code>true</code> 处理。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__resourcequery-webpack-特有变量-" id="__resourcequery-webpack-特有变量-"></a>
<span class="text"><code>__resourceQuery</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__resourceQuery&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__resourcequery-webpack-特有变量-"></a>
</h3>
<p>当前模块的资源查询(resource query) 。如果进行了如下的 <code>reqiure</code> 调用，那么查询字符串(query string)在<code>file.js</code> 中可访问。</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'file.js?test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>file.js</strong></p>
<pre><code class="lang-javascript">__resourceQuery <span class="token operator">===</span> <span class="token string">'?test'</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__webpack_public_path__-webpack-特有变量-" id="__webpack_public_path__-webpack-特有变量-"></a>
<span class="text"><code>__webpack_public_path__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__webpack_public_path__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__webpack_public_path__-webpack-特有变量-"></a>
</h3>
<p>等同于 <code>output.publicPath</code> 配置选项.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__webpack_require__-webpack-特有变量-" id="__webpack_require__-webpack-特有变量-"></a>
<span class="text"><code>__webpack_require__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__webpack_require__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__webpack_require__-webpack-特有变量-"></a>
</h3>
<p>原始 require 函数。这个表达式不会被解析器解析为依赖。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__webpack_chunk_load__-webpack-特有变量-" id="__webpack_chunk_load__-webpack-特有变量-"></a>
<span class="text"><code>__webpack_chunk_load__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__webpack_chunk_load__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__webpack_chunk_load__-webpack-特有变量-"></a>
</h3>
<p>内部 chunk 载入函数，有两个输入参数：</p>
<ul>
<li><code>chunkId</code> 需要载入的 chunk id。</li>
<li><code>callback(require)</code> chunk 载入后调用的回调函数。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__webpack_modules__-webpack-特有变量-" id="__webpack_modules__-webpack-特有变量-"></a>
<span class="text"><code>__webpack_modules__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__webpack_modules__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__webpack_modules__-webpack-特有变量-"></a>
</h3>
<p>访问所有模块的内部对象。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__webpack_hash__-webpack-特有变量-" id="__webpack_hash__-webpack-特有变量-"></a>
<span class="text"><code>__webpack_hash__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__webpack_hash__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__webpack_hash__-webpack-特有变量-"></a>
</h3>
<p>这个变量只有在启用 <code>HotModuleReplacementPlugin</code> 或者 <code>ExtendedAPIPlugin</code> 时才生效。这个变量提供对编译过程中(compilation)的 hash 信息的获取。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#__non_webpack_require__-webpack-特有变量-" id="__non_webpack_require__-webpack-特有变量-"></a>
<span class="text"><code>__non_webpack_require__</code> (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;__non_webpack_require__&lt;/code&gt; (webpack 特有变量)" class="icon-link" href="#__non_webpack_require__-webpack-特有变量-"></a>
</h3>
<p>生成一个不会被 webpack 解析的 <code>require</code> 函数。配合全局可以获取到的 require 函数，可以完成一些酷炫操作。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#debug-webpack-特有变量-" id="debug-webpack-特有变量-"></a>
<span class="text"><code>DEBUG</code>  (webpack 特有变量)</span>
<a aria-label="&lt;code&gt;DEBUG&lt;/code&gt;  (webpack 特有变量)" class="icon-link" href="#debug-webpack-特有变量-"></a>
</h3>
<p>等同于配置选项中的 <code>debug</code>。</p>
</div>
<br/><h1>Plugin API</h1>
<div><p>插件是 webpack 生态系统的重要组成部分，为社区用户提供了一种强大方式来直接触及 webpack 的编译过程(compilation process)。插件能够 <a href="/api/compiler-hooks/#hooks">钩入(hook)</a> 到在每个编译(compilation)中触发的所有关键事件。在编译的每一步，插件都具备完全访问 <code>compiler</code> 对象的能力，如果情况合适，还可以访问当前 <code>compilation</code> 对象。</p>
<blockquote class="tip"><div class="tip-content"> 对于编写插件的高度概括，请从<a href="/contribute/writing-a-plugin">编写一个插件</a>开始。 </div></blockquote><p>我们首先回顾 <code>tapable</code> 工具，它提供了 webpack 插件接口的支柱。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#tapable" id="tapable"></a>
<span class="text">Tapable</span>
<a aria-label="Tapable" class="icon-link" href="#tapable"></a>
</h2>
<p>tapable 这个小型 library 是 webpack 的一个核心工具，但也可用于其他地方，以提供类似的插件接口。webpack 中许多对象扩展自 <code>Tapable</code> 类。这个类暴露 <code>tap</code>, <code>tapAsync</code> 和 <code>tapPromise</code> 方法，可以使用这些方法，注入自定义的构建步骤，这些步骤将在整个编译过程中不同时机触发。</p>
<p>请查看 <a href="https://github.com/webpack/tapable">文档</a> 了解更多信息。理解三种 <code>tap</code> 方法以及提供这些方法的钩子至关重要。要注意到，扩展自 <code>Tapable</code> 的对象（例如 compiler 对象）、它们提供的钩子和每个钩子的类型（例如 <code>SyncHook</code>）。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#插件类型-plugin-types-" id="插件类型-plugin-types-"></a>
<span class="text">插件类型(plugin types)</span>
<a aria-label="插件类型(plugin types)" class="icon-link" href="#插件类型-plugin-types-"></a>
</h2>
<p>根据所使用的 钩子(hook) 和 <code>tap</code> 方法，插件可以以多种不同的方式运行。这个工作方式与 <code>Tapable</code> 提供的 <a href="https://github.com/webpack/tapable#tapable">hooks</a> 密切相关。<a href="/api/compiler-hooks/#hooks">compiler hooks</a> 分别记录了 <code>Tapable</code> 内在的钩子，指出哪些 <code>tap</code> 方法可用。</p>
<p>因此，根据你触发到 <code>tap</code> 事件，插件可能会以不同的方式运行。例如，当钩入 <code>compile</code> 阶段时，只能使用同步的 <code>tap</code> 方法：</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>compile<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> params <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以同步方式触及 compile 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<p>然而，对于能够使用了 <code>AsyncHook(异步钩子)</code> 的 <code>run</code>，我们可以使用 <code>tapAsync</code> 或 <code>tapPromise</code>（以及 <code>tap</code>）：</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以具有延迟的异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>run<span class="token punctuation">.</span><span class="token function">tapPromise</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>source<span class="token punctuation">,</span> target<span class="token punctuation">,</span> routesList<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resolve <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'以具有延迟的异步方式触及 run 钩子。'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这些需求(story)的含义在于，可以有多种方式将 <code>hook</code> 钩入到 <code>compiler</code> 中，可以让各种插件都以合适的方式去运行。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#自定义的钩子函数-custom-hooks-" id="自定义的钩子函数-custom-hooks-"></a>
<span class="text">自定义的钩子函数(custom hooks)</span>
<a aria-label="自定义的钩子函数(custom hooks)" class="icon-link" href="#自定义的钩子函数-custom-hooks-"></a>
</h2>
<p>为了给其他插件的编译添加一个新的钩子，来 <code>tap(触及)</code> 到这些插件的内部，直接从 <code>tapable</code> 中 <code>require</code> 所需的钩子类(hook class)，然后创建：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> SyncHook <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'tapable'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>SyncHook<span class="token punctuation">;</span>

<span class="token comment">// 具有 `apply` 方法……</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">)</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Already in use'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SyncHook</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在你想要触发钩子的位置/时机下调用……</span>
compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>myCustomHook<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>再次声明，查看 <code>tapable</code> <a href="/api/tapable/">文档</a> 来，了解更多不同的钩子类(hook class)，以及它们是如何工作的。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#reporting-progress" id="reporting-progress"></a>
<span class="text">Reporting Progress</span>
<a aria-label="Reporting Progress" class="icon-link" href="#reporting-progress"></a>
</h2>
<p>Plugins can report progress via <a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a>, which prints progress messages to stderr by default. In order to enable progress reporting, pass a <code>--progress</code> argument when running the <a href="/api/cli/">webpack CLI</a>.</p>
<p>It is possible to customize the printed output by passing different arguments to the <code>reportProgress</code> function of <a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a>.</p>
<p>To report progress, a plugin must <code>tap</code> into a hook using the <code>context: true</code> option:</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>emit<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'MyPlugin'</span><span class="token punctuation">,</span>
  context<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> compiler<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> reportProgress <span class="token operator">=</span> context <span class="token operator">&amp;&amp;</span> context<span class="token punctuation">.</span>reportProgress<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Starting work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>reportProgress<span class="token punctuation">)</span> <span class="token function">reportProgress</span><span class="token punctuation">(</span><span class="token number">0.95</span><span class="token punctuation">,</span> <span class="token string">'Done work'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>The <code>reportProgress</code> function may be called with these arguments:</p>
<pre><code class="lang-js"><span class="token function">reportProgress</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><code>percentage</code>: This argument is unused; instead, <a href="/plugins/progress-plugin/"><code>ProgressPlugin</code></a> will calculate a percentage based on the current hook.</li>
<li><code>...args</code>: Any number of strings, which will be passed to the <code>ProgressPlugin</code> handler to be reported to the user.</li>
</ul>
<p>Note that only a subset of compiler and compilation hooks support the <code>reportProgress</code> function. See <a href="/plugins/progress-plugin/#supported-hooks"><code>ProgressPlugin</code></a> for a full list.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#下一步" id="下一步"></a>
<span class="text">下一步</span>
<a aria-label="下一步" class="icon-link" href="#下一步"></a>
</h2>
<p>查看 <a href="/api/compiler-hooks/">compiler hooks</a> 部分，了解所有可用的 <code>compiler</code> 钩子和其所需的参数的详细列表。</p>
</div>
<br/><h1>compiler 钩子</h1>
<div><p><code>Compiler</code> 模块是 webpack 的支柱引擎，它通过 <a href="/api/cli">CLI</a> 或 <a href="/api/node">Node API</a> 传递的所有选项，创建出一个 compilation 实例。它扩展(extend)自 <code>Tapable</code> 类，以便注册和调用插件。大多数面向用户的插件首，会先在 <code>Compiler</code> 上注册。</p>
<blockquote class="tip"><div class="tip-content"> 此模块会暴露在 <code>webpack.Compiler</code>，可以直接通过这种方式使用。关于更多信息，请查看<a href="https://github.com/pksjce/webpack-internal-examples/tree/master/compiler-example">这个示例</a>。 </div></blockquote><p>在为 webpack 开发插件时，你可能需要知道每个钩子函数是在哪里调用的。想要了解这些，请在 webpack 源码中搜索 <code>hooks.&lt;hook name&gt;.call</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#监听-watching-" id="监听-watching-"></a>
<span class="text">监听(watching)</span>
<a aria-label="监听(watching)" class="icon-link" href="#监听-watching-"></a>
</h2>
<p><code>Compiler</code> 支持可以监控文件系统的<a href="/api/node/#watching">监听(watching)</a>机制，并且在文件修改时重新编译。当处于监听模式(watch mode)时，compiler 会触发诸如 <code>watchRun</code>, <code>watchClose</code> 和 <code>invalid</code> 等额外的事件。通常用于<a href="/guides/development">开发环境</a>中使用，也常常会在 <code>webpack-dev-server</code> 这些工具的底层之下调用，由此开发人员无须每次都使用手动方式重新编译。还可以通过 <a href="/api/cli/#watch-options">CLI</a> 进入监听模式。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#相关钩子" id="相关钩子"></a>
<span class="text">相关钩子</span>
<a aria-label="相关钩子" class="icon-link" href="#相关钩子"></a>
</h2>
<p>以下生命周期钩子函数，是由 <code>compiler</code> 暴露，可以通过如下方式访问：</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>取决于不同的钩子类型，也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<p>关于钩子类型的描述，请查看 <a href="https://github.com/webpack/tapable#hook-types">Tapable 文档</a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#entryoption" id="entryoption"></a>
<span class="text"><code>entryOption</code></span>
<a aria-label="&lt;code&gt;entryOption&lt;/code&gt;" class="icon-link" href="#entryoption"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>在 webpack 选项中的 <a href="https://webpack.js.org/configuration/entry-context/#entry"><code>entry</code> 配置项</a> 处理过之后，执行插件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afterplugins" id="afterplugins"></a>
<span class="text"><code>afterPlugins</code></span>
<a aria-label="&lt;code&gt;afterPlugins&lt;/code&gt;" class="icon-link" href="#afterplugins"></a>
</h3>
<p><code>SyncHook</code></p>
<p>设置完初始插件之后，执行插件。</p>
<p>参数：<code>compiler</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afterresolvers" id="afterresolvers"></a>
<span class="text"><code>afterResolvers</code></span>
<a aria-label="&lt;code&gt;afterResolvers&lt;/code&gt;" class="icon-link" href="#afterresolvers"></a>
</h3>
<p><code>SyncHook</code></p>
<p>resolver 安装完成之后，执行插件。</p>
<p>参数：<code>compiler</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#environment" id="environment"></a>
<span class="text"><code>environment</code></span>
<a aria-label="&lt;code&gt;environment&lt;/code&gt;" class="icon-link" href="#environment"></a>
</h3>
<p><code>SyncHook</code></p>
<p>environment 准备好之后，执行插件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afterenvironment" id="afterenvironment"></a>
<span class="text"><code>afterEnvironment</code></span>
<a aria-label="&lt;code&gt;afterEnvironment&lt;/code&gt;" class="icon-link" href="#afterenvironment"></a>
</h3>
<p><code>SyncHook</code></p>
<p>environment 安装完成之后，执行插件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforerun" id="beforerun"></a>
<span class="text"><code>beforeRun</code></span>
<a aria-label="&lt;code&gt;beforeRun&lt;/code&gt;" class="icon-link" href="#beforerun"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p><code>compiler.run()</code> 执行之前，添加一个钩子。</p>
<p>参数：<code>compiler</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#run" id="run"></a>
<span class="text"><code>run</code></span>
<a aria-label="&lt;code&gt;run&lt;/code&gt;" class="icon-link" href="#run"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>开始读取 records 之前，钩入(hook into) compiler。</p>
<p>参数：<code>compiler</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#watchrun" id="watchrun"></a>
<span class="text"><code>watchRun</code></span>
<a aria-label="&lt;code&gt;watchRun&lt;/code&gt;" class="icon-link" href="#watchrun"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>监听模式下，一个新的编译(compilation)触发之后，执行一个插件，但是是在实际编译开始之前。</p>
<p>参数：<code>compiler</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#normalmodulefactory" id="normalmodulefactory"></a>
<span class="text"><code>normalModuleFactory</code></span>
<a aria-label="&lt;code&gt;normalModuleFactory&lt;/code&gt;" class="icon-link" href="#normalmodulefactory"></a>
</h3>
<p><code>SyncHook</code></p>
<p><code>NormalModuleFactory</code> 创建之后，执行插件。</p>
<p>参数：<code>normalModuleFactory</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#contextmodulefactory" id="contextmodulefactory"></a>
<span class="text"><code>contextModuleFactory</code></span>
<a aria-label="&lt;code&gt;contextModuleFactory&lt;/code&gt;" class="icon-link" href="#contextmodulefactory"></a>
</h3>
<p><code>ContextModuleFactory</code> 创建之后，执行插件。</p>
<p>参数：<code>contextModuleFactory</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforecompile" id="beforecompile"></a>
<span class="text"><code>beforeCompile</code></span>
<a aria-label="&lt;code&gt;beforeCompile&lt;/code&gt;" class="icon-link" href="#beforecompile"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>编译(compilation)参数创建之后，执行插件。</p>
<p>参数：<code>compilationParams</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#compile" id="compile"></a>
<span class="text"><code>compile</code></span>
<a aria-label="&lt;code&gt;compile&lt;/code&gt;" class="icon-link" href="#compile"></a>
</h3>
<p><code>SyncHook</code></p>
<p>一个新的编译(compilation)创建之后，钩入(hook into) compiler。</p>
<p>参数：<code>compilationParams</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#thiscompilation" id="thiscompilation"></a>
<span class="text"><code>thisCompilation</code></span>
<a aria-label="&lt;code&gt;thisCompilation&lt;/code&gt;" class="icon-link" href="#thiscompilation"></a>
</h3>
<p><code>SyncHook</code></p>
<p>触发 <code>compilation</code> 事件之前执行（查看下面的 compilation）。</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#compilation" id="compilation"></a>
<span class="text"><code>compilation</code></span>
<a aria-label="&lt;code&gt;compilation&lt;/code&gt;" class="icon-link" href="#compilation"></a>
</h3>
<p><code>SyncHook</code></p>
<p>编译(compilation)创建之后，执行插件。</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#make" id="make"></a>
<span class="text"><code>make</code></span>
<a aria-label="&lt;code&gt;make&lt;/code&gt;" class="icon-link" href="#make"></a>
</h3>
<p><code>AsyncParallelHook</code></p>
<p>...</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#aftercompile" id="aftercompile"></a>
<span class="text"><code>afterCompile</code></span>
<a aria-label="&lt;code&gt;afterCompile&lt;/code&gt;" class="icon-link" href="#aftercompile"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>...</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#shouldemit" id="shouldemit"></a>
<span class="text"><code>shouldEmit</code></span>
<a aria-label="&lt;code&gt;shouldEmit&lt;/code&gt;" class="icon-link" href="#shouldemit"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>此时返回 true/false。</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#emit" id="emit"></a>
<span class="text"><code>emit</code></span>
<a aria-label="&lt;code&gt;emit&lt;/code&gt;" class="icon-link" href="#emit"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>生成资源到 output 目录之前。</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteremit" id="afteremit"></a>
<span class="text"><code>afterEmit</code></span>
<a aria-label="&lt;code&gt;afterEmit&lt;/code&gt;" class="icon-link" href="#afteremit"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>生成资源到 output 目录之后。</p>
<p>参数：<code>compilation</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#done" id="done"></a>
<span class="text"><code>done</code></span>
<a aria-label="&lt;code&gt;done&lt;/code&gt;" class="icon-link" href="#done"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>编译(compilation)完成。</p>
<p>参数：<code>stats</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#failed" id="failed"></a>
<span class="text"><code>failed</code></span>
<a aria-label="&lt;code&gt;failed&lt;/code&gt;" class="icon-link" href="#failed"></a>
</h3>
<p><code>SyncHook</code></p>
<p>编译(compilation)失败。</p>
<p>参数：<code>error</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#invalid" id="invalid"></a>
<span class="text"><code>invalid</code></span>
<a aria-label="&lt;code&gt;invalid&lt;/code&gt;" class="icon-link" href="#invalid"></a>
</h3>
<p><code>SyncHook</code></p>
<p>监听模式下，编译无效时。</p>
<p>参数：<code>fileName</code>, <code>changeTime</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#watchclose" id="watchclose"></a>
<span class="text"><code>watchClose</code></span>
<a aria-label="&lt;code&gt;watchClose&lt;/code&gt;" class="icon-link" href="#watchclose"></a>
</h3>
<p><code>SyncHook</code></p>
<p>监听模式停止。</p>
</div>
<br/><h1>compilation 钩子</h1>
<div><p><code>Compilation</code> 模块会被 <code>Compiler</code> 用来创建新的编译（或新的构建）。<code>compilation</code> 实例能够访问所有的模块和它们的依赖（大部分是循环依赖）。它会对应用程序的依赖图中所有模块进行字面上的编译(literal compilation)。在编译阶段，模块会被加载(loaded)、封存(sealed)、优化(optimized)、分块(chunked)、哈希(hashed)和重新创建(restored)。</p>
<p><code>Compilation</code> 类扩展(extend)自 <code>Tapable</code>，并提供了以下生命周期钩子。可以按照 compiler 钩子的相同方式，调用 tap：</p>
<pre><code class="lang-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>和 <code>compiler</code> 用法相同，取决于不同的钩子类型，也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#buildmodule" id="buildmodule"></a>
<span class="text"><code>buildModule</code></span>
<a aria-label="&lt;code&gt;buildModule&lt;/code&gt;" class="icon-link" href="#buildmodule"></a>
</h3>
<p><code>SyncHook</code></p>
<p>在模块构建开始之前触发。</p>
<p>参数：<code>module</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#rebuildmodule" id="rebuildmodule"></a>
<span class="text"><code>rebuildModule</code></span>
<a aria-label="&lt;code&gt;rebuildModule&lt;/code&gt;" class="icon-link" href="#rebuildmodule"></a>
</h3>
<p><code>SyncHook</code></p>
<p>在重新构建一个模块之前触发。</p>
<p>参数：<code>module</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#failedmodule" id="failedmodule"></a>
<span class="text"><code>failedModule</code></span>
<a aria-label="&lt;code&gt;failedModule&lt;/code&gt;" class="icon-link" href="#failedmodule"></a>
</h3>
<p><code>SyncHook</code></p>
<p>模块构建失败时执行。</p>
<p>参数：<code>module</code> <code>error</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#succeedmodule" id="succeedmodule"></a>
<span class="text"><code>succeedModule</code></span>
<a aria-label="&lt;code&gt;succeedModule&lt;/code&gt;" class="icon-link" href="#succeedmodule"></a>
</h3>
<p><code>SyncHook</code></p>
<p>模块构建成功时执行。</p>
<p>参数：<code>module</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#finishmodules" id="finishmodules"></a>
<span class="text"><code>finishModules</code></span>
<a aria-label="&lt;code&gt;finishModules&lt;/code&gt;" class="icon-link" href="#finishmodules"></a>
</h3>
<p><code>SyncHook</code></p>
<p>所有模块都完成构建。</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#finishrebuildingmodule" id="finishrebuildingmodule"></a>
<span class="text"><code>finishRebuildingModule</code></span>
<a aria-label="&lt;code&gt;finishRebuildingModule&lt;/code&gt;" class="icon-link" href="#finishrebuildingmodule"></a>
</h3>
<p><code>SyncHook</code></p>
<p>一个模块完成重新构建。</p>
<p>参数：<code>module</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#seal" id="seal"></a>
<span class="text"><code>seal</code></span>
<a aria-label="&lt;code&gt;seal&lt;/code&gt;" class="icon-link" href="#seal"></a>
</h3>
<p><code>SyncHook</code></p>
<p>编译(compilation)停止接收新模块时触发。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#unseal" id="unseal"></a>
<span class="text"><code>unseal</code></span>
<a aria-label="&lt;code&gt;unseal&lt;/code&gt;" class="icon-link" href="#unseal"></a>
</h3>
<p><code>SyncHook</code></p>
<p>编译(compilation)开始接收新模块时触发。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizedependenciesbasic" id="optimizedependenciesbasic"></a>
<span class="text"><code>optimizeDependenciesBasic</code></span>
<a aria-label="&lt;code&gt;optimizeDependenciesBasic&lt;/code&gt;" class="icon-link" href="#optimizedependenciesbasic"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizedependencies" id="optimizedependencies"></a>
<span class="text"><code>optimizeDependencies</code></span>
<a aria-label="&lt;code&gt;optimizeDependencies&lt;/code&gt;" class="icon-link" href="#optimizedependencies"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>依赖优化开始时触发。</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizedependenciesadvanced" id="optimizedependenciesadvanced"></a>
<span class="text"><code>optimizeDependenciesAdvanced</code></span>
<a aria-label="&lt;code&gt;optimizeDependenciesAdvanced&lt;/code&gt;" class="icon-link" href="#optimizedependenciesadvanced"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizedependencies" id="afteroptimizedependencies"></a>
<span class="text"><code>afterOptimizeDependencies</code></span>
<a aria-label="&lt;code&gt;afterOptimizeDependencies&lt;/code&gt;" class="icon-link" href="#afteroptimizedependencies"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimize" id="optimize"></a>
<span class="text"><code>optimize</code></span>
<a aria-label="&lt;code&gt;optimize&lt;/code&gt;" class="icon-link" href="#optimize"></a>
</h3>
<p><code>SyncHook</code></p>
<p>优化阶段开始时触发。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizemodulesbasic" id="optimizemodulesbasic"></a>
<span class="text"><code>optimizeModulesBasic</code></span>
<a aria-label="&lt;code&gt;optimizeModulesBasic&lt;/code&gt;" class="icon-link" href="#optimizemodulesbasic"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizemodules" id="optimizemodules"></a>
<span class="text"><code>optimizeModules</code></span>
<a aria-label="&lt;code&gt;optimizeModules&lt;/code&gt;" class="icon-link" href="#optimizemodules"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizemodulesadvanced" id="optimizemodulesadvanced"></a>
<span class="text"><code>optimizeModulesAdvanced</code></span>
<a aria-label="&lt;code&gt;optimizeModulesAdvanced&lt;/code&gt;" class="icon-link" href="#optimizemodulesadvanced"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizemodules" id="afteroptimizemodules"></a>
<span class="text"><code>afterOptimizeModules</code></span>
<a aria-label="&lt;code&gt;afterOptimizeModules&lt;/code&gt;" class="icon-link" href="#afteroptimizemodules"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunksbasic" id="optimizechunksbasic"></a>
<span class="text"><code>optimizeChunksBasic</code></span>
<a aria-label="&lt;code&gt;optimizeChunksBasic&lt;/code&gt;" class="icon-link" href="#optimizechunksbasic"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunks" id="optimizechunks"></a>
<span class="text"><code>optimizeChunks</code></span>
<a aria-label="&lt;code&gt;optimizeChunks&lt;/code&gt;" class="icon-link" href="#optimizechunks"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>优化 chunk。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunksadvanced" id="optimizechunksadvanced"></a>
<span class="text"><code>optimizeChunksAdvanced</code></span>
<a aria-label="&lt;code&gt;optimizeChunksAdvanced&lt;/code&gt;" class="icon-link" href="#optimizechunksadvanced"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizechunks" id="afteroptimizechunks"></a>
<span class="text"><code>afterOptimizeChunks</code></span>
<a aria-label="&lt;code&gt;afterOptimizeChunks&lt;/code&gt;" class="icon-link" href="#afteroptimizechunks"></a>
</h3>
<p><code>SyncHook</code></p>
<p>chunk 优化完成之后触发。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizetree" id="optimizetree"></a>
<span class="text"><code>optimizeTree</code></span>
<a aria-label="&lt;code&gt;optimizeTree&lt;/code&gt;" class="icon-link" href="#optimizetree"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>异步优化依赖树。</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizetree" id="afteroptimizetree"></a>
<span class="text"><code>afterOptimizeTree</code></span>
<a aria-label="&lt;code&gt;afterOptimizeTree&lt;/code&gt;" class="icon-link" href="#afteroptimizetree"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkmodulesbasic" id="optimizechunkmodulesbasic"></a>
<span class="text"><code>optimizeChunkModulesBasic</code></span>
<a aria-label="&lt;code&gt;optimizeChunkModulesBasic&lt;/code&gt;" class="icon-link" href="#optimizechunkmodulesbasic"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkmodules" id="optimizechunkmodules"></a>
<span class="text"><code>optimizeChunkModules</code></span>
<a aria-label="&lt;code&gt;optimizeChunkModules&lt;/code&gt;" class="icon-link" href="#optimizechunkmodules"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkmodulesadvanced" id="optimizechunkmodulesadvanced"></a>
<span class="text"><code>optimizeChunkModulesAdvanced</code></span>
<a aria-label="&lt;code&gt;optimizeChunkModulesAdvanced&lt;/code&gt;" class="icon-link" href="#optimizechunkmodulesadvanced"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizechunkmodules" id="afteroptimizechunkmodules"></a>
<span class="text"><code>afterOptimizeChunkModules</code></span>
<a aria-label="&lt;code&gt;afterOptimizeChunkModules&lt;/code&gt;" class="icon-link" href="#afteroptimizechunkmodules"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code> <code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#shouldrecord" id="shouldrecord"></a>
<span class="text"><code>shouldRecord</code></span>
<a aria-label="&lt;code&gt;shouldRecord&lt;/code&gt;" class="icon-link" href="#shouldrecord"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#revivemodules" id="revivemodules"></a>
<span class="text"><code>reviveModules</code></span>
<a aria-label="&lt;code&gt;reviveModules&lt;/code&gt;" class="icon-link" href="#revivemodules"></a>
</h3>
<p><code>SyncHook</code></p>
<p>从 records 中恢复模块信息。</p>
<p>参数：<code>modules</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizemoduleorder" id="optimizemoduleorder"></a>
<span class="text"><code>optimizeModuleOrder</code></span>
<a aria-label="&lt;code&gt;optimizeModuleOrder&lt;/code&gt;" class="icon-link" href="#optimizemoduleorder"></a>
</h3>
<p><code>SyncHook</code></p>
<p>将模块从最重要的到最不重要的进行排序。</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#advancedoptimizemoduleorder" id="advancedoptimizemoduleorder"></a>
<span class="text"><code>advancedOptimizeModuleOrder</code></span>
<a aria-label="&lt;code&gt;advancedOptimizeModuleOrder&lt;/code&gt;" class="icon-link" href="#advancedoptimizemoduleorder"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforemoduleids" id="beforemoduleids"></a>
<span class="text"><code>beforeModuleIds</code></span>
<a aria-label="&lt;code&gt;beforeModuleIds&lt;/code&gt;" class="icon-link" href="#beforemoduleids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#moduleids" id="moduleids"></a>
<span class="text"><code>moduleIds</code></span>
<a aria-label="&lt;code&gt;moduleIds&lt;/code&gt;" class="icon-link" href="#moduleids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>modules</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizemoduleids" id="optimizemoduleids"></a>
<span class="text"><code>optimizeModuleIds</code></span>
<a aria-label="&lt;code&gt;optimizeModuleIds&lt;/code&gt;" class="icon-link" href="#optimizemoduleids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizemoduleids" id="afteroptimizemoduleids"></a>
<span class="text"><code>afterOptimizeModuleIds</code></span>
<a aria-label="&lt;code&gt;afterOptimizeModuleIds&lt;/code&gt;" class="icon-link" href="#afteroptimizemoduleids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#revivechunks" id="revivechunks"></a>
<span class="text"><code>reviveChunks</code></span>
<a aria-label="&lt;code&gt;reviveChunks&lt;/code&gt;" class="icon-link" href="#revivechunks"></a>
</h3>
<p><code>SyncHook</code></p>
<p>从 records 中恢复 chunk 信息。</p>
<p>参数：<code>modules</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkorder" id="optimizechunkorder"></a>
<span class="text"><code>optimizeChunkOrder</code></span>
<a aria-label="&lt;code&gt;optimizeChunkOrder&lt;/code&gt;" class="icon-link" href="#optimizechunkorder"></a>
</h3>
<p><code>SyncHook</code></p>
<p>将 chunk 从最重要的到最不重要的进行排序。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforeoptimizechunkids" id="beforeoptimizechunkids"></a>
<span class="text"><code>beforeOptimizeChunkIds</code></span>
<a aria-label="&lt;code&gt;beforeOptimizeChunkIds&lt;/code&gt;" class="icon-link" href="#beforeoptimizechunkids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>chunk <code>id</code> 优化之前触发。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkids" id="optimizechunkids"></a>
<span class="text"><code>optimizeChunkIds</code></span>
<a aria-label="&lt;code&gt;optimizeChunkIds&lt;/code&gt;" class="icon-link" href="#optimizechunkids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>优化每个 chunk 的 <code>id</code>。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizechunkids" id="afteroptimizechunkids"></a>
<span class="text"><code>afterOptimizeChunkIds</code></span>
<a aria-label="&lt;code&gt;afterOptimizeChunkIds&lt;/code&gt;" class="icon-link" href="#afteroptimizechunkids"></a>
</h3>
<p><code>SyncHook</code></p>
<p>chunk <code>id</code> 优化完成之后触发。</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#recordmodules" id="recordmodules"></a>
<span class="text"><code>recordModules</code></span>
<a aria-label="&lt;code&gt;recordModules&lt;/code&gt;" class="icon-link" href="#recordmodules"></a>
</h3>
<p><code>SyncHook</code></p>
<p>将模块信息存储到 records。</p>
<p>参数：<code>modules</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#recordchunks" id="recordchunks"></a>
<span class="text"><code>recordChunks</code></span>
<a aria-label="&lt;code&gt;recordChunks&lt;/code&gt;" class="icon-link" href="#recordchunks"></a>
</h3>
<p><code>SyncHook</code></p>
<p>将 chunk 信息存储到 records。</p>
<p>参数：<code>chunks</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforehash" id="beforehash"></a>
<span class="text"><code>beforeHash</code></span>
<a aria-label="&lt;code&gt;beforeHash&lt;/code&gt;" class="icon-link" href="#beforehash"></a>
</h3>
<p><code>SyncHook</code></p>
<p>在编译被哈希(hashed)之前。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afterhash" id="afterhash"></a>
<span class="text"><code>afterHash</code></span>
<a aria-label="&lt;code&gt;afterHash&lt;/code&gt;" class="icon-link" href="#afterhash"></a>
</h3>
<p><code>SyncHook</code></p>
<p>在编译被哈希(hashed)之后。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#recordhash" id="recordhash"></a>
<span class="text"><code>recordHash</code></span>
<a aria-label="&lt;code&gt;recordHash&lt;/code&gt;" class="icon-link" href="#recordhash"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#record" id="record"></a>
<span class="text"><code>record</code></span>
<a aria-label="&lt;code&gt;record&lt;/code&gt;" class="icon-link" href="#record"></a>
</h3>
<p><code>SyncHook</code></p>
<p>将 <code>compilation</code> 相关信息存储到 <code>records</code> 中。</p>
<p>参数：<code>compilation</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforemoduleassets" id="beforemoduleassets"></a>
<span class="text"><code>beforeModuleAssets</code></span>
<a aria-label="&lt;code&gt;beforeModuleAssets&lt;/code&gt;" class="icon-link" href="#beforemoduleassets"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#shouldgeneratechunkassets" id="shouldgeneratechunkassets"></a>
<span class="text"><code>shouldGenerateChunkAssets</code></span>
<a aria-label="&lt;code&gt;shouldGenerateChunkAssets&lt;/code&gt;" class="icon-link" href="#shouldgeneratechunkassets"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#beforechunkassets" id="beforechunkassets"></a>
<span class="text"><code>beforeChunkAssets</code></span>
<a aria-label="&lt;code&gt;beforeChunkAssets&lt;/code&gt;" class="icon-link" href="#beforechunkassets"></a>
</h3>
<p><code>SyncHook</code></p>
<p>在创建 chunk 资源(asset)之前。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#additionalchunkassets" id="additionalchunkassets"></a>
<span class="text"><code>additionalChunkAssets</code></span>
<a aria-label="&lt;code&gt;additionalChunkAssets&lt;/code&gt;" class="icon-link" href="#additionalchunkassets"></a>
</h3>
<p><code>SyncHook</code></p>
<p>为 chunk 创建附加资源(asset)</p>
<p>参数：<code>chunks</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#records" id="records"></a>
<span class="text"><code>records</code></span>
<a aria-label="&lt;code&gt;records&lt;/code&gt;" class="icon-link" href="#records"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>compilation</code> <code>records</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#additionalassets" id="additionalassets"></a>
<span class="text"><code>additionalAssets</code></span>
<a aria-label="&lt;code&gt;additionalAssets&lt;/code&gt;" class="icon-link" href="#additionalassets"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>为编译(compilation)创建附加资源(asset)。这个钩子可以用来下载图像，例如：</p>
<pre><code class="lang-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>additionalAssets<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> callback <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">download</span><span class="token punctuation">(</span><span class="token string">'https://img.shields.io/npm/v/webpack.svg'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span><span class="token string">'webpack-version.svg'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">toAsset</span><span class="token punctuation">(</span>resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'[webpack-example-plugin] Unable to download the image'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizechunkassets" id="optimizechunkassets"></a>
<span class="text"><code>optimizeChunkAssets</code></span>
<a aria-label="&lt;code&gt;optimizeChunkAssets&lt;/code&gt;" class="icon-link" href="#optimizechunkassets"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>优化所有 chunk 资源(asset)。资源(asset)会被存储在 <code>compilation.assets</code>。每个 <code>Chunk</code> 都有一个 files 属性，指向这个 chunk 创建的所有文件。附加资源(asset)被存储在 <code>compilation.additionalChunkAssets</code> 中。</p>
<p>参数：<code>chunks</code></p>
<p>以下是为每个 chunk 添加 banner 的简单示例。</p>
<pre><code class="lang-js">compilation<span class="token punctuation">.</span>hooks
  <span class="token punctuation">.</span>optimizeChunkAssets
  <span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>chunks<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>chunk <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      chunk<span class="token punctuation">.</span>files<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>file <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
        compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcatSource</span><span class="token punctuation">(</span>
          <span class="token string">'\/**Sweet Banner**\/'</span><span class="token punctuation">,</span>
          <span class="token string">'\n'</span><span class="token punctuation">,</span>
          compilation<span class="token punctuation">.</span>assets<span class="token punctuation">[</span>file<span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizechunkassets" id="afteroptimizechunkassets"></a>
<span class="text"><code>afterOptimizeChunkAssets</code></span>
<a aria-label="&lt;code&gt;afterOptimizeChunkAssets&lt;/code&gt;" class="icon-link" href="#afteroptimizechunkassets"></a>
</h3>
<p><code>SyncHook</code></p>
<p>chunk 资源(asset)已经被优化。</p>
<p>参数：<code>chunks</code></p>
<p>这里是一个来自 <a href="https://github.com/boopathi">@boopathi</a> 的示例插件，详细地输出每个 chunk 里有什么。</p>
<pre><code class="lang-js">compilation<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>afterOptimizeChunkAssets<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> chunks <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  chunks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>chunk <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
      includes<span class="token punctuation">:</span> chunk<span class="token punctuation">.</span>modules<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>module <span class="token operator">=</span><span class="token operator">&gt;</span> module<span class="token punctuation">.</span>request<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#optimizeassets" id="optimizeassets"></a>
<span class="text"><code>optimizeAssets</code></span>
<a aria-label="&lt;code&gt;optimizeAssets&lt;/code&gt;" class="icon-link" href="#optimizeassets"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>优化存储在 <code>compilation.assets</code> 中的所有资源(asset)。</p>
<p>参数：<code>assets</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afteroptimizeassets" id="afteroptimizeassets"></a>
<span class="text"><code>afterOptimizeAssets</code></span>
<a aria-label="&lt;code&gt;afterOptimizeAssets&lt;/code&gt;" class="icon-link" href="#afteroptimizeassets"></a>
</h3>
<p><code>SyncHook</code></p>
<p>资源优化已经结束。</p>
<p>参数：<code>assets</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#needadditionalseal" id="needadditionalseal"></a>
<span class="text"><code>needAdditionalSeal</code></span>
<a aria-label="&lt;code&gt;needAdditionalSeal&lt;/code&gt;" class="icon-link" href="#needadditionalseal"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#afterseal" id="afterseal"></a>
<span class="text"><code>afterSeal</code></span>
<a aria-label="&lt;code&gt;afterSeal&lt;/code&gt;" class="icon-link" href="#afterseal"></a>
</h3>
<p><code>AsyncSeriesHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#chunkhash" id="chunkhash"></a>
<span class="text"><code>chunkHash</code></span>
<a aria-label="&lt;code&gt;chunkHash&lt;/code&gt;" class="icon-link" href="#chunkhash"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>chunk</code> <code>chunkHash</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#moduleasset" id="moduleasset"></a>
<span class="text"><code>moduleAsset</code></span>
<a aria-label="&lt;code&gt;moduleAsset&lt;/code&gt;" class="icon-link" href="#moduleasset"></a>
</h3>
<p><code>SyncHook</code></p>
<p>一个模块中的一个资源被添加到编译中。</p>
<p>参数：<code>module</code> <code>filename</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#chunkasset" id="chunkasset"></a>
<span class="text"><code>chunkAsset</code></span>
<a aria-label="&lt;code&gt;chunkAsset&lt;/code&gt;" class="icon-link" href="#chunkasset"></a>
</h3>
<p><code>SyncHook</code></p>
<p>一个 chunk 中的一个资源被添加到编译中。</p>
<p>参数：<code>chunk</code> <code>filename</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#assetpath" id="assetpath"></a>
<span class="text"><code>assetPath</code></span>
<a aria-label="&lt;code&gt;assetPath&lt;/code&gt;" class="icon-link" href="#assetpath"></a>
</h3>
<p><code>SyncWaterfallHook</code></p>
<p>...</p>
<p>参数：<code>filename</code> <code>data</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#needadditionalpass" id="needadditionalpass"></a>
<span class="text"><code>needAdditionalPass</code></span>
<a aria-label="&lt;code&gt;needAdditionalPass&lt;/code&gt;" class="icon-link" href="#needadditionalpass"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#childcompiler" id="childcompiler"></a>
<span class="text"><code>childCompiler</code></span>
<a aria-label="&lt;code&gt;childCompiler&lt;/code&gt;" class="icon-link" href="#childcompiler"></a>
</h3>
<p><code>SyncHook</code></p>
<p>...</p>
<p>参数：<code>childCompiler</code> <code>compilerName</code> <code>compilerIndex</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#normalmoduleloader" id="normalmoduleloader"></a>
<span class="text"><code>normalModuleLoader</code></span>
<a aria-label="&lt;code&gt;normalModuleLoader&lt;/code&gt;" class="icon-link" href="#normalmoduleloader"></a>
</h3>
<p><code>SyncHook</code></p>
<p>普通模块 loader，真正（一个接一个地）加载模块图(graph)中所有模块的函数。</p>
<p>参数：<code>loaderContext</code> <code>module</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#dependencyreference" id="dependencyreference"></a>
<span class="text"><code>dependencyReference</code></span>
<a aria-label="&lt;code&gt;dependencyReference&lt;/code&gt;" class="icon-link" href="#dependencyreference"></a>
</h3>
<p><code>SyncWaterfallHook</code></p>
<p><code>Compilation.hooks.dependencyReference(depRef, dependency, module)</code> allows to change the references reported by dependencies.</p>
<p>Parameters: <code>depRef</code> <code>dependency</code> <code>module</code></p>
</div>
<br/><h1>resolver</h1>
<div><p>resolver 是由 <code>enhanced-resolve</code> package 创建出来的。<code>Resolver</code> 类继承了 <code>tapable</code> 类，并且使用 <code>tapable</code> 提供的一些钩子。可以直接使用 <code>enhanced-resolve</code> package 创建一些新的 resolver，然而，所有的 <a href="/api/node/#compiler-instance"><code>compiler</code> 实例</a> 都有一些可以接触(tap into)到的 resolver 实例。</p>
<p>在继续阅读之前，请确保至少了解过 <a href="https://github.com/webpack/enhanced-resolve"><code>enhanced-resolve</code></a> 和 <a href="/api/plugins/#tapable"><code>tapable</code></a> 文档。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#类型" id="类型"></a>
<span class="text">类型</span>
<a aria-label="类型" class="icon-link" href="#类型"></a>
</h2>
<p><code>compiler</code> 类有三种类型的内置 resolver：</p>
<ul>
<li>Normal：通过绝对路径或相对路径，解析一个模块。</li>
<li>Context：通过给定的 context 解析一个模块。</li>
<li>Loader：解析一个 webpack <a href="/loaders">loader</a>。</li>
</ul>
<p>根据需要，所有这些 <code>compiler</code> 用到的内置 resolver，都可以通过插件进行自定义：</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>resolverFactory<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">'resolver [type]'</span><span class="token punctuation">,</span> resolver <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  resolver<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>resolve<span class="token punctuation">.</span><span class="token function">tapAsync</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> params <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>其中 <code>[type]</code> 是上面提到的三个 resolver 之一，指定为：</p>
<ul>
<li><code>normal</code></li>
<li><code>context</code></li>
<li><code>loader</code></li>
</ul>
<p>完整的钩子和描述列表，请查看 <code>enhanced-resolve</code> <a href="https://github.com/webpack/enhanced-resolve">文档</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置选项" id="配置选项"></a>
<span class="text">配置选项</span>
<a aria-label="配置选项" class="icon-link" href="#配置选项"></a>
</h2>
<p>上面提到的 resolver，也可以通过在配置文件使用 <a href="/configuration/resolve/"><code>resolve</code></a> 或 <a href="/configuration/resolve/#resolveloader"><code>resolveLoader</code></a> 选项来自定义。这些选项允许用户通过各种选项（包括解析 <code>plugins</code>），来改变解析行为。</p>
<p>resolver 插件（例如 [<code>DirectoryNamedPlugin</code>] (<a href="https://github.com/shaketbaby/directory-named-webpack-plugin)）可以直接包含在">https://github.com/shaketbaby/directory-named-webpack-plugin)）可以直接包含在</a> <code>resolve.plugins</code> 中，而不是使用标准插件用法。注意，<code>resolve</code> 配置会影响 <code>normal</code> 和 <code>context</code> 这两个 resolver，而 <code>resolveLoader</code> 则用于修改 <code>loader</code> resolver。</p>
</div>
<br/><h1>parser</h1>
<div><p><code>parser</code> 实例，是用来解析由 webpack 处理过的每个模块。<code>parser</code> 也是扩展自 <code>tapable</code> 的 webpack 类，并且提供多种 <code>tapable</code> 钩子，插件作者可以使用它来自定义解析过程。</p>
<p>以下示例中，<code>parser</code> 位于 <a href="/api/compiler-hooks/#normalmodulefactory">normalModuleFactory</a> 这个中，因此需要调用额外钩子来进行获取：</p>
<pre><code class="lang-js">compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>normalModuleFactory<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> factory <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  factory<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>parser<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'javascript/auto'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'MyPlugin'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>parser<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    parser<span class="token punctuation">.</span>hooks<span class="token punctuation">.</span>someHook<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>和 <code>compiler</code> 用法相同，取决于不同的钩子类型，也可以在某些钩子上访问 <code>tapAsync</code> 和 <code>tapPromise</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#相关钩子" id="相关钩子"></a>
<span class="text">相关钩子</span>
<a aria-label="相关钩子" class="icon-link" href="#相关钩子"></a>
</h2>
<p>以下生命周期钩子函数，是由 <code>parser</code> 暴露，可以通过如下方式访问：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaluatetypeof" id="evaluatetypeof"></a>
<span class="text">evaluateTypeof</span>
<a aria-label="evaluateTypeof" class="icon-link" href="#evaluatetypeof"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>取值标识符(identifier)的类型。（译注：取值(evaluate)是一个动词，表示对参数进行求值并返回）</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaluate" id="evaluate"></a>
<span class="text">evaluate</span>
<a aria-label="evaluate" class="icon-link" href="#evaluate"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>取值一个表达式(expression)</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaluateidentifier" id="evaluateidentifier"></a>
<span class="text">evaluateIdentifier</span>
<a aria-label="evaluateIdentifier" class="icon-link" href="#evaluateidentifier"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>取值一个自由变量标识符。</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaluatedefinedidentifier" id="evaluatedefinedidentifier"></a>
<span class="text">evaluateDefinedIdentifier</span>
<a aria-label="evaluateDefinedIdentifier" class="icon-link" href="#evaluatedefinedidentifier"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>取值一个定义变量标识符。</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaluatecallexpressionmember" id="evaluatecallexpressionmember"></a>
<span class="text">evaluateCallExpressionMember</span>
<a aria-label="evaluateCallExpressionMember" class="icon-link" href="#evaluatecallexpressionmember"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>进行一次「成功取值表达式的成员函数(member function of a successfully evaluated expression)」调用取值。</p>
<p>参数：<code>expression</code> <code>param</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#statement" id="statement"></a>
<span class="text">statement</span>
<a aria-label="statement" class="icon-link" href="#statement"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>通用钩子，在从代码片段中解析语句时调用。</p>
<p>参数：<code>statement</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#statementif" id="statementif"></a>
<span class="text">statementIf</span>
<a aria-label="statementIf" class="icon-link" href="#statementif"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#label" id="label"></a>
<span class="text">label</span>
<a aria-label="label" class="icon-link" href="#label"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#import" id="import"></a>
<span class="text">import</span>
<a aria-label="import" class="icon-link" href="#import"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>source</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#importspecifier" id="importspecifier"></a>
<span class="text">importSpecifier</span>
<a aria-label="importSpecifier" class="icon-link" href="#importspecifier"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>source</code> <code>exportName</code> <code>identifierName</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#export" id="export"></a>
<span class="text">export</span>
<a aria-label="export" class="icon-link" href="#export"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportimport" id="exportimport"></a>
<span class="text">exportImport</span>
<a aria-label="exportImport" class="icon-link" href="#exportimport"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>source</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportdeclaration" id="exportdeclaration"></a>
<span class="text">exportDeclaration</span>
<a aria-label="exportDeclaration" class="icon-link" href="#exportdeclaration"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportexpression" id="exportexpression"></a>
<span class="text">exportExpression</span>
<a aria-label="exportExpression" class="icon-link" href="#exportexpression"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportspecifier" id="exportspecifier"></a>
<span class="text">exportSpecifier</span>
<a aria-label="exportSpecifier" class="icon-link" href="#exportspecifier"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>identifierName</code> <code>exportName</code> <code>index</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportimportspecifier" id="exportimportspecifier"></a>
<span class="text">exportImportSpecifier</span>
<a aria-label="exportImportSpecifier" class="icon-link" href="#exportimportspecifier"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>statement</code> <code>source</code> <code>identifierName</code> <code>exportName</code> <code>index</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#vardeclaration" id="vardeclaration"></a>
<span class="text">varDeclaration</span>
<a aria-label="varDeclaration" class="icon-link" href="#vardeclaration"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#vardeclarationlet" id="vardeclarationlet"></a>
<span class="text">varDeclarationLet</span>
<a aria-label="varDeclarationLet" class="icon-link" href="#vardeclarationlet"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#vardeclarationconst" id="vardeclarationconst"></a>
<span class="text">varDeclarationConst</span>
<a aria-label="varDeclarationConst" class="icon-link" href="#vardeclarationconst"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#vardeclarationvar" id="vardeclarationvar"></a>
<span class="text">varDeclarationVar</span>
<a aria-label="varDeclarationVar" class="icon-link" href="#vardeclarationvar"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>declaration</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#canrename" id="canrename"></a>
<span class="text">canRename</span>
<a aria-label="canRename" class="icon-link" href="#canrename"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>initExpression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#rename" id="rename"></a>
<span class="text">rename</span>
<a aria-label="rename" class="icon-link" href="#rename"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>initExpression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#assigned" id="assigned"></a>
<span class="text">assigned</span>
<a aria-label="assigned" class="icon-link" href="#assigned"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#assign" id="assign"></a>
<span class="text">assign</span>
<a aria-label="assign" class="icon-link" href="#assign"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#typeof" id="typeof"></a>
<span class="text">typeof</span>
<a aria-label="typeof" class="icon-link" href="#typeof"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#call" id="call"></a>
<span class="text">call</span>
<a aria-label="call" class="icon-link" href="#call"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#callanymember" id="callanymember"></a>
<span class="text">callAnyMember</span>
<a aria-label="callAnyMember" class="icon-link" href="#callanymember"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#new" id="new"></a>
<span class="text">new</span>
<a aria-label="new" class="icon-link" href="#new"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#expression" id="expression"></a>
<span class="text">expression</span>
<a aria-label="expression" class="icon-link" href="#expression"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#expressionanymember" id="expressionanymember"></a>
<span class="text">expressionAnyMember</span>
<a aria-label="expressionAnyMember" class="icon-link" href="#expressionanymember"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#expressionconditionaloperator" id="expressionconditionaloperator"></a>
<span class="text">expressionConditionalOperator</span>
<a aria-label="expressionConditionalOperator" class="icon-link" href="#expressionconditionaloperator"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>...</p>
<p>参数：<code>expression</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#program" id="program"></a>
<span class="text">program</span>
<a aria-label="program" class="icon-link" href="#program"></a>
</h3>
<p><code>SyncBailHook</code></p>
<p>访问代码片段的抽象语法树(abstract syntax tree - AST)</p>
<p>参数：<code>ast</code> <code>comments</code></p>
</div>
<br/><h1>指南</h1>
<div><p>本指南章节包含有关理解和掌握 webpack 提供的各种工具和特性。首先，通过 <a href="/guides/installation">安装</a> 进行简单引入。</p>
<p>指南会逐步带你由浅入深。本章节更多是作为一个切入点，一旦阅读完成后，你就会更加容易深入到实际的 <a href="/configuration">配置</a> 文档中。</p>
<p>指南中运行 webpack 后显示的输出，可能和新版本的输出略有不同。这是意料之中的事情。只要 bundle 看起来接近，而且运行正常，那就没有问题。如果你遇到在新版本中，示例无法良好运行，请创建一个 issue，我们将尽力解决版本差异。</p>
</div>
<br/><h1>安装</h1>
<div><p>本指南介绍了安装 webpack 的各种方法。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#预先准备" id="预先准备"></a>
<span class="text">预先准备</span>
<a aria-label="预先准备" class="icon-link" href="#预先准备"></a>
</h3>
<p>在开始之前，请确保安装了 <a href="https://nodejs.org/en/">Node.js</a> 的最新版本。使用 Node.js 最新的长期支持版本(LTS - Long Term Support)，是理想的起步。使用旧版本，你可能遇到各种问题，因为它们可能缺少 webpack 功能，或者缺少相关 package。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#本地安装" id="本地安装"></a>
<span class="text">本地安装</span>
<a aria-label="本地安装" class="icon-link" href="#本地安装"></a>
</h3>
<p>最新的 webpack 正式版本是：</p>
<p><a href="https://github.com/webpack/webpack/releases"><img alt="GitHub release" src="https://img.shields.io/npm/v/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></p>
<p>要安装最新版本或特定版本，请运行以下命令之一：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack
npm <span class="token function">install</span> --save-dev webpack@<span class="token operator">&lt;</span>version<span class="token operator">&gt;</span>
</code></pre>
<p>如果你使用 webpack v4+ 版本，你还需要安装 <a href="/api/cli/">CLI</a>。</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack-cli
</code></pre>
<p>对于大多数项目，我们建议本地安装。这可以在引入突破式变更(breaking change)版本时，更容易分别升级项目。通常会通过运行一个或多个 <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a> 以在本地 <code>node_modules</code> 目录中查找安装的 webpack，来运行 webpack：</p>
<pre><code class="lang-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"webpack --config webpack.config.js"</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 想要运行本地安装的 webpack，你可以通过 <code>node_modules/.bin/webpack</code> 来访问它的 bin 版本。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#全局安装" id="全局安装"></a>
<span class="text">全局安装</span>
<a aria-label="全局安装" class="icon-link" href="#全局安装"></a>
</h3>
<p>通过以下 NPM 安装方式，可以使 <code>webpack</code> 在全局环境下可用：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --global webpack
</code></pre>
<blockquote class="warning"><div class="tip-content"> <strong>不推荐</strong>全局安装 webpack。这会将你项目中的 webpack 锁定到指定版本，并且在使用不同的 webpack 版本的项目中，可能会导致构建失败。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#最新体验版本" id="最新体验版本"></a>
<span class="text">最新体验版本</span>
<a aria-label="最新体验版本" class="icon-link" href="#最新体验版本"></a>
</h2>
<p>如果你热衷于使用最新版本的 webpack，你可以使用以下命令安装 beta 版本，或者直接从 webpack 的仓库中安装：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> webpack@beta
npm <span class="token function">install</span> webpack/webpack<span class="token comment">#&lt;tagname/branchname&gt;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 在安装这些最新体验版本时要小心！它们可能仍然包含 bug，因此不应该用于生产环境。 </div></blockquote></div>
<br/><h1>起步</h1>
<div><p>webpack 用于编译 JavaScript 模块。一旦完成 <a href="/guides/installation">安装</a>，你就可以通过 webpack <a href="/api/cli">CLI</a> 或 <a href="/api/node">API</a> 与其配合交互。如果你还不熟悉 webpack，请阅读 <a href="/concepts">核心概念</a> 和 <a href="/comparison">对比</a>，了解为什么要使用 webpack，而不是社区中的其他工具。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本安装" id="基本安装"></a>
<span class="text">基本安装</span>
<a aria-label="基本安装" class="icon-link" href="#基本安装"></a>
</h2>
<p>首先我们创建一个目录，初始化 npm，然后 <a href="/guides/installation#local-installation">在本地安装 webpack</a>，接着安装 webpack-cli（此工具用于在命令行中运行 webpack）：</p>
<pre><code class="lang-bash"><span class="token function">mkdir</span> webpack-demo <span class="token operator">&amp;&amp;</span> <span class="token function">cd</span> webpack-demo
npm init -y
npm <span class="token function">install</span> webpack webpack-cli --save-dev
</code></pre>
<blockquote class="tip"><div class="tip-content"> 贯穿整个指南的是，我们将使用 <code>diff</code> 块，来展示对目录、文件和代码所做的修改。 </div></blockquote><p>现在，我们将创建以下目录结构、文件和内容：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- index.html</span>
<span class="token inserted">+ |- /src</span>
<span class="token inserted">+   |- index.js</span>
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> element <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// lodash（目前通过一个 script 引入）对于执行这一行是必需的</span>
  element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Hello'</span><span class="token punctuation">,</span> <span class="token string">'webpack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> element<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>index.html</strong></p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!doctype</span> <span class="token attr-name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>起步<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/lodash@4.16.6<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./src/index.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>我们还需要调整 <code>package.json</code> 文件，以便确保我们安装包是 <code>private(私有的)</code>，并且移除 <code>main</code> 入口。这可以防止意外发布你的代码。</p>
<blockquote class="tip"><div class="tip-content"> 如果你想要了解 <code>package.json</code> 内在机制的更多信息，我们推荐阅读 <a href="https://docs.npmjs.com/files/package.json">npm 文档</a>。 </div></blockquote><p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "webpack-demo",
    "version": "1.0.0",
    "description": "",
<span class="token inserted">+   "private": true,</span>
<span class="token deleted">-   "main": "index.js",</span>
    "scripts": {
      "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
    "webpack": "^4.20.2",
    "webpack-cli": "^3.1.2"
    },
    "dependencies": {}
  }
</code></pre>
<p>在此示例中，<code>&lt;script&gt;</code> 标签之间存在隐式依赖关系。在 <code>index.js</code> 文件执行之前，还需要在页面中先引入 <code>lodash</code>。这是因为 <code>index.js</code> 并未显式声明它需要 <code>lodash</code>，只是假定推测已经存在一个全局变量 <code>_</code>。</p>
<p>使用这种方式去管理 JavaScript 项目会有一些问题：</p>
<ul>
<li>无法直接体现，脚本的执行依赖于外部库。</li>
<li>如果依赖不存在，或者引入顺序错误，应用程序将无法正常运行。</li>
<li>如果依赖被引入但是并没有使用，浏览器将被迫下载无用代码。</li>
</ul>
<p>让我们使用 webpack 来管理这些脚本。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#创建一个-bundle" id="创建一个-bundle"></a>
<span class="text">创建一个 bundle</span>
<a aria-label="创建一个 bundle" class="icon-link" href="#创建一个-bundle"></a>
</h2>
<p>首先，我们稍微调整下目录结构，将“源”代码(<code>/src</code>)从我们的“分发”代码(<code>/dist</code>)中分离出来。源代码是用于书写和编辑的代码。分发代码是构建过程产生的代码最小化和优化后的 <code>输出(output)</code> 目录，最终将在浏览器中加载：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- /dist</span>
<span class="token inserted">+   |- index.html</span>
<span class="token deleted">- |- index.html</span>
  |- /src
    |- index.js
</code></pre>
<p>要在 <code>index.js</code> 中装入 <code>lodash</code> 依赖，我们需要在本地安装 library：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save lodash
</code></pre>
<blockquote class="tip"><div class="tip-content"> 在安装一个 package，而此 package 要打包到生产环境 bundle 中时，你应该使用 <code>npm install --save</code>。如果你在安装一个用于开发环境目的的 package 时（例如，linter, 测试库等），你应该使用 <code>npm install --save-dev</code>。在 <a href="https://docs.npmjs.com/cli/install">npm 文档</a> 中查找更多信息。 </div></blockquote><p>现在，在我们的 script 中 import <code>lodash</code>：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ import _ from 'lodash';</span>
+
  function component() {
    let element = document.createElement('div');

<span class="token deleted">-   // lodash（目前通过一个 script 引入）对于执行这一行是必需的</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>现在，我们将会打包所有脚本，我们必须更新 <code>index.html</code> 文件。由于现在是通过 <code>import</code> 引入 lodash，所以要将 lodash <code>&lt;script&gt;</code> 删除，然后修改另一个 <code>&lt;script&gt;</code> 标签来加载 bundle，而不是原始的 <code>/src</code> 文件：</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="lang-diff">  &lt;!doctype html&gt;
  &lt;html&gt;
   &lt;head&gt;
     &lt;title&gt;起步&lt;/title&gt;
<span class="token deleted">-    &lt;script src="https://unpkg.com/lodash@4.16.6"&gt;&lt;/script&gt;</span>
   &lt;/head&gt;
   &lt;body&gt;
<span class="token deleted">-    &lt;script src="./src/index.js"&gt;&lt;/script&gt;</span>
<span class="token inserted">+    &lt;script src="main.js"&gt;&lt;/script&gt;</span>
   &lt;/body&gt;
  &lt;/html&gt;
</code></pre>
<p>在这个设置中，<code>index.js</code> 显式要求引入的 <code>lodash</code> 必须存在，然后将它绑定为 <code>_</code>（没有全局作用域污染）。通过声明模块所需的依赖，webpack 能够利用这些信息去构建依赖图，然后使用图生成一个会以正确顺序执行的优化 bundle。</p>
<p>可以这样说，执行 <code>npx webpack</code>，会将我们的脚本 <code>src/index.js</code> 作为 <a href="/concepts/entry-points">入口起点</a>，也会生成 <code>dist/main.js</code> 作为 <a href="/concepts/output">输出</a>。Node 8.2/npm 5.2.0 以上版本提供的 <code>npx</code> 命令，可以运行在开始安装的 webpack package 中的 webpack 二进制文件（即 <code>./node_modules/.bin/webpack</code>）：</p>
<pre><code class="lang-bash">npx webpack

<span class="token punctuation">..</span>.
Built at: 13/06/2018 11:52:07
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration<span class="token punctuation">(</span>配置警告<span class="token punctuation">)</span>
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/concepts/mode/<span class="token punctuation">(</span><span class="token string">'mode'</span> 选项还未设置，webpack 会将其值回退至 <span class="token string">'production'</span>。将 <span class="token string">'mode'</span> 选项设置为 <span class="token string">'development'</span> 或 <span class="token string">'production'</span>，来启用对应环境的默认优化设置。<span class="token punctuation">)</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 输出可能会稍有不同，但是只要构建成功，那么你就可以放心继续。并且不要担心警告，稍后我们就会解决。 </div></blockquote><p>在浏览器中打开 <code>index.html</code>，如果一切正常，你应该能看到以下文本：'Hello webpack'。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模块" id="模块"></a>
<span class="text">模块</span>
<a aria-label="模块" class="icon-link" href="#模块"></a>
</h2>
<p><a href="https://babel.docschina.org/docs/en/learn/">ES2015</a> 中的 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a> 语句已经被标准化，并且 <a href="https://caniuse.com/#search=modules">多数浏览器已经能够支持</a>。一些旧版本浏览器虽然无法支持它们，但是通过 webpack 开箱即用的模块支持，我们也可以使用这些ES2015 模块标准。</p>
<p>在幕后，webpack 实际上会将代码进行 transpile(转译)，因此旧版本浏览器也可以执行。如果检查 <code>dist/main.js</code>，你就可以看到 webpack 是如何实现，这是独创精巧的设计！除了 <code>import</code> 和 <code>export</code>，webpack 还能够很好地支持各种其他模块语法，更多信息请查看 <a href="/api/module-methods">模块 API</a>。</p>
<p>注意，webpack 不会更改代码中除 <code>import</code> 和 <code>export</code> 语句以外的部分。如果你在使用其它 <a href="http://es6-features.org/">ES2015 特性</a>，请确保你在 webpack <a href="/concepts/loaders/">loader 系统</a> 中使用了一个像是 <a href="https://babel.docschina.org/">Babel</a> 或 <a href="https://buble.surge.sh/guide/">Bublé</a> 的 <a href="/loaders/#transpiling">transpiler(转译器)</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用一个配置文件" id="使用一个配置文件"></a>
<span class="text">使用一个配置文件</span>
<a aria-label="使用一个配置文件" class="icon-link" href="#使用一个配置文件"></a>
</h2>
<p>在 webpack v4 中，可以无须任何配置，然而大多数项目会需要很复杂的设置，这就是为什么 webpack 仍然要支持 <a href="/concepts/configuration">配置文件</a>。这比在 terminal(终端) 中手动输入大量命令要高效的多，所以让我们创建一个配置文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- webpack.config.js</span>
  |- /dist
    |- index.html
  |- /src
    |- index.js
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'main.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>现在，让我们通过新的配置文件再次执行构建：</p>
<pre><code class="lang-bash">npx webpack --config webpack.config.js

<span class="token punctuation">..</span>.
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration<span class="token punctuation">(</span>配置警告<span class="token punctuation">)</span>
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.<span class="token punctuation">(</span><span class="token string">'mode'</span> 选项还未设置，webpack 会将其值回退至 <span class="token string">'production'</span>。将 <span class="token string">'mode'</span> 选项设置为 <span class="token string">'development'</span> 或 <span class="token string">'production'</span>，来启用对应环境的默认优化设置。<span class="token punctuation">)</span>
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/concepts/mode/<span class="token punctuation">(</span>你也可以将其设置为 <span class="token string">'none'</span>，以禁用所有默认行为。了解更多 https://webpack.js.org/concepts/mode/<span class="token punctuation">)</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果 <code>webpack.config.js</code> 存在，则 <code>webpack</code> 命令将默认选择使用它。我们在这里使用 <code>--config</code> 选项只是向你表明，可以传递任何名称的配置文件。这对于需要拆分成多个文件的复杂配置是非常有用。 </div></blockquote><p>比起 CLI 这种简单直接的使用方式，配置文件具有更多的灵活性。我们可以通过配置方式指定 loader 规则(loader rule)、插件(plugin)、resolve 选项，以及许多其他增强功能。更多详细信息请查看 <a href="/configuration">配置文档</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#npm-scripts" id="npm-scripts"></a>
<span class="text">npm scripts</span>
<a aria-label="npm scripts" class="icon-link" href="#npm-scripts"></a>
</h2>
<p>考虑到用 CLI 这种方式来运行本地的 webpack 副本并不是特别方便，我们可以设置一个快捷方式。调整 <em>package.json</em> 文件，添加在 <a href="https://docs.npmjs.com/misc/scripts">npm scripts</a> 中添加一个 npm 命令：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "webpack-demo",
    "version": "1.0.0",
    "description": "",
    "scripts": {
      "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
<span class="token inserted">+     "build": "webpack"</span>
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "webpack": "^4.20.2",
      "webpack-cli": "^3.1.2"
    },
    "dependencies": {
      "lodash": "^4.17.5"
    }
  }
</code></pre>
<p>现在，可以使用 <code>npm run build</code> 命令，来替代我们之前使用的 <code>npx</code> 命令。注意，使用 npm <code>scripts</code>，我们可以像使用 <code>npx</code> 那样通过模块名引用本地安装的 npm packages。这是大多数基于 npm 的项目遵循的标准，因为它允许所有贡献者使用同一组通用脚本（如果必要，每个 flag 都带有 <code>--config</code> 标志）。</p>
<p>现在运行以下命令，然后看看你的脚本别名是否正常运行：</p>
<pre><code class="lang-bash">npm run build

<span class="token punctuation">..</span>.
  Asset      Size  Chunks             Chunk Names
main.js  70.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.

WARNING <span class="token keyword">in</span> configuration<span class="token punctuation">(</span>配置警告<span class="token punctuation">)</span>
The <span class="token string">'mode'</span> option has not been set, webpack will fallback to <span class="token string">'production'</span> <span class="token keyword">for</span> this value. Set <span class="token string">'mode'</span> option to <span class="token string">'development'</span> or <span class="token string">'production'</span> to <span class="token function">enable</span> defaults <span class="token keyword">for</span> each environment.<span class="token punctuation">(</span><span class="token string">'mode'</span> 选项还未设置，webpack 会将其值回退至 <span class="token string">'production'</span>。将 <span class="token string">'mode'</span> 选项设置为 <span class="token string">'development'</span> 或 <span class="token string">'production'</span>，来启用对应环境的默认优化设置。<span class="token punctuation">)</span>
You can also <span class="token keyword">set</span> it to <span class="token string">'none'</span> to disable any default behavior. Learn more: https://webpack.js.org/concepts/mode/<span class="token punctuation">(</span>你也可以将其设置为 <span class="token string">'none'</span>，以禁用所有默认行为。了解更多 https://webpack.js.org/concepts/mode/<span class="token punctuation">)</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 通过在 <code>npm run build</code> 命令和你的参数之间添加两个中横线，可以将自定义参数传递给 webpack，例如：<code>npm run build -- --colors</code>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>现在，你已经有了一个基础构建配置，你应该移至下一章节 <a href="/guides/asset-management"><code>资源管理</code></a> 指南，以了解如何通过 webpack 来管理资源，例如 images、fonts。此刻你的项目看起来应该如下：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
  |- main.js
  |- index.html
|- /src
  |- index.js
|- /node_modules
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果你使用的是 npm 5，你可能还会在目录中看到一个 <code>package-lock.json</code> 文件。 </div></blockquote><p>如果你想要了解 webpack 设计思想，你应该看下 <a href="/concepts">基本概念</a> 和 <a href="/configuration">配置</a> 页面。此外，<a href="/api">API</a> 章节可以深入了解 webpack 提供的各种接口。</p>
</div>
<br/><h1>管理资源</h1>
<div><p>如果你是从开始一直遵循着指南的示例，现在会有一个小项目，显示 "Hello webpack"。现在我们尝试混合一些其他资源，比如 images，看看 webpack 如何处理。</p>
<p>在 webpack 出现之前，前端开发人员会使用 grunt 和 gulp 等工具来处理资源，并将它们从 <code>/src</code> 文件夹移动到 <code>/dist</code> 或 <code>/build</code> 目录中。JavaScript 模块也遵循同样方式，但是，像 webpack 这样的工具，将<strong>动态打包</strong>所有依赖（创建所谓的 <a href="/concepts/dependency-graph">依赖图(dependency graph)</a>）。这是极好的创举，因为现在每个模块都可以<em>明确表述它自身的依赖</em>，可以避免打包未使用的模块。</p>
<p>webpack 最出色的功能之一就是，除了引入 JavaScript，还可以通过 loader <em>引入任何其他类型的文件</em>。也就是说，以上列出的那些 JavaScript 的优点（例如显式依赖），同样可以用来构建 web 站点或 web 应用程序中的所有非 JavaScript 内容。让我们从 CSS 开始起步，或许你可能已经熟悉了下面这个设置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<p>在开始之前，让我们对项目做一个小的修改：</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="lang-diff">  &lt;!doctype html&gt;
  &lt;html&gt;
    &lt;head&gt;
<span class="token deleted">-    &lt;title&gt;起步&lt;/title&gt;</span>
<span class="token inserted">+    &lt;title&gt;管理资源&lt;/title&gt;</span>
    &lt;/head&gt;
    &lt;body&gt;
<span class="token deleted">-     &lt;script src="./main.js"&gt;&lt;/script&gt;</span>
<span class="token inserted">+     &lt;script src="./bundle.js"&gt;&lt;/script&gt;</span>
    &lt;/body&gt;
  &lt;/html&gt;
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
<span class="token deleted">-     filename: 'main.js',</span>
<span class="token inserted">+     filename: 'bundle.js',</span>
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#加载-css" id="加载-css"></a>
<span class="text">加载 CSS</span>
<a aria-label="加载 CSS" class="icon-link" href="#加载-css"></a>
</h2>
<p>为了在 JavaScript 模块中 <code>import</code> 一个 CSS 文件，你需要安装 <a href="/loaders/style-loader">style-loader</a> 和 <a href="/loaders/css-loader">css-loader</a>，并在 <a href="/configuration/module"><code>module</code> 配置</a> 中添加这些 loader：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev style-loader css-loader
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.css$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'style-loader',</span>
<span class="token inserted">+           'css-loader'</span>
<span class="token inserted">+         ]</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     ]</span>
<span class="token inserted">+   }</span>
  };
</code></pre>
<blockquote class="tip"><div class="tip-content"> webpack 根据正则表达式，来确定应该查找哪些文件，并将其提供给指定的 loader。在这个示例中，所有以 <code>.css</code> 结尾的文件，都将被提供给 <code>style-loader</code> 和 <code>css-loader</code>。 </div></blockquote><p>这使你可以在依赖于此样式的 js 文件中 <code>import './style.css'</code>。现在，在此模块执行过程中，含有 CSS 字符串的 <code>&lt;style&gt;</code> 标签，将被插入到 html 文件的 <code>&lt;head&gt;</code> 中。</p>
<p>我们尝试一下，通过在项目中添加一个新的 <code>style.css</code> 文件，并将其 import 到我们的 <code>index.js</code> 中：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- style.css</span>
    |- index.js
  |- /node_modules
</code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="lang-css"><span class="token selector"><span class="token class">.hello</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
<span class="token inserted">+ import './style.css';</span>

  function component() {
    var element = document.createElement('div');

    // lodash 是由当前 script 脚本 import 导入进来的
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.classList.add('hello');</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>现在运行 build 命令：</p>
<pre><code class="lang-bash">npm run build

<span class="token punctuation">..</span>.
    Asset      Size  Chunks             Chunk Names
bundle.js  76.4 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>再次在浏览器中打开 <code>index.html</code>，你应该看到 <code>Hello webpack</code> 现在的样式是红色。要查看 webpack 做了什么，请检查页面（不要查看页面源代码，因为它不会显示结果），并查看页面的 head 标签。它应该包含 style 块元素，也就是我们在 <code>index.js</code> 中 import 的 css 文件中的样式。</p>
<p>注意，在多数情况下，你也可以进行 <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">CSS 提取</a>，以便在生产环境中节省加载时间。最重要的是，现有的 loader 可以支持任何你可以想到的 CSS 风格 - <a href="/loaders/postcss-loader">postcss</a>, <a href="/loaders/sass-loader">sass</a> 和 <a href="/loaders/less-loader">less</a> 等。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#加载-images-图像" id="加载-images-图像"></a>
<span class="text">加载 images 图像</span>
<a aria-label="加载 images 图像" class="icon-link" href="#加载-images-图像"></a>
</h2>
<p>假想，现在我们正在下载 CSS，但是像 background 和 icon 这样的图像，要如何处理呢？使用 <a href="/loaders/file-loader">file-loader</a>，我们可以轻松地将这些内容混合到 CSS 中：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev file-loader
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ]
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(png|svg|jpg|gif)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'file-loader'</span>
<span class="token inserted">+         ]</span>
<span class="token inserted">+       }</span>
      ]
    }
  };
</code></pre>
<p>现在，在 <code>import MyImage from './my-image.png'</code> 时，此图像将被处理并添加到 <code>output</code> 目录，_并且_ <code>MyImage</code> 变量将包含该图像在处理后的最终 url。在使用 <a href="/loaders/css-loader">css-loader</a> 时，如前所示，会使用类似过程处理你的 CSS 中的 <code>url('./my-image.png')</code>。loader 会识别这是一个本地文件，并将 <code>'./my-image.png'</code> 路径，替换为 <code>output</code> 目录中图像的最终路径。而 <a href="/loaders/html-loader">html-loader</a> 以相同的方式处理 <code>&lt;img src="./my-image.png" /&gt;</code>。</p>
<p>我们向项目添加一个图像，然后看它是如何工作的，你可以使用任何你喜欢的图像：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- icon.png</span>
    |- style.css
    |- index.js
  |- /node_modules
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import './style.css';
<span class="token inserted">+ import Icon from './icon.png';</span>

  function component() {
    var element = document.createElement('div');

    // lodash，现在由此脚本导入
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
    element.classList.add('hello');

<span class="token inserted">+   // 将图像添加到我们已经存在的 div 中。</span>
<span class="token inserted">+   var myIcon = new Image();</span>
<span class="token inserted">+   myIcon.src = Icon;</span>
+
<span class="token inserted">+   element.appendChild(myIcon);</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p><strong>src/style.css</strong></p>
<pre><code class="lang-diff">  .hello {
    color: red;
<span class="token inserted">+   background: url('./icon.png');</span>
  }
</code></pre>
<p>重新构建并再次打开 index.html 文件：</p>
<pre><code class="lang-bash">npm run build

<span class="token punctuation">..</span>.
                               Asset      Size  Chunks                    Chunk Names
da4574bb234ddc4bb47cbe1ca4b20303.png  3.01 MiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>
                           bundle.js  76.7 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>如果一切顺利，你现在应该看到你的 icon 图标成为了重复的背景图，以及 <code>Hello webpack</code> 文本旁边的 <code>img</code> 元素。如果检查此元素，你将看到实际的文件名已更改为 <code>5c999da72346a995e7e2718865d019c8.png</code>。这意味着 webpack 在 <code>src</code> 文件夹中找到我们的文件，并对其进行了处理！</p>
<blockquote class="tip"><div class="tip-content"> 合乎逻辑下一步是，压缩和优化你的图像。查看 <a href="https://github.com/tcoopman/image-webpack-loader">image-webpack-loader</a> 和 <a href="/loaders/url-loader">url-loader</a>，以了解更多关于如果增强加载处理图像功能。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#加载-fonts-字体" id="加载-fonts-字体"></a>
<span class="text">加载 fonts 字体</span>
<a aria-label="加载 fonts 字体" class="icon-link" href="#加载-fonts-字体"></a>
</h2>
<p>那么，像字体这样的其他资源如何处理呢？file-loader 和 url-loader 可以接收并加载任何文件，然后将其输出到构建目录。这就是说，我们可以将它们用于任何类型的文件，也包括字体。让我们更新 <code>webpack.config.js</code> 来处理字体文件：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ]
        },
        {
          test: /\.(png|svg|jpg|gif)$/,
          use: [
            'file-loader'
          ]
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(woff|woff2|eot|ttf|otf)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'file-loader'</span>
<span class="token inserted">+         ]</span>
<span class="token inserted">+       }</span>
      ]
    }
  };
</code></pre>
<p>在项目中添加一些字体文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- my-font.woff</span>
<span class="token inserted">+   |- my-font.woff2</span>
    |- icon.png
    |- style.css
    |- index.js
  |- /node_modules
</code></pre>
<p>配置好 loader 并将字体文件放在合适的位置后，你可以通过一个 <code>@font-face</code> 声明将其混合。本地的 <code>url(...)</code> 指令会被 webpack 获取处理，就像它处理图片一样：</p>
<p><strong>src/style.css</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ @font-face {</span>
<span class="token inserted">+   font-family: 'MyFont';</span>
<span class="token inserted">+   src:  url('./my-font.woff2') format('woff2'),</span>
<span class="token inserted">+         url('./my-font.woff') format('woff');</span>
<span class="token inserted">+   font-weight: 600;</span>
<span class="token inserted">+   font-style: normal;</span>
<span class="token inserted">+ }</span>

  .hello {
    color: red;
<span class="token inserted">+   font-family: 'MyFont';</span>
    background: url('./icon.png');
  }
</code></pre>
<p>现在，让我们重新构建，然后看下 webpack 是否处理了我们的字体：</p>
<pre><code class="lang-bash">npm run build

<span class="token punctuation">..</span>.
                                 Asset      Size  Chunks                    Chunk Names
5439466351d432b73fdb518c6ae9654a.woff2  19.5 KiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
 387c65cc923ad19790469cfb5b7cb583.woff  23.4 KiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
  da4574bb234ddc4bb47cbe1ca4b20303.png  3.01 MiB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>
                             bundle.js    77 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
Entrypoint main <span class="token operator">=</span> bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>重新打开 <code>index.html</code> 看看我们的 <code>Hello webpack</code> 文本显示是否换上了新的字体。如果一切顺利，你应该能看到变化。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#加载数据" id="加载数据"></a>
<span class="text">加载数据</span>
<a aria-label="加载数据" class="icon-link" href="#加载数据"></a>
</h2>
<p>此外，可以加载的有用资源还有数据，如 JSON 文件，CSV、TSV 和 XML。类似于 NodeJS，JSON 支持实际上是内置的，也就是说 <code>import Data from './data.json'</code> 默认将正常运行。要导入 CSV、TSV 和 XML，你可以使用 <a href="https://github.com/theplatapi/csv-loader">csv-loader</a> 和 <a href="https://github.com/gisikw/xml-loader">xml-loader</a>。让我们处理加载这三类文件：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev csv-loader xml-loader
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
    module: {
      rules: [
        {
          test: /\.css$/,
          use: [
            'style-loader',
            'css-loader'
          ]
        },
        {
          test: /\.(png|svg|jpg|gif)$/,
          use: [
            'file-loader'
          ]
        },
        {
          test: /\.(woff|woff2|eot|ttf|otf)$/,
          use: [
            'file-loader'
          ]
        },
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.(csv|tsv)$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'csv-loader'</span>
<span class="token inserted">+         ]</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.xml$/,</span>
<span class="token inserted">+         use: [</span>
<span class="token inserted">+           'xml-loader'</span>
<span class="token inserted">+         ]</span>
<span class="token inserted">+       }</span>
      ]
    }
  };
</code></pre>
<p>在项目中添加一些数据文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token inserted">+   |- data.xml</span>
    |- my-font.woff
    |- my-font.woff2
    |- icon.png
    |- style.css
    |- index.js
  |- /node_modules
</code></pre>
<p><strong>src/data.xml</strong></p>
<pre><code class="lang-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>note</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>to</span><span class="token punctuation">&gt;</span></span>Mary<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>to</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>from</span><span class="token punctuation">&gt;</span></span>John<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>from</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>heading</span><span class="token punctuation">&gt;</span></span>Reminder<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>heading</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>Call Cindy on Tuesday<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>note</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>现在，你可以 <code>import</code> 这四种类型的数据(JSON, CSV, TSV, XML)中的任何一种，所导入的 <code>Data</code> 变量，将包含可直接使用的已解析 JSON：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import './style.css';
  import Icon from './icon.png';
<span class="token inserted">+ import Data from './data.xml';</span>

  function component() {
    var element = document.createElement('div');

    // lodash，现在通过 script 标签导入
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
    element.classList.add('hello');

    // 将图像添加到我们已经存在的 div 中。
    var myIcon = new Image();
    myIcon.src = Icon;

    element.appendChild(myIcon);

<span class="token inserted">+   console.log(Data);</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>重新执行 <code>npm run build</code> 命令，然后打开 <code>index.html</code>。查看开发者工具中的控制台，你应该能够看到导入的数据会被打印出来！</p>
<blockquote class="tip"><div class="tip-content"> 在使用 <a href="https://github.com/d3">d3</a> 等工具实现某些数据可视化时，这个功能极其有用。可以不用在运行时再去发送一个 ajax 请求获取和解析数据，而是在构建过程中将其提前加载到模块中，以便浏览器加载模块后，直接就可以访问解析过的数据。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#全局资源" id="全局资源"></a>
<span class="text">全局资源</span>
<a aria-label="全局资源" class="icon-link" href="#全局资源"></a>
</h2>
<p>上述所有内容中最出色之处在于，以这种方式加载资源，你可以以更直观的方式将模块和资源组合在一起。无需依赖于含有全部资源的 <code>/assets</code> 目录，而是将资源与代码组合在一起使用。例如，类似这样的结构会非常有用：</p>
<pre><code class="lang-diff"><span class="token deleted">- |- /assets</span>
<span class="token inserted">+ |– /components</span>
<span class="token inserted">+ |  |– /my-component</span>
<span class="token inserted">+ |  |  |– index.jsx</span>
<span class="token inserted">+ |  |  |– index.css</span>
<span class="token inserted">+ |  |  |– icon.svg</span>
<span class="token inserted">+ |  |  |– img.png</span>
</code></pre>
<p>这种配置方式会使你的代码更具备可移植性，因为现有的集中放置的方式会让所有资源紧密耦合起来。假如你想在另一个项目中使用  <code>/my-component</code>，只需将其复制或移动到 <code>/components</code> 目录下。只要你已经安装过全部<em>外部依赖</em>，并且<em>已经在配置中定义过相同的 loader</em>，那么项目应该能够良好运行。</p>
<p>但是，假如你只能被局限在旧有开发方式，或者你有一些在多个组件（视图、模板、模块等）之间共享的资源。你仍然可以将这些资源存储在一个基本目录(base directory)中，甚至配合使用 <a href="/configuration/resolve#resolve-alias">alias</a> 来使它们更方便 <code>import 导入</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#回退处理" id="回退处理"></a>
<span class="text">回退处理</span>
<a aria-label="回退处理" class="icon-link" href="#回退处理"></a>
</h2>
<p>对于下篇指南，我们无需使用本指南中所有用到的资源，因此我们会进行一些清理工作，以便为下篇指南 <a href="/guides/output-management/">管理输出</a> 做好准备：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
<span class="token deleted">-   |- data.xml</span>
<span class="token deleted">-   |- my-font.woff</span>
<span class="token deleted">-   |- my-font.woff2</span>
<span class="token deleted">-   |- icon.png</span>
<span class="token deleted">-   |- style.css</span>
    |- index.js
  |- /node_modules
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
<span class="token deleted">-   module: {</span>
<span class="token deleted">-     rules: [</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.css$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'style-loader',</span>
<span class="token deleted">-           'css-loader'</span>
<span class="token deleted">-         ]</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(png|svg|jpg|gif)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'file-loader'</span>
<span class="token deleted">-         ]</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(woff|woff2|eot|ttf|otf)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'file-loader'</span>
<span class="token deleted">-         ]</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.(csv|tsv)$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'csv-loader'</span>
<span class="token deleted">-         ]</span>
<span class="token deleted">-       },</span>
<span class="token deleted">-       {</span>
<span class="token deleted">-         test: /\.xml$/,</span>
<span class="token deleted">-         use: [</span>
<span class="token deleted">-           'xml-loader'</span>
<span class="token deleted">-         ]</span>
<span class="token deleted">-       }</span>
<span class="token deleted">-     ]</span>
<span class="token deleted">-   }</span>
  };
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
<span class="token deleted">- import './style.css';</span>
<span class="token deleted">- import Icon from './icon.png';</span>
<span class="token deleted">- import Data from './data.xml';</span>
-
  function component() {
    var element = document.createElement('div');
-
<span class="token deleted">-   // lodash，现在通过 script 标签导入</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token deleted">-   element.classList.add('hello');</span>
-
<span class="token deleted">-   // 将图像添加到我们已经存在的 div 中。</span>
<span class="token deleted">-   var myIcon = new Image();</span>
<span class="token deleted">-   myIcon.src = Icon;</span>
-
<span class="token deleted">-   element.appendChild(myIcon);</span>
-
<span class="token deleted">-   console.log(Data);</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#下篇指南" id="下篇指南"></a>
<span class="text">下篇指南</span>
<a aria-label="下篇指南" class="icon-link" href="#下篇指南"></a>
</h2>
<p>我们继续移步到 <a href="/guides/output-management/">管理输出</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#延伸阅读" id="延伸阅读"></a>
<span class="text">延伸阅读</span>
<a aria-label="延伸阅读" class="icon-link" href="#延伸阅读"></a>
</h2>
<ul>
<li><a href="https://survivejs.com/webpack/loading/fonts/">Loading Fonts</a> on SurviveJS</li>
</ul>
</div>
<br/><h1>管理输出</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/asset-management"><code>管理资源</code></a> 指南中的代码示例。 </div></blockquote><p>到目前为止，我们都是在 <code>index.html</code> 文件中手动引入所有资源，然而随着应用程序增长，并且一旦开始 <a href="/guides/caching">在文件名中使用 hash</a>] 并输出 <a href="/guides/code-splitting">多个 bundle</a>，如果继续手动管理 <code>index.html</code> 文件，就会变得困难起来。然而，通过一些插件可以使这个过程更容易管控。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#预先准备" id="预先准备"></a>
<span class="text">预先准备</span>
<a aria-label="预先准备" class="icon-link" href="#预先准备"></a>
</h2>
<p>首先，调整一下我们的项目：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
<span class="token inserted">+   |- print.js</span>
  |- /node_modules
</code></pre>
<p>我们在 <code>src/print.js</code> 文件中添加一些逻辑：</p>
<p><strong>src/print.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">printMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I get called from print.js!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>并且在 <code>src/index.js</code> 文件中使用这个函数：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
<span class="token inserted">+ import printMe from './print.js';</span>

  function component() {
    var element = document.createElement('div');
<span class="token inserted">+   var btn = document.createElement('button');</span>

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

<span class="token inserted">+   btn.innerHTML = '点击这里，然后查看 console！';</span>
<span class="token inserted">+   btn.onclick = printMe;</span>
+
<span class="token inserted">+   element.appendChild(btn);</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>还要更新 <code>dist/index.html</code> 文件，来为 webpack 分离入口做好准备：</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="lang-diff">  &lt;!doctype html&gt;
  &lt;html&gt;
    &lt;head&gt;
<span class="token deleted">-     &lt;title&gt;管理资源&lt;/title&gt;</span>
<span class="token inserted">+     &lt;title&gt;管理输出&lt;/title&gt;</span>
<span class="token inserted">+     &lt;script src="./print.bundle.js"&gt;&lt;/script&gt;</span>
    &lt;/head&gt;
    &lt;body&gt;
<span class="token deleted">-     &lt;script src="./bundle.js"&gt;&lt;/script&gt;</span>
<span class="token inserted">+     &lt;script src="./app.bundle.js"&gt;&lt;/script&gt;</span>
    &lt;/body&gt;
  &lt;/html&gt;
</code></pre>
<p>现在调整配置。我们将在 entry 添加 <code>src/print.js</code> 作为新的入口起点（<code>print</code>），然后修改 output，以便根据入口起点定义的名称，动态地产生 bundle 名称：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
<span class="token deleted">-   entry: './src/index.js',</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     app: './src/index.js',</span>
<span class="token inserted">+     print: './src/print.js'</span>
<span class="token inserted">+   },</span>
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>执行 <code>npm run build</code>，然后看到生成如下：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
          Asset     Size  Chunks                    Chunk Names
  app.bundle.js   545 kB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js  2.74 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
<span class="token punctuation">..</span>.
</code></pre>
<p>我们可以看到，webpack 生成 <code>print.bundle.js</code> 和 <code>app.bundle.js</code> 文件，这也和我们在 <code>index.html</code> 文件中指定的文件名称相对应。如果你在浏览器中打开 <code>index.html</code>，就可以看到在点击按钮时会发生什么。</p>
<p>但是，如果我们更改了我们的一个入口起点的名称，甚至添加了一个新的入口，会发生什么？会在构建时重新命名生成的 bundle，但是我们的 <code>index.html</code> 文件仍然引用旧的名称。让我们用 <a href="/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> 来解决这个问题。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#设置-htmlwebpackplugin" id="设置-htmlwebpackplugin"></a>
<span class="text">设置 HtmlWebpackPlugin</span>
<a aria-label="设置 HtmlWebpackPlugin" class="icon-link" href="#设置-htmlwebpackplugin"></a>
</h2>
<p>首先安装插件，并且调整 <code>webpack.config.js</code> 文件：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
<span class="token inserted">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     new HtmlWebpackPlugin({</span>
<span class="token inserted">+       title: '管理输出'</span>
<span class="token inserted">+     })</span>
<span class="token inserted">+   ],</span>
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>在我们构建之前，你应该了解，虽然在 <code>dist/</code> 文件夹我们已经有了 <code>index.html</code> 这个文件，然而 <code>HtmlWebpackPlugin</code> 还是会默认生成它自己的 <code>index.html</code> 文件。也就是说，它会用新生成的 <code>index.html</code> 文件，替换我们的原有文件。我们看下执行 <code>npm run build</code> 后会发生什么：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
           Asset       Size  Chunks                    Chunk Names
 print.bundle.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  print
   app.bundle.js    2.81 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         app
      index.html  249 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>如果在代码编辑器中打开 <code>index.html</code>，你会看到 <code>HtmlWebpackPlugin</code> 创建了一个全新的文件，所有的 bundle 会自动添加到 html 中。</p>
<p>如果你想要了解 <code>HtmlWebpackPlugin</code> 插件提供的全部的功能和选项，你就应该阅读 <a href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a> 仓库中的源码。</p>
<p>还可以看下 <a href="https://github.com/jaketrent/html-webpack-template"><code>html-webpack-template</code></a>，除了提供默认模板之外，还提供了一些额外的功能。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#清理-dist-文件夹" id="清理-dist-文件夹"></a>
<span class="text">清理 <code>/dist</code> 文件夹</span>
<a aria-label="清理 &lt;code&gt;/dist&lt;/code&gt; 文件夹" class="icon-link" href="#清理-dist-文件夹"></a>
</h2>
<p>你可能已经注意到，由于遗留了之前的指南和代码示例，我们的 <code>/dist</code> 文件夹显得相当杂乱。webpack 将生成文件并放置在 <code>/dist</code> 文件夹中，但是它不会追踪哪些文件是实际在项目中用到的。</p>
<p>通常比较推荐的做法是，在每次构建前清理 <code>/dist</code> 文件夹，这样只会生成用到的文件。让我们实现这个需求。</p>
<p><a href="https://www.npmjs.com/package/clean-webpack-plugin"><code>clean-webpack-plugin</code></a> 是一个流行的清理插件，安装和配置它。</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev clean-webpack-plugin
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
<span class="token inserted">+ const CleanWebpackPlugin = require('clean-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    plugins: [
<span class="token inserted">+     new CleanWebpackPlugin(),</span>
      new HtmlWebpackPlugin({
        title: '管理输出'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>现在，执行 <code>npm run build</code>，检查 <code>/dist</code> 文件夹。如果一切顺利，现在只会看到构建后生成的文件，而没有旧文件！</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#manifest" id="manifest"></a>
<span class="text">manifest</span>
<a aria-label="manifest" class="icon-link" href="#manifest"></a>
</h2>
<p>你可能会很感兴趣，webpack 和 webpack 插件似乎“知道”应该哪些文件生成。答案是，webpack 通过 manifest，可以追踪所有模块到输出 bundle 之间的映射。如果你想要知道如何以其他方式来控制 webpack <a href="/configuration/output"><code>输出</code></a>，了解 manifest 是个好的开始。</p>
<p>通过 <a href="https://github.com/danethurber/webpack-manifest-plugin"><code>WebpackManifestPlugin</code></a> 插件，可以将 manifest 数据提取为一个容易使用的 json 文件。</p>
<p>我们不会在此展示一个如何在项目中使用此插件的完整示例，你可以在 <a href="/concepts/manifest">manifest</a> 概念页面深入阅读，以及在 <a href="/guides/caching">缓存</a> 指南中，了解它与长效缓存有何关系。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>现在，你已经了解如何向 HTML 动态添加 bundle，让我们深入 <a href="/guides/development">开发环境</a> 指南。或者如果你想要深入更多相关高级话题，我们推荐你前往 <a href="/guides/code-splitting">代码分离</a> 指南。</p>
</div>
<br/><h1>开发环境</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/output-management">管理输出</a> 指南中的代码示例。 </div></blockquote><p>如果你一直跟随之前的指南，应该对一些 webpack 基础知识有着很扎实的理解。在我们继续之前，先来看看如何设置一个开发环境，使我们的开发体验变得更轻松一些。</p>
<blockquote class="warning"><div class="tip-content"> 本指南中的工具<strong>仅用于开发环境</strong>，请<strong>不要</strong>在生产环境中使用它们！ </div></blockquote><p>在开始前，我们先将 <a href="/concepts/mode/#mode-development"><code>mode</code> 设置为 <code>'development'</code></a>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
<span class="token inserted">+   mode: 'development',</span>
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: '开发环境'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-source-map" id="使用-source-map"></a>
<span class="text">使用 source map</span>
<a aria-label="使用 source map" class="icon-link" href="#使用-source-map"></a>
</h2>
<p>当 webpack 打包源代码时，可能会很难追踪到 error(错误) 和 warning(警告) 在源代码中的原始位置。例如，如果将三个源文件（<code>a.js</code>, <code>b.js</code> 和 <code>c.js</code>）打包到一个 bundle（<code>bundle.js</code>）中，而其中一个源文件包含一个错误，那么堆栈跟踪就会直接指向到 <code>bundle.js</code>。你可能需要准确地知道错误来自于哪个源文件，所以这种提示这通常不会提供太多帮助。</p>
<p>为了更容易地追踪 error 和 warning，JavaScript 提供了 <a href="http://blog.teamtreehouse.com/introduction-source-maps">source map</a> 功能，可以将编译后的代码映射回原始源代码。如果一个错误来自于 <code>b.js</code>，source map 就会明确的告诉你。</p>
<p>source map 有许多 <a href="/configuration/devtool">可用选项</a>，请务必仔细阅读它们，以便可以根据需要进行配置。</p>
<p>对于本指南，我们将使用 <code>inline-source-map</code> 选项，这有助于解释说明示例意图（此配置仅用于示例，不要用于生产环境）：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
<span class="token inserted">+   devtool: 'inline-source-map',</span>
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Development'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>现在，让我们来做一些调试，在 <code>print.js</code> 文件中生成一个错误：</p>
<p><strong>src/print.js</strong></p>
<pre><code class="lang-diff">  export default function printMe() {
<span class="token deleted">-   console.log('I get called from print.js!');</span>
<span class="token inserted">+   cosnole.log('I get called from print.js!');</span>
  }
</code></pre>
<p>运行 <code>npm run build</code>，编译如下：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
  app.bundle.js    1.44 MB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js    6.43 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
     index.html  248 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>现在，在浏览器中打开生成的 <code>index.html</code> 文件，点击按钮，并且在控制台查看显示的错误。错误应该如下：</p>
<pre><code class="lang-bash"> Uncaught ReferenceError: cosnole is not defined
    at HTMLButtonElement.printMe <span class="token punctuation">(</span>print.js:2<span class="token punctuation">)</span>
</code></pre>
<p>我们可以看到，此错误包含有发生错误的文件（<code>print.js</code>）和行号（2）的引用。这是非常有帮助的，因为现在我们可以确切地知道，所要解决问题的位置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选择一个开发工具" id="选择一个开发工具"></a>
<span class="text">选择一个开发工具</span>
<a aria-label="选择一个开发工具" class="icon-link" href="#选择一个开发工具"></a>
</h2>
<blockquote class="warning"><div class="tip-content"> 某些文本编辑器具有 "safe write(安全写入)" 功能，可能会干扰下面一些工具。阅读 <a href="#adjusting-your-text-editor">调整文本编辑器</a> 以解决这些问题。 </div></blockquote><p>在每次编译代码时，手动运行 <code>npm run build</code> 会显得很麻烦。</p>
<p>webpack 提供几种可选方式，帮助你在代码发生变化后自动编译代码：</p>
<ol start="undefined">
<li>webpack watch mode(webpack 观察模式)</li>
<li>webpack-dev-server</li>
<li>webpack-dev-middleware</li>
</ol>
<p>多数场景中，你可能需要使用 <code>webpack-dev-server</code>，但是不妨探讨一下以上的所有选项。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-watch-mode-观察模式-" id="使用-watch-mode-观察模式-"></a>
<span class="text">使用 watch mode(观察模式)</span>
<a aria-label="使用 watch mode(观察模式)" class="icon-link" href="#使用-watch-mode-观察模式-"></a>
</h3>
<p>你可以指示 webpack "watch" 依赖图中所有文件的更改。如果其中一个文件被更新，代码将被重新编译，所以你不必再去手动运行整个构建。</p>
<p>我们添加一个用于启动 webpack watch mode 的 npm scripts：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
<span class="token inserted">+     "watch": "webpack --watch",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.16",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^3.0.0",
      "xml-loader": "^1.2.1"
    }
  }
</code></pre>
<p>现在，你可以在命令行中运行 <code>npm run watch</code>，然后就会看到 webpack 是如何编译代码。
然而，你会发现并没有退出命令行。这是因为此 script 当前还在 watch 你的文件。</p>
<p>现在，webpack 观察文件的同时，先移除我们之前加入的错误：</p>
<p><strong>src/print.js</strong></p>
<pre><code class="lang-diff">  export default function printMe() {
<span class="token deleted">-   cosnole.log('I get called from print.js!');</span>
<span class="token inserted">+   console.log('I get called from print.js!');</span>
  }
</code></pre>
<p>现在，保存文件并检查 terminal(终端) 窗口。应该可以看到 webpack 自动地重新编译修改后的模块！</p>
<p>唯一的缺点是，为了看到修改后的实际效果，你需要刷新浏览器。如果能够自动刷新浏览器就更好了，因此接下来我们会尝试通过 <code>webpack-dev-server</code> 实现此功能。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-webpack-dev-server" id="使用-webpack-dev-server"></a>
<span class="text">使用 webpack-dev-server</span>
<a aria-label="使用 webpack-dev-server" class="icon-link" href="#使用-webpack-dev-server"></a>
</h3>
<p><code>webpack-dev-server</code> 为你提供了一个简单的 web server，并且具有 live reloading(实时重新加载) 功能。设置如下：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack-dev-server
</code></pre>
<p>修改配置文件，告诉 dev server，从什么位置查找文件：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    devtool: 'inline-source-map',
<span class="token inserted">+   devServer: {</span>
<span class="token inserted">+     contentBase: './dist'</span>
<span class="token inserted">+   },</span>
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Development'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>以上配置告知 <code>webpack-dev-server</code>，将 <code>dist</code> 目录下的文件 serve 到 <code>localhost:8080</code> 下。（译注：serve，将资源作为 server 的可访问文件）</p>
<blockquote class="warning"><div class="tip-content"> webpack-dev-server 在编译之后不会写入到任何输出文件。而是将 bundle 文件保留在内存中，然后将它们 serve 到 server 中，就好像它们是挂载在 server 根路径上的真实文件一样。如果你的页面希望在其他不同路径中找到 bundle 文件，则可以通过 dev server 配置中的 <a href="/configuration/dev-server/#devserver-publicpath-"><code>publicPath</code></a> 选项进行修改。 </div></blockquote><p>我们添加一个可以直接运行 dev server 的 script：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
      "watch": "webpack --watch",
<span class="token inserted">+     "start": "webpack-dev-server --open",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.16",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^3.0.0",
      "xml-loader": "^1.2.1"
    }
  }
</code></pre>
<p>现在，在命令行中运行 <code>npm start</code>，我们会看到浏览器自动加载页面。如果你更改任何源文件并保存它们，web server 将在编译代码后自动重新加载。试试看！</p>
<p><code>webpack-dev-server</code> 具有许多可配置的选项。关于其他更多配置，请查看 <a href="/configuration/dev-server">配置文档</a>。</p>
<blockquote class="tip"><div class="tip-content"> 现在，server 正在运行，你可能需要尝试 <a href="/guides/hot-module-replacement">模块热替换(hot module replacement)</a>！ </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-webpack-dev-middleware" id="使用-webpack-dev-middleware"></a>
<span class="text">使用 webpack-dev-middleware</span>
<a aria-label="使用 webpack-dev-middleware" class="icon-link" href="#使用-webpack-dev-middleware"></a>
</h3>
<p><code>webpack-dev-middleware</code> 是一个封装器(wrapper)，它可以把 webpack 处理过的文件发送到一个 server。  <code>webpack-dev-server</code> 在内部使用了它，然而它也可以作为一个单独的 package 来使用，以便根据需求进行更多自定义设置。下面是一个 webpack-dev-middleware 配合 express server 的示例。</p>
<p>首先，安装 <code>express</code> 和 <code>webpack-dev-middleware</code>：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev express webpack-dev-middleware
</code></pre>
<p>现在，我们需要调整 webpack 配置文件，以确保 middleware(中间件) 功能能够正确启用：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');

  module.exports = {
    mode: 'development',
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist'
    },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: '管理输出'
      })
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist'),
<span class="token inserted">+     publicPath: '/'</span>
    }
  };
</code></pre>
<p>我们将会在 server 脚本使用 <code>publicPath</code>，以确保文件资源能够正确地 serve 在 <code>http://localhost:3000</code> 下，稍后我们会指定 port number(端口号)。接下来是设置自定义 <code>express</code> server：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
<span class="token inserted">+ |- server.js</span>
  |- /dist
  |- /src
    |- index.js
    |- print.js
  |- /node_modules
</code></pre>
<p><strong>server.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevMiddleware <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-middleware'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 告诉 express 使用 webpack-dev-middleware，</span>
<span class="token comment">// 以及将 webpack.config.js 配置文件作为基础配置</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">webpackDevMiddleware</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  publicPath<span class="token punctuation">:</span> config<span class="token punctuation">.</span>output<span class="token punctuation">.</span>publicPath
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将文件 serve 到 port 3000。</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Example app listening on port 3000!\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>现在，添加一个 npm script，以使我们更方便地运行服务：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "webpack.config.js",
    "scripts": {
      "test": "echo \"Error: no test specified\" &amp;&amp; exit 1",
      "watch": "webpack --watch",
      "start": "webpack-dev-server --open",
<span class="token inserted">+     "server": "node server.js",</span>
      "build": "webpack"
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.16",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "express": "^4.15.3",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^3.0.0",
      "webpack-dev-middleware": "^1.12.0",
      "xml-loader": "^1.2.1"
    }
  }
</code></pre>
<p>现在，在 terminal(终端) 中执行 <code>npm run server</code>，将会有类似如下信息输出：</p>
<pre><code class="lang-bash">Example app listening on port 3000<span class="token operator">!</span>
<span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
  app.bundle.js    1.44 MB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
print.bundle.js    6.57 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
     index.html  306 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
webpack: Compiled successfully.
</code></pre>
<p>现在，打开浏览器，访问 <code>http://localhost:3000</code>。应该看到webpack 应用程序已经运行！</p>
<blockquote class="tip"><div class="tip-content"> 如果想要了解更多关于模块热替换(hot module replacement)的运行机制，我们推荐你查看 <a href="/guides/hot-module-replacement/">模块热替换(hot module replacement)</a> 指南。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#调整文本编辑器" id="调整文本编辑器"></a>
<span class="text">调整文本编辑器</span>
<a aria-label="调整文本编辑器" class="icon-link" href="#调整文本编辑器"></a>
</h2>
<p>使用自动编译代码时，可能会在保存文件时遇到一些问题。某些编辑器具有 "safe write(安全写入)" 功能，会影响重新编译。</p>
<p>在一些常见的编辑器中禁用此功能，查看以下列表：</p>
<ul>
<li><strong>Sublime Text 3</strong>：在用户首选项(user preferences)中添加 <code>atomic_save: 'false'</code>。</li>
<li><strong>JetBrains IDEs (e.g. WebStorm)</strong>：在 <code>Preferences &gt; Appearance &amp; Behavior &gt; System Settings</code> 中取消选中 "Use safe write"。</li>
<li><strong>Vim</strong>：在设置(settings)中增加 <code>:set backupcopy=yes</code>。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>现在，你已经学会了如何自动编译代码，并运行一个简单的 development server，查看下一个指南，其中将介绍 <a href="/guides/hot-module-replacement">模块热替换(hot module replacement)</a>。</p>
</div>
<br/><h1>模块热替换</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/development">开发环境</a> 指南中的代码示例。 </div></blockquote><p>模块热替换(hot module replacement 或 HMR)是 webpack 提供的最有用的功能之一。它允许在运行时更新所有类型的模块，而无需完全刷新。本页面重点介绍其<strong>实现</strong>，而 <a href="/concepts/hot-module-replacement">概念</a> 页面提供了更多关于它的工作原理以及为什么它有用的细节。</p>
<blockquote class="warning"><div class="tip-content"> <strong>HMR</strong> 不适用于生产环境，这意味着它应当用于开发环境。更多详细信息，请查看 <a href="/guides/production">生产环境</a> 指南。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#启用-hmr" id="启用-hmr"></a>
<span class="text">启用 HMR</span>
<a aria-label="启用 HMR" class="icon-link" href="#启用-hmr"></a>
</h2>
<p>此功能可以很大程度提高生产效率。我们要做的就是更新 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 配置，然后使用 webpack 内置的 HMR 插件。我们还要删除掉 <code>print.js</code> 的入口起点，因为现在已经在 <code>index.js</code> 模块中引用了它。</p>
<blockquote class="tip"><div class="tip-content"> 如果你在技术选型中使用了 <code>webpack-dev-middleware</code> 而没有使用 <code>webpack-dev-server</code>，请使用 <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package，以在你的自定义 server 或应用程序上启用 HMR。 </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
<span class="token inserted">+ const webpack = require('webpack');</span>

  module.exports = {
    entry: {
<span class="token deleted">-      app: './src/index.js',</span>
<span class="token deleted">-      print: './src/print.js'</span>
<span class="token inserted">+      app: './src/index.js'</span>
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist',
<span class="token inserted">+     hot: true</span>
    },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: '模块热替换'
      }),
<span class="token inserted">+     new webpack.HotModuleReplacementPlugin()</span>
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<blockquote class="tip"><div class="tip-content"> 可以通过命令来修改 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 的配置：<code>webpack-dev-server --hotOnly</code>。 </div></blockquote><p>现在，修改 <code>index.js</code> 文件，以便在 <code>print.js</code> 内部发生变更时，告诉 webpack 接受 updated module。</p>
<p><strong>index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import printMe from './print.js';

  function component() {
    var element = document.createElement('div');
    var btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;

    element.appendChild(btn);

    return element;
  }

  document.body.appendChild(component());
+
<span class="token inserted">+ if (module.hot) {</span>
<span class="token inserted">+   module.hot.accept('./print.js', function() {</span>
<span class="token inserted">+     console.log('Accepting the updated printMe module!');</span>
<span class="token inserted">+     printMe();</span>
<span class="token inserted">+   })</span>
<span class="token inserted">+ }</span>
</code></pre>
<p>修改 <code>print.js</code> 中 <code>console.log</code> 语句，你将会在浏览器中看到如下的输出（暂时不要担心 <code>button.onclick = printMe()</code> 输出，我们稍后也会更新这部分）。</p>
<p><strong>print.js</strong></p>
<pre><code class="lang-diff">  export default function printMe() {
<span class="token deleted">-   console.log('I get called from print.js!');</span>
<span class="token inserted">+   console.log('Updating print.js...')</span>
  }
</code></pre>
<p><strong>console</strong></p>
<pre><code class="lang-diff">[HMR] Waiting for update signal from WDS...
main.js:4395 [WDS] Hot Module Replacement enabled.
<span class="token inserted">+ 2main.js:4395 [WDS] App updated. Recompiling...</span>
<span class="token inserted">+ main.js:4395 [WDS] App hot update...</span>
<span class="token inserted">+ main.js:4330 [HMR] Checking for updates on the server...</span>
<span class="token inserted">+ main.js:10024 Accepting the updated printMe module!</span>
<span class="token inserted">+ 0.4b8ee77….hot-update.js:10 Updating print.js...</span>
<span class="token inserted">+ main.js:4330 [HMR] Updated modules:</span>
<span class="token inserted">+ main.js:4330 [HMR]  - 20</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#通过-node-js-api" id="通过-node-js-api"></a>
<span class="text">通过 Node.js API</span>
<a aria-label="通过 Node.js API" class="icon-link" href="#通过-node-js-api"></a>
</h2>
<p>在 Node.js API 中使用 webpack dev server 时，不要将 dev server 选项放在 webpack 配置对象(webpack config object)中。而是，在创建时，将其作为第二个参数传递。例如：</p>
<p><code>new WebpackDevServer(compiler, options)</code></p>
<p>想要启用 HMR，还需要修改 webpack 配置对象，使其包含 HMR 入口起点。<code>webpack-dev-server</code> package 中具有一个叫做 <code>addDevServerEntrypoints</code> 的方法，你可以通过使用这个方法来实现。这是关于如何使用的一个基本示例：</p>
<p><strong>dev-server.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  contentBase<span class="token punctuation">:</span> <span class="token string">'./dist'</span><span class="token punctuation">,</span>
  hot<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  host<span class="token punctuation">:</span> <span class="token string">'localhost'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

webpackDevServer<span class="token punctuation">.</span><span class="token function">addDevServerEntrypoints</span><span class="token punctuation">(</span>config<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">,</span> <span class="token string">'localhost'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dev server listening on port 5000'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果你正在使用 <a href="/guides/development#using-webpack-dev-middleware"><code>webpack-dev-middleware</code></a>，可以通过 <a href="https://github.com/webpack-contrib/webpack-hot-middleware"><code>webpack-hot-middleware</code></a> package，在自定义 dev server 中启用 HMR。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#问题" id="问题"></a>
<span class="text">问题</span>
<a aria-label="问题" class="icon-link" href="#问题"></a>
</h2>
<p>模块热替换可能比较难以掌握。为了说明这一点，我们回到刚才的示例中。如果你继续点击示例页面上的按钮，你会发现控制台仍在打印旧的 <code>printMe</code> 函数。</p>
<p>这是因为按钮的 <code>onclick</code> 事件处理函数仍然绑定在旧的 <code>printMe</code> 函数上。</p>
<p>为了让 HMR 正常工作，我们需要更新代码，使用 <code>module.hot.accept</code> 将其绑定到新的 <code>printMe</code> 函数上：</p>
<p><strong>index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import printMe from './print.js';

  function component() {
    var element = document.createElement('div');
    var btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;  // onclick 事件绑定原始的 printMe 函数上

    element.appendChild(btn);

    return element;
  }

<span class="token deleted">- document.body.appendChild(component());</span>
<span class="token inserted">+ let element = component(); // 存储 element，以在 print.js 修改时重新渲染</span>
<span class="token inserted">+ document.body.appendChild(element);</span>

  if (module.hot) {
    module.hot.accept('./print.js', function() {
      console.log('Accepting the updated printMe module!');
<span class="token deleted">-     printMe();</span>
<span class="token inserted">+     document.body.removeChild(element);</span>
<span class="token inserted">+     element = component(); // Re-render the "component" to update the click handler</span>
<span class="token inserted">+     element = component(); // 重新渲染 "component"，以便更新 click 事件处理函数</span>
<span class="token inserted">+     document.body.appendChild(element);</span>
    })
  }
</code></pre>
<p>这仅仅是一个示例，还有很多让人易于犯错的情况。幸运的是，有很多 loader（下面会提到一些）可以使得模块热替换变得更加容易。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#hmr-加载样式" id="hmr-加载样式"></a>
<span class="text">HMR 加载样式</span>
<a aria-label="HMR 加载样式" class="icon-link" href="#hmr-加载样式"></a>
</h2>
<p>借助于 <code>style-loader</code>，使用模块热替换来加载 CSS 实际上极其简单。此 loader 在幕后使用了 <code>module.hot.accept</code>，在 CSS 依赖模块更新之后，会将其 patch(修补) 到 <code>&lt;style&gt;</code> 标签中。</p>
<p>首先使用以下命令安装两个 loader ：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev style-loader css-loader
</code></pre>
<p>然后更新配置文件，使用这两个 loader。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
  const webpack = require('webpack');

  module.exports = {
    entry: {
      app: './src/index.js'
    },
    devtool: 'inline-source-map',
    devServer: {
      contentBase: './dist',
      hot: true
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: /\.css$/,</span>
<span class="token inserted">+         use: ['style-loader', 'css-loader']</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     ]</span>
<span class="token inserted">+   },</span>
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: '模块热替换'
      }),
      new webpack.HotModuleReplacementPlugin()
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>如同 import 模块，热加载样式表同样很简单：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  | - package.json
  | - webpack.config.js
  | - /dist
    | - bundle.js
  | - /src
    | - index.js
    | - print.js
<span class="token inserted">+   | - styles.css</span>
</code></pre>
<p><strong>styles.css</strong></p>
<pre><code class="lang-css"><span class="token selector">body </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import printMe from './print.js';
<span class="token inserted">+ import './styles.css';</span>

  function component() {
    var element = document.createElement('div');
    var btn = document.createElement('button');

    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    btn.innerHTML = 'Click me and check the console!';
    btn.onclick = printMe;  // onclick event is bind to the original printMe function

    element.appendChild(btn);

    return element;
  }

  let element = component();
  document.body.appendChild(element);

  if (module.hot) {
    module.hot.accept('./print.js', function() {
      console.log('Accepting the updated printMe module!');
      document.body.removeChild(element);
      element = component(); // Re-render the "component" to update the click handler
      document.body.appendChild(element);
    })
  }

</code></pre>
<p>将 <code>body</code> 的 style 改为 <code>background: red;</code>，你应该可以立即看到页面的背景颜色随之更改，而无需完全刷新。</p>
<p><strong>styles.css</strong></p>
<pre><code class="lang-diff">  body {
<span class="token deleted">-   background: blue;</span>
<span class="token inserted">+   background: red;</span>
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#其他代码和框架" id="其他代码和框架"></a>
<span class="text">其他代码和框架</span>
<a aria-label="其他代码和框架" class="icon-link" href="#其他代码和框架"></a>
</h2>
<p>社区还提供许多其他 loader 和示例，可以使 HMR 与各种框架和库平滑地进行交互……</p>
<ul>
<li><a href="https://github.com/gaearon/react-hot-loader">React Hot Loader</a>：实时调整 react 组件。</li>
<li><a href="https://github.com/vuejs/vue-loader">Vue Loader</a>：此 loader 支持 vue 组件的 HMR，提供开箱即用体验。</li>
<li><a href="https://github.com/fluxxu/elm-hot-loader">Elm Hot Loader</a>：支持 Elm 编程语言的 HMR。</li>
<li><a href="https://github.com/gdi2290/angular-hmr">Angular HMR</a>：没有必要使用 loader！直接修改 NgModule 主文件就够了，它可以完全控制 HMR API。</li>
</ul>
<blockquote class="tip"><div class="tip-content"> 如果你知道任何其他 loader 或 plugin，能够有助于或增强模块热替换(hot module replacement)，请提交一个 pull request 以添加到此列表中！ </div></blockquote></div>
<br/><h1>tree shaking</h1>
<div><p><em>tree shaking</em> 是一个术语，通常用于描述移除 JavaScript 上下文中的未引用代码(dead-code)。它依赖于 ES2015 模块语法的 <a href="http://exploringjs.com/es6/ch_modules.html#static-module-structure">静态结构</a> 特性，例如 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import"><code>import</code></a> 和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export"><code>export</code></a>。这个术语和概念实际上是由 ES2015 模块打包工具 <a href="https://github.com/rollup/rollup">rollup</a> 普及起来的。</p>
<p>webpack 2 正式版本内置支持 ES2015 模块（也叫做 <em>harmony modules</em>）和未使用模块检测能力。新的 webpack 4 正式版本扩展了此检测能力，通过 <code>package.json</code> 的 <code>"sideEffects"</code> 属性作为标记，向 compiler 提供提示，表明项目中的哪些文件是 "pure(纯的 ES2015 模块)"，由此可以安全地删除文件中未使用的部分。</p>
<blockquote class="tip"><div class="tip-content"> 本指南的继承自 <a href="/guides/getting-started">起步</a> 指南。如果你尚未阅读该指南，请先行阅读。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#添加一个通用模块" id="添加一个通用模块"></a>
<span class="text">添加一个通用模块</span>
<a aria-label="添加一个通用模块" class="icon-link" href="#添加一个通用模块"></a>
</h2>
<p>在我们的项目中添加一个新的通用模块文件 <code>src/math.js</code>，并导出两个函数：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
  |- bundle.js
  |- index.html
|- /src
  |- index.js
<span class="token inserted">+ |- math.js</span>
|- /node_modules
</code></pre>
<p><strong>src/math.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>将 <code>mode</code> 配置选项设置为 <a href="/concepts/mode/#mode-development">development</a> 以确保 bundle 是未压缩版本：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
<span class="token deleted">- }</span>
<span class="token inserted">+ },</span>
<span class="token inserted">+ mode: 'development',</span>
<span class="token inserted">+ optimization: {</span>
<span class="token inserted">+   usedExports: true</span>
<span class="token inserted">+ }</span>
};
</code></pre>
<p>配置完这些后，更新入口脚本，使用其中一个新方法，并且为了简化示例，我们先将 <code>lodash</code> 删除：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token deleted">- import _ from 'lodash';</span>
<span class="token inserted">+ import { cube } from './math.js';</span>

  function component() {
<span class="token deleted">-   var element = document.createElement('div');</span>
<span class="token inserted">+   var element = document.createElement('pre');</span>

<span class="token deleted">-   // lodash 是由当前 script 脚本 import 进来的</span>
<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   element.innerHTML = [</span>
<span class="token inserted">+     'Hello webpack!',</span>
<span class="token inserted">+     '5 cubed is equal to ' + cube(5)</span>
<span class="token inserted">+   ].join('\n\n');</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>注意，我们<strong>没有从 <code>src/math.js</code> 模块中 <code>import</code> 另外一个 <code>square</code> 方法</strong>。这个函数就是所谓的“未引用代码(dead code)”，也就是说，应该删除掉未被引用的 <code>export</code>。现在运行 npm script <code>npm run build</code>，并查看输出的 bundle：</p>
<p><strong>dist/bundle.js (around lines 90 - 100)</strong></p>
<pre><code class="lang-js"><span class="token comment">/* 1 */</span>
<span class="token comment">/***/</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> __webpack_exports__<span class="token punctuation">,</span> __webpack_require__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">'use strict'</span><span class="token punctuation">;</span>
  <span class="token comment">/* unused harmony export square */</span>
  <span class="token comment">/* harmony export (immutable) */</span> __webpack_exports__<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token operator">=</span> cube<span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">cube</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> x <span class="token operator">*</span> x <span class="token operator">*</span> x<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>注意，上面的 <code>unused harmony export square</code> 注释。如果你观察它下面的代码，你会注意到虽然我们没有引用 <code>square</code>，但它仍然被包含在 bundle 中。我们将在下一节解决这个问题。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#将文件标记为-side-effect-free-无副作用-" id="将文件标记为-side-effect-free-无副作用-"></a>
<span class="text">将文件标记为 side-effect-free(无副作用)</span>
<a aria-label="将文件标记为 side-effect-free(无副作用)" class="icon-link" href="#将文件标记为-side-effect-free-无副作用-"></a>
</h2>
<p>在一个纯粹的 ESM 模块世界中，很容易识别出哪些文件有 side effect。然而，我们的项目无法达到这种纯度，所以，此时有必要提示 webpack compiler 哪些代码是“纯粹部分”。</p>
<p>通过 package.json 的 <code>"sideEffects"</code> 属性，来实现这种方式。</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre>
<p>如果所有代码都不包含 side effect，我们就可以简单地将该属性标记为 <code>false</code>，来告知 webpack，它可以安全地删除未用到的 export。</p>
<blockquote class="tip"><div class="tip-content"> "side effect(副作用)" 的定义是，在导入时会执行特殊行为的代码，而不是仅仅暴露一个 export 或多个 export。举例说明，例如 polyfill，它影响全局作用域，并且通常不提供 export。 </div></blockquote><p>如果你的代码确实有一些副作用，可以改为提供一个数组：</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>数组方式支持相对路径、绝对路径和 glob 模式匹配相关文件。它在内部使用 <a href="https://github.com/micromatch/micromatch#matching-features">micromatch</a>。</p>
<blockquote class="tip"><div class="tip-content"> 注意，所有导入文件都会受到 tree shaking 的影响。这意味着，如果在项目中使用类似 <code>css-loader</code> 并 import 一个 CSS 文件，则需要将其添加到 side effect 列表中，以免在生产模式中无意中将它删除： </div></blockquote><pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"your-project"</span><span class="token punctuation">,</span>
  <span class="token property">"sideEffects"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"./src/some-side-effectful-file.js"</span><span class="token punctuation">,</span>
    <span class="token string">"*.css"</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>最后，还可以在 <a href="/configuration/module/#module-rules"><code>module.rules</code> 配置选项</a> 中设置 <code>"sideEffects"</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#压缩输出结果" id="压缩输出结果"></a>
<span class="text">压缩输出结果</span>
<a aria-label="压缩输出结果" class="icon-link" href="#压缩输出结果"></a>
</h2>
<p>通过 <code>import</code> 和 <code>export</code>  语法，我们已经找出需要删除的“未引用代码(dead code)”，然而，不仅仅是要找出，还要在 bundle 中删除它们。为此，我们需要将 <code>mode</code> 配置选项设置为 <a href="/concepts/mode/#mode-production"><code>production</code></a>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">const path = require('path');

module.exports = {
  entry: './src/index.js',
  output: {
    filename: 'bundle.js',
    path: path.resolve(__dirname, 'dist')
  },
<span class="token deleted">- mode: 'development',</span>
<span class="token deleted">- optimization: {</span>
<span class="token deleted">-   usedExports: true</span>
<span class="token deleted">- }</span>
<span class="token inserted">+ mode: 'production'</span>
};
</code></pre>
<blockquote class="tip"><div class="tip-content"> 注意，也可以在命令行接口中使用 <code>--optimize-minimize</code> 标记，来启用 <code>TerserPlugin</code>。 </div></blockquote><p>准备就绪后，然后运行另一个 npm script <code>npm run build</code>，看看输出结果是否发生改变。</p>
<p>你发现 <code>dist/bundle.js</code> 中的差异了吗？显然，现在整个 bundle 都已经被 minify(压缩) 和 mangle(混淆破坏)，但是如果仔细观察，则不会看到引入 <code>square</code> 函数，但能看到 <code>cube</code> 函数的混淆破坏版本（<code>function r(e){return e*e*e}n.a=r</code>）。现在，随着 minification(代码压缩) 和 tree shaking，我们的 bundle 减小几个字节！虽然，在这个特定示例中，可能看起来没有减少很多，但是，在有着复杂依赖树的大型应用程序上运行 tree shaking 时，会对 bundle 产生显著的体积优化。</p>
<blockquote class="tip"><div class="tip-content"> 运行 tree shaking 需要 <a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a>。通过 <code>mode: "production"</code> 可以添加此插件。如果你没有使用 mode 设置，记得手动添加 <a href="/plugins/module-concatenation-plugin">ModuleConcatenationPlugin</a>。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>我们已经知道，想要使用 <em>tree shaking</em> 必须注意以下……</p>
<ul>
<li>使用 ES2015 模块语法（即 <code>import</code> 和 <code>export</code>）。</li>
<li>确保没有 compiler 将 ES2015 模块语法转换为 CommonJS 模块（这也是流行的 Babel preset 中 @babel/preset-env 的默认行为 - 更多详细信息请查看 <a href="https://babel.docschina.org/docs/en/babel-preset-env#modules">文档</a>）。</li>
<li>在项目 <code>package.json</code> 文件中，添加一个 "sideEffects" 属性。</li>
<li>通过将 <code>mode</code> 选项设置为 <a href="/concepts/mode/#mode-production"><code>production</code></a>，启用 minification(代码压缩) 和 tree shaking。</li>
</ul>
<p>你可以将应用程序想象成一棵树。绿色表示实际用到的 source code(源码) 和 library(库)，是树上活的树叶。灰色表示未引用代码，是秋天树上枯萎的树叶。为了除去死去的树叶，你必须摇动这棵树，使它们落下。</p>
<p>如果你对优化输出很感兴趣，请进入到下个指南，来了解 <a href="/guides/production">生产环境</a> 构建的详细细节。</p>
</div>
<br/><h1>生产环境</h1>
<div><p>在本指南中，我们将深入一些最佳实践和工具，将站点或应用程序构建到生产环境中。</p>
<blockquote class="tip"><div class="tip-content"> 以下示例来源于 <a href="/guides/tree-shaking">tree shaking</a> 和 <a href="/guides/development">开发环境</a>。在继续之前，请确保你已经熟悉这些指南中所介绍的概念/配置。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h2>
<p><em>development(开发环境)</em> 和 <em>production(生产环境)</em> 这两个环境下的构建目标存在着巨大差异。在<em>开发环境</em>中，我们需要：强大的 source map 和一个有着 live reloading(实时重新加载) 或 hot module replacement(热模块替换) 能力的 localhost server。而<em>生产环境</em>目标则转移至其他方面，关注点在于压缩 bundle、更轻量的 source map、资源优化等，通过这些优化方式改善加载时间。由于要遵循逻辑分离，我们通常建议为每个环境编写<strong>彼此独立的 webpack 配置</strong>。</p>
<p>虽然，以上我们将<em>生产环境</em>和<em>开发环境</em>做了略微区分，但是，请注意，我们还是会遵循不重复原则(Don't repeat yourself - DRY)，保留一个 "common(通用)" 配置。为了将这些配置合并在一起，我们将使用一个名为 <a href="https://github.com/survivejs/webpack-merge"><code>webpack-merge</code></a> 的工具。此工具会引用 "common" 配置，因此我们不必再在环境特定(environment-specific)的配置中编写重复代码。</p>
<p>我们先从安装 <code>webpack-merge</code> 开始，并将之前指南中已经成型的那些代码进行分离：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack-merge
</code></pre>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
<span class="token deleted">- |- webpack.config.js</span>
<span class="token inserted">+ |- webpack.common.js</span>
<span class="token inserted">+ |- webpack.dev.js</span>
<span class="token inserted">+ |- webpack.prod.js</span>
  |- /dist
  |- /src
    |- index.js
    |- math.js
  |- /node_modules
</code></pre>
<p><strong>webpack.common.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ const path = require('path');</span>
<span class="token inserted">+ const CleanWebpackPlugin = require('clean-webpack-plugin');</span>
<span class="token inserted">+ const HtmlWebpackPlugin = require('html-webpack-plugin');</span>
+
<span class="token inserted">+ module.exports = {</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     app: './src/index.js'</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     new CleanWebpackPlugin(['dist']),</span>
<span class="token inserted">+     new HtmlWebpackPlugin({</span>
<span class="token inserted">+       title: 'Production'</span>
<span class="token inserted">+     })</span>
<span class="token inserted">+   ],</span>
<span class="token inserted">+   output: {</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
<span class="token inserted">+     path: path.resolve(__dirname, 'dist')</span>
<span class="token inserted">+   }</span>
<span class="token inserted">+ };</span>
</code></pre>
<p><strong>webpack.dev.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ const merge = require('webpack-merge');</span>
<span class="token inserted">+ const common = require('./webpack.common.js');</span>
+
<span class="token inserted">+ module.exports = merge(common, {</span>
<span class="token inserted">+   mode: 'development',</span>
<span class="token inserted">+   devtool: 'inline-source-map',</span>
<span class="token inserted">+   devServer: {</span>
<span class="token inserted">+     contentBase: './dist'</span>
<span class="token inserted">+   }</span>
<span class="token inserted">+ });</span>
</code></pre>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ const merge = require('webpack-merge');</span>
<span class="token inserted">+ const common = require('./webpack.common.js');</span>
+
<span class="token inserted">+ module.exports = merge(common, {</span>
<span class="token inserted">+   mode: 'production',</span>
<span class="token inserted">+ });</span>
</code></pre>
<p>现在，在 <code>webpack.common.js</code> 中，我们设置了 <code>entry</code> 和 <code>output</code> 配置，并且在其中引入这两个环境公用的全部插件。在 <code>webpack.dev.js</code> 中，我们将 <code>mode</code> 设置为 <code>development</code>，并且为此环境添加了推荐的 <code>devtool</code>（强大的 source map）和简单的 <code>devServer</code> 配置。最后，在 <code>webpack.prod.js</code> 中，我们将 <code>mode</code> 设置为 <code>production</code>，其中会引入之前在 <a href="/guides/tree-shaking">tree shaking</a> 指南中介绍过的 <code>TerserPlugin</code>。</p>
<p>注意，在环境特定的配置中使用 <code>merge()</code> 功能，可以很方便地引用 <code>dev</code> 和 <code>prod</code> 中公用的 common 配置。<code>webpack-merge</code> 工具提供了各种 merge(合并) 高级功能，但是在我们的用例中，无需用到这些功能。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#npm-scripts" id="npm-scripts"></a>
<span class="text">npm scripts</span>
<a aria-label="npm scripts" class="icon-link" href="#npm-scripts"></a>
</h2>
<p>现在，我们把 <code>scripts</code> 重新指向到新配置。让 <code>npm start</code> script 中 <code>webpack-dev-server</code> 使用 <em>development(开发环境)</em> 配置文件，而让 <code>npm run build</code> script 使用 <em>production(生产环境)</em> 配置文件：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">  {
    "name": "development",
    "version": "1.0.0",
    "description": "",
    "main": "src/index.js",
    "scripts": {
<span class="token deleted">-     "start": "webpack-dev-server --open",</span>
<span class="token inserted">+     "start": "webpack-dev-server --open --config webpack.dev.js",</span>
<span class="token deleted">-     "build": "webpack"</span>
<span class="token inserted">+     "build": "webpack --config webpack.prod.js"</span>
    },
    "keywords": [],
    "author": "",
    "license": "ISC",
    "devDependencies": {
      "clean-webpack-plugin": "^0.1.17",
      "css-loader": "^0.28.4",
      "csv-loader": "^2.1.1",
      "express": "^4.15.3",
      "file-loader": "^0.11.2",
      "html-webpack-plugin": "^2.29.0",
      "style-loader": "^0.18.2",
      "webpack": "^3.0.0",
      "webpack-dev-middleware": "^1.12.0",
      "webpack-dev-server": "^2.9.1",
      "webpack-merge": "^4.1.0",
      "xml-loader": "^1.2.1"
    }
  }
</code></pre>
<p>随便运行下这些脚本，然后查看输出结果的变化，然后我们会继续添加一些<em>生产环境</em>配置。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#指定-mode" id="指定-mode"></a>
<span class="text">指定 mode</span>
<a aria-label="指定 mode" class="icon-link" href="#指定-mode"></a>
</h2>
<p>许多 library 通过与 <code>process.env.NODE_ENV</code> 环境变量关联，以决定 library 中应该引用哪些内容。例如，当不处于<em>生产环境</em>中时，某些 library 为了使调试变得容易，可能会添加额外的 log(日志记录) 和 test(测试) 功能。并且，在使用 <code>process.env.NODE_ENV === 'production'</code> 时，一些 library 可能针对具体用户的环境，删除或添加一些重要代码，以进行代码执行方面的优化。从 webpack v4 开始, 指定 <a href="/concepts/mode/"><code>mode</code></a> 会自动地配置 <a href="/plugins/define-plugin"><code>DefinePlugin</code></a>：</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="lang-diff">  const merge = require('webpack-merge');
  const common = require('./webpack.common.js');

  module.exports = merge(common, {
    mode: 'production',
  });
</code></pre>
<blockquote class="tip"><div class="tip-content"> 技术上讲，<code>NODE_ENV</code> 是一个由 Node.js 暴露给执行脚本的系统环境变量。通常用于决定在开发环境与生产环境(dev-vs-prod)下，server tools(服务期工具)、build scripts(构建脚本) 和 client-side libraries(客户端库) 的行为。然而，与预期相反，<strong>无法</strong>在构建脚本 <code>webpack.config.js</code> 中，将 <code>process.env.NODE_ENV</code> 设置为 <code>"production"</code>，请查看 <a href="https://github.com/webpack/webpack/issues/2537">#2537</a>。因此，在 webpack 配置文件中，<code>process.env.NODE_ENV === 'production' ? '[name].[hash].bundle.js' : '[name].bundle.js'</code> 这样的条件语句，无法按照预期运行。 </div></blockquote><p>如果你正在使用像 <a href="https://react.docchina.org/"><code>react</code></a> 这样的 library，那么在添加此 DefinePlugin 插件后，你应该看到 bundle 大小显著下降。还要注意，任何位于 <code>/src</code> 的本地代码都可以关联到 process.env.NODE_ENV 环境变量，所以以下检查也是有效的：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import { cube } from './math.js';
+
<span class="token inserted">+ if (process.env.NODE_ENV !== 'production') {</span>
<span class="token inserted">+   console.log('Looks like we are in development mode!');</span>
<span class="token inserted">+ }</span>

  function component() {
    var element = document.createElement('pre');

    element.innerHTML = [
      'Hello webpack!',
      '5 cubed is equal to ' + cube(5)
    ].join('\n\n');

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#minification-压缩-" id="minification-压缩-"></a>
<span class="text">minification(压缩)</span>
<a aria-label="minification(压缩)" class="icon-link" href="#minification-压缩-"></a>
</h2>
<p>设置 <a href="/concepts/mode/#mode-production"><code>production mode</code></a> 配置后，webpack v4+ 会默认压缩你的代码。</p>
<p>注意，虽然生产环境下默认使用 <a href="/plugins/terser-webpack-plugin"><code>TerserPlugin</code></a> ，并且也是代码压缩方面比较好的选择，但是还有一些其他可选择项。以下有几个同样很受欢迎的插件：</p>
<ul>
<li><a href="https://github.com/webpack-contrib/babel-minify-webpack-plugin"><code>BabelMinifyWebpackPlugin</code></a></li>
<li><a href="https://github.com/roman01la/webpack-closure-compiler"><code>ClosureCompilerPlugin</code></a></li>
</ul>
<p>如果决定尝试一些其他压缩插件，只要确保新插件也会按照 <a href="/guides/tree-shaking">tree shake</a> 指南中所陈述的具有删除未引用代码(dead code)的能力，以及提供 <a href="/configuration/optimization/#optimization-minimizer"><code>optimization.minimizer</code></a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#source-mapping-源码映射-" id="source-mapping-源码映射-"></a>
<span class="text">source mapping(源码映射)</span>
<a aria-label="source mapping(源码映射)" class="icon-link" href="#source-mapping-源码映射-"></a>
</h2>
<p>我们鼓励你在生产环境中启用 source map，因为它们对 debug(调试源码) 和运行 benchmark tests(基准测试) 很有帮助。虽然有着如此强大的功能，然而还是应该针对生产环境用途，选择一个可以快速构建的推荐配置（更多选项请查看 <a href="/configuration/devtool"><code>devtool</code></a>）。对于本指南，我们将在<em>生产环境</em>中使用 <code>source-map</code> 选项，而不是我们在<em>开发环境</em>中用到的 <code>inline-source-map</code>：</p>
<p><strong>webpack.prod.js</strong></p>
<pre><code class="lang-diff">  const merge = require('webpack-merge');
  const common = require('./webpack.common.js');

  module.exports = merge(common, {
    mode: 'production',
<span class="token inserted">+   devtool: 'source-map'</span>
  });
</code></pre>
<blockquote class="tip"><div class="tip-content"> 避免在生产中使用 <code>inline-***</code> 和 <code>eval-***</code>，因为它们会增加 bundle 体积大小，并降低整体性能。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#最小化-css" id="最小化-css"></a>
<span class="text">最小化 CSS</span>
<a aria-label="最小化 CSS" class="icon-link" href="#最小化-css"></a>
</h2>
<p>将生产环境下的 CSS 进行压缩会非常重要，请查看 <a href="/plugins/mini-css-extract-plugin/#minimizing-for-production">在生产环境下压缩</a> 章节。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#cli-替代选项" id="cli-替代选项"></a>
<span class="text">CLI 替代选项</span>
<a aria-label="CLI 替代选项" class="icon-link" href="#cli-替代选项"></a>
</h2>
<p>以上所述也可以通过命令行实现。例如，<code>--optimize-minimize</code> 标记将在幕后引用 <code>TerserPlugin</code>。和以上描述的 <code>DefinePlugin</code> 实例相同，<code>--define process.env.NODE_ENV="'production'"</code> 也会做同样的事情。而且，<code>webpack -p</code> 将自动地配置上述这两个标记，从而调用需要引入的插件。</p>
<p>虽然这种简短的方式很好，但通常我们建议只使用配置方式，因为在这两种方式中，配置方式能够更准确地理解现在正在做的事情。配置方式还为可以让你更加细微地控制这两个插件中的其他选项。</p>
</div>
<br/><h1>代码分离</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/getting-started">起步</a> 和 <a href="/guides/output-management">管理输出</a> 中的代码示例。请确保你已熟悉这些指南中提供的示例。 </div></blockquote><p>代码分离是 webpack 中最引人注目的特性之一。此特性能够把代码分离到不同的 bundle 中，然后可以按需加载或并行加载这些文件。代码分离可以用于获取更小的 bundle，以及控制资源加载优先级，如果使用合理，会极大影响加载时间。</p>
<p>常用的代码分离方法有三种：</p>
<ul>
<li>入口起点：使用 <a href="/configuration/entry-context"><code>entry</code></a> 配置手动地分离代码。</li>
<li>防止重复：使用 <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> 去重和分离 chunk。</li>
<li>动态导入：通过模块中的内联函数调用来分离代码。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#入口起点-entry-points-" id="入口起点-entry-points-"></a>
<span class="text">入口起点(entry points)</span>
<a aria-label="入口起点(entry points)" class="icon-link" href="#入口起点-entry-points-"></a>
</h2>
<p>这是迄今为止最简单、最直观的分离代码的方式。不过，这种方式手动配置较多，并有一些隐患，我们将会解决这些问题。先来看看如何从 main bundle 中分离 another module(另一个模块)：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- another-module.js</span>
|- /node_modules
</code></pre>
<p><strong>another-module.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
  _<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Another'</span><span class="token punctuation">,</span> <span class="token string">'module'</span><span class="token punctuation">,</span> <span class="token string">'loaded!'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' '</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">const path = require('path');

module.exports = {
  mode: 'development',
  entry: {
    index: './src/index.js',
<span class="token inserted">+   another: './src/another-module.js'</span>
  },
  output: {
    filename: '[name].bundle.js',
    path: path.resolve(__dirname, 'dist')
  }
};
</code></pre>
<p>这将生成如下构建结果：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
            Asset     Size   Chunks             Chunk Names
another.bundle.js  550 KiB  another  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  another
  index.bundle.js  550 KiB    index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
Entrypoint index <span class="token operator">=</span> index.bundle.js
Entrypoint another <span class="token operator">=</span> another.bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>正如前面提到的，这种方式存在一些隐患：</p>
<ul>
<li>如果入口 chunk 之间包含一些重复的模块，那些重复模块都会被引入到各个 bundle 中。</li>
<li>这种方法不够灵活，并且不能动态地将核心应用程序逻辑中的代码拆分出来。</li>
</ul>
<p>这两点中的第一点，对我们的示例来说毫无疑问是个严重问题，因为我们在 <code>./src/index.js</code> 中也引入过 <code>lodash</code>，这样就造成在两个 bundle 中重复引用。我们可以通过使用 <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> 插件来移除重复模块。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#防止重复-prevent-duplication-" id="防止重复-prevent-duplication-"></a>
<span class="text">防止重复(prevent duplication)</span>
<a aria-label="防止重复(prevent duplication)" class="icon-link" href="#防止重复-prevent-duplication-"></a>
</h2>
<p><a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> 插件可以将公共的依赖模块提取到已有的 entry chunk 中，或者提取到一个新生成的 chunk。让我们使用这个插件，将前面示例中重复的 <code>lodash</code> 模块去除：</p>
<blockquote class="warning"><div class="tip-content"> <code>CommonsChunkPlugin</code> 已经从 webpack v4（代号 legato）中移除。想要了解最新版本是如何处理 chunk，请查看 <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a>。 </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    mode: 'development',
    entry: {
      index: './src/index.js',
      another: './src/another-module.js'
    },
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
<span class="token inserted">+   optimization: {</span>
<span class="token inserted">+     splitChunks: {</span>
<span class="token inserted">+       chunks: 'all'</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   }</span>
  };
</code></pre>
<p>使用 <a href="/plugins/split-chunks-plugin/#optimization-splitchunks"><code>optimization.splitChunks</code></a> 配置选项，现在可以看到已经从 <code>index.bundle.js</code> 和 <code>another.bundle.js</code> 中删除了重复的依赖项。需要注意的是，此插件将 <code>lodash</code> 这个沉重负担从主 bundle 中移除，然后分离到一个单独的 chunk 中。执行 <code>npm run build</code> 查看效果：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                          Asset      Size                 Chunks             Chunk Names
              another.bundle.js  5.95 KiB                another  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  another
                index.bundle.js  5.89 KiB                  index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
vendors~another~index.bundle.js   547 KiB  vendors~another~index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~another~index
Entrypoint index <span class="token operator">=</span> vendors~another~index.bundle.js index.bundle.js
Entrypoint another <span class="token operator">=</span> vendors~another~index.bundle.js another.bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>以下是由社区提供，一些对于代码分离很有帮助的 plugin 和 loader：</p>
<ul>
<li><a href="/plugins/mini-css-extract-plugin"><code>mini-css-extract-plugin</code></a>：用于将 CSS 从主应用程序中分离。</li>
<li><a href="/loaders/bundle-loader"><code>bundle-loader</code></a>：用于分离代码和延迟加载生成的 bundle。</li>
<li><a href="https://github.com/gaearon/promise-loader"><code>promise-loader</code></a>：类似于 <code>bundle-loader</code> ，但是使用了 promise API。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#动态导入-dynamic-imports-" id="动态导入-dynamic-imports-"></a>
<span class="text">动态导入(dynamic imports)</span>
<a aria-label="动态导入(dynamic imports)" class="icon-link" href="#动态导入-dynamic-imports-"></a>
</h2>
<p>当涉及到动态代码拆分时，webpack 提供了两个类似的技术。第一种，也是推荐选择的方式是，使用符合 <a href="https://github.com/tc39/proposal-dynamic-import">ECMAScript 提案</a> 的 <a href="/api/module-methods#import-"><code>import()</code> 语法</a> 来实现动态导入。第二种，则是 webpack 的遗留功能，使用 webpack 特定的 <a href="/api/module-methods#require-ensure"><code>require.ensure</code></a>。让我们先尝试使用第一种……</p>
<blockquote class="warning"><div class="tip-content"> <code>import()</code> 调用会在内部用到 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">promises</a>。如果在旧版本浏览器中使用 <code>import()</code>，记得使用一个 polyfill 库（例如 <a href="https://github.com/stefanpenner/es6-promise">es6-promise</a> 或 <a href="https://github.com/taylorhakes/promise-polyfill">promise-polyfill</a>），来 shim <code>Promise</code>。 </div></blockquote><p>在开始之前，我们先从配置中移除掉多余的 <a href="/concepts/entry-points/"><code>entry</code></a> 和 <a href="/plugins/split-chunks-plugin"><code>optimization.splitChunks</code></a>，因为接下来的演示中并不需要它们：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    mode: 'development',
    entry: {
<span class="token inserted">+     index: './src/index.js'</span>
<span class="token deleted">-     index: './src/index.js',</span>
<span class="token deleted">-     another: './src/another-module.js'</span>
    },
    output: {
      filename: '[name].bundle.js',
<span class="token inserted">+     chunkFilename: '[name].bundle.js',</span>
      path: path.resolve(__dirname, 'dist')
    },
<span class="token deleted">-   optimization: {</span>
<span class="token deleted">-     splitChunks: {</span>
<span class="token deleted">-       chunks: 'all'</span>
<span class="token deleted">-     }</span>
<span class="token deleted">-   }</span>
  };
</code></pre>
<p>注意，这里使用了 <code>chunkFilename</code>，它决定 non-entry chunk(非入口 chunk) 的名称。关于 <code>chunkFilename</code> 更多信息，请查看 <a href="/configuration/output/#output-chunkfilename">输出</a> 文档。更新我们的项目，移除现在不会用到的文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token deleted">- |- another-module.js</span>
|- /node_modules
</code></pre>
<p>现在，我们不再使用 statically import(静态导入) <code>lodash</code>，而是通过 dynamic import(动态导入) 来分离出一个 chunk：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token deleted">- import _ from 'lodash';</span>
-
<span class="token deleted">- function component() {</span>
<span class="token inserted">+ function getComponent() {</span>
<span class="token deleted">-   var element = document.createElement('div');</span>
-
<span class="token deleted">-   // Lodash, now imported by this script</span>
<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   return import(/* webpackChunkName: "lodash" */ 'lodash').then(({ default: _ }) =&gt; {</span>
<span class="token inserted">+     var element = document.createElement('div');</span>
+
<span class="token inserted">+     element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
+
<span class="token inserted">+     return element;</span>
+
<span class="token inserted">+   }).catch(error =&gt; 'An error occurred while loading the component');</span>
  }

<span class="token deleted">- document.body.appendChild(component());</span>
<span class="token inserted">+ getComponent().then(component =&gt; {</span>
<span class="token inserted">+   document.body.appendChild(component);</span>
<span class="token inserted">+ })</span>
</code></pre>
<p>这里我们需要使用 <code>default</code> 的原因是，从 webpack v4 开始，在 import CommonJS 模块时，不会再将导入模块解析为 <code>module.exports</code> 的值，而是为 CommonJS 模块创建一个 artificial namespace object(人工命名空间对象)，关于其背后原因的更多信息，请阅读 <a href="https://medium.com/webpack/webpack-4-import-and-commonjs-d619d626b655">webpack 4: import() 和 CommonJs</a>。</p>
<p>注意，在注释中我们提供了 <code>webpackChunkName</code>。这样会将拆分出来的 bundle 命名为 <code>lodash.bundle.js</code>，而不是 <code>[id].bundle.js</code>。想了解更多关于 <code>webpackChunkName</code> 和其他可用选项，请查看 <a href="/api/module-methods/#import-"><code>import()</code></a> 文档。让我们执行 webpack，看到 <code>lodash</code> 分离出一个单独的 bundle：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                   Asset      Size          Chunks             Chunk Names
         index.bundle.js  7.88 KiB           index  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  index
vendors~lodash.bundle.js   547 KiB  vendors~lodash  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors~lodash
Entrypoint index <span class="token operator">=</span> index.bundle.js
<span class="token punctuation">..</span>.
</code></pre>
<p>由于 <code>import()</code> 会返回一个 promise，因此它可以和 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function"><code>async</code> 函数</a>一起使用。但是，需要使用像 Babel 这样的预处理器和 <a href="https://babel.docschina.org/docs/en/babel-plugin-syntax-dynamic-import/#installation">Syntax Dynamic Import Babel Plugin</a>。下面是如何通过 async 函数简化代码：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token deleted">- function getComponent() {</span>
<span class="token inserted">+ async function getComponent() {</span>
<span class="token deleted">-   return import(/* webpackChunkName: "lodash" */ 'lodash').then({ default: _ } =&gt; {</span>
<span class="token deleted">-     var element = document.createElement('div');</span>
-
<span class="token deleted">-     element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
-
<span class="token deleted">-     return element;</span>
-
<span class="token deleted">-   }).catch(error =&gt; 'An error occurred while loading the component');</span>
<span class="token inserted">+   var element = document.createElement('div');</span>
<span class="token inserted">+   const { default: _ } = await import(/* webpackChunkName: "lodash" */ 'lodash');</span>
+
<span class="token inserted">+   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
+
<span class="token inserted">+   return element;</span>
  }

  getComponent().then(component =&gt; {
    document.body.appendChild(component);
  });
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#预取-预加载模块-prefetch-preload-module-" id="预取-预加载模块-prefetch-preload-module-"></a>
<span class="text">预取/预加载模块(prefetch/preload module)</span>
<a aria-label="预取/预加载模块(prefetch/preload module)" class="icon-link" href="#预取-预加载模块-prefetch-preload-module-"></a>
</h2>
<p>webpack v4.6.0+ 添加了预取和预加载的支持。</p>
<p>在声明 import 时，使用下面这些内置指令，可以让 webpack 输出 "resource hint(资源提示)"，来告知浏览器：</p>
<ul>
<li>prefetch(预取)：将来某些导航下可能需要的资源</li>
<li>preload(预加载)：当前导航下可能需要资源</li>
</ul>
<p>下面这个 prefetch 的简单示例中，有一个 <code>HomePage</code> 组件，其内部渲染一个 <code>LoginButton</code> 组件，然后在点击后按需加载 <code>LoginModal</code> 组件。</p>
<p><strong>LoginButton.js</strong></p>
<pre><code class="lang-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPrefetch: true */</span> <span class="token string">'LoginModal'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这会生成 <code>&lt;link rel="prefetch" href="login-modal-chunk.js"&gt;</code> 并追加到页面头部，指示着浏览器在闲置时间预取 <code>login-modal-chunk.js</code> 文件。</p>
<blockquote class="tip"><div class="tip-content"> 只要父 chunk 完成加载，webpack 就会添加 prefetch hint(预取提示)。 </div></blockquote><p>与 prefetch 指令相比，preload 指令有许多不同之处：</p>
<ul>
<li>preload chunk 会在父 chunk 加载时，以并行方式开始加载。prefetch chunk 会在父 chunk 加载结束后开始加载。</li>
<li>preload chunk 具有中等优先级，并立即下载。prefetch chunk 在浏览器闲置时下载。</li>
<li>preload chunk 会在父 chunk 中立即请求，用于当下时刻。prefetch chunk 会用于未来的某个时刻。</li>
<li>浏览器支持程度不同。</li>
</ul>
<p>下面这个简单的 preload 示例中，有一个 <code>Component</code>，依赖于一个较大的 library，所以应该将其分离到一个独立的 chunk 中。</p>
<p>我们假想这里的图表组件 <code>ChartComponent</code> 组件需要依赖体积巨大的 <code>ChartingLibrary</code> 库。它会在渲染时显示一个 <code>LoadingIndicator(加载进度条)</code> 组件，然后立即按需导入 <code>ChartingLibrary</code>：</p>
<p><strong>ChartComponent.js</strong></p>
<pre><code class="lang-js"><span class="token comment">//...</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token comment">/* webpackPreload: true */</span> <span class="token string">'ChartingLibrary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>在页面中使用 <code>ChartComponent</code> 时，在请求 ChartComponent.js 的同时，还会通过 <code>&lt;link rel="preload"&gt;</code> 请求 charting-library-chunk。假定 page-chunk 体积很小，很快就被加载好，页面此时就会显示 <code>LoadingIndicator(加载进度条)</code> ，等到 <code>charting-library-chunk</code> 请求完成，LoadingIndicator 组件才消失。启动仅需要很少的加载时间，因为只进行单次往返，而不是两次往返。尤其是在高延迟环境下。</p>
<blockquote class="tip"><div class="tip-content"> 不正确地使用 webpackPreload 会有损性能，请谨慎使用。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#bundle-分析-bundle-analysis-" id="bundle-分析-bundle-analysis-"></a>
<span class="text">bundle 分析(bundle analysis)</span>
<a aria-label="bundle 分析(bundle analysis)" class="icon-link" href="#bundle-分析-bundle-analysis-"></a>
</h2>
<p>如果我们以分离代码作为开始，那么就应该以检查模块的输出结果作为结束，对其进行分析是很有用处的。<a href="https://github.com/webpack/analyse">官方提供分析工具</a> 是一个好的初始选择。下面是一些可选择的社区支持(community-supported)工具：</p>
<ul>
<li><a href="https://alexkuz.github.io/webpack-chart/">webpack-chart</a>：webpack stats 可交互饼图。</li>
<li><a href="https://chrisbateman.github.io/webpack-visualizer/">webpack-visualizer</a>：可视化并分析你的 bundle，检查哪些模块占用空间，哪些可能是重复使用的。</li>
<li><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">webpack-bundle-analyzer</a>：一个 plugin 和 CLI 工具，它将 bundle 内容展示为便捷的、交互式、可缩放的树状图形式。</li>
<li><a href="https://webpack.jakoblind.no/optimize">webpack bundle optimize helper</a>：此工具会分析你的 bundle，并为你提供可操作的改进措施建议，以减少 bundle 体积大小。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#下一步" id="下一步"></a>
<span class="text">下一步</span>
<a aria-label="下一步" class="icon-link" href="#下一步"></a>
</h2>
<p>接下来，查看 <a href="/guides/lazy-loading">延迟加载</a> 来学习如何在实际一个真实应用程序中使用 <code>import()</code> 的具体示例，以及查看 <a href="/guides/caching">缓存</a> 来学习如何有效地分离代码。</p>
</div>
<br/><h1>懒加载</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南的继承自<a href="/guides/code-splitting">代码分离</a>。如果你尚未阅读该指南，请先行阅读。 </div></blockquote><p>懒加载或者按需加载，是一种很好的优化网页或应用的方式。这种方式实际上是先把你的代码在一些逻辑断点处分离开，然后在一些代码块中完成某些操作后，立即引用或即将引用另外一些新的代码块。这样加快了应用的初始加载速度，减轻了它的总体体积，因为某些代码块可能永远不会被加载。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>我们在<a href="/guides/code-splitting#dynamic-imports">代码分离</a>中的例子基础上，进一步做些调整来说明这个概念。那里的代码确实会在脚本运行的时候产生一个分离的代码块 <code>lodash.bundle.js</code> ，在技术概念上“懒加载”它。问题是加载这个包并不需要用户的交互 -- 意思是每次加载页面的时候都会请求它。这样做并没有对我们有很多帮助，还会对性能产生负面影响。</p>
<p>我们试试不同的做法。我们增加一个交互，当用户点击按钮的时候用 console 打印一些文字。但是会等到第一次交互的时候再加载那个代码块（<code>print.js</code>）。为此，我们返回到代码分离的例子中，把 <code>lodash</code> 放到主代码块中，重新运行<em>代码分离</em>中的代码 <a href="/guides/code-splitting#dynamic-imports">final <em>Dynamic Imports</em> example</a>。</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- print.js</span>
|- /node_modules
</code></pre>
<p><strong>src/print.js</strong></p>
<pre><code class="lang-js">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'The print.js module has loaded! See the network tab in dev tools...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Button Clicked: Here\'s "some text"!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ import _ from 'lodash';</span>
+
<span class="token deleted">- async function getComponent() {</span>
<span class="token inserted">+ function component() {</span>
    var element = document.createElement('div');
<span class="token deleted">-   const _ = await import(/* webpackChunkName: "lodash" */ 'lodash');</span>
<span class="token inserted">+   var button = document.createElement('button');</span>
<span class="token inserted">+   var br = document.createElement('br');</span>

<span class="token inserted">+   button.innerHTML = 'Click me and look at the console!';</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.appendChild(br);</span>
<span class="token inserted">+   element.appendChild(button);</span>
+
<span class="token inserted">+   // Note that because a network request is involved, some indication</span>
<span class="token inserted">+   // of loading would need to be shown in a production-level site/app.</span>
<span class="token inserted">+   button.onclick = e =&gt; import(/* webpackChunkName: "print" */ './print').then(module =&gt; {</span>
<span class="token inserted">+     var print = module.default;</span>
+
<span class="token inserted">+     print();</span>
<span class="token inserted">+   });</span>

    return element;
  }

<span class="token deleted">- getComponent().then(component =&gt; {</span>
<span class="token deleted">-   document.body.appendChild(component);</span>
<span class="token deleted">- });</span>
<span class="token inserted">+ document.body.appendChild(component());</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 注意当调用 ES6 模块的 <code>import()</code> 方法（引入模块）时，必须指向模块的 <code>.default</code> 值，因为它才是 promise 被处理后返回的实际的 <code>module</code> 对象。 </div></blockquote><p>现在运行 webpack 来验证一下我们的懒加载功能：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
          Asset       Size  Chunks                    Chunk Names
print.bundle.js  417 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
index.bundle.js     548 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  index
     index.html  189 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#框架" id="框架"></a>
<span class="text">框架</span>
<a aria-label="框架" class="icon-link" href="#框架"></a>
</h2>
<p>许多框架和类库对于如何用它们自己的方式来实现（懒加载）都有自己的建议。这里有一些例子：</p>
<ul>
<li>React: <a href="https://reacttraining.com/react-router/web/guides/code-splitting">Code Splitting and Lazy Loading</a></li>
<li>Vue: <a href="https://alexjoverm.github.io/2017/07/16/Lazy-load-in-Vue-using-Webpack-s-code-splitting/">Lazy Load in Vue using Webpack's code splitting</a></li>
<li>AngularJS: <a href="https://medium.com/@var_bin/angularjs-webpack-lazyload-bb7977f390dd">AngularJS + Webpack = lazyLoad</a> by <a href="https://twitter.com/var_bincom">@var_bincom</a></li>
</ul>
</div>
<br/><h1>缓存</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/getting-started">起步</a>、<a href="/guides/output-management">管理输出</a> 和 <a href="/guides/code-splitting">代码分离</a> 中的代码示例。 </div></blockquote><p>以上，我们使用 webpack 来打包模块化的应用程序，webpack 会生成一个可部署的 <code>/dist</code> 目录，然后把打包后的内容放置在此目录中。只要 <code>/dist</code> 目录中的内容部署到 server 上，client（通常是浏览器）就能够访问网站此 server 的网站及其资源。而最后一步获取资源是比较耗费时间的，这就是为什么浏览器使用一种名为 <a href="https://searchstorage.techtarget.com/definition/cache">缓存</a> 的技术。可以通过命中缓存，以降低网络流量，使网站加载速度更快，然而，如果我们在部署新版本时不更改资源的文件名，浏览器可能会认为它没有被更新，就会使用它的缓存版本。由于缓存的存在，当你需要获取新的代码时，就会显得很棘手。</p>
<p>此指南的重点在于通过必要的配置，以确保 webpack 编译生成的文件能够被客户端缓存，而在文件内容变化后，能够请求到新的文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#输出文件的文件名-output-filename-" id="输出文件的文件名-output-filename-"></a>
<span class="text">输出文件的文件名(output filename)</span>
<a aria-label="输出文件的文件名(output filename)" class="icon-link" href="#输出文件的文件名-output-filename-"></a>
</h2>
<p>我们可以通过替换 <code>output.filename</code> 中的 <a href="/configuration/output#output-filename">substitutions</a> 设置，来定义输出文件的名称。webpack 提供了一种使用称为 <strong>substitution(可替换模板字符串)</strong> 的方式，通过带括号字符串来模板化文件名。其中，<code>[contenthash]</code> substitution 将根据资源内容创建出唯一 hash。当资源内容发生变化时，<code>[contenthash]</code> 也会发生变化。</p>
<p>这里使用 <a href="/guides/getting-started">起步</a> 中的示例和 <a href="/guides/output-management">管理输出</a> 中的 <code>plugins</code> 插件来作为项目基础，所以我们依然不必手动地维护 <code>index.html</code> 文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
|- /node_modules
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
<span class="token deleted">-       title: 'Output Management'</span>
<span class="token inserted">+       title: 'Caching'</span>
      })
    ],
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].[contenthash].js',</span>
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>使用此配置，然后运行我们的 build script <code>npm run build</code>，产生以下输出：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.7e2c49a622975ebd9b7e.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  197 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>可以看到，bundle 的名称是它内容（通过 hash）的映射。如果我们不做修改，然后再次运行构建，我们以为文件名会保持不变。然而，如果我们真的运行，可能会发现情况并非如此 - 文件名发生变化：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                       Asset       Size  Chunks                    Chunk Names
main.205199ab45963f6a62ec.js     544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
                  index.html  197 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>这也是因为 webpack 在入口 chunk 中，包含了某些 boilerplate(引导模板)，特别是 runtime 和 manifest。（译注：boilerplate 指 webpack 运行时的引导代码）</p>
<blockquote class="warning"><div class="tip-content"> 输出可能会因当前的 webpack 版本而稍有差异。与旧版本相比，新版本不一定有完全相同的问题，但我们仍然推荐的以下步骤，确保结果可靠。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#提取引导模板-extracting-boilerplate-" id="提取引导模板-extracting-boilerplate-"></a>
<span class="text">提取引导模板(extracting boilerplate)</span>
<a aria-label="提取引导模板(extracting boilerplate)" class="icon-link" href="#提取引导模板-extracting-boilerplate-"></a>
</h2>
<p>正如我们在 <a href="/guides/code-splitting">代码分离</a> 中所学到的，<a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> 可以用于将模块分离到单独的 bundle 中。webpack 还提供了一个优化功能，可使用 <a href="/configuration/optimization/#optimization-runtimechunk"><code>optimization.runtimeChunk</code></a> 选项将 runtime 代码拆分为一个单独的 chunk。将其设置为 <code>single</code> 来为所有 chunk 创建一个 runtime bundle：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Caching'
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist')
    },
<span class="token inserted">+   optimization: {</span>
<span class="token inserted">+     runtimeChunk: 'single'</span>
<span class="token inserted">+   }</span>
  };
</code></pre>
<p>再次构建，然后查看提取出来的 <code>runtime</code> bundle：</p>
<pre><code class="lang-bash">Hash: 82c9c385607b2150fab2
Version: webpack 4.12.0
Time: 3027ms
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   1.42 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
   main.e81de2cf758ada72f306.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  275 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">[</span>1<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/module.js 497 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span>2<span class="token punctuation">]</span> <span class="token punctuation">(</span>webpack<span class="token punctuation">)</span>/buildin/global.js 489 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
<span class="token punctuation">[</span>3<span class="token punctuation">]</span> ./src/index.js 309 bytes <span class="token punctuation">{</span>1<span class="token punctuation">}</span> <span class="token punctuation">[</span>built<span class="token punctuation">]</span>
    + 1 hidden module
</code></pre>
<p>将第三方库(library)（例如 <code>lodash</code> 或 <code>react</code>）提取到单独的 <code>vendor</code> chunk 文件中，是比较推荐的做法，这是因为，它们很少像本地的源代码那样频繁修改。因此通过实现以上步骤，利用 client 的长效缓存机制，命中缓存来消除请求，并减少向 server 获取资源，同时还能保证 client 代码和 server 代码版本一致。
这可以通过使用 <a href="/plugins/split-chunks-plugin/#split-chunks-example-2">SplitChunksPlugin 示例 2</a> 中演示的 <a href="/plugins/split-chunks-plugin/"><code>SplitChunksPlugin</code></a> 插件的 <a href="/plugins/split-chunks-plugin/#splitchunks-cachegroups"><code>cacheGroups</code></a> 选项来实现。我们在 <code>optimization.splitChunks</code> 添加如下 <code>cacheGroups</code> 参数并构建：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  var path = require('path');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Caching'
      }),
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist')
    },
    optimization: {
<span class="token deleted">-     runtimeChunk: 'single'</span>
<span class="token inserted">+     runtimeChunk: 'single',</span>
<span class="token inserted">+     splitChunks: {</span>
<span class="token inserted">+       cacheGroups: {</span>
<span class="token inserted">+         vendor: {</span>
<span class="token inserted">+           test: /[\\/]node_modules[\\/]/,</span>
<span class="token inserted">+           name: 'vendors',</span>
<span class="token inserted">+           chunks: 'all'</span>
<span class="token inserted">+         }</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     }</span>
    }
  };
</code></pre>
<p>再次构建，然后查看新的 <code>vendor</code> bundle：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
runtime.cc17ae2a94ec771e9221.js   1.42 KiB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
vendors.a42c3ca0d742766d7a28.js   69.4 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
   main.abf44fedb7d11d4312d7.js  240 bytes       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>现在，我们可以看到 <code>main</code> 不再含有来自 <code>node_modules</code> 目录的 <code>vendor</code> 代码，并且体积减少到 <code>240 bytes</code>！</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模块标识符-module-identifier-" id="模块标识符-module-identifier-"></a>
<span class="text">模块标识符(module identifier)</span>
<a aria-label="模块标识符(module identifier)" class="icon-link" href="#模块标识符-module-identifier-"></a>
</h2>
<p>在项目中再添加一个模块 <code>print.js</code>：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
<span class="token inserted">+ |- print.js</span>
|- /node_modules
</code></pre>
<p><strong>print.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ export default function print(text) {</span>
<span class="token inserted">+   console.log(text);</span>
<span class="token inserted">+ };</span>
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
<span class="token inserted">+ import Print from './print';</span>

  function component() {
    var element = document.createElement('div');

    // lodash 是由当前 script 脚本 import 进来的
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token inserted">+   element.onclick = Print.bind(null, 'Hello webpack!');</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>再次运行构建，然后我们期望的是，只有 <code>main</code> bundle 的 hash 发生变化，然而……</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                           Asset       Size  Chunks                    Chunk Names
  runtime.1400d5af64fc1b7b3a45.js    5.85 kB      0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         runtime
  vendor.a7561fb0e9a071baadb9.js     541 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  vendor
    main.b746e3eb72875af2caa9.js    1.22 kB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         main
                      index.html  352 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>……我们可以看到这三个文件的 hash 都变化了。这是因为每个 <a href="/api/module-variables#module-id-commonjs-"><code>module.id</code></a> 会默认地基于解析顺序(resolve order)进行增量。也就是说，当解析顺序发生变化，ID 也会随之改变。因此，简要概括：</p>
<ul>
<li><code>main</code> bundle 会随着自身的新增内容的修改，而发生变化。</li>
<li><code>vendor</code> bundle 会随着自身的 <code>module.id</code> 的变化，而发生变化。</li>
<li><code>manifest</code> bundle 会因为现在包含一个新模块的引用，而发生变化。</li>
</ul>
<p>第一个和最后一个都是符合预期的行为 - 而 <code>vendor</code> hash 发生变化是我们要修复的。幸运的是，可以使用两个插件来解决这个问题。第一个插件是 <code>NamedModulesPlugin</code>，将使用模块的路径，而不是一个数字 identifier。虽然此插件有助于在开发环境下产生更加可读的输出结果，然而其执行时间会有些长。第二个选择是使用 <a href="/plugins/hashed-module-ids-plugin"><code>HashedModuleIdsPlugin</code></a>，推荐用于生产环境构建：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
<span class="token inserted">+ const webpack = require('webpack');</span>
  const CleanWebpackPlugin = require('clean-webpack-plugin');
  const HtmlWebpackPlugin = require('html-webpack-plugin');

  module.exports = {
    entry: './src/index.js',
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
        title: 'Caching'
      }),
<span class="token inserted">+      new webpack.HashedModuleIdsPlugin()</span>
    ],
    output: {
      filename: '[name].[contenthash].js',
      path: path.resolve(__dirname, 'dist')
    },
    optimization: {
      runtimeChunk: 'single',
      splitChunks: {
        cacheGroups: {
          vendor: {
            test: /[\\/]node_modules[\\/]/,
            name: 'vendors',
            chunks: 'all'
          }
        }
      }
    }
  };
</code></pre>
<p>现在，不论是否添加任何新的本地依赖，对于前后两次构建，<code>vendor</code> hash 都应该保持一致：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.216e852f60c8829c2289.js  340 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   1.42 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.216e852f60c8829c2289.js
<span class="token punctuation">..</span>.
</code></pre>
<p>然后，修改 <code>src/index.js</code>，临时移除额外的依赖：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
<span class="token deleted">- import Print from './print';</span>
<span class="token inserted">+ // import Print from './print';</span>

  function component() {
    var element = document.createElement('div');

    // lodash 是由当前 script 脚本 import 进来的
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');
<span class="token deleted">-   element.onclick = Print.bind(null, 'Hello webpack!');</span>
<span class="token inserted">+   // element.onclick = Print.bind(null, 'Hello webpack!');</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>最后，再次运行我们的构建：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                          Asset       Size  Chunks             Chunk Names
   main.ad717f2466ce655fff5c.js  274 bytes       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  main
vendors.55e79e5927a639d21a1b.js   69.5 KiB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  vendors
runtime.725a1a51ede5ae0cfde0.js   1.42 KiB       2  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  runtime
                     index.html  353 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
Entrypoint main <span class="token operator">=</span> runtime.725a1a51ede5ae0cfde0.js vendors.55e79e5927a639d21a1b.js main.ad717f2466ce655fff5c.js
<span class="token punctuation">..</span>.
</code></pre>
<p>我们可以看到，这两次构建中，<code>vendor</code> bundle 文件名称，都是 <code>55e79e5927a639d21a1b</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>缓存可能很复杂，但是从应用程序或站点用户可以获得的收益来看，这值得付出努力。想要了解更多信息，请查看下面<em>进一步阅读</em>部分。</p>
</div>
<br/><h1>创建 library</h1>
<div><p>除了打包应用程序，webpack 还可以用于打包 JavaScript library。以下指南适用于希望简化打包策略的 library 作者。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#创建一个-library" id="创建一个-library"></a>
<span class="text">创建一个 library</span>
<a aria-label="创建一个 library" class="icon-link" href="#创建一个-library"></a>
</h2>
<p>假设你正在编写一个名为 <code>webpack-numbers</code> 的小的 library，可以将数字 1 到 5 转换为文本表示，反之亦然，例如将 2 转换为 'two'。</p>
<p>基本的项目结构可能如下所示：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+  |- webpack.config.js</span>
<span class="token inserted">+  |- package.json</span>
<span class="token inserted">+  |- /src</span>
<span class="token inserted">+    |- index.js</span>
<span class="token inserted">+    |- ref.json</span>
</code></pre>
<p>初始化 npm，安装 webpack 和 lodash：</p>
<pre><code class="lang-bash">npm init -y
npm <span class="token function">install</span> --save-dev webpack lodash
</code></pre>
<p><strong>src/ref.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"One"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Two"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Three"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Four"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Five"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"num"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">"word"</span><span class="token operator">:</span> <span class="token string">"Zero"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> numRef <span class="token keyword">from</span> <span class="token string">'./ref.json'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">numToWord</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>numRef<span class="token punctuation">,</span> <span class="token punctuation">(</span>accum<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">.</span>num <span class="token operator">===</span> num <span class="token operator">?</span> ref<span class="token punctuation">.</span>word <span class="token punctuation">:</span> accum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">wordToNum</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> _<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>numRef<span class="token punctuation">,</span> <span class="token punctuation">(</span>accum<span class="token punctuation">,</span> ref<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> ref<span class="token punctuation">.</span>word <span class="token operator">===</span> word <span class="token operator">&amp;&amp;</span> word<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">?</span> ref<span class="token punctuation">.</span>num <span class="token punctuation">:</span> accum<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>这个 library 的调用规范如下：</p>
<ul>
<li><strong>ES2015 module import:</strong></li>
</ul>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> webpackNumbers <span class="token keyword">from</span> <span class="token string">'webpack-numbers'</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><strong>CommonJS module require:</strong></li>
</ul>
<pre><code class="lang-js"><span class="token keyword">var</span> webpackNumbers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-numbers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><strong>AMD module require:</strong></li>
</ul>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'webpackNumbers'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span> webpackNumbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  webpackNumbers<span class="token punctuation">.</span><span class="token function">wordToNum</span><span class="token punctuation">(</span><span class="token string">'Two'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>consumer(使用者) 还可以通过一个 script 标签来加载和使用此 library：</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!doctype</span> <span class="token attr-name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/webpack-numbers<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
    // ...
    // 全局变量
    webpackNumbers.wordToNum('Five')
    // window 对象中的属性
    window.webpackNumbers.wordToNum('Five')
    // ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>注意，我们还可以通过以下配置方式，将 library 暴露为：</p>
<ul>
<li>global 对象中的属性，用于 Node.js。</li>
<li><code>this</code> 对象中的属性。</li>
</ul>
<p>完整的 library 配置和代码，请查看 <a href="https://github.com/kalcifer/webpack-library-example">webpack-library-example</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本配置" id="基本配置"></a>
<span class="text">基本配置</span>
<a aria-label="基本配置" class="icon-link" href="#基本配置"></a>
</h2>
<p>现在，让我们以某种方式打包这个 library，能够实现以下几个目标：</p>
<ul>
<li>使用 <code>externals</code> 选项，避免将 <code>lodash</code> 打包到应用程序，而使用者会去加载它。</li>
<li>将 library 的名称设置为 <code>webpack-numbers</code>。</li>
<li>将 library 暴露为一个名为 <code>webpackNumbers</code> 的变量。</li>
<li>能够访问其他 Node.js 中的 library。</li>
</ul>
<p>此外，consumer(使用者) 应该能够通过以下方式访问 library：</p>
<ul>
<li>ES2015 模块。例如 <code>import webpackNumbers from 'webpack-numbers'</code>。</li>
<li>CommonJS 模块。例如 <code>require('webpack-numbers')</code>.</li>
<li>全局变量，在通过 <code>script</code> 标签引入时</li>
</ul>
<p>我们可以从如下 webpack 基本配置开始：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'webpack-numbers.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#外部化-lodash-externalize-lodash-" id="外部化-lodash-externalize-lodash-"></a>
<span class="text">外部化 lodash(externalize lodash)</span>
<a aria-label="外部化 lodash(externalize lodash)" class="icon-link" href="#外部化-lodash-externalize-lodash-"></a>
</h2>
<p>现在，如果执行 <code>webpack</code>，你会发现创建了一个体积相当大的文件。如果你查看这个文件，会看到 lodash 也被打包到代码中。在这种场景中，我们更倾向于把 <code>lodash</code> 当作 <code>peerDependency</code>。也就是说，consumer(使用者) 应该已经安装过 <code>lodash</code> 。因此，你就可以放弃控制此外部 library ，而是将控制权让给使用 library 的 consumer。</p>
<p>这可以使用 <code>externals</code> 配置来完成：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  var path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js'
<span class="token deleted">-   }</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+   externals: {</span>
<span class="token inserted">+     lodash: {</span>
<span class="token inserted">+       commonjs: 'lodash',</span>
<span class="token inserted">+       commonjs2: 'lodash',</span>
<span class="token inserted">+       amd: 'lodash',</span>
<span class="token inserted">+       root: '_'</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   }</span>
  };
</code></pre>
<p>这意味着你的 library 需要一个名为 <code>lodash</code> 的依赖，这个依赖在 consumer 环境中必须存在且可用。</p>
<blockquote class="tip"><div class="tip-content"> 注意，如果你仅计划将 library 用作另一个 webpack bundle 中的依赖模块，则可以直接将 <code>externals</code> 指定为一个数组。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#外部化限制-external-limitations-" id="外部化限制-external-limitations-"></a>
<span class="text">外部化限制(external limitations)</span>
<a aria-label="外部化限制(external limitations)" class="icon-link" href="#外部化限制-external-limitations-"></a>
</h2>
<p>对于想要实现从一个依赖中调用多个文件的那些 library：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> A <span class="token keyword">from</span> <span class="token string">'library/one'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> B <span class="token keyword">from</span> <span class="token string">'library/two'</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
</code></pre>
<p>无法通过在 externals 中指定整个 <code>library</code> 的方式，将它们从 bundle 中排除。而是需要逐个或者使用一个正则表达式，来排除它们。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  externals<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">'library/one'</span><span class="token punctuation">,</span>
    <span class="token string">'library/two'</span><span class="token punctuation">,</span>
    <span class="token comment">// 匹配以 "library/" 开始的所有依赖</span>
    <span class="token regex">/^library\/.+$/</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#暴露-library" id="暴露-library"></a>
<span class="text">暴露 library</span>
<a aria-label="暴露 library" class="icon-link" href="#暴露-library"></a>
</h2>
<p>对于用法广泛的 library，我们希望它能够兼容不同的环境，例如 CommonJS，AMD，Node.js 或者作为一个全局变量。为了让你的 library 能够在各种使用环境中可用，需要在 <code>output</code> 中添加 <code>library</code> 属性：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  var path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
<span class="token deleted">-     filename: 'webpack-numbers.js'</span>
<span class="token inserted">+     filename: 'webpack-numbers.js',</span>
<span class="token inserted">+     library: 'webpackNumbers'</span>
    },
    externals: {
      lodash: {
        commonjs: 'lodash',
        commonjs2: 'lodash',
        amd: 'lodash',
        root: '_'
      }
    }
  };
</code></pre>
<blockquote class="tip"><div class="tip-content"> 注意，<code>library</code> 设置绑定到 <code>entry</code> 配置。对于大多数 library，指定一个入口起点就足够了。虽然 <a href="https://github.com/webpack/webpack/tree/master/examples/multi-part-library">一次打包暴露多个库</a> 也是也可以的，然而，通过 <a href="https://stackoverflow.com/questions/34072598/es6-exporting-importing-in-index-file">index script(索引脚本)（仅用于访问一个入口起点）</a> 暴露部分导出则更为简单。我们<strong>不推荐</strong>使用<code>数组</code>作为 library 的 <code>entry</code>。 </div></blockquote><p>这会将你的 library bundle 暴露为名为 <code>webpackNumbers</code> 的全局变量，consumer 通过此名称来 import。为了让 library 和其他环境兼容，则需要在配置中添加 <code>libraryTarget</code> 属性。这个选项可以控制以不同形式暴露 library。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  var path = require('path');

  module.exports = {
    entry: './src/index.js',
    output: {
      path: path.resolve(__dirname, 'dist'),
      filename: 'webpack-numbers.js',
<span class="token deleted">-     library: 'webpackNumbers'</span>
<span class="token inserted">+     library: 'webpackNumbers',</span>
<span class="token inserted">+     libraryTarget: 'umd'</span>
    },
    externals: {
      lodash: {
        commonjs: 'lodash',
        commonjs2: 'lodash',
        amd: 'lodash',
        root: '_'
      }
    }
  };
</code></pre>
<p>有以下几种方式暴露 library：</p>
<ul>
<li>变量：作为一个全局变量，通过 <code>script</code> 标签来访问（<code>libraryTarget:'var'</code>）。</li>
<li>this：通过 <code>this</code> 对象访问（<code>libraryTarget:'this'</code>）。</li>
<li>window：在浏览器中通过 <code>window</code> 对象访问（<code>libraryTarget:'window'</code>）。</li>
<li>UMD：在 AMD 或 CommonJS <code>require</code> 之后可访问（<code>libraryTarget:'umd'</code>）。</li>
</ul>
<p>如果设置了 <code>library</code> 但没有设置 <code>libraryTarget</code>，则 <code>libraryTarget</code> 默认指定为 <code>var</code>，详细说明请查看 <a href="/configuration/output">output </a> 文档。查看 <a href="/configuration/output#output-librarytarget"><code>output.libraryTarget</code></a> 文档，以获取所有可用选项的详细列表。</p>
<blockquote class="warning"><div class="tip-content"> 在 webpack v3.5.5 中，使用 <code>libraryTarget: { root:'_' }</code> 将无法正常工作（参考 <a href="https://github.com/webpack/webpack/issues/4824">issue 4824</a>) 所述）。然而，可以设置 <code>libraryTarget: { var: '_' }</code> 来将 library 作为全局变量。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#最终步骤" id="最终步骤"></a>
<span class="text">最终步骤</span>
<a aria-label="最终步骤" class="icon-link" href="#最终步骤"></a>
</h3>
<p>遵循 <a href="/guides/production">生产环境</a> 指南中的步骤，来优化生产环境下的输出结果。那么，我们还需要将生成 bundle 的文件路径，添加到 <code>package.json</code> 中的 <code>main</code> 字段中。</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"dist/webpack-numbers.js"</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre>
<p>或者，按照这个 <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md#typical-usage">指南</a>，将其添加为标准模块：</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  ...
  <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"src/index.js"</span><span class="token punctuation">,</span>
  ...
<span class="token punctuation">}</span>
</code></pre>
<p>这里的 key(键) <code>main</code> 是参照 <a href="https://docs.npmjs.com/files/package.json#main"><code>package.json</code> 标准</a>，而 <code>module</code> 是参照 <a href="https://github.com/dherman/defense-of-dot-js/blob/master/proposal.md">一个</a><a href="https://github.com/rollup/rollup/wiki/pkg.module">提案</a>，此提案允许 JavaScript 生态系统升级使用 ES2015 模块，而不会破坏向后兼容性。</p>
<blockquote class="warning"><div class="tip-content"> <code>module</code> 属性应指向一个使用 ES2015 模块语法（而不是其他浏览器或 Node.js 尚不支持的模块语法）的脚本。这使得 webpack 本身就可以解析模块语法，如果用户只用到 library 的某些部分，可以通过 <a href="https://webpack.js.org/guides/tree-shaking/">tree shaking</a> 打包更轻量的包。 </div></blockquote><p>现在，你可以 <a href="https://docs.npmjs.com/getting-started/publishing-npm-packages">将其发布为一个 npm package</a>，并且在 <a href="https://unpkg.com/#/">unpkg.com</a> 找到它，并分发给你的用户。</p>
<blockquote class="tip"><div class="tip-content"> 为了暴露和 library 关联着的样式表，你应该使用 <a href="/plugins/extract-text-webpack-plugin"><code>MiniCssExtractPlugin</code></a>。然后，用户可以像使用其他样式表一样使用和加载这些样式表。 </div></blockquote></div>
<br/><h1>shim 预置依赖</h1>
<div><p><code>webpack</code> compiler 能够识别遵循 ES2015 模块语法、CommonJS 或 AMD 规范编写的模块。然而，一些 third party(第三方库) 可能会引用一些全局依赖（例如 <code>jQuery</code> 中的 <code>$</code>）。因此这些 library 也可能会创建一些需要导出的全局变量。这些 "broken modules(不符合规范的模块)" 就是 <em>shim(预置依赖)</em> 发挥作用的地方。</p>
<blockquote class="warning"><div class="tip-content"> <strong>我们不推荐使用全局依赖！</strong>webpack 背后的整个理念是使前端开发更加模块化。也就是说，需要编写具有良好的封闭性(well contained)、不依赖于隐含依赖（例如，全局变量）的彼此隔离的模块。请只在必要的时候才使用这些特性。 </div></blockquote><p><em>shim</em> 另外一个极其有用的使用场景就是：当你希望 <a href="https://en.wikipedia.org/wiki/Polyfill_(programming">polyfill</a> 扩展浏览器能力，来支持到更多用户时。在这种情况下，你可能只是想要将这些 polyfills 提供给需要修补(patch)的浏览器（也就是实现按需加载）。</p>
<p>下面的文章将向我们展示这两种用例。</p>
<blockquote class="tip"><div class="tip-content"> 为了方便，本指南继续沿用 <a href="/guides/getting-started">起步</a> 中的代码示例。在继续之前，请确保你已经熟悉这些配置。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#shim-预置全局变量" id="shim-预置全局变量"></a>
<span class="text">shim 预置全局变量</span>
<a aria-label="shim 预置全局变量" class="icon-link" href="#shim-预置全局变量"></a>
</h2>
<p>让我们开始第一个 shim 全局变量的用例。在此之前，先看下我们的项目：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">webpack-demo
|- package.json
|- webpack.config.js
|- /dist
|- /src
  |- index.js
|- /node_modules
</code></pre>
<p>还记得我们之前用过的 <code>lodash</code> 吗？出于演示目的，例如把这个应用程序中的模块依赖，改为一个全局变量依赖。要实现这些，我们需要使用 <code>ProvidePlugin</code> 插件。</p>
<p>使用 <a href="/plugins/provide-plugin"><code>ProvidePlugin</code></a> 后，能够在 webpack 编译的每个模块中，通过访问一个变量来获取一个 package。如果 webpack 看到模块中用到这个变量，它将在最终 bundle 中引入给定的 package。让我们先移除 <code>lodash</code> 的 <code>import</code> 语句，改为通过插件提供它：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token deleted">- import _ from 'lodash';</span>
-
  function component() {
    var element = document.createElement('div');

<span class="token deleted">-   // Lodash, now imported by this script</span>
    element.innerHTML = _.join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
<span class="token inserted">+ const webpack = require('webpack');</span>

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
<span class="token deleted">-   }</span>
<span class="token inserted">+   },</span>
<span class="token inserted">+   plugins: [</span>
<span class="token inserted">+     new webpack.ProvidePlugin({</span>
<span class="token inserted">+       _: 'lodash'</span>
<span class="token inserted">+     })</span>
<span class="token inserted">+   ]</span>
  };
</code></pre>
<p>我们本质上所做的，就是告诉 webpack……</p>
<blockquote>
<p>如果你遇到了至少一处用到 <code>_</code> 变量的模块实例，那请你将 <code>lodash</code> package 引入进来，并将其提供给需要用到它的模块。</p>
</blockquote>
<p>运行我们的构建脚本，将会看到同样的输出：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
    Asset    Size  Chunks                    Chunk Names
bundle.js  544 kB       0  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  main
<span class="token punctuation">..</span>.
</code></pre>
<p>还可以使用 <code>ProvidePlugin</code> 暴露出某个模块中单个导出，通过配置一个“数组路径”（例如 <code>[module, child, ...children?]</code>）实现此功能。所以，我们假想如下，无论 <code>join</code> 方法在何处调用，我们都只会获取到 <code>lodash</code> 中提供的 <code>join</code> 方法。</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  function component() {
    var element = document.createElement('div');

<span class="token deleted">-   element.innerHTML = _.join(['Hello', 'webpack'], ' ');</span>
<span class="token inserted">+   element.innerHTML = join(['Hello', 'webpack'], ' ');</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
    plugins: [
      new webpack.ProvidePlugin({
<span class="token deleted">-       _: 'lodash'</span>
<span class="token inserted">+       join: ['lodash', 'join']</span>
      })
    ]
  };
</code></pre>
<p>这样就能很好的与 <a href="/guides/tree-shaking">tree shaking</a> 配合，将 <code>lodash</code> library 中的其余没有用到的导出去除。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#细粒度-shim" id="细粒度-shim"></a>
<span class="text">细粒度 shim</span>
<a aria-label="细粒度 shim" class="icon-link" href="#细粒度-shim"></a>
</h2>
<p>一些遗留模块依赖的 <code>this</code> 指向的是 <code>window</code> 对象。在接下来的用例中，调整我们的 <code>index.js</code>：</p>
<pre><code class="lang-diff">  function component() {
    var element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');
+
<span class="token inserted">+   // 假设我们处于 `window` 上下文</span>
<span class="token inserted">+   this.alert('Hmmm, this probably isn\'t a great idea...')</span>

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p>当模块运行在 CommonJS 上下文中，这将会变成一个问题，也就是说此时的 <code>this</code> 指向的是 <code>module.exports</code>。在这种情况下，你可以通过使用 <a href="/loaders/imports-loader/"><code>imports-loader</code></a> 覆盖 <code>this</code> 指向：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
<span class="token inserted">+   module: {</span>
<span class="token inserted">+     rules: [</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: require.resolve('index.js'),</span>
<span class="token inserted">+         use: 'imports-loader?this=&gt;window'</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     ]</span>
<span class="token inserted">+   },</span>
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join']
      })
    ]
  };
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#全局-export" id="全局-export"></a>
<span class="text">全局 export</span>
<a aria-label="全局 export" class="icon-link" href="#全局-export"></a>
</h2>
<p>让我们假设，某个 library 创建出一个全局变量，它期望 consumer(使用者) 使用这个变量。为此，我们可以在项目配置中，添加一个小模块来演示说明：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
<span class="token inserted">+   |- globals.js</span>
  |- /node_modules
</code></pre>
<p><strong>src/globals.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">var</span> file <span class="token operator">=</span> <span class="token string">'blah.txt'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> helpers <span class="token operator">=</span> <span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'test something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  parse<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'parse something'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>你可能从来没有在自己的源码中做过这些事情，但是你也许遇到过一个老旧的 library，和上面所展示的代码类似。在这种情况下，我们可以使用 <a href="/loaders/exports-loader/"><code>exports-loader</code></a>，将一个全局变量作为一个普通的模块来导出。例如，为了将 <code>file</code> 导出为 <code>file</code> 以及将 <code>helpers.parse</code> 导出为 <code>parse</code>，做如下调整：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
    entry: './src/index.js',
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    },
    module: {
      rules: [
        {
          test: require.resolve('index.js'),
          use: 'imports-loader?this=&gt;window'
<span class="token deleted">-       }</span>
<span class="token inserted">+       },</span>
<span class="token inserted">+       {</span>
<span class="token inserted">+         test: require.resolve('globals.js'),</span>
<span class="token inserted">+         use: 'exports-loader?file,parse=helpers.parse'</span>
<span class="token inserted">+       }</span>
      ]
    },
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join']
      })
    ]
  };
</code></pre>
<p>现在，在我们的 entry 入口文件中（即 <code>src/index.js</code>），我们能 <code>import { file, parse } from './globals.js';</code> ，然后一切将顺利运行。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#加载-polyfill" id="加载-polyfill"></a>
<span class="text">加载 polyfill</span>
<a aria-label="加载 polyfill" class="icon-link" href="#加载-polyfill"></a>
</h2>
<p>目前为止我们所讨论的所有内容都是处理那些遗留的 package，让我们进入到第二个话题：<strong>polyfill</strong>。</p>
<p>有很多方法来加载 polyfill。例如，想要引入 <a href="https://babel.docschina.org/docs/en/babel-polyfill/"><code>babel-polyfill</code></a> 我们只需如下操作：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save babel-polyfill
</code></pre>
<p>然后，使用 <code>import</code> 将其引入到我们的主 bundle 文件：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token inserted">+ import 'babel-polyfill';</span>
+
  function component() {
    var element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<blockquote class="tip"><div class="tip-content"> 注意，我们没有将 <code>import</code> 绑定到某个变量。这是因为 polyfill 直接基于自身执行，并且是在基础代码执行之前，这样通过这些预置，我们就可以假定已经具有某些原生功能。 </div></blockquote><p>注意，这种方式优先考虑正确性，而不考虑 bundle 体积大小。为了安全和可靠，polyfill/shim 必须<strong>运行于所有其他代码之前</strong>，而且需要同步加载，或者说，需要在所有 polyfill/shim 加载之后，再去加载所有应用程序代码。
社区中存在许多误解，即现代浏览器“不需要”polyfill，或者 polyfill/shim 仅用于添加缺失功能 - 实际上，它们通常用于<em>修复损坏实现(repair broken implementation)</em>，即使是在最现代的浏览器中，也会出现这种情况。
因此，最佳实践仍然是，不加选择地和同步地加载所有 polyfill/shim，尽管这会导致额外的 bundle 体积成本。</p>
<p>如果你认为自己已经打消这些顾虑，并且希望承受损坏的风险。那么接下来的这件事情，可能是你应该要做的：
我们将会把 <code>import</code> 放入一个新文件，并加入 <a href="https://github.com/github/fetch"><code>whatwg-fetch</code></a> polyfill：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save whatwg-fetch
</code></pre>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff"><span class="token deleted">- import 'babel-polyfill';</span>
-
  function component() {
    var element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
</code></pre>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
  |- webpack.config.js
  |- /dist
  |- /src
    |- index.js
    |- globals.js
<span class="token inserted">+   |- polyfills.js</span>
  |- /node_modules
</code></pre>
<p><strong>src/polyfills.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token string">'babel-polyfill'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'whatwg-fetch'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const webpack = require('webpack');

  module.exports = {
<span class="token deleted">-   entry: './src/index.js',</span>
<span class="token inserted">+   entry: {</span>
<span class="token inserted">+     polyfills: './src/polyfills.js',</span>
<span class="token inserted">+     index: './src/index.js'</span>
<span class="token inserted">+   },</span>
    output: {
<span class="token deleted">-     filename: 'bundle.js',</span>
<span class="token inserted">+     filename: '[name].bundle.js',</span>
      path: path.resolve(__dirname, 'dist')
    },
    module: {
      rules: [
        {
          test: require.resolve('index.js'),
          use: 'imports-loader?this=&gt;window'
        },
        {
          test: require.resolve('globals.js'),
          use: 'exports-loader?file,parse=helpers.parse'
        }
      ]
    },
    plugins: [
      new webpack.ProvidePlugin({
        join: ['lodash', 'join']
      })
    ]
  };
</code></pre>
<p>如上配置之后，我们可以在代码中添加一些逻辑，条件地加载新的 <code>polyfills.bundle.js</code> 文件。根据需要支持的技术和浏览器来决定是否加载。我们将做一些简单的试验，来确定是否需要引入这些 polyfill：</p>
<p><strong>dist/index.html</strong></p>
<pre><code class="lang-diff">  &lt;!doctype html&gt;
  &lt;html&gt;
    &lt;head&gt;
      &lt;title&gt;Getting Started&lt;/title&gt;
<span class="token inserted">+     &lt;script&gt;</span>
<span class="token inserted">+       var modernBrowser = (</span>
<span class="token inserted">+         'fetch' in window &amp;&amp;</span>
<span class="token inserted">+         'assign' in Object</span>
<span class="token inserted">+       );</span>
+
<span class="token inserted">+       if ( !modernBrowser ) {</span>
<span class="token inserted">+         var scriptElement = document.createElement('script');</span>
+
<span class="token inserted">+         scriptElement.async = false;</span>
<span class="token inserted">+         scriptElement.src = '/polyfills.bundle.js';</span>
<span class="token inserted">+         document.head.appendChild(scriptElement);</span>
<span class="token inserted">+       }</span>
<span class="token inserted">+     &lt;/script&gt;</span>
    &lt;/head&gt;
    &lt;body&gt;
      &lt;script src="index.bundle.js"&gt;&lt;/script&gt;
    &lt;/body&gt;
  &lt;/html&gt;
</code></pre>
<p>现在，在 entry 入口文件中，可以通过 <code>fetch</code> 获取一些数据：</p>
<p><strong>src/index.js</strong></p>
<pre><code class="lang-diff">  function component() {
    var element = document.createElement('div');

    element.innerHTML = join(['Hello', 'webpack'], ' ');

    return element;
  }

  document.body.appendChild(component());
+
<span class="token inserted">+ fetch('https://jsonplaceholder.typicode.com/users')</span>
<span class="token inserted">+   .then(response =&gt; response.json())</span>
<span class="token inserted">+   .then(json =&gt; {</span>
<span class="token inserted">+     console.log('We retrieved some data! AND we\'re confident it will work on a variety of browser distributions.')</span>
<span class="token inserted">+     console.log(json)</span>
<span class="token inserted">+   })</span>
<span class="token inserted">+   .catch(error =&gt; console.error('Something went wrong when fetching this data: ', error))</span>
</code></pre>
<p>执行构建脚本，可以看到，浏览器发送了额外的 <code>polyfills.bundle.js</code> 文件请求，然后所有代码顺利执行。注意，以上的这些设定可能还会有所改进，这里我们向你提供一个很棒的想法：将 polyfill 提供给需要引入它的用户。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#进一步优化" id="进一步优化"></a>
<span class="text">进一步优化</span>
<a aria-label="进一步优化" class="icon-link" href="#进一步优化"></a>
</h2>
<p><code>babel-preset-env</code> package 通过 <a href="https://github.com/browserslist/browserslist">browserslist</a> 来转译那些你浏览器中不支持的特性。这个 preset 使用 <a href="https://babel.docschina.org/docs/en/babel-preset-env#usebuiltins"><code>useBuiltIns</code></a> 选项，默认值是 <code>false</code>，这种方式可以将全局 <code>babel-polyfill</code> 导入，改进为更细粒度的 <code>import</code> 格式：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token string">'core-js/modules/es7.string.pad-start'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/es7.string.pad-end'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.timers'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.immediate'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'core-js/modules/web.dom.iterable'</span><span class="token punctuation">;</span>
</code></pre>
<p>查看 <a href="https://github.com/babel/babel-preset-env">仓库</a> 以获取更多信息。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-内置" id="node-内置"></a>
<span class="text">Node 内置</span>
<a aria-label="Node 内置" class="icon-link" href="#node-内置"></a>
</h2>
<p>像 <code>process</code> 这种 Node 内置模块，能直接根据配置文件进行正确的 polyfill，而不需要任何特定的 loader 或者 plugin。查看 <a href="/configuration/node">node </a> 配置页面获取更多信息。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#其他工具" id="其他工具"></a>
<span class="text">其他工具</span>
<a aria-label="其他工具" class="icon-link" href="#其他工具"></a>
</h2>
<p>还有一些其他的工具，也能够帮助我们处理这些遗留模块。</p>
<p><a href="/loaders/script-loader/"><code>script-loader</code></a> 会在 global context(全局上下文) 中对代码进行 eval 取值，这类似于通过一个 <code>script</code> 标签引入脚本。在这种模式下，每个正常的 library 都应该能运行。对 <code>require</code>, <code>module</code> 等取值是 undefined。</p>
<blockquote class="warning"><div class="tip-content"> 在使用 <code>script-loader</code> 时，模块将转为一个字符串，然后添加到 bundle 中。它不会被 <code>webpack</code> 压缩，所以你应该选择一个 min 版本。而且，使用此 loader 添加的 library 也没有 <code>devtool</code> 支持。 </div></blockquote><p>这些遗留模块如果没有 AMD/CommonJS 版本，但你也想将他们加入 <code>dist</code> 文件，则可以使用 <a href="/configuration/module/#module-noparse"><code>noParse</code></a> 来标识出这个模块。这样就能使 webpack 将引入这些模块，但是不进行转化(parse)，以及不解析(resolve) <code>require()</code> 和 <code>import</code> 语句。这种用法还会提高构建性能。</p>
<blockquote class="warning"><div class="tip-content"> 任何需要 AST 的功能（例如 <code>ProvidePlugin</code>）都不起作用。 </div></blockquote><p>最后，一些模块支持多种 <a href="/concepts/modules">模块格式</a>，例如一个混合有 AMD、CommonJS 和 legacy(遗留) 的模块。在大多数这样的模块中，会首先检查 <code>define</code>，然后使用一些怪异代码导出一些属性。在这些情况下，可以通过 <a href="/loaders/imports-loader/"><code>imports-loader</code></a> 设置 <code>define=&gt;false</code> 来强制 CommonJS 路径。</p>
<hr/>
<blockquote class="tip"><div class="tip-content"> 译者注：shim 是一个库(library)，它将一个新的 API 引入到一个旧的环境中，而且仅靠旧的环境中已有的手段实现。polyfill 就是一个用在浏览器 API 上的 shim。我们通常的做法是先检查当前浏览器是否支持某个 API，如果不支持的话就按需加载对应的 polyfill。然后新旧浏览器就都可以使用这个 API 了。 </div></blockquote></div>
<br/><h1>渐进式网络应用程序</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/output-management">管理输出</a> 中的代码示例。 </div></blockquote><p>渐进式网络应用程序(progressive web application - PWA)，是一种可以提供类似于native app(原生应用程序) 体验的 web app(网络应用程序)。PWA 可以用来做很多事。其中最重要的是，在<strong>离线(offline)</strong>时应用程序能够继续运行功能。这是通过使用名为 <a href="https://developers.google.com/web/fundamentals/primers/service-workers/">Service Workers</a> 的 web 技术来实现的。</p>
<p>本章将重点介绍，如何为我们的应用程序添加离线体验。我们将使用名为 <a href="https://github.com/GoogleChrome/workbox">Workbox</a> 的 Google 项目来实现此目的，该项目提供的工具可帮助我们更简单地为 web app 提供离线支持。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#现在-我们并没有运行在离线环境下" id="现在-我们并没有运行在离线环境下"></a>
<span class="text">现在，我们并没有运行在离线环境下</span>
<a aria-label="现在，我们并没有运行在离线环境下" class="icon-link" href="#现在-我们并没有运行在离线环境下"></a>
</h2>
<p>到目前为止，我们一直是直接查看本地文件系统的输出结果。通常情况下，真正的用户是通过网络访问 web app；用户的浏览器会与一个提供所需资源（例如，<code>.html</code>, <code>.js</code> 和 <code>.css</code> 文件）的 <strong>server</strong> 通讯。</p>
<p>我们通过搭建一个简易 server 下，测试下这种离线体验。这里使用 <a href="https://www.npmjs.com/package/http-server">http-server</a> package：<code>npm install http-server --save-dev</code>。还要修改 <code>package.json</code> 的 <code>scripts</code> 部分，来添加一个 <code>start</code> script：</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-diff">{
  ...
  "scripts": {
<span class="token deleted">-    "build": "webpack"</span>
<span class="token inserted">+    "build": "webpack",</span>
<span class="token inserted">+    "start": "http-server dist"</span>
  },
  ...
}
</code></pre>
<p>如果你之前没有操作过，先得运行命令 <code>npm run build</code> 来构建你的项目。然后运行命令 <code>npm start</code>。应该产生以下输出：</p>
<pre><code class="lang-bash"><span class="token operator">&gt;</span> http-server dist

启动 http-server，serve 整个 dist 文件夹
到：
  http://xx.x.x.x:8080
  http://127.0.0.1:8080
  http://xxx.xxx.x.x:8080
按下 CTRL-C 停止服务
</code></pre>
<p>如果你打开浏览器访问 <code>http://localhost:8080</code> (即 <code>http://127.0.0.1</code>)，你应该会看到 webpack 应用程序被 serve 到 <code>dist</code> 目录。如果停止 server 然后刷新，则 webpack 应用程序不再可访问。</p>
<p>这就是我们为实现离线体验所需要的改变。在本章结束时，我们应该要实现的是，停止 server 然后刷新，仍然可以看到应用程序正常运行。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#添加-workbox" id="添加-workbox"></a>
<span class="text">添加 Workbox</span>
<a aria-label="添加 Workbox" class="icon-link" href="#添加-workbox"></a>
</h2>
<p>添加 workbox-webpack-plugin 插件，然后调整 <code>webpack.config.js</code> 文件：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> workbox-webpack-plugin --save-dev
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');
  const HtmlWebpackPlugin = require('html-webpack-plugin');
  const CleanWebpackPlugin = require('clean-webpack-plugin');
<span class="token inserted">+ const WorkboxPlugin = require('workbox-webpack-plugin');</span>

  module.exports = {
    entry: {
      app: './src/index.js',
      print: './src/print.js'
    },
    plugins: [
      new CleanWebpackPlugin(['dist']),
      new HtmlWebpackPlugin({
<span class="token deleted">-       title: '管理输出'</span>
<span class="token inserted">+       title: '渐进式网络应用程序'</span>
<span class="token deleted">-     })</span>
<span class="token inserted">+     }),</span>
<span class="token inserted">+     new WorkboxPlugin.GenerateSW({</span>
<span class="token inserted">+       // 这些选项帮助快速启用 ServiceWorkers</span>
<span class="token inserted">+       // 不允许遗留任何“旧的” ServiceWorkers</span>
<span class="token inserted">+       clientsClaim: true,</span>
<span class="token inserted">+       skipWaiting: true</span>
<span class="token inserted">+     })</span>
    ],
    output: {
      filename: '[name].bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>完成这些设置，再次执行 <code>npm run build</code>，看下会发生什么：</p>
<pre><code class="lang-bash"><span class="token punctuation">..</span>.
                  Asset       Size  Chunks                    Chunk Names
          app.bundle.js     545 kB    0, 1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>  <span class="token punctuation">[</span>big<span class="token punctuation">]</span>  app
        print.bundle.js    2.74 kB       1  <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>         print
             index.html  254 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js  268 bytes          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
      service-worker.js       1 kB          <span class="token punctuation">[</span>emitted<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
</code></pre>
<p>现在你可以看到，生成了两个额外的文件：<code>service-worker.js</code> 和名称冗长的 <code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code>。<code>service-worker.js</code> 是 Service Worker 文件，<code>precache-manifest.b5ca1c555e832d6fbf9462efd29d27eb.js</code> 是 <code>service-worker.js</code> 引用的文件，所以它也可以运行。你本地生成的文件可能会有所不同；但是应该会有一个 <code>service-worker.js</code> 文件。</p>
<p>所以，值得高兴的是，我们现在已经创建出一个 Service Worker。接下来该做什么？</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#注册-service-worker" id="注册-service-worker"></a>
<span class="text">注册 Service Worker</span>
<a aria-label="注册 Service Worker" class="icon-link" href="#注册-service-worker"></a>
</h2>
<p>接下来我们注册 Service Worker，使其出场并开始表演。通过添加以下注册代码来完成此操作：</p>
<p><strong>index.js</strong></p>
<pre><code class="lang-diff">  import _ from 'lodash';
  import printMe from './print.js';

<span class="token inserted">+ if ('serviceWorker' in navigator) {</span>
<span class="token inserted">+   window.addEventListener('load', () =&gt; {</span>
<span class="token inserted">+     navigator.serviceWorker.register('/service-worker.js').then(registration =&gt; {</span>
<span class="token inserted">+       console.log('SW registered: ', registration);</span>
<span class="token inserted">+     }).catch(registrationError =&gt; {</span>
<span class="token inserted">+       console.log('SW registration failed: ', registrationError);</span>
<span class="token inserted">+     });</span>
<span class="token inserted">+   });</span>
<span class="token inserted">+ }</span>
</code></pre>
<p>再次运行 <code>npm build build</code> 来构建包含注册代码版本的应用程序。然后用 <code>npm start</code> 将构建结果 serve 到服务下。导航至 <code>http://localhost:8080</code> 并查看 console 控制台。应该看到：</p>
<pre><code class="lang-bash">SW registered
</code></pre>
<p>现在来进行测试。停止 server 并刷新页面。如果浏览器能够支持 Service Worker，应该可以看到你的应用程序还在正常运行。然而，server 已经<strong>停止</strong> serve 整个 dist 文件夹，此刻是 Service Worker 在进行 serve。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>你已经使用 Workbox 项目构建了一个离线应用程序。开始进入将 web app 改造为 PWA 的旅程。你现在可能想要考虑下一步做什么。这里谷歌提供的 <a href="https://developers.google.com/web/progressive-web-apps/">PWA</a> 文档中可以找到一些不错的资源。</p>
</div>
<br/><h1>TypeScript</h1>
<div><blockquote class="tip"><div class="tip-content"> 本指南继续沿用 <a href="/guides/getting-started/">_起步_</a> 中的代码示例。 </div></blockquote><p><a href="https://www.typescriptlang.org">TypeScript</a> 是 JavaScript 的超集，为其增加了类型系统，可以编译为普通 JavaScript 代码。这篇指南里我们将会学习是如何将 webpack 和 TypeScript 进行集成。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基础配置" id="基础配置"></a>
<span class="text">基础配置</span>
<a aria-label="基础配置" class="icon-link" href="#基础配置"></a>
</h2>
<p>首先，执行以下命令安装 TypeScript compiler 和 loader：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev typescript ts-loader
</code></pre>
<p>现在，我们将修改目录结构和配置文件：</p>
<p><strong>project</strong></p>
<pre><code class="lang-diff">  webpack-demo
  |- package.json
<span class="token inserted">+ |- tsconfig.json</span>
  |- webpack.config.js
  |- /dist
    |- bundle.js
    |- index.html
  |- /src
    |- index.js
<span class="token inserted">+   |- index.ts</span>
  |- /node_modules
</code></pre>
<p><strong>tsconfig.json</strong></p>
<p>这里我们设置一个基本的配置，来支持 JSX，并将 TypeScript 编译到 ES5……</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"outDir"</span><span class="token operator">:</span> <span class="token string">"./dist/"</span><span class="token punctuation">,</span>
    <span class="token property">"noImplicitAny"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">"module"</span><span class="token operator">:</span> <span class="token string">"es6"</span><span class="token punctuation">,</span>
    <span class="token property">"target"</span><span class="token operator">:</span> <span class="token string">"es5"</span><span class="token punctuation">,</span>
    <span class="token property">"jsx"</span><span class="token operator">:</span> <span class="token string">"react"</span><span class="token punctuation">,</span>
    <span class="token property">"allowJs"</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>查看 <a href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">TypeScript 官方文档</a> 了解更多关于 <code>tsconfig.json</code> 的配置选项。</p>
<p>想要了解 webpack 配置的更多信息，请查看 <a href="/concepts/configuration/">配置</a> 概念。</p>
<p>现在，配置 webpack 处理 TypeScript：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./src/index.ts'</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  resolve<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'.tsx'</span><span class="token punctuation">,</span> <span class="token string">'.ts'</span><span class="token punctuation">,</span> <span class="token string">'.js'</span> <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这会让 webpack 直接从 <code>./index.ts</code> _进入_，然后通过 <code>ts-loader</code> _加载<em>所有的 <code>.ts</code> 和 <code>.tsx</code> 文件，并且在当前目录</em>输出_一个 <code>bundle.js</code> 文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader" id="loader"></a>
<span class="text">loader</span>
<a aria-label="loader" class="icon-link" href="#loader"></a>
</h2>
<p><a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a></p>
<p>在本指南中，我们使用 <code>ts-loader</code>，因为它能够很方便地启用额外的 webpack 功能，例如将其他 web 资源导入到项目中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#source-map" id="source-map"></a>
<span class="text">source map</span>
<a aria-label="source map" class="icon-link" href="#source-map"></a>
</h2>
<p>想要了解 source map 的更多信息，请查看 <a href="/guides/development">开发</a> 指南。</p>
<p>想要启用 source map，我们必须配置 TypeScript，以将内联的 source map 输出到编译后的 JavaScript 文件中。必须在 TypeScript 配置中添加下面这行：</p>
<p><strong>tsconfig.json</strong></p>
<pre><code class="lang-diff">  {
    "compilerOptions": {
      "outDir": "./dist/",
<span class="token inserted">+     "sourceMap": true,</span>
      "noImplicitAny": true,
      "module": "commonjs",
      "target": "es5",
      "jsx": "react",
      "allowJs": true
    }
  }
</code></pre>
<p>现在，我们需要告诉 webpack 提取这些 source map，并内联到最终的 bundle 中。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">  const path = require('path');

  module.exports = {
    entry: './src/index.ts',
<span class="token inserted">+   devtool: 'inline-source-map',</span>
    module: {
      rules: [
        {
          test: /\.tsx?$/,
          use: 'ts-loader',
          exclude: /node_modules/
        }
      ]
    },
    resolve: {
      extensions: [ '.tsx', '.ts', '.js' ]
    },
    output: {
      filename: 'bundle.js',
      path: path.resolve(__dirname, 'dist')
    }
  };
</code></pre>
<p>查看 <a href="/configuration/devtool/">devtool</a> 文档以了解更多信息。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-third-party-library" id="使用-third-party-library"></a>
<span class="text">使用 third party library</span>
<a aria-label="使用 third party library" class="icon-link" href="#使用-third-party-library"></a>
</h2>
<p>在从 npm 安装 third party library(第三方库) 时，一定要记得同时安装此 library 的类型声明文件(typing definition)。你可以从 <a href="http://microsoft.github.io/TypeSearch/">TypeSearch</a> 中找到并安装这些第三方库的类型声明文件。</p>
<p>举个例子，如果想安装 lodash 类型声明文件，我们可以运行下面的命令：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev @types/lodash
</code></pre>
<p>想了解更多，可以查看 <a href="https://blogs.msdn.microsoft.com/typescript/2016/06/15/the-future-of-declaration-files/">这篇文章</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#导入其他资源" id="导入其他资源"></a>
<span class="text">导入其他资源</span>
<a aria-label="导入其他资源" class="icon-link" href="#导入其他资源"></a>
</h2>
<p>想要在 TypeScript 中使用非代码资源(non-code asset)，我们需要告诉 TypeScript 推断导入资源的类型。在项目里创建一个 <code>custom.d.ts</code> 文件，这个文件用来表示项目中 TypeScript 的自定义类型声明。我们为 <code>.svg</code> 文件设置一个声明：</p>
<p><strong>custom.d.ts</strong></p>
<pre><code class="lang-typescript"><span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"*.svg"</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> content<span class="token punctuation">:</span> <span class="token keyword">any</span><span class="token punctuation">;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> content<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>这里，我们通过指定任何以 <code>.svg</code> 结尾的导入(import)，将 SVG 声明(declare) 为一个新的模块(module)，并将模块的 <code>content</code> 定义为 <code>any</code>。我们可以通过将类型定义为字符串，来更加显式地将它声明为一个 url。同样的概念适用于其他资源，包括 CSS, SCSS, JSON 等。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#构建性能" id="构建性能"></a>
<span class="text">构建性能</span>
<a aria-label="构建性能" class="icon-link" href="#构建性能"></a>
</h2>
<blockquote class="warning"><div class="tip-content"> 这可能会降低构建性能。 </div></blockquote><p>关于构建工具，请查看 <a href="/guides/build-performance/">构建性能</a> 指南。</p>
</div>
<br/><h1>环境变量</h1>
<div><p>想要消除 <a href="/guides/development">开发环境</a> 和 <a href="/guides/production">生产环境</a> 之间的 <code>webpack.config.js</code> 差异，你可能需要环境变量(environment variable)。</p>
<p>webpack 命令行 <a href="/api/cli/#environment-options">环境配置</a> 的 <code>--env</code> 参数，可以允许你传入任意数量的环境变量。而在 <code>webpack.config.js</code> 中可以访问到这些环境变量。例如，<code>--env.production</code> 或 <code>--env.NODE_ENV=local</code>（<code>NODE_ENV</code> 通常约定用于定义环境类型，查看 <a href="https://dzone.com/articles/what-you-should-know-about-node-env">这里</a>）。</p>
<pre><code class="lang-bash">webpack --env.NODE_ENV<span class="token operator">=</span>local --env.production --progress
</code></pre>
<blockquote class="tip"><div class="tip-content"> 如果设置 <code>env</code> 变量，却没有赋值，<code>--env.production</code> 默认表示将 <code>--env.production</code> 设置为 <code>true</code>。还有许多其他可以使用的语法。更多详细信息，请查看 <a href="/api/cli/#environment-options">webpack CLI</a> 文档。 </div></blockquote><p>对于我们的 webpack 配置，有一个必须要修改之处。通常，<code>module.exports</code> 指向配置对象。要使用 <code>env</code> 变量，你必须将 <code>module.exports</code> 转换成一个函数：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> env <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Use env.&lt;YOUR VARIABLE&gt; here:</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'NODE_ENV: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>NODE_ENV<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'local'</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production: '</span><span class="token punctuation">,</span> env<span class="token punctuation">.</span>production<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'./src/index.js'</span><span class="token punctuation">,</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span><span class="token punctuation">,</span>
      path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dist'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>构建性能</h1>
<div><p>本指南包含一些改进构建/编译性能的实用技巧。</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#通用环境" id="通用环境"></a>
<span class="text">通用环境</span>
<a aria-label="通用环境" class="icon-link" href="#通用环境"></a>
</h2>
<p>无论你是在 <a href="/guides/development">开发环境</a> 还是在 <a href="/guides/production">生产环境</a> 下运行构建脚本，以下最佳实践都应该有所帮助。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#更新到最新版本" id="更新到最新版本"></a>
<span class="text">更新到最新版本</span>
<a aria-label="更新到最新版本" class="icon-link" href="#更新到最新版本"></a>
</h3>
<p>使用最新的 webpack 版本。我们会经常进行性能优化。webpack 的最新稳定版本是：</p>
<p><a href="https://github.com/webpack/webpack/releases"><img alt="latest webpack version" src="https://img.shields.io/npm/v/webpack.svg?label=webpack&amp;style=flat-square&amp;maxAge=3600"/></a></p>
<p>将 <strong>Node.js</strong> 更新到最新版本，也有助于提高性能。除此之外，将你的 package 管理工具（例如 <code>npm</code> 或者 <code>yarn</code>）更新到最新版本，也有助于提高性能。较新的版本能够建立更高效的模块树以及提高解析速度。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#loader" id="loader"></a>
<span class="text">loader</span>
<a aria-label="loader" class="icon-link" href="#loader"></a>
</h3>
<p>对最少数量的必要模块使用 loader。不应该如下:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>而是使用 <code>include</code> 字段仅将 loader 应用在实际需要将其转换的模块所处路径：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#引导时间-bootstrap-" id="引导时间-bootstrap-"></a>
<span class="text">引导时间(bootstrap)</span>
<a aria-label="引导时间(bootstrap)" class="icon-link" href="#引导时间-bootstrap-"></a>
</h3>
<p>每个额外的 loader/plugin 都有其启动时间。尽量少使用工具。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#解析" id="解析"></a>
<span class="text">解析</span>
<a aria-label="解析" class="icon-link" href="#解析"></a>
</h3>
<p>以下步骤可以提高解析速度:</p>
<ul>
<li>减少 <code>resolve.modules</code>, <code>resolve.extensions</code>, <code>resolve.mainFiles</code>, <code>resolve.descriptionFiles</code> 中 items 数量，因为他们会增加文件系统调用的次数。</li>
<li>如果你不使用 symlinks（例如 <code>npm link</code> 或者 <code>yarn link</code>），可以设置 <code>resolve.symlinks: false</code>。</li>
<li>如果你使用自定义 resolve plugin 规则，并且没有指定 context 上下文，可以设置 <code>resolve.cacheWithContext: false</code>。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#dll" id="dll"></a>
<span class="text">dll</span>
<a aria-label="dll" class="icon-link" href="#dll"></a>
</h3>
<p>使用 <code>DllPlugin</code> 为更改不频繁的代码生成单独编译结果。这可以提高应用程序的编译速度，尽管它确实增加了构建过程的复杂度。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#小即是快-smaller-faster-" id="小即是快-smaller-faster-"></a>
<span class="text">小即是快(smaller = faster)</span>
<a aria-label="小即是快(smaller = faster)" class="icon-link" href="#小即是快-smaller-faster-"></a>
</h3>
<p>减少编译结果的整体大小，以提高构建性能。尽量保持 chunk 体积小。</p>
<ul>
<li>使用数量更少/体积更小的 library。</li>
<li>在多页面应用程序中使用 <code>CommonsChunkPlugin</code>。</li>
<li>在多页面应用程序中使用 <code>CommonsChunkPlugin</code>，并开启 <code>async</code> 模式。</li>
<li>移除未引用代码。</li>
<li>只编译你当前正在开发的那些代码。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#worker-池-worker-pool-" id="worker-池-worker-pool-"></a>
<span class="text">worker 池(worker pool)</span>
<a aria-label="worker 池(worker pool)" class="icon-link" href="#worker-池-worker-pool-"></a>
</h3>
<p><code>thread-loader</code> 可以将非常消耗资源的 loader 分流给一个 worker pool。</p>
<blockquote class="warning"><div class="tip-content"> 不要使用太多的 worker，因为 Node.js 的 runtime 和 loader 都有启动开销。最小化 worker 和 main process(主进程) 之间的模块传输。进程间通讯(IPC, inter process communication)是非常消耗资源的。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#持久化缓存" id="持久化缓存"></a>
<span class="text">持久化缓存</span>
<a aria-label="持久化缓存" class="icon-link" href="#持久化缓存"></a>
</h3>
<p>使用 <code>cache-loader</code> 启用持久化缓存。使用 <code>package.json</code> 中的 <code>"postinstall"</code> 清除缓存目录。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#自定义-plugin-loader" id="自定义-plugin-loader"></a>
<span class="text">自定义 plugin/loader</span>
<a aria-label="自定义 plugin/loader" class="icon-link" href="#自定义-plugin-loader"></a>
</h3>
<p>这里不对它们的性能问题作过多赘述。</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#开发环境" id="开发环境"></a>
<span class="text">开发环境</span>
<a aria-label="开发环境" class="icon-link" href="#开发环境"></a>
</h2>
<p>以下步骤对于<em>开发环境</em>特别有帮助。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#增量编译" id="增量编译"></a>
<span class="text">增量编译</span>
<a aria-label="增量编译" class="icon-link" href="#增量编译"></a>
</h3>
<p>使用 webpack 的 watch mode(监听模式)。而不使用其他工具来 watch 文件和调用 webpack 。内置的 watch mode 会记录时间戳并将此信息传递给 compilation 以使缓存失效。</p>
<p>在某些配置环境中，watch mode 会回退到 poll mode(轮询模式)。监听许多文件会导致 CPU 大量负载。在这些情况下，可以使用 <code>watchOptions.poll</code> 来增加轮询的间隔。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在内存中编译" id="在内存中编译"></a>
<span class="text">在内存中编译</span>
<a aria-label="在内存中编译" class="icon-link" href="#在内存中编译"></a>
</h3>
<p>下面几个工具通过在内存中（而不是写入磁盘）编译和 serve 资源来提高性能：</p>
<ul>
<li><code>webpack-dev-server</code></li>
<li><code>webpack-hot-middleware</code></li>
<li><code>webpack-dev-middleware</code></li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#stats-tojson-加速" id="stats-tojson-加速"></a>
<span class="text">stats.toJson 加速</span>
<a aria-label="stats.toJson 加速" class="icon-link" href="#stats-tojson-加速"></a>
</h3>
<p>webpack 4 默认使用 <code>stats.toJson()</code> 输出大量数据。除非在增量步骤中做必要的统计，否则请避免获取 <code>stats</code> 对象的部分内容。<code>webpack-dev-server</code> 在 v3.1.3 以后的版本，包含一个重要的性能修复，即最小化每个增量构建步骤中，从 <code>stats</code> 对象获取的数据量。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#devtool" id="devtool"></a>
<span class="text">devtool</span>
<a aria-label="devtool" class="icon-link" href="#devtool"></a>
</h3>
<p>需要注意的是不同的 <code>devtool</code> 设置，会导致不同的性能差异。</p>
<ul>
<li><code>"eval"</code> 具有最好的性能，但并不能帮助你转译代码。</li>
<li>如果你能接受稍差一些的 map 质量，可以使用 <code>cheap-source-map</code> 变体配置来提高性能</li>
<li>使用 <code>eval-source-map</code> 变体配置进行增量编译。</li>
</ul>
<p>=&gt; 在大多数情况下，最佳选择是 <code>cheap-module-eval-source-map</code>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#避免在生产环境下才会用到的工具" id="避免在生产环境下才会用到的工具"></a>
<span class="text">避免在生产环境下才会用到的工具</span>
<a aria-label="避免在生产环境下才会用到的工具" class="icon-link" href="#避免在生产环境下才会用到的工具"></a>
</h3>
<p>某些 utility, plugin 和 loader 都只用于生产环境。例如，在开发环境下使用 <code>TerserPlugin</code> 来 minify(压缩) 和 mangle(混淆破坏) 代码是没有意义的。通常在开发环境下，应该排除以下这些工具：</p>
<ul>
<li><code>TerserPlugin</code></li>
<li><code>ExtractTextPlugin</code></li>
<li><code>[hash]</code>/<code>[chunkhash]</code></li>
<li><code>AggressiveSplittingPlugin</code></li>
<li><code>AggressiveMergingPlugin</code></li>
<li><code>ModuleConcatenationPlugin</code></li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#最小化-entry-chunk" id="最小化-entry-chunk"></a>
<span class="text">最小化 entry chunk</span>
<a aria-label="最小化 entry chunk" class="icon-link" href="#最小化-entry-chunk"></a>
</h3>
<p>webpack 只会在文件系统中生成已经更新的 chunk。某些配置选项（HMR, <code>output.chunkFilename</code> 的 <code>[name]</code>/<code>[chunkhash]</code>, <code>[hash]</code>）来说，除了对更新的 chunk 无效之外，对于 entry chunk 也不会生效。</p>
<p>确保在生成 entry chunk 时，尽量减少其体积以提高性能。下面的代码块将只提取包含 runtime 的 chunk，<em>其他 chunk 都作为其子 chunk</em>:</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'manifest'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token number">Infinity</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#避免额外的优化步骤" id="避免额外的优化步骤"></a>
<span class="text">避免额外的优化步骤</span>
<a aria-label="避免额外的优化步骤" class="icon-link" href="#避免额外的优化步骤"></a>
</h3>
<p>webpack 通过执行额外的算法任务，来优化输出结果的体积和加载性能。这些优化适用于小型代码库，但是在大型代码库中却非常耗费性能：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    removeAvailableModules<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    removeEmptyChunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    splitChunks<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#输出结果不携带路径信息" id="输出结果不携带路径信息"></a>
<span class="text">输出结果不携带路径信息</span>
<a aria-label="输出结果不携带路径信息" class="icon-link" href="#输出结果不携带路径信息"></a>
</h3>
<p>webpack 会在输出的 bundle 中生成路径信息。然而，在打包数千个模块的项目中，这会导致造成垃圾回收性能压力。在 <code>options.output.pathinfo</code> 设置中关闭：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    pathinfo<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#node-js-版本" id="node-js-版本"></a>
<span class="text">Node.js 版本</span>
<a aria-label="Node.js 版本" class="icon-link" href="#node-js-版本"></a>
</h3>
<p>最新稳定版本的 Node.js 及其 ES2015 <code>Map</code> 和 <code>Set</code> 实现，出现一些 <a href="https://github.com/nodejs/node/issues/19769">性能回退</a>。其修复版本已经合并到 master 分支，但是有些已经发布的正式版本无法应用到这些修复内容。同时，为了充分利用增量构建速度，请尝试使用 8.9.x 版本（8.9.10 - 9.11.1 之间的版本存在性能问题）。webpack 已经开始大量使用这些 ES2015 数据结构，因此选择这些版本也将改善初始构建时间。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#typescript-loader" id="typescript-loader"></a>
<span class="text">TypeScript loader</span>
<a aria-label="TypeScript loader" class="icon-link" href="#typescript-loader"></a>
</h3>
<p>现在，<code>ts-loader</code> 已经开始使用 TypeScript 内置 watch mode API，可以明显减少每次迭代时重新构建的模块数量。<code>experimentalWatchApi</code> 与普通 TypeScript watch mode 共享同样的逻辑，并且在开发环境使用时非常稳定。此外开启 <code>transpileOnly</code>，用于真正快速增量构建。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        transpileOnly<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        experimentalWatchApi<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>注意：<code>ts-loader</code> 文档建议使用 <code>cache-loader</code>，但是这实际上会由于使用硬盘写入而减缓增量构建速度。</p>
<p>为了重新获得类型检查，请使用 <a href="https://www.npmjs.com/package/fork-ts-checker-webpack-plugin"><code>ForkTsCheckerWebpackPlugin</code></a>。</p>
<p>ts-loader 的 github 仓库中有一个 <a href="https://github.com/TypeStrong/ts-loader/tree/master/examples/fast-incremental-builds">完整示例</a>。</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#生产环境" id="生产环境"></a>
<span class="text">生产环境</span>
<a aria-label="生产环境" class="icon-link" href="#生产环境"></a>
</h2>
<p>以下步骤对于<em>生产环境</em>特别有帮助。</p>
<blockquote class="warning"><div class="tip-content"> <strong>不要为了很小的性能收益，牺牲应用程序的质量！</strong>注意，在大多数情况下，优化代码质量比构建性能更重要。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#多个-compilation-编译时-" id="多个-compilation-编译时-"></a>
<span class="text">多个 compilation(编译时)</span>
<a aria-label="多个 compilation(编译时)" class="icon-link" href="#多个-compilation-编译时-"></a>
</h3>
<p>在进行多个 compilation 时，以下工具可以帮助到你：</p>
<ul>
<li><a href="https://github.com/trivago/parallel-webpack"><code>parallel-webpack</code></a>：它允许在 worker 池中运行 compilation。</li>
<li><code>cache-loader</code>：可以在多个 compilation 之间共享缓存。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#source-map" id="source-map"></a>
<span class="text">source map</span>
<a aria-label="source map" class="icon-link" href="#source-map"></a>
</h3>
<p>source map 相当消耗资源。你真的需要它们？</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#工具相关问题" id="工具相关问题"></a>
<span class="text">工具相关问题</span>
<a aria-label="工具相关问题" class="icon-link" href="#工具相关问题"></a>
</h2>
<p>下列工具存在某些可能会降低构建性能的问题：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#babel" id="babel"></a>
<span class="text">Babel</span>
<a aria-label="Babel" class="icon-link" href="#babel"></a>
</h3>
<ul>
<li>最小化项目中的 preset/plugins 数量。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#typescript" id="typescript"></a>
<span class="text">TypeScript</span>
<a aria-label="TypeScript" class="icon-link" href="#typescript"></a>
</h3>
<ul>
<li>在单独的进程中使用 <code>fork-ts-checker-webpack-plugin</code> 进行类型检查。</li>
<li>配置 loader 跳过类型检查。</li>
<li>使用 <code>ts-loader</code> 时，设置 <code>happyPackMode: true</code> / <code>transpileOnly: true</code>。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sass" id="sass"></a>
<span class="text">Sass</span>
<a aria-label="Sass" class="icon-link" href="#sass"></a>
</h3>
<ul>
<li><code>node-sass</code> 中有个来自 Node.js 线程池的阻塞线程的 bug。 当使用 <code>thread-loader</code> 时，需要设置 <code>workerParallelJobs: 2</code>。</li>
</ul>
</div>
<br/><h1>内容安全策略</h1>
<div><p>webpack 能够为其加载的所有脚本添加 <code>nonce</code>。要启用此功能，需要在引入的入口脚本中设置一个 <code>__webpack_nonce__</code> 变量。应该为每个唯一的页面视图生成和提供一个唯一的基于 hash 的 nonce，这就是为什么 <code>__webpack_nonce__</code> 要在入口文件中指定，而不是在配置中指定的原因。注意，<code>nonce</code> 应该是一个 base64 编码的字符串。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>在 entry 文件中：</p>
<pre><code class="lang-js"><span class="token comment">// ...</span>
__webpack_nonce__ <span class="token operator">=</span> <span class="token string">'c29tZSBjb29sIHN0cmluZyB3aWxsIHBvcCB1cCAxMjM='</span><span class="token punctuation">;</span>
<span class="token comment">// ...</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#启用-csp" id="启用-csp"></a>
<span class="text">启用 CSP</span>
<a aria-label="启用 CSP" class="icon-link" href="#启用-csp"></a>
</h2>
<p>注意，默认情况下不启用 CSP。需要与文档(document)一起发送相应的 <code>CSP</code> header 或 meta 标签 <code>&lt;meta http-equiv="Content-Security-Policy" ...&gt;</code>，以告知浏览器启用 CSP。以下是一个包含 CDN 白名单 URL 的 CSP header 的示例：</p>
<pre><code class="lang-http"><span class="token header-name keyword">Content-Security-Policy:</span> default-src 'self'; script-src 'self' https://trusted.cdn.com;
</code></pre>
<p>有关 CSP 和 <code>nonce</code> 属性的更多信息，请查看页面底部的<strong>进一步阅读</strong>部分。</p>
</div>
<br/><h1>开发 - Vagrant</h1>
<div><p>如果你在开发一个更加高级的项目，并且使用 <a href="https://www.vagrantup.com/">Vagrant</a> 来实现在虚拟机(Virtual Machine)上运行你的开发环境，那你可能会需要在虚拟机中运行 webpack。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置项目" id="配置项目"></a>
<span class="text">配置项目</span>
<a aria-label="配置项目" class="icon-link" href="#配置项目"></a>
</h2>
<p>首先，确保 <code>Vagrantfile</code> 拥有一个静态 IP。</p>
<pre><code class="lang-ruby"><span class="token constant">Vagrant</span><span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token string">"2"</span><span class="token punctuation">)</span> <span class="token keyword">do</span> <span class="token operator">|</span>config<span class="token operator">|</span>
  config<span class="token punctuation">.</span>vm<span class="token punctuation">.</span>network <span class="token symbol">:private_network</span><span class="token punctuation">,</span> ip<span class="token punctuation">:</span> <span class="token string">"10.10.10.61"</span>
<span class="token keyword">end</span>
</code></pre>
<p>然后，在项目中安装 webpack 和 webpack-dev-server。</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack webpack-dev-server
</code></pre>
<p>确保提供一个 <code>webpack.config.js</code> 配置文件。如果还没有准备，下面的示例代码可以作为起步的最简配置：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./app.js'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，创建一个 <code>index.html</code> 文件。其中的 <code>script</code> 标签应当指向你的 bundle。如果没有在配置中指定 <code>output.filename</code>，其默认值是 <code>bundle.js</code>。</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>!doctype</span> <span class="token attr-name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/bundle.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Heey!<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>注意，你还需要创建一个 <code>app.js</code> 文件。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#启动-server" id="启动-server"></a>
<span class="text">启动 server</span>
<a aria-label="启动 server" class="icon-link" href="#启动-server"></a>
</h2>
<p>现在，我们启动 server：</p>
<pre><code class="lang-bash">webpack-dev-server --host 0.0.0.0 --public 10.10.10.61:8080 --watch-poll
</code></pre>
<p>默认只允许从 localhost 访问 server。所以我们需要修改 <code>--host</code> 参数，以允许在我们的宿主 PC 上访问。</p>
<p>webpack-dev-server 会在 bundle 中引入一个脚本，此脚本连接到 WebSocket，这样可以在任何文件修改时，触发重新加载应用程序。
<code>--public</code> 标记可以确保脚本知道从哪里查找 WebSocket。默认情况下，server 会使用 <code>8080</code> 端口，因此也需要在这里指定。</p>
<p><code>--watch-poll</code> 可以确保 webpack 能够检测到文件更改。webpack 默认会监听文件系统触发的相关事件，但是 VirtualBox 使用默认配置会有许多问题。</p>
<p>现在 server 应该能够通过 <code>http://10.10.10.61:8080</code> 访问了。修改 <code>app.js</code>，应用程序就会实时重新加载。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配合-nginx-的高级用法" id="配合-nginx-的高级用法"></a>
<span class="text">配合 nginx 的高级用法</span>
<a aria-label="配合 nginx 的高级用法" class="icon-link" href="#配合-nginx-的高级用法"></a>
</h2>
<p>为了更好的模拟类生产环境(production-like environment)，还可以用 nginx 来代理 webpack-dev-server。</p>
<p>在你的 nginx 配置文件中，加入下面代码：</p>
<pre><code class="lang-nginx"><span class="token keyword">server</span> <span class="token punctuation">{</span>
  <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
    <span class="token keyword">proxy_pass</span> <span class="token keyword">http</span><span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token number">127.0</span><span class="token punctuation">.</span><span class="token number">0.1</span><span class="token punctuation">:</span><span class="token number">8080</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_http_version</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>
    <span class="token keyword">proxy_set_header</span> Connection <span class="token string">"upgrade"</span><span class="token punctuation">;</span>
    <span class="token keyword">error_page</span> <span class="token number">502</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">location</span> @start<span class="token operator">-</span>webpack<span class="token operator">-</span>dev<span class="token operator">-</span><span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">default_type</span> text<span class="token operator">/</span>plain<span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">502</span> <span class="token string">"Please start the webpack-dev-server first."</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><code>proxy_set_header</code> 这几行配置很重要，因为它们能够使 WebSocket 正常运行。</p>
<p>然后 webpack-dev-server 启动命令可以修改为：</p>
<pre><code class="lang-bash">webpack-dev-server --public 10.10.10.61 --watch-poll
</code></pre>
<p>现在只能通过 <code>127.0.0.1</code> 访问 server，这点关系不大，因为 ngnix 能够使得你的 PC 能访问到 server。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#结论" id="结论"></a>
<span class="text">结论</span>
<a aria-label="结论" class="icon-link" href="#结论"></a>
</h2>
<p>我们能够从静态 IP 访问 Vagrant box，然后使 webpack-dev-server 可以公开访问，以便浏览器可以访问到它。然后，我们解决了 VirtualBox 不发送到文件系统事件的常见问题，此问题会导致 server 无法重新加载文件更改。</p>
</div>
<br/><h1>管理依赖</h1>
<div><blockquote>
<p>es6 modules</p>
</blockquote>
<blockquote>
<p>commonjs</p>
</blockquote>
<blockquote>
<p>amd</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#带表达式的-require-语句" id="带表达式的-require-语句"></a>
<span class="text">带表达式的 require 语句</span>
<a aria-label="带表达式的 require 语句" class="icon-link" href="#带表达式的-require-语句"></a>
</h2>
<p>如果你的 request 含有表达式(expressions)，就会创建一个上下文(context)，因为在编译时(compile time)并不清楚<strong>具体</strong>导入哪个模块。</p>
<p>示例：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./template/'</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">'.ejs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>webpack 解析 <code>require()</code> 调用，然后提取出如下一些信息：</p>
<pre><code class="lang-code">Directory: ./template
Regular expression: /^.*\.ejs$/
</code></pre>
<p><strong>context module</strong></p>
<p>生成一个 context module(上下文模块)。它包含<strong>目录下的所有模块</strong>的引用，是通过一个 request 解析出来的正则表达式，去匹配目录下所有符合的模块，然后都 require 进来。此 context module 包含一个 map 对象，会把 request 中所有模块翻译成对应的模块 id。（译者注：request 参考 <a href="https://webpack.docschina.org/glossary/">概念术语</a> 文档）</p>
<p>示例：</p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  "./table.ejs"<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  "./table-row.ejs"<span class="token operator">:</span> <span class="token number">43</span><span class="token punctuation">,</span>
  "./directory/folder.ejs"<span class="token operator">:</span> <span class="token number">44</span>
<span class="token punctuation">}</span>
</code></pre>
<p>此 context module 还包含一些访问这个 map 对象的 runtime 逻辑。</p>
<p>这意味着 webpack 能够支持动态地 require，但会导致所有可能用到的模块都包含在 bundle 中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#require-context" id="require-context"></a>
<span class="text"><code>require.context</code></span>
<a aria-label="&lt;code&gt;require.context&lt;/code&gt;" class="icon-link" href="#require-context"></a>
</h2>
<p>你还可以通过 <code>require.context()</code> 函数来创建自己的 context。</p>
<p>可以给这个函数传入三个参数：一个要搜索的目录，一个标记表示是否还搜索其子目录，
以及一个匹配文件的正则表达式。</p>
<p>webpack 会在构建中解析代码中的 <code>require.context()</code> 。</p>
<p>语法如下：</p>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span>directory<span class="token punctuation">,</span> useSubdirectories <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> regExp <span class="token operator">=</span> <span class="token regex">/^\.\//</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>示例：</p>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token regex">/\.test\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// （创建出）一个 context，其中文件来自 test 目录，request 以 `.test.js` 结尾。</span>
</code></pre>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.stories\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// （创建出）一个 context，其中所有文件都来自父文件夹及其所有子级文件夹，request 以 `.stories.js` 结尾。</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 传递给 <code>require.context</code> 的参数必须是字面量(literal)！ </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#context-module-api" id="context-module-api"></a>
<span class="text">context module API</span>
<a aria-label="context module API" class="icon-link" href="#context-module-api"></a>
</h3>
<p>一个 context module 会导出一个（require）函数，此函数可以接收一个参数：request。</p>
<p>此导出函数有三个属性：<code>resolve</code>, <code>keys</code>, <code>id</code>。</p>
<ul>
<li><code>resolve</code> 是一个函数，它返回 request 被解析后得到的模块 id。</li>
<li><code>keys</code> 也是一个函数，它返回一个数组，由所有可能被此 context module 处理的请求（译者注：参考下面第二段代码中的 key）组成。</li>
</ul>
<p>如果想引入一个文件夹下面的所有文件，或者引入能匹配一个正则表达式的所有文件，这个功能就会很有帮助，例如：</p>
<pre><code class="lang-javascript"><span class="token keyword">function</span> importAll <span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="token keyword">var</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> importAll <span class="token punctuation">(</span>r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  r<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>key <span class="token operator">=</span><span class="token operator">&gt;</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">r</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">importAll</span><span class="token punctuation">(</span>require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在构建时(build-time)，所有被 require 的模块都会被填充到 cache 对象中。</span>
</code></pre>
<ul>
<li><code>id</code> 是 context module 里面所包含的模块 id. 它可能在你使用 <code>module.hot.accept</code> 时会用到。</li>
</ul>
</div>
<br/><h1>公共路径</h1>
<div><p><code>publicPath</code> 配置选项在各种场景中都非常有用。你可以通过它来指定应用程序中所有资源的基础路径。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>下面提供一些用于实际应用程序的示例，通过这些示例，此功能显得极其简单。实质上，发送到 <code>output.path</code> 目录的每个文件，都将从 <code>output.publicPath</code> 位置引用。这也包括（通过 <a href="/guides/code-splitting/">代码分离</a> 创建的）子 chunk 和作为依赖图一部分的所有其他资源（例如 image, font 等）。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#基于环境设置" id="基于环境设置"></a>
<span class="text">基于环境设置</span>
<a aria-label="基于环境设置" class="icon-link" href="#基于环境设置"></a>
</h3>
<p>在开发环境中，我们通常有一个 <code>assets/</code> 文件夹，它与索引页面位于同一级别。这没太大问题，但是，如果我们将所有静态资源托管至 CDN，然后想在生产环境中使用呢？</p>
<p>想要解决这个问题，可以直接使用一个有着悠久历史的 environment variable(环境变量)。假设我们有一个变量 <code>ASSET_PATH</code>：</p>
<pre><code class="lang-js"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>

<span class="token comment">// 尝试使用环境变量，否则使用根路径</span>
<span class="token keyword">const</span> ASSET_PATH <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>ASSET_PATH <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> ASSET_PATH
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// 这可以帮助我们在代码中安全地使用环境变量</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'process.env.ASSET_PATH'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>ASSET_PATH<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在运行时设置" id="在运行时设置"></a>
<span class="text">在运行时设置</span>
<a aria-label="在运行时设置" class="icon-link" href="#在运行时设置"></a>
</h3>
<p>另一个可能出现的情况是，需要在运行时设置 <code>publicPath</code>。webpack 暴露了一个名为 <code>__webpack_public_path__</code> 的全局变量。所以在应用程序的 entry point 中，可以直接如下设置：</p>
<pre><code class="lang-js">__webpack_public_path__ <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>ASSET_PATH<span class="token punctuation">;</span>
</code></pre>
<p>这些内容就是你所需要的。由于我们已经在配置中使用了 <code>DefinePlugin</code>，
<code>process.env.ASSET_PATH</code> 将始终都被定义，
因此我们可以安全地使用。</p>
<blockquote class="warning"><div class="tip-content"> 注意，如果在 entry 文件中使用 ES2015 module import，则会在 import 之后进行 <code>__webpack_public_path__</code> 赋值。在这种情况下，你必须将 public path 赋值移至一个专用模块中，然后将它的 import 语句放置到 entry.js 最上面： </div></blockquote><pre><code class="lang-js"><span class="token comment">// entry.js</span>
<span class="token keyword">import</span> <span class="token string">'./public-path'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./app'</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>集成</h1>
<div><p>首先，我们要消除一个常见的误解。webpack 是一个模块打包工具(module bundler)（例如，<a href="http://browserify.org/">Browserify</a> 或 <a href="http://brunch.io/">Brunch</a>）。而<em>不是一个任务执行工具(task runner)</em>（例如，<a href="https://www.gnu.org/software/make/">Make</a>, <a href="https://gruntjs.com/">Grunt</a> 或者 <a href="https://gulpjs.com/">Gulp</a> ）。任务执行工具用来自动化处理常见的开发任务，例如，lint(代码检测)、build(构建)、test(测试)。相比模块打包工具，任务执行工具则聚焦在偏重上层的问题上面。你仍然可以得益于这种用法：使用上层的工具，而将打包部分的问题留给 webpack。</p>
<p>打包工具帮助你取得准备用于部署的 JavaScript 和 stylesheet，将它们转换为适合浏览器的可用格式。例如，可以通过 <a href="/plugins/terser-webpack-plugin">压缩</a>、<a href="/guides/code-splitting">分离 chunk</a> 和 <a href="/guides/lazy-loading">惰性加载</a> 我们的 JavaScript 来提高性能。打包是 web 开发中最重要的挑战之一，解决此问题可以消除开发过程中的大部分痛点。</p>
<p>好的消息是，虽然有一些功能重叠，但是如果使用方式正确，任务运行工具和模块打包工具还是能够一起协同工作。本指南提供了关于如何将 webpack 与一些流行的任务运行工具集成在一起的高度概述。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#npm-scripts" id="npm-scripts"></a>
<span class="text">npm scripts</span>
<a aria-label="npm scripts" class="icon-link" href="#npm-scripts"></a>
</h2>
<p>通常 webpack 用户使用 npm <a href="https://docs.npmjs.com/misc/scripts"><code>scripts</code></a> 来作为任务执行工具。这是比较好的开始。然而跨平台支持可能是个问题，但是有几种解决方案。许多用户（但不是大多数用户）直接使用 npm <code>scripts</code> 和各种级别的 webpack 配置和工具。</p>
<p>因此，虽然 webpack 核心重点是打包，但是可以通过各种扩展，将它用于任务运行工具的常见工作。集成一个单独的工具会增加复杂度，因此在开始前一定要权衡利弊。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#grunt" id="grunt"></a>
<span class="text">Grunt</span>
<a aria-label="Grunt" class="icon-link" href="#grunt"></a>
</h2>
<p>对于那些使用 Grunt 的人，我们推荐使用 <a href="https://www.npmjs.com/package/grunt-webpack"><code>grunt-webpack</code></a> package。使用 <code>grunt-webpack</code> 你可以将 webpack 或 <a href="https://github.com/webpack/webpack-dev-server">webpack-dev-server</a> 作为一项任务(task)执行，访问 <a href="https://gruntjs.com/api/grunt.template">grunt template tags</a> 中的统计信息，拆分开发和生产配置等等。如果还没有安装 <code>grunt-webpack</code> 和 <code>webpack</code>，请先安装它们：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev grunt-webpack webpack
</code></pre>
<p>然后，注册一个配置并加载任务：</p>
<p><strong>Gruntfile.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./webpack.config.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>grunt<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  grunt<span class="token punctuation">.</span><span class="token function">initConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    webpack<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        stats<span class="token punctuation">:</span> <span class="token operator">!</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">||</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">===</span> <span class="token string">'development'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      prod<span class="token punctuation">:</span> webpackConfig<span class="token punctuation">,</span>
      dev<span class="token punctuation">:</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span> watch<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> webpackConfig<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  grunt<span class="token punctuation">.</span><span class="token function">loadNpmTasks</span><span class="token punctuation">(</span><span class="token string">'grunt-webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>获取更多信息，请查看 <a href="https://github.com/webpack-contrib/grunt-webpack">仓库</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#gulp" id="gulp"></a>
<span class="text">Gulp</span>
<a aria-label="Gulp" class="icon-link" href="#gulp"></a>
</h2>
<p>在 <a href="https://github.com/shama/webpack-stream"><code>webpack-stream</code></a> package（也称作 <code>gulp-webpack</code>） 的帮助下，可以相当直接地将 Gulp 与 webpack 集成。在这种情况下，不需要单独安装 <code>webpack</code>，因为它是 <code>webpack-stream</code> 直接依赖：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack-stream
</code></pre>
<p>只要将 <code>webpack</code> 替换为 <code>require('webpack-stream')</code>，并传递一个配置：</p>
<p><strong>gulpfile.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">var</span> gulp <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'gulp'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack-stream'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
gulp<span class="token punctuation">.</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token string">'default'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> gulp<span class="token punctuation">.</span><span class="token function">src</span><span class="token punctuation">(</span><span class="token string">'src/entry.js'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">webpack</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// 所有配置选项……</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>gulp<span class="token punctuation">.</span><span class="token function">dest</span><span class="token punctuation">(</span><span class="token string">'dist/'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>获取更多信息，请查看 <a href="https://github.com/shama/webpack-stream">仓库</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#mocha" id="mocha"></a>
<span class="text">Mocha</span>
<a aria-label="Mocha" class="icon-link" href="#mocha"></a>
</h2>
<p><a href="https://github.com/zinserjan/mocha-webpack"><code>mocha-webpack</code></a> 可以将 Mocha 与 webpack 完全集成。这个仓库提供了很多关于其优势和劣势的细节，基本上 <code>mocha-webpack</code> 只是一个简单封装，提供与 Mocha 几乎相同的 CLI，并提供各种 webpack 功能，例如改进了 watch mode 和改进了路径分析。这里是一个如何安装并使用它来运行测试套件的示例（在 <code>./test</code> 中找到）：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack mocha mocha-webpack
mocha-webpack <span class="token string">'test/**/*.js'</span>
</code></pre>
<p>获取更多信息，请查看 <a href="https://github.com/zinserjan/mocha-webpack">仓库</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#karma" id="karma"></a>
<span class="text">Karma</span>
<a aria-label="Karma" class="icon-link" href="#karma"></a>
</h2>
<p><a href="https://github.com/webpack-contrib/karma-webpack"><code>karma-webpack</code></a> package 允许你使用 webpack 预处理 <a href="http://karma-runner.github.io/1.0/index.html">Karma</a> 中的文件。它也可以使用 <a href="https://github.com/webpack/webpack-dev-middleware"><code>webpack-dev-middleware</code></a>，并允许传递两者的配置。下面是一个简单的示例：</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev webpack karma karma-webpack
</code></pre>
<p><strong>karma.conf.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  config<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    files<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> pattern<span class="token punctuation">:</span> 'test<span class="token comment">/*_test.js', watched: false },
      { pattern: 'test/**/</span><span class="token operator">*</span>_test<span class="token punctuation">.</span>js'<span class="token punctuation">,</span> watched<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    preprocessors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      'test<span class="token comment">/*_test.js': [ 'webpack' ],
      'test/**/</span><span class="token operator">*</span>_test<span class="token punctuation">.</span>js<span class="token string">': [ '</span>webpack' <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webpack<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 所有自定义的 webpack 配置……</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    webpackMiddleware<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 所有自定义的 webpack-dev-middleware 配置……</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>获取更多信息，请查看 <a href="https://github.com/webpack-contrib/karma-webpack">仓库</a>。</p>
</div>
<br/><h1>loader</h1>
<div><p>webpack 可以使用 <a href="/concepts/loaders">loader</a> 来预处理文件。这允许你打包除 JavaScript 之外的任何静态资源。你可以使用 Node.js 来很简单地编写自己的 loader。</p>
<p>loader 通过在 <code>require()</code> 语句中使用 <code>loadername!</code> 前缀来激活，或者通过 webpack 配置中的正则表达式来自动应用 - 查看<a href="/concepts/loaders#configuration">配置</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#文件" id="文件"></a>
<span class="text">文件</span>
<a aria-label="文件" class="icon-link" href="#文件"></a>
</h2>
<ul>
<li><a href="/loaders/raw-loader"><code>raw-loader</code></a> 加载文件原始内容（utf-8）</li>
<li><a href="/loaders/val-loader"><code>val-loader</code></a> 将代码作为模块执行，并将 exports 转为 JS 代码</li>
<li><a href="/loaders/url-loader"><code>url-loader</code></a> 像 file loader 一样工作，但如果文件小于限制，可以返回 <a href="https://tools.ietf.org/html/rfc2397">data URL</a></li>
<li><a href="/loaders/file-loader"><code>file-loader</code></a> 将文件发送到输出文件夹，并返回（相对）URL</li>
<li><a href="https://www.npmjs.com/package/ref-loader"><code>ref-loader</code></a> 手动创建所有文件之间的依赖关系</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#json" id="json"></a>
<span class="text">JSON</span>
<a aria-label="JSON" class="icon-link" href="#json"></a>
</h2>
<ul>
<li><a href="/loaders/json-loader"><code>json-loader</code></a> 加载 <a href="http://json.org/">JSON</a> 文件（默认包含）</li>
<li><a href="/loaders/json5-loader"><code>json5-loader</code></a> 加载和转译 <a href="https://json5.org/">JSON 5</a> 文件</li>
<li><code>cson-loader</code> 加载和转译 <a href="https://github.com/awnist/cson-loader">CSON</a> 文件</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#转译-transpiling-" id="转译-transpiling-"></a>
<span class="text">转译(transpiling)</span>
<a aria-label="转译(transpiling)" class="icon-link" href="#转译-transpiling-"></a>
</h2>
<ul>
<li><a href="/loaders/script-loader"><code>script-loader</code></a> 在全局上下文中执行一次 JavaScript 文件（如在 script 标签），不需要解析</li>
<li><a href="/loaders/babel-loader"><code>babel-loader</code></a> 加载 ES2015+ 代码，然后使用 <a href="https://babel.docschina.org/">Babel</a> 转译为 ES5</li>
<li><a href="https://github.com/sairion/buble-loader"><code>buble-loader</code></a> 使用 <a href="https://buble.surge.sh/guide/">Bublé</a> 加载 ES2015+ 代码，并且将代码转译为 ES5</li>
<li><a href="https://github.com/jupl/traceur-loader"><code>traceur-loader</code></a> 加载 ES2015+ 代码，然后使用 <a href="https://github.com/google/traceur-compiler#readme">Traceur</a> 转译为 ES5</li>
<li><a href="https://github.com/TypeStrong/ts-loader"><code>ts-loader</code></a> 或 <a href="https://github.com/s-panferov/awesome-typescript-loader"><code>awesome-typescript-loader</code></a> 像 JavaScript 一样加载 <a href="https://www.typescriptlang.org/">TypeScript</a> 2.0+</li>
<li><a href="/loaders/coffee-loader"><code>coffee-loader</code></a> 像 JavaScript 一样加载 <a href="http://coffeescript.org/">CoffeeScript</a></li>
<li><a href="https://github.com/fengari-lua/fengari-loader/"><code>fengari-loader</code></a> 使用 <a href="https://fengari.io/">fengari</a> 加载 Lua 代码</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#模板-templating-" id="模板-templating-"></a>
<span class="text">模板(templating)</span>
<a aria-label="模板(templating)" class="icon-link" href="#模板-templating-"></a>
</h2>
<ul>
<li><a href="/loaders/html-loader"><code>html-loader</code></a> 导出 HTML 为字符串，需要引用静态资源</li>
<li><a href="https://github.com/pugjs/pug-loader"><code>pug-loader</code></a> 加载 Pug 模板并返回一个函数</li>
<li><a href="https://github.com/peerigon/markdown-loader"><code>markdown-loader</code></a> 将 Markdown 转译为 HTML</li>
<li><a href="https://github.com/javiercf/react-markdown-loader"><code>react-markdown-loader</code></a> 使用 markdown-parse parser(解析器) 将 Markdown 编译为 React 组件</li>
<li><a href="https://github.com/posthtml/posthtml-loader"><code>posthtml-loader</code></a> 使用 <a href="https://github.com/posthtml/posthtml">PostHTML</a> 加载并转换 HTML 文件</li>
<li><a href="https://github.com/pcardune/handlebars-loader"><code>handlebars-loader</code></a> 将 Handlebars 转移为 HTML</li>
<li><a href="https://github.com/asnowwolf/markup-inline-loader"><code>markup-inline-loader</code></a> 将内联的 SVG/MathML 文件转换为 HTML。在应用于图标字体，或将 CSS 动画应用于 SVG 时非常有用。</li>
<li><a href="https://github.com/zimmo-be/twig-loader"><code>twig-loader</code></a> 编译 Twig 模板，然后返回一个函数</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#样式" id="样式"></a>
<span class="text">样式</span>
<a aria-label="样式" class="icon-link" href="#样式"></a>
</h2>
<ul>
<li><a href="/loaders/style-loader"><code>style-loader</code></a> 将模块的导出作为样式添加到 DOM 中</li>
<li><a href="/loaders/css-loader"><code>css-loader</code></a> 解析 CSS 文件后，使用 import 加载，并且返回 CSS 代码</li>
<li><a href="/loaders/less-loader"><code>less-loader</code></a> 加载和转译 LESS 文件</li>
<li><a href="/loaders/sass-loader"><code>sass-loader</code></a> 加载和转译 SASS/SCSS 文件</li>
<li><a href="/loaders/postcss-loader"><code>postcss-loader</code></a> 使用 <a href="http://postcss.org">PostCSS</a> 加载和转译 CSS/SSS 文件</li>
<li><a href="https://github.com/shama/stylus-loader"><code>stylus-loader</code></a> 加载和转译 Stylus 文件</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#代码检查和测试-linting-testing-" id="代码检查和测试-linting-testing-"></a>
<span class="text">代码检查和测试(linting &amp;&amp; testing)</span>
<a aria-label="代码检查和测试(linting &amp;&amp; testing)" class="icon-link" href="#代码检查和测试-linting-testing-"></a>
</h2>
<ul>
<li><a href="/loaders/mocha-loader"><code>mocha-loader</code></a> 使用 <a href="https://mochajs.org/">mocha</a> 测试（浏览器/NodeJS）</li>
<li><a href="https://github.com/webpack-contrib/eslint-loader"><code>eslint-loader</code></a> PreLoader，使用 <a href="https://eslint.org/">ESLint</a> 清理代码</li>
<li><a href="/loaders/jshint-loader"><code>jshint-loader</code></a> PreLoader，使用 <a href="http://jshint.com/about/">JSHint</a> 清理代码</li>
<li><a href="https://github.com/unindented/jscs-loader"><code>jscs-loader</code></a> PreLoader，使用 <a href="http://jscs.info/">JSCS</a> 检查代码样式</li>
<li><a href="/loaders/coverjs-loader"><code>coverjs-loader</code></a> PreLoader，使用 <a href="https://github.com/arian/CoverJS">CoverJS</a> 确定测试覆盖率</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#框架-frameworks-" id="框架-frameworks-"></a>
<span class="text">框架(frameworks)</span>
<a aria-label="框架(frameworks)" class="icon-link" href="#框架-frameworks-"></a>
</h2>
<ul>
<li><a href="https://github.com/vuejs/vue-loader"><code>vue-loader</code></a> 加载和转译 <a href="https://vuejs.org/v2/guide/components.html">Vue 组件</a></li>
<li><a href="https://github.com/webpack-contrib/polymer-webpack-loader"><code>polymer-loader</code></a> 使用选择预处理器(preprocessor)处理，并且 <code>require()</code> 类似一等模块(first-class)的 Web 组件</li>
<li><a href="https://github.com/TheLarkInn/angular2-template-loader"><code>angular2-template-loader</code></a> 加载和转译 <a href="https://angular.io/">Angular</a> 组件</li>
</ul>
<p><img alt="Awesome" src="../assets/awesome-badge.svg"/>
更多第三方 loader，查看 <a href="https://github.com/webpack-contrib/awesome-webpack#loaders">awesome-webpack</a> 列表。</p>
</div>
<br/><h1>babel-loader</h1>
<div><p>此 package 允许你使用 <a href="https://github.com/babel/babel">Babel</a> 和 <a href="https://github.com/webpack/webpack">webpack</a> 转译 <code>JavaScript</code> 文件。</p>
<p><strong>注意</strong>：请在 Babel <a href="https://github.com/babel/babel/issues">Issues</a> tracker 上报告输出时遇到的问题。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#中文文档" id="中文文档"></a>
<span class="text">中文文档</span>
<a aria-label="中文文档" class="icon-link" href="#中文文档"></a>
</h2>
<p><a href="https://babel.docschina.org" style="font-size: 24px;" target="_blank">Babel 中文文档</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<blockquote>
<p>webpack 4.x | babel-loader 8.x | babel 7.x</p>
</blockquote>
<pre><code class="lang-bash">npm <span class="token function">install</span> -D babel-loader @babel/core @babel/preset-env webpack
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>webpack 文档：<a href="https://webpack.js.org/loaders/">loaders</a></p>
<p>在 webpack 配置对象中，需要将 babel-loader 添加到 module 列表中，就像下面这样：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
      exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>查看 <code>babel</code> <a href="https://babel.docschina.org/docs/en/options">选项</a>。</p>
<p>你可以使用 <a href="https://webpack.js.org/configuration/module/#rule-options-rule-query"><code>options</code></a> 属性，来向 loader 传递 options 选项：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
      exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
          plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/plugin-proposal-object-rest-spread'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>此 loader 也支持下面这些 loader 特有的选项：</p>
<ul>
<li><p><code>cacheDirectory</code>：默认值为 <code>false</code>。当有设置时，指定的目录将用来缓存 loader 的执行结果。之后的 webpack 构建，将会尝试读取缓存，来避免在每次执行时，可能产生的、高性能消耗的 Babel 重新编译过程(recompilation process)。如果设置了一个空值 (<code>loader: 'babel-loader?cacheDirectory'</code>) 或者 <code>true</code> (<code>loader: 'babel-loader?cacheDirectory=true'</code>)，loader 将使用默认的缓存目录 <code>node_modules/.cache/babel-loader</code>，如果在任何根目录下都没有找到 <code>node_modules</code> 目录，将会降级回退到操作系统默认的临时文件目录。</p>
</li>
<li><p><code>cacheIdentifier</code>：默认是由 <code>@babel/core</code> 版本号，<code>babel-loader</code> 版本号，<code>.babelrc</code> 文件内容（存在的情况下），环境变量 <code>BABEL_ENV</code> 的值（没有时降级到 <code>NODE_ENV</code>）组成的一个字符串。可以设置为一个自定义的值，在 identifier 改变后，来强制缓存失效。</p>
</li>
<li><p><code>cacheCompression</code>：默认值为 <code>true</code>。当设置此值时，会使用 Gzip 压缩每个 Babel transform 输出。如果你想要退出缓存压缩，将它设置为 <code>false</code> -- 如果你的项目中有数千个文件需要压缩转译，那么设置此选项可能会从中收益。</p>
</li>
<li><p><code>customize</code>: 默认值为 <code>null</code>。导出 <code>custom</code> 回调函数的模块路径，<a href="#自定义-loader">例如传入 <code>.custom()</code> 的 callback 函数</a>。由于你必须创建一个新文件才能使用它，建议改为使用 <code>.custom</code> 来创建一个包装 loader。只有在你_必须_继续直接使用 <code>babel-loader</code> 但又想自定义的情况下，才使用这项配置。</p>
</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#疑难解答" id="疑难解答"></a>
<span class="text">疑难解答</span>
<a aria-label="疑难解答" class="icon-link" href="#疑难解答"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#babel-loader-很慢-" id="babel-loader-很慢-"></a>
<span class="text">babel-loader 很慢！</span>
<a aria-label="babel-loader 很慢！" class="icon-link" href="#babel-loader-很慢-"></a>
</h3>
<p>确保转译尽可能少的文件。你可能使用 <code>/\.m?js$/</code> 来匹配，这样也许会去转译 <code>node_modules</code> 目录或者其他不需要的源代码。</p>
<p>要排除 <code>node_modules</code>，参考文档中的 <code>loaders</code> 配置的 <code>exclude</code> 选项。</p>
<p>你也可以通过使用 <code>cacheDirectory</code> 选项，将 babel-loader 提速至少两倍。这会将转译的结果缓存到文件系统中。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#babel-在每个文件都插入了辅助代码-使代码体积过大-" id="babel-在每个文件都插入了辅助代码-使代码体积过大-"></a>
<span class="text">Babel 在每个文件都插入了辅助代码，使代码体积过大！</span>
<a aria-label="Babel 在每个文件都插入了辅助代码，使代码体积过大！" class="icon-link" href="#babel-在每个文件都插入了辅助代码-使代码体积过大-"></a>
</h3>
<p>Babel 对一些公共方法使用了非常小的辅助代码，比如 <code>_extend</code>。默认情况下会被添加到每一个需要它的文件中</p>
<p>你可以引入 Babel runtime 作为一个独立模块，来避免重复引入。</p>
<p>下面的配置禁用了 Babel 自动对每个文件的 runtime 注入，而是引入 <code>@babel/plugin-transform-runtime</code> 并且使所有辅助代码从这里引用。</p>
<p>更多信息请查看 <a href="https://babel.docschina.org/docs/en/babel-plugin-transform-runtime/">文档</a>。</p>
<p><strong>注意</strong>：你必须执行 <code>npm install -D @babel/plugin-transform-runtime</code> 来把它包含到你的项目中，然后使用 <code>npm install @babel/runtime</code> 把 <code>@babel/runtime</code> 安装为一个依赖。</p>
<pre><code class="lang-javascript">rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token comment">// 'transform-runtime' 插件告诉 Babel</span>
  <span class="token comment">// 要引用 runtime 来代替注入。</span>
  <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
    exclude<span class="token punctuation">:</span> <span class="token regex">/(node_modules|bower_components)/</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/preset-env'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#-注意-transform-runtime-和自定义-polyfills-例如-promise-library-" id="-注意-transform-runtime-和自定义-polyfills-例如-promise-library-"></a>
<span class="text"><strong>注意</strong>：transform-runtime 和自定义 polyfills (例如 Promise library)</span>
<a aria-label="&lt;strong&gt;注意&lt;/strong&gt;：transform-runtime 和自定义 polyfills (例如 Promise library)" class="icon-link" href="#-注意-transform-runtime-和自定义-polyfills-例如-promise-library-"></a>
</h4>
<p>由于 <a href="https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-runtime">@babel/plugin-transform-runtime</a> 包含了一个 polyfill，含有自定义的 <a href="https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js">regenerator-runtime</a> 和 <a href="https://github.com/zloirock/core-js">core-js</a>, 下面使用 <code>webpack.ProvidePlugin</code> 来配置 shimming 的常用方法将没有作用：</p>
<pre><code class="lang-javascript"><span class="token comment">// ...</span>
        <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string">'Promise'</span><span class="token punctuation">:</span> <span class="token string">'bluebird'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
</code></pre>
<p>下面这样的写法也没有作用：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/runtime/core-js/promise'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bluebird'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">;</span>
</code></pre>
<p>它其实会生成下面这样 (使用了 <code>runtime</code> 后)：</p>
<pre><code class="lang-javascript"><span class="token string">'use strict'</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> _Promise <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/runtime/core-js/promise'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/runtime/core-js/promise'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'default'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bluebird'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">_Promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>前面的 <code>Promise</code> library 在被覆盖前已经被引用和使用了。</p>
<p>一种可行的办法是，在你的应用程序中加入一个“引导(bootstrap)”步骤，在应用程序开始前先覆盖默认的全局变量。</p>
<pre><code class="lang-javascript"><span class="token comment">// bootstrap.js</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@babel/runtime/core-js/promise'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">default</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bluebird'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#babel-的-node-js-api-已经被移到-babel-core-中-原文-the-node-js-api-for-babel-has-been-moved-to-babel-core-" id="babel-的-node-js-api-已经被移到-babel-core-中-原文-the-node-js-api-for-babel-has-been-moved-to-babel-core-"></a>
<span class="text"><code>babel</code> 的 Node.js API 已经被移到 <code>babel-core</code> 中。（原文：The Node.js API for <code>babel</code> has been moved to <code>babel-core</code>.）</span>
<a aria-label="&lt;code&gt;babel&lt;/code&gt; 的 Node.js API 已经被移到 &lt;code&gt;babel-core&lt;/code&gt; 中。（原文：The Node.js API for &lt;code&gt;babel&lt;/code&gt; has been moved to &lt;code&gt;babel-core&lt;/code&gt;.）" class="icon-link" href="#babel-的-node-js-api-已经被移到-babel-core-中-原文-the-node-js-api-for-babel-has-been-moved-to-babel-core-"></a>
</h3>
<p>如果你收到这个信息，这说明你有一个已经安装的 <code>babel</code> npm package，并且在 webpack 配置中使用 loader 简写方式（在 webpack 2.x 版本中将不再支持这种方式）。</p>
<pre><code class="lang-javascript">  <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
    loader<span class="token punctuation">:</span> <span class="token string">'babel'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre>
<p>webpack 将尝试读取 <code>babel</code> package 而不是 <code>babel-loader</code>。</p>
<p>想要修复这个问题，你需要卸载 <code>babel</code> npm package，因为它在 Babel v6 中已经被废除。（安装 <code>@babel/cli</code> 或者 <code>@babel/core</code> 来替代它）
在另一种场景中，如果你的依赖于 <code>babel</code> 而无法删除它，可以在 webpack 配置中使用完整的 loader 名称来解决：</p>
<pre><code class="lang-javascript">  <span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.m?js$/</span><span class="token punctuation">,</span>
    loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#自定义-loader" id="自定义-loader"></a>
<span class="text">自定义 loader</span>
<a aria-label="自定义 loader" class="icon-link" href="#自定义-loader"></a>
</h2>
<p><code>babel-loader</code> 提供了一个 loader-builder 工具函数，
允许用户为 Babel 处理过的每个文件添加自定义处理选项。</p>
<p><code>.custom</code> 接收一个 callback 函数，
它将被调用，并传入 loader 中的 <code>babel</code> 实例，
因此，此工具函数才能够完全确保它使用与 loader 的 <code>@babel/core</code> 相同的实例。</p>
<p>如果你想自定义，但实际上某个文件又不想调用 <code>.custom</code>，
可以向 <code>customize</code> 选项传入一个字符串，
此字符串指向一个导出 <code>custom</code> 回调函数的文件。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h3>
<pre><code class="lang-js"><span class="token comment">// 从 "./my-custom-loader.js" 中导出，或者任何你想要的文件中导出。</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"babel-loader"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">custom</span><span class="token punctuation">(</span>babel <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      visitor<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token comment">// 传给 loader 的选项。</span>
    <span class="token function">customOptions</span><span class="token punctuation">(</span><span class="token punctuation">{</span> opt1<span class="token punctuation">,</span> opt2<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>loader <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取 loader 可能会有的自定义选项</span>
        custom<span class="token punctuation">:</span> <span class="token punctuation">{</span> opt1<span class="token punctuation">,</span> opt2 <span class="token punctuation">}</span><span class="token punctuation">,</span>

        <span class="token comment">// 传入"移除了两个自定义选项"后的选项</span>
        loader<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 提供 Babel 的 'PartialConfig' 对象</span>
    <span class="token function">config</span><span class="token punctuation">(</span>cfg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>cfg<span class="token punctuation">.</span><span class="token function">hasFilesystemConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 使用正常的配置</span>
        <span class="token keyword">return</span> cfg<span class="token punctuation">.</span>options<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>cfg<span class="token punctuation">.</span>options<span class="token punctuation">,</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">(</span>cfg<span class="token punctuation">.</span>options<span class="token punctuation">.</span>plugins <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

          <span class="token comment">// 在选项中包含自定义 plugin</span>
          myPlugin<span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">result</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>result<span class="token punctuation">,</span>
        code<span class="token punctuation">:</span> result<span class="token punctuation">.</span>code <span class="token operator">+</span> "\n<span class="token comment">// Generated by some custom loader",</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// 然后，在你的 webpack config 文件中</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ..</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      loader<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'my-custom-loader.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#customoptions-options-object-custom-object-loader-object-" id="customoptions-options-object-custom-object-loader-object-"></a>
<span class="text"><code>customOptions(options: Object): { custom: Object, loader: Object }</code></span>
<a aria-label="&lt;code&gt;customOptions(options: Object): { custom: Object, loader: Object }&lt;/code&gt;" class="icon-link" href="#customoptions-options-object-custom-object-loader-object-"></a>
</h3>
<p>指定的 loader 的选项，
从 <code>babel-loader</code> 选项中分离出自定义选项。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#config-cfg-partialconfig-object" id="config-cfg-partialconfig-object"></a>
<span class="text"><code>config(cfg: PartialConfig): Object</code></span>
<a aria-label="&lt;code&gt;config(cfg: PartialConfig): Object&lt;/code&gt;" class="icon-link" href="#config-cfg-partialconfig-object"></a>
</h3>
<p>指定的 Babel 的 <code>PartialConfig</code> 对象，
返回应该被传递给 <code>babel.transform</code> 的 <code>option</code> 对象。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#result-result-result-result" id="result-result-result-result"></a>
<span class="text"><code>result(result: Result): Result</code></span>
<a aria-label="&lt;code&gt;result(result: Result): Result&lt;/code&gt;" class="icon-link" href="#result-result-result-result"></a>
</h3>
<p>指定的 Babel 结果对象，允许 loaders 对它进行额外的调整。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://couto.mit-license.org/">MIT</a></p>
</div>
<br/><h1>yaml-frontmatter-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>YAML frontmatter loader for webpack. Converts YAML in files to JSON.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>yaml-frontmatter-loader</code>:</p>
<pre><code class="lang-console">$ npm install yaml-frontmatter-loader --save-dev
</code></pre>
<p>Then add the loader to your <code>webpack</code> config. For example:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'yaml-frontmatter-loader!./file.md'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; returns file.md as javascript object</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
         test<span class="token punctuation">:</span> <span class="token regex">/\.md$/</span><span class="token punctuation">,</span>
         use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'json-loader'</span><span class="token punctuation">,</span> <span class="token string">'yaml-frontmatter-loader'</span> <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/yaml-frontmatter-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="" yaml-frontmatter-loader="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>cache-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>The <code>cache-loader</code> allow to Caches the result of following loaders on disk (default) or in the database.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>To begin, you'll need to install <code>cache-loader</code>:</p>
<pre><code class="lang-console">npm install --save-dev cache-loader
</code></pre>
<p>在一些性能开销较大的 loader 之前添加此 loader，以将结果缓存到磁盘里。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.ext$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'cache-loader'</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>loaders<span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>⚠️ 请注意，保存和读取这些缓存文件会有一些时间开销，所以请只对性能开销较大的 loader 使用此 loader。</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>cacheContext</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows you to override the default cache context in order to generate the cache relatively to a path. By default it will use absolute paths
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>cacheKey</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function(options, request) -&gt; {String}}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows you to override default cache key generator
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>cacheDirectory</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>path.resolve('.cache-loader')</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Provide a cache directory where cache items should be stored (used for default read/write implementation)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>cacheIdentifier</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>cache-loader:{version} {process.env.NODE_ENV}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Provide an invalidation identifier which is used to generate the hashes. You can use it for extra dependencies of loaders (used for default read/write implementation)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>write</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function(cacheKey, data, callback) -&gt; {void}}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows you to override default write cache data to file (e.g. Redis, memcached)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>read</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function(cacheKey, callback) -&gt; {void}}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows you to override default read cache data from file
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>readOnly</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows you to override default value and make the cache read only (useful for some environments where you don't want the cache to be updated, only read from it)
    </div>
</div></div>
</div>
</div>
</div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#basic" id="basic"></a>
<span class="text">Basic</span>
<a aria-label="Basic" class="icon-link" href="#basic"></a>
</h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'cache-loader'</span><span class="token punctuation">,</span> <span class="token string">'babel-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#database-integration" id="database-integration"></a>
<span class="text">Database Integration</span>
<a aria-label="Database Integration" class="icon-link" href="#database-integration"></a>
</h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token comment">// Or different database client - memcached, mongodb, ...</span>
<span class="token keyword">const</span> redis <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'redis'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> crypto <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...</span>
<span class="token comment">// connect to client</span>
<span class="token comment">// ...</span>

<span class="token keyword">const</span> BUILD_CACHE_TIMEOUT <span class="token operator">=</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">3600</span><span class="token punctuation">;</span> <span class="token comment">// 1 day</span>

<span class="token keyword">function</span> <span class="token function">digest</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> crypto
    <span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md5'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Generate own cache key</span>
<span class="token keyword">function</span> <span class="token function">cacheKey</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`build:cache:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">digest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Read data from database and parse them</span>
<span class="token keyword">function</span> <span class="token function">read</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  client<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Key </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> not found`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> data <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">callback</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Write data to database under cacheKey</span>
<span class="token keyword">function</span> <span class="token function">write</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> data<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  client<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'EX'</span><span class="token punctuation">,</span> BUILD_CACHE_TIMEOUT<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'cache-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              cacheKey<span class="token punctuation">,</span>
              read<span class="token punctuation">,</span>
              write<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/cache-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/cache-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>coffee-loader</h1>
<div><p>就像加载 JavaScript 那样，加载 <a href="https://coffeescript.org/">CoffeeScript</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev coffee-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">import</span> coffee <span class="token keyword">from</span> <span class="token string">'coffee-loader!./file.coffee'</span><span class="token punctuation">;</span>
</code></pre>
<p>##</p>
<pre><code class="lang-js"><span class="token keyword">import</span> coffee <span class="token keyword">from</span> <span class="token string">'file.coffee'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.coffee$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'coffee-loader'</span> <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">默认</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>literate</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        在 markdown （代码块）中启用 CoffeeScript，例如 <code>file.coffee.md</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>transpile</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        提供 Babel 预设(preset)和插件(plugin)
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#literate" id="literate"></a>
<span class="text"><a href="http://coffeescript.org/#literate"><code>Literate</code></a></span>
<a aria-label="&lt;a href=" coffeescript.org="" http:=""><code>Literate</code></a>" class="icon-link" href="#literate"&gt;
      </h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.coffee.md$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'coffee-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span> literate<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemaps" id="sourcemaps"></a>
<span class="text"><code>Sourcemaps</code></span>
<a aria-label="&lt;code&gt;Sourcemaps&lt;/code&gt;" class="icon-link" href="#sourcemaps"></a>
</h3>
<p>source maps 总是产生。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#transpile" id="transpile"></a>
<span class="text"><a href="https://coffeescript.org/#transpilation"><code>Transpile</code></a></span>
<a aria-label="&lt;a href=" coffeescript.org="" https:=""><code>Transpile</code></a>" class="icon-link" href="#transpile"&gt;
      </h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.coffee$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'coffee-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              transpile<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                presets<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'env'</span><span class="token punctuation">]</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>coffee-redux-loader</h1>
<div><p>Coffee Script Redux loader for Webpack.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D coffee-redux-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<pre><code class="lang-javascript"><span class="token keyword">var</span> exportsOfFile <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"coffee-redux-loader!./file.coffee"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// =&gt; return exports of executed and compiled file.coffee</span>
</code></pre>
<p>如果你想要在 node 运行环境中使用，不要忘了 polyfill <code>require</code>。
请查看 <code>webpack</code> 文档。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>config-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>DEPRECATED. <code>webpack-command</code> is also deprecated. Please use <code>webpack-cli</code>. If any features were not implemented in <code>webpack-cli</code> feel free to create issue. </p>
<p>Why deprecated <code>webpack-command</code> ?</p>
<ul>
<li><code>webpack-cli</code> is very stable and have more features.</li>
<li>Two CLIs are misleading for developers.</li>
<li>Hard to maintain two package with same purpose.</li>
<li>The author stopped developing the package.</li>
<li>Most of the features are already implemented in <code>webpack-cli</code>.</li>
</ul>
<p>Thanks for using <code>webpack</code>! We apologize for the inconvenience. In the future, we will avoid such situations.</p>
<hr/>
<p>A webpack configuration loader.</p>
<p>This module utilizes <a href="https://github.com/davidtheclark/cosmiconfig"><code>cosmiconfig</code></a>
which supports declaring a webpack configuration in a number of different file
formats including; <code>.webpackrc</code>, <code>webpack.config.js</code>, and a <code>webpack</code> property
in a <code>package.json</code>.</p>
<p><code>config-loader</code> supports configuration modules which export an <code>Object</code>, <code>Array</code>,
<code>Function</code>, <code>Promise</code>, and <code>Function</code> which returns a <code>Promise</code>.</p>
<p>The module also validates found configurations against webpack's options schema
to ensure that the configuration is correct before webpack attempts to use it.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>config-loader</code>:</p>
<pre><code class="lang-console">$ npm install @webpack-contrib/config-loader --save-dev
</code></pre>
<p>And get straight to loading a config:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-contrib/config-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">loader</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token comment">// result = { config: Object, configPath: String }</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#extending-configuration-files" id="extending-configuration-files"></a>
<span class="text">Extending Configuration Files</span>
<a aria-label="Extending Configuration Files" class="icon-link" href="#extending-configuration-files"></a>
</h2>
<p>This module supports extending webpack configuration files with
<a href="https://eslint.org/docs/user-guide/configuring#extending-configuration-files">ESLint-style</a>
<code>extends</code> functionality. This feature allows users to create a "base" config and
in essence, "inherit" from that base config in a separate config. A bare-bones
example:</p>
<pre><code class="lang-js"><span class="token comment">// base.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'base'</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span> <span class="token string">'base-config.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'dev'</span>
</code></pre>
<p>The resulting configuration object would resemble:</p>
<pre><code class="lang-js"><span class="token comment">// result</span>
<span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'dev'</span><span class="token punctuation">,</span>
  mode<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>webpack.config.js</code> file will be intelligently extended with properties
from <code>base.config.js</code>.</p>
<p>The <code>extends</code> property also supports naming installed NPM modules which export
webpack configurations. Various configuration properties can also be filtered in
different ways based on need.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/config-loader/master/docs/EXTENDS.md">Read More about Extending Configuration Files</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#gotchas" id="gotchas"></a>
<span class="text">Gotchas</span>
<a aria-label="Gotchas" class="icon-link" href="#gotchas"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#function-config-parameters" id="function-config-parameters"></a>
<span class="text">Function-Config Parameters</span>
<a aria-label="Function-Config Parameters" class="icon-link" href="#function-config-parameters"></a>
</h3>
<p>When using a configuration file that exports a <code>Function</code>, users of <code>webpack-cli</code>
have become accustom to the function signature:</p>
<pre><code><span class="token keyword">function</span> config <span class="token punctuation">(</span>env, argv<span class="token punctuation">)</span>
</code></pre><p><code>webpack-cli</code> provides any CLI flags prefixed with <code>--env</code> as a single object in
the <code>env</code> parameter, which is an unnecessary feature.
<a href="https://en.wikipedia.org/wiki/Environment_variable#Syntax">Environment Variables</a>
have long served the same purpose, and are easily accessible within a
<a href="https://nodejs.org/api/process.html#process_process_env">Node environment</a>.</p>
<p>As such, <code>config-loader</code> does not call <code>Function</code> configs with the <code>env</code>
parameter. Rather, it makes calls with only the <code>argv</code> parameter.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extending-configuration-files-in-symlinked-modules" id="extending-configuration-files-in-symlinked-modules"></a>
<span class="text">Extending Configuration Files in Symlinked Modules</span>
<a aria-label="Extending Configuration Files in Symlinked Modules" class="icon-link" href="#extending-configuration-files-in-symlinked-modules"></a>
</h3>
<p>When using <code>extends</code> to extend a configuration which exists in a different package, care must be taken to ensure you don't hit module resolution issues if you are developing with these packages with symlinks (i.e. with <code>npm link</code> or <code>yarn link</code>).</p>
<p>By default, Node.js does not search for modules through symlinks, and so you may experience errors such as:</p>
<p><code>module not found: Error: Can't resolve 'webpack-hot-client/client'</code></p>
<p>This can be fixed by using Node's <code>--preserve-symlinks</code> flag which will allow you to develop cross-module, without experiencing inconsistencies when comparing against a normal, non-linked install:</p>
<p>For webpack-command:</p>
<pre><code class="lang-console">node --preserve-symlinks ./node_modules/.bin/wp
</code></pre>
<p>For webpack-serve:</p>
<pre><code class="lang-console">node --preserve-symlinks ./node_modules/.bin/webpack-serve
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#supported-compilers" id="supported-compilers"></a>
<span class="text">Supported Compilers</span>
<a aria-label="Supported Compilers" class="icon-link" href="#supported-compilers"></a>
</h2>
<p>This module can support non-standard JavaScript file formats when a compatible
compiler is registered via the <code>require</code> option. If the option is defined,
<code>config-loader</code> will attempt to require the specified module(s) before the
target config is found and loaded.</p>
<p>As such, <code>config-loader</code> will also search for the following file extensions;
<code>.js</code>, <code>.es6</code>, <code>.flow</code>, <code>.mjs</code>, and <code>.ts</code>.</p>
<p>The module is also tested with the following compilers:</p>
<ul>
<li><a href="https://github.com/babel/babel/tree/6.x/packages/babel-register"><code>babel-register</code></a></li>
<li><a href="https://github.com/flowtype/flow-remove-types"><code>flow-remove-types/register</code></a></li>
<li><a href="https://www.npmjs.com/package/ts-node"><code>ts-node/register</code></a></li>
</ul>
<p><em>Note: Compilers are not part of or built-into this module. To use a specific compiler, you
must install it and specify its use by using the <code>--require</code> CLI flag.</em></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#api" id="api"></a>
<span class="text">API</span>
<a aria-label="API" class="icon-link" href="#api"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#loader-options-" id="loader-options-"></a>
<span class="text">loader([options])</span>
<a aria-label="loader([options])" class="icon-link" href="#loader-options-"></a>
</h3>
<p>Returns a <code>Promise</code>, which resolves with an <code>Object</code> containing:</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#config" id="config"></a>
<span class="text"><code>config</code></span>
<a aria-label="&lt;code&gt;config&lt;/code&gt;" class="icon-link" href="#config"></a>
</h4>
<p>Type: <code>Object</code></p>
<p>Contains the actual configuration object.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#configpath" id="configpath"></a>
<span class="text"><code>configPath</code></span>
<a aria-label="&lt;code&gt;configPath&lt;/code&gt;" class="icon-link" href="#configpath"></a>
</h4>
<p>Type: <code>String</code></p>
<p>Contains the full, absolute filesystem path to the configuration file.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#allowmissing" id="allowmissing"></a>
<span class="text"><code>allowMissing</code></span>
<a aria-label="&lt;code&gt;allowMissing&lt;/code&gt;" class="icon-link" href="#allowmissing"></a>
</h4>
<p>Type: <code>Boolean</code><br/>Default: <code>false</code></p>
<p>Instructs the module to allow a missing config file, and returns an <code>Object</code>
with empty <code>config</code> and <code>configPath</code> properties in the event a config file was
not found.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#configpath" id="configpath"></a>
<span class="text"><code>configPath</code></span>
<a aria-label="&lt;code&gt;configPath&lt;/code&gt;" class="icon-link" href="#configpath"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>undefined</code></p>
<p>Specifies an absolute path to a valid configuration file on the filesystem.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cwd" id="cwd"></a>
<span class="text"><code>cwd</code></span>
<a aria-label="&lt;code&gt;cwd&lt;/code&gt;" class="icon-link" href="#cwd"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>process.cwd()</code></p>
<p>Specifies an filesystem path from which point <code>config-loader</code> will begin looking
for a configuration file.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require" id="require"></a>
<span class="text"><code>require</code></span>
<a aria-label="&lt;code&gt;require&lt;/code&gt;" class="icon-link" href="#require"></a>
</h3>
<p>Type: <code>String | Array[String]</code>
Default: <code>undefined</code></p>
<p>Specifies compiler(s) to use when loading modules from files containing the
configuration. For example:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@webpack-contrib/config-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> require<span class="token punctuation">:</span> <span class="token string">'ts-node/register'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">loader</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre>
<p>See
<a href="https://github.com/webpack-contrib/config-loader#supported-compilers">Supported Compilers</a>
for more information.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#schema" id="schema"></a>
<span class="text"><code>schema</code></span>
<a aria-label="&lt;code&gt;schema&lt;/code&gt;" class="icon-link" href="#schema"></a>
</h3>
<p>Type: <code>Object</code>
Default: <code>undefined</code></p>
<p>An object containing a valid
<a href="http://json-schema.org/latest/json-schema-validation.html">JSON Schema Definition</a>.</p>
<p>By default, <code>config-loader</code> validates your webpack config against the
<a href="https://github.com/webpack/webpack/blob/master/schemas/WebpackOptions.json">webpack config schema</a>.
However, it can be useful to append additional schema data to allow configs,
which contain properties not present in the webpack schema, to pass validation.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/config-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></span>
<a .github="" aria-label="&lt;a href=" config-loader="" contributing.md="" https:="" master="" raw.githubusercontent.com="" webpack-contrib="">CONTRIBUTING</a>" class="icon-link" href="#contributing"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/config-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" config-loader="" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>coverjs-loader</h1>
<div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<pre><code class="lang-javascript">webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token string">"mocha!./cover-my-client-tests.js"</span> <span class="token operator">--</span>options webpackOptions<span class="token punctuation">.</span>js
</code></pre>
<pre><code class="lang-javascript"><span class="token comment">// webpackOptions.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 你的 webpack options</span>
    output<span class="token punctuation">:</span> <span class="token string">"bundle.js"</span><span class="token punctuation">,</span>
    publicPrefix<span class="token punctuation">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
    debug<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    includeFilenames<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    watch<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

    <span class="token comment">// 绑定 coverjs loader</span>
    postLoaders<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">,</span> <span class="token comment">// 所有文件</span>
        exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token string">"node_modules.chai"</span><span class="token punctuation">,</span>
            <span class="token string">"node_modules.coverjs-loader"</span><span class="token punctuation">,</span>
            <span class="token string">"node_modules.webpack.buildin"</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"coverjs-loader"</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-javascript"><span class="token comment">// cover-my-client-tests.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./my-client-tests"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"cover-loader"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reportHtml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>参考示例 <a href="https://github.com/webpack/the-big-test">the-big-test</a>。</p>
<p>这是一个独立的 loader，你不必一定把它和 mocha loader 结合一起使用。如果你想 cover 一个普通的项目，也可以直接使用它。<code>reportHtml</code> 方法会把输出内容添加到 body 中。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p>MIT (<a href="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</a>)</p>
</div>
<br/><h1>css-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>The <code>css-loader</code> interprets <code>@import</code> and <code>url()</code> like <code>import/require()</code> and will resolve them.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>To begin, you'll need to install <code>css-loader</code>:</p>
<pre><code class="lang-console">npm install --save-dev css-loader
</code></pre>
<p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> css <span class="token keyword">from</span> <span class="token string">'file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>对于这些引用资源，你应该在配置中指定的，比较合适的 loader 是 <a href="/loaders/file-loader/">file-loader</a> 和 <a href="/loaders/url-loader/">url-loader</a>（查看<a href="https://github.com/webpack-contrib/css-loader#assets">如下设置</a>）。</p>
<p>And run <code>webpack</code> via your preferred method.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#tostring" id="tostring"></a>
<span class="text"><code>toString</code></span>
<a aria-label="&lt;code&gt;toString&lt;/code&gt;" class="icon-link" href="#tostring"></a>
</h3>
<p>你也可以直接将 css-loader 的结果作为字符串使用，例如 Angular 的组件样式。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'to-string-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或者</p>
<pre><code class="lang-js"><span class="token keyword">const</span> css <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test.css'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// {String}</span>
</code></pre>
<p>如果有 SourceMap，它们也将包含在字符串结果中。</p>
<p>如果由于某种原因，你需要将 CSS 提取为纯粹的字符串资源
（即不包含在 JS 模块中），
则可能需要查看 <a href="https://github.com/peerigon/extract-loader">extract-loader</a>。
例如，当你需要将 CSS 作为字符串进行后处理时，这很有用。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'handlebars-loader'</span><span class="token punctuation">,</span> <span class="token comment">// handlebars loader expects raw resource string</span>
          <span class="token string">'extract-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">默认值</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#url"><code>url</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean|Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用/禁用 <code>url()</code> 处理
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#import"><code>import</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean\/Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用/禁用 @import 处理
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#modules"><code>modules</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean\/Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用/禁用 CSS 模块和设置模式
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#localidentname"><code>localIdentName</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>[hash:base64]</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        配置生成资源的标识符名称
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#context"><code>context</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Allow to redefine basic loader context for local ident name
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#hashprefix"><code>hashPrefix</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Allow to add custom hash to generate more unique classes
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#getlocalident"><code>getLocalIdent</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Configure the function to generate classname based on a different schema
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#sourcemap"><code>sourceMap</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用/禁用 sourcemap
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#camelcase"><code>camelCase</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean|String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        以驼峰式命名导出类名
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#importloaders"><code>importLoaders</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Number}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>0</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        在 css-loader 前应用的 loader 的数量
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><a href="#exportonlylocals"><code>exportOnlyLocals</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Export only locals
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#url" id="url"></a>
<span class="text"><code>url</code></span>
<a aria-label="&lt;code&gt;url&lt;/code&gt;" class="icon-link" href="#url"></a>
</h3>
<p>类型：<code>Boolean|Function</code>
默认：<code>true</code></p>
<p>Control <code>url()</code> resolving. Absolute URLs and root-relative URLs are not resolving.</p>
<p>Examples resolutions:</p>
<pre><code>url<span class="token punctuation">(</span>image.png<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span><span class="token string">'image.png'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span>./image.png<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span><span class="token string">'http://dontwritehorriblecode.com/2112.png'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'http://dontwritehorriblecode.com/2112.png'</span><span class="token punctuation">)</span>
image-set<span class="token punctuation">(</span>url<span class="token punctuation">(</span><span class="token string">'image2x.png'</span><span class="token punctuation">)</span> 1x, url<span class="token punctuation">(</span><span class="token string">'image1x.png'</span><span class="token punctuation">)</span> 2x<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./image1x.png'</span><span class="token punctuation">)</span> and require<span class="token punctuation">(</span><span class="token string">'./image2x.png'</span><span class="token punctuation">)</span>
</code></pre><p>To import assets from a <code>node_modules</code> path (include <code>resolve.modules</code>) and for <code>alias</code>, prefix it with a <code>~</code>:</p>
<pre><code>url<span class="token punctuation">(</span>~module/image.png<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'module/image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span><span class="token string">'~module/image.png'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'module/image.png'</span><span class="token punctuation">)</span>
url<span class="token punctuation">(</span>~aliasDirectory/image.png<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'otherDirectory/image.png'</span><span class="token punctuation">)</span>
</code></pre><h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable <code>url()</code> resolving.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          url<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p>Allow to filter <code>url()</code>. All filtered <code>url()</code> will not be resolved (left in the code as they were written).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          url<span class="token punctuation">:</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> resourcePath<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// resourcePath - path to css file</span>

            <span class="token comment">// `url()` with `img.png` stay untouched</span>
            <span class="token keyword">return</span> url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'img.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#import" id="import"></a>
<span class="text"><code>import</code></span>
<a aria-label="&lt;code&gt;import&lt;/code&gt;" class="icon-link" href="#import"></a>
</h3>
<p>类型：<code>Boolean</code>
默认：<code>true</code></p>
<p>Control <code>@import</code> resolving. Absolute urls in <code>@import</code> will be moved in runtime code.</p>
<p>Examples resolutions:</p>
<pre><code>@import <span class="token string">'style.css'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span>style.css<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span><span class="token string">'style.css'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import <span class="token string">'./style.css'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span>./style.css<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'./style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span><span class="token string">'http://dontwritehorriblecode.com/style.css'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> @import url<span class="token punctuation">(</span><span class="token string">'http://dontwritehorriblecode.com/style.css'</span><span class="token punctuation">)</span> <span class="token keyword">in</span> runtime
</code></pre><p>To import styles from a <code>node_modules</code> path (include <code>resolve.modules</code>) and for <code>alias</code>, prefix it with a <code>~</code>:</p>
<pre><code>@import url<span class="token punctuation">(</span>~module/style.css<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'module/style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span><span class="token string">'~module/style.css'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'module/style.css'</span><span class="token punctuation">)</span>
@import url<span class="token punctuation">(</span>~aliasDirectory/style.css<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> require<span class="token punctuation">(</span><span class="token string">'otherDirectory/style.css'</span><span class="token punctuation">)</span>
</code></pre><h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable <code>@import</code> resolving.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">import</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p>Allow to filter <code>@import</code>. All filtered <code>@import</code> will not be resolved (left in the code as they were written).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token keyword">import</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>parsedImport<span class="token punctuation">,</span> resourcePath<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// parsedImport.url - url of `@import`</span>
            <span class="token comment">// parsedImport.media - media query of `@import`</span>
            <span class="token comment">// resourcePath - path to css file</span>

            <span class="token comment">// `@import` with `style.css` stay untouched</span>
            <span class="token keyword">return</span> parsedImport<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'style.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#modules" id="modules"></a>
<span class="text"><a href="https://github.com/css-modules/css-modules"><code>modules</code></a></span>
<a aria-label="&lt;a href=" css-modules="" github.com="" https:=""><code>modules</code></a>" class="icon-link" href="#modules"&gt;
      </h3>
<p>类型：<code>Boolean|String</code>
默认：<code>false</code></p>
<p>The <code>modules</code> option enables/disables the <strong>CSS Modules</strong> spec and setup basic behaviour.</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>true</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Enables local scoped CSS by default (use <strong>local</strong> mode by default)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>false</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Disable the <strong>CSS Modules</strong> spec, all <strong>CSS Modules</strong> features (like <code>@value</code>, <code>:local</code>, <code>:global</code> and <code>composes</code>) will not work
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>'local'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Enables local scoped CSS by default (same as <code>true</code> value)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>'global'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Enables global scoped CSS by default
    </div>
</div></div>
</div>
</div>
</div><p>Using <code>false</code> value increase performance because we avoid parsing <strong>CSS Modules</strong> features, it will be useful for developers who use vanilla css or use other technologies.</p>
<p>You can read about <strong>modes</strong> below.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#scope" id="scope"></a>
<span class="text"><code>Scope</code></span>
<a aria-label="&lt;code&gt;Scope&lt;/code&gt;" class="icon-link" href="#scope"></a>
</h5>
<p>Using <code>local</code> value requires you to specify <code>:global</code> classes.
Using <code>global</code> value requires you to specify <code>:local</code> classes.</p>
<p>You can find more information <a href="https://github.com/css-modules/css-modules">here</a>.</p>
<p>Styles can be locally scoped to avoid globally scoping styles.</p>
<p>语法 <code>:local(.className)</code> 可以被用来在局部作用域中声明 <code>className</code>。局部的作用域标识符会以模块形式暴露出去。</p>
<p>使用 <code>:local</code>（无括号）可以为此选择器启用局部模式。
<code>:global(.className)</code> 可以用来声明一个明确的全局选择器。
使用 <code>:global</code>（无括号）可以将此选择器切换至全局模式。</p>
<p>loader 会用唯一的标识符(identifier)来替换局部选择器。所选择的唯一标识符以模块形式暴露出去。</p>
<pre><code class="lang-css"><span class="token selector"><span class="token pseudo-class">:local(.className)</span> </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token pseudo-class">:local</span> <span class="token class">.className</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token pseudo-class">:local(.className .subClass)</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token pseudo-class">:local</span> <span class="token class">.className</span> <span class="token class">.subClass</span> <span class="token pseudo-class">:global(.global-class-name)</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-css"><span class="token selector"><span class="token class">._23_aKvs-b8bW2Vg3fwHozO</span> </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">._23_aKvs-b8bW2Vg3fwHozO</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">._23_aKvs-b8bW2Vg3fwHozO</span> <span class="token class">._13LGdX8RMStbBE9w-t0gZ1</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> green<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector"><span class="token class">._23_aKvs-b8bW2Vg3fwHozO</span> <span class="token class">._13LGdX8RMStbBE9w-t0gZ1</span> <span class="token class">.global-class-name</span> </span><span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>ℹ️ 主要信息: 标识符被导出</p>
</blockquote>
<pre><code class="lang-js">exports<span class="token punctuation">.</span>locals <span class="token operator">=</span> <span class="token punctuation">{</span>
  className<span class="token punctuation">:</span> <span class="token string">'_23_aKvs-b8bW2Vg3fwHozO'</span><span class="token punctuation">,</span>
  subClass<span class="token punctuation">:</span> <span class="token string">'_13LGdX8RMStbBE9w-t0gZ1'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>建议局部选择器使用驼峰式。它们在导入 JS 模块中更容易使用。</p>
<p>你可以使用 <code>:local(#someId)</code>，但不推荐这种用法。推荐使用 class 代替 id。</p>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#composing" id="composing"></a>
<span class="text"><code>Composing</code></span>
<a aria-label="&lt;code&gt;Composing&lt;/code&gt;" class="icon-link" href="#composing"></a>
</h5>
<p>当声明一个局部类名时，你可以与另一个局部类名组合为一个局部类。</p>
<pre><code class="lang-css"><span class="token selector"><span class="token pseudo-class">:local(.className)</span> </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token pseudo-class">:local(.subClass)</span> </span><span class="token punctuation">{</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> className<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>这不会导致 CSS 本身的任何更改，而是导出多个类名。</p>
<pre><code class="lang-js">exports<span class="token punctuation">.</span>locals <span class="token operator">=</span> <span class="token punctuation">{</span>
  className<span class="token punctuation">:</span> <span class="token string">'_23_aKvs-b8bW2Vg3fwHozO'</span><span class="token punctuation">,</span>
  subClass<span class="token punctuation">:</span> <span class="token string">'_13LGdX8RMStbBE9w-t0gZ1 _23_aKvs-b8bW2Vg3fwHozO'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-css"><span class="token selector"><span class="token class">._23_aKvs-b8bW2Vg3fwHozO</span> </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector"><span class="token class">._13LGdX8RMStbBE9w-t0gZ1</span> </span><span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#importing" id="importing"></a>
<span class="text"><code>Importing</code></span>
<a aria-label="&lt;code&gt;Importing&lt;/code&gt;" class="icon-link" href="#importing"></a>
</h5>
<p>从其他模块导入局部类名。</p>
<pre><code class="lang-css"><span class="token selector"><span class="token pseudo-class">:local(.continueButton)</span> </span><span class="token punctuation">{</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> button from <span class="token string">'library/button.css'</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-css"><span class="token selector"><span class="token pseudo-class">:local(.nameEdit)</span> </span><span class="token punctuation">{</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> edit highlight from <span class="token string">'./edit.css'</span><span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>要从多个模块导入，请使用多个 <code>composes:</code> 规则。</p>
<pre><code class="lang-css"><span class="token selector"><span class="token pseudo-class">:local(.className)</span> </span><span class="token punctuation">{</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> edit hightlight from <span class="token string">'./edit.css'</span><span class="token punctuation">;</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> button from <span class="token string">'module/button.css'</span><span class="token punctuation">;</span>
  <span class="token property">composes</span><span class="token punctuation">:</span> classFromThisModule<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#localidentname" id="localidentname"></a>
<span class="text"><code>localIdentName</code></span>
<a aria-label="&lt;code&gt;localIdentName&lt;/code&gt;" class="icon-link" href="#localidentname"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>[hash:base64]</code></p>
<p>You can configure the generated ident with the <code>localIdentName</code> query parameter.
See <a href="https://github.com/webpack/loader-utils#interpolatename">loader-utils's documentation</a> for more information on options.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          localIdentName<span class="token punctuation">:</span> <span class="token string">'[path][name]__[local]--[hash:base64:5]'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>undefined</code></p>
<p>Allow to redefine basic loader context for local ident name.
By default we use <code>rootContext</code> of loader.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          context<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'context'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#hashprefix" id="hashprefix"></a>
<span class="text"><code>hashPrefix</code></span>
<a aria-label="&lt;code&gt;hashPrefix&lt;/code&gt;" class="icon-link" href="#hashprefix"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>undefined</code></p>
<p>Allow to add custom hash to generate more unique classes.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          hashPrefix<span class="token punctuation">:</span> <span class="token string">'hash'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#getlocalident" id="getlocalident"></a>
<span class="text"><code>getLocalIdent</code></span>
<a aria-label="&lt;code&gt;getLocalIdent&lt;/code&gt;" class="icon-link" href="#getlocalident"></a>
</h3>
<p>类型：<code>Function</code>
默认：<code>undefined</code></p>
<p>You can also specify the absolute path to your custom <code>getLocalIdent</code> function to generate classname based on a different schema.
By default we use built-in function to generate a classname.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          getLocalIdent<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">,</span> localIdentName<span class="token punctuation">,</span> localName<span class="token punctuation">,</span> options<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'whatever_random_class_name'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>类型：<code>Boolean</code>
默认：<code>false</code></p>
<p>设置 <code>sourceMap</code> 选项查询参数来引入 source map。</p>
<p>例如，<code>mini-css-extract-plugin</code> 能够处理它们。</p>
<p>默认情况下不启用它们，因为它们会导致运行时的额外开销，并增加了 bundle 大小 (JS source map 不会)。此外，相对路径是错误的，你需要使用包含服务器 URL 的绝对公用路径。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#camelcase" id="camelcase"></a>
<span class="text"><code>camelCase</code></span>
<a aria-label="&lt;code&gt;camelCase&lt;/code&gt;" class="icon-link" href="#camelcase"></a>
</h3>
<p>类型：<code>Boolean|String</code>
默认：<code>false</code></p>
<p>默认情况下，导出 JSON 键值对形式的类名。如果想要驼峰化(camelize)类名（有助于在 JS 中使用），通过设置 css-loader 的查询参数 <code>camelCase</code> 即可实现。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>false</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Class names will be camelized, the original class name will not to be removed from the locals
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>true</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        类名将被骆驼化
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>'dashes'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        只有类名中的破折号将被骆驼化
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>'only'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        在 <code>0.27.1</code> 中加入。类名将被骆驼化，初始类名将从局部移除
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>'dashesOnly'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        在 <code>0.27.1</code> 中加入。类名中的破折号将被骆驼化，初始类名将从局部移除
    </div>
</div></div>
</div>
</div>
</div><p><strong>file.css</strong></p>
<pre><code class="lang-css"><span class="token selector"><span class="token class">.class-name</span> </span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> className <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          camelCase<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#importloaders" id="importloaders"></a>
<span class="text"><code>importLoaders</code></span>
<a aria-label="&lt;code&gt;importLoaders&lt;/code&gt;" class="icon-link" href="#importloaders"></a>
</h3>
<p>类型：<code>Number</code>
默认：<code>0</code></p>
<p>查询参数 <code>importLoaders</code>，用于配置「<code>css-loader</code> 作用于 <code>@import</code> 的资源之前」有多少个 loader。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              importLoaders<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// 0 =&gt; no loaders (default); 1 =&gt; postcss-loader; 2 =&gt; postcss-loader, sass-loader</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>在模块系统（即 webpack）支持原始 loader 匹配后，此功能可能在将来会发生变化。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exportonlylocals" id="exportonlylocals"></a>
<span class="text"><code>exportOnlyLocals</code></span>
<a aria-label="&lt;code&gt;exportOnlyLocals&lt;/code&gt;" class="icon-link" href="#exportonlylocals"></a>
</h3>
<p>类型：<code>Boolean</code>
默认：<code>false</code></p>
<p>Export only locals (<strong>useful</strong> when you use <strong>css modules</strong>).
For pre-rendering with <code>mini-css-extract-plugin</code> you should use this option instead of <code>style-loader!css-loader</code> <strong>in the pre-rendering bundle</strong>.
It doesn't embed CSS but only exports the identifier mappings.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          exportOnlyLocals<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#资源" id="资源"></a>
<span class="text">资源</span>
<a aria-label="资源" class="icon-link" href="#资源"></a>
</h3>
<p>以下 <code>webpack.config.js</code> 可以加载 CSS 文件，将小体积 PNG/JPG/GIF/SVG 图像转为像字体那样的 <a href="https://tools.ietf.org/html/rfc2397">Data URL</a> 嵌入，并复制较大的文件到输出目录。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'style-loader'</span><span class="token punctuation">,</span> <span class="token string">'css-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif|svg|eot|ttf|woff|woff2)$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          limit<span class="token punctuation">:</span> <span class="token number">10000</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#提取" id="提取"></a>
<span class="text">提取</span>
<a aria-label="提取" class="icon-link" href="#提取"></a>
</h3>
<p>对于生产环境构建，建议从 bundle 中提取 CSS，以便之后可以并行加载 CSS/JS 资源。</p>
<ul>
<li><p>可以通过使用 <a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> 来实现，在生产环境模式运行中提取 CSS。</p>
</li>
<li><p>As an alternative, if seeking better development performance and css outputs that mimic production. <a href="https://github.com/faceyspacey/extract-css-chunks-webpack-plugin">extract-css-chunks-webpack-plugin</a> offers a hot module reload friendly, extended version of mini-css-extract-plugin. HMR real CSS files in dev, works like mini-css in non-dev</p>
</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/css-loader/master/.github/CONTRIBUTING.md">贡献指南</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/css-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>eslint-loader</h1>
<div><blockquote>
<p>eslint loader for webpack</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#install" id="install"></a>
<span class="text">Install</span>
<a aria-label="Install" class="icon-link" href="#install"></a>
</h2>
<pre><code class="lang-console">$ npm install eslint-loader --save-dev
</code></pre>
<p><strong>NOTE</strong>: You also need to install <code>eslint</code> from npm, if you haven't already:</p>
<pre><code class="lang-console">$ npm install eslint --save-dev
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h2>
<p>In your webpack configuration</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// eslint options (if necessary)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>When using with transpiling loaders (like <code>babel-loader</code>), make sure they are in correct order
(bottom to top). Otherwise files will be checked after being processed by <code>babel-loader</code></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"babel-loader"</span><span class="token punctuation">,</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>To be safe, you can use <code>enforce: "pre"</code> section to check source files, not modified
by other loaders (like <code>babel-loader</code>)</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        enforce<span class="token punctuation">:</span> <span class="token string">"pre"</span><span class="token punctuation">,</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"babel-loader"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h3>
<p>You can pass <a href="http://eslint.org/docs/developer-guide/nodejs-api#cliengine">eslint options</a>
using standard webpack <a href="https://webpack.js.org/configuration/module/#useentry">loader options</a>.</p>
<p>Note that the config option you provide will be passed to the <code>CLIEngine</code>.
This is a different set of options than what you'd specify in <code>package.json</code> or <code>.eslintrc</code>.
See the <a href="http://eslint.org/docs/developer-guide/nodejs-api#cliengine">eslint docs</a> for more detail.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#fix-default-false-" id="fix-default-false-"></a>
<span class="text"><code>fix</code> (default: false)</span>
<a aria-label="&lt;code&gt;fix&lt;/code&gt; (default: false)" class="icon-link" href="#fix-default-false-"></a>
</h4>
<p>This option will enable
<a href="http://eslint.org/docs/user-guide/command-line-interface#fix">ESLint autofix feature</a>.</p>
<p><strong>Be careful: this option will change source files.</strong></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#cache-default-false-" id="cache-default-false-"></a>
<span class="text"><code>cache</code> (default: false)</span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt; (default: false)" class="icon-link" href="#cache-default-false-"></a>
</h4>
<p>This option will enable caching of the linting results into a file.
This is particularly useful in reducing linting time when doing a full build.</p>
<p>This can either be a <code>boolean</code> value or the cache directory path(ex: <code>'./.eslint-loader-cache'</code>).</p>
<p>If <code>cache: true</code> is used, the cache file is written to the <code>./node_modules/.cache</code> directory.
This is the recommended usage.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#formatter-default-eslint-stylish-formatter-" id="formatter-default-eslint-stylish-formatter-"></a>
<span class="text"><code>formatter</code> (default: eslint stylish formatter)</span>
<a aria-label="&lt;code&gt;formatter&lt;/code&gt; (default: eslint stylish formatter)" class="icon-link" href="#formatter-default-eslint-stylish-formatter-"></a>
</h4>
<p>Loader accepts a function that will have one argument: an array of eslint messages (object).
The function must return the output as a string.
You can use official eslint formatters.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token comment">// several examples !</span>

          <span class="token comment">// default value</span>
          formatter<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint/lib/formatters/stylish"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

          <span class="token comment">// community formatter</span>
          formatter<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint-friendly-formatter"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

          <span class="token comment">// custom formatter</span>
          formatter<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// `results` format is available here</span>
            <span class="token comment">// http://eslint.org/docs/developer-guide/nodejs-api.html#executeonfiles()</span>

            <span class="token comment">// you should return a string</span>
            <span class="token comment">// DO NOT USE console.*() directly !</span>
            <span class="token keyword">return</span> <span class="token string">"OUTPUT"</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#eslintpath-default-eslint-" id="eslintpath-default-eslint-"></a>
<span class="text"><code>eslintPath</code> (default: "eslint")</span>
<a aria-label='&lt;code&gt;eslintPath&lt;/code&gt; (default: "eslint")' class="icon-link" href="#eslintpath-default-eslint-"></a>
</h4>
<p>Path to <code>eslint</code> instance that will be used for linting.<br/>If the <code>eslintPath</code> is a folder like a official eslint, or specify a <code>formatter</code> option. now you dont have to install <code>eslint</code> .</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          eslintPath<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"reusable-eslint"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#errors-and-warning" id="errors-and-warning"></a>
<span class="text">Errors and Warning</span>
<a aria-label="Errors and Warning" class="icon-link" href="#errors-and-warning"></a>
</h4>
<p><strong>By default the loader will auto adjust error reporting depending
on eslint errors/warnings counts.</strong>
You can still force this behavior by using <code>emitError</code> <strong>or</strong> <code>emitWarning</code> options:</p>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#emiterror-default-false-" id="emiterror-default-false-"></a>
<span class="text"><code>emitError</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;emitError&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#emiterror-default-false-"></a>
</h5>
<p>Loader will always return errors if this option is set to <code>true</code>.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          emitError<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#emitwarning-default-false-" id="emitwarning-default-false-"></a>
<span class="text"><code>emitWarning</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;emitWarning&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#emitwarning-default-false-"></a>
</h5>
<p>Loader will always return warnings if option is set to <code>true</code>. If you're using hot module replacement, you may wish to enable this in development, or else updates will be skipped when there's an eslint error.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#quiet-default-false-" id="quiet-default-false-"></a>
<span class="text"><code>quiet</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;quiet&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#quiet-default-false-"></a>
</h4>
<p>Loader will process and report errors only and ignore warnings if this option is set to true</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          quiet<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#failonwarning-default-false-" id="failonwarning-default-false-"></a>
<span class="text"><code>failOnWarning</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;failOnWarning&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#failonwarning-default-false-"></a>
</h5>
<p>Loader will cause the module build to fail if there are any eslint warnings.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          failOnWarning<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#failonerror-default-false-" id="failonerror-default-false-"></a>
<span class="text"><code>failOnError</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;failOnError&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#failonerror-default-false-"></a>
</h5>
<p>Loader will cause the module build to fail if there are any eslint errors.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          failOnError<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#outputreport-default-false-" id="outputreport-default-false-"></a>
<span class="text"><code>outputReport</code> (default: <code>false</code>)</span>
<a aria-label="&lt;code&gt;outputReport&lt;/code&gt; (default: &lt;code&gt;false&lt;/code&gt;)" class="icon-link" href="#outputreport-default-false-"></a>
</h5>
<p>Write the output of the errors to a file, for example a checkstyle xml file for use for reporting on Jenkins CI</p>
<p>The <code>filePath</code> is relative to the webpack config: output.path
You can pass in a different formatter for the output file, if none is passed in the default/configured formatter will be used</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">"..."</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">"eslint-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          outputReport<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            filePath<span class="token punctuation">:</span> <span class="token string">"checkstyle.xml"</span><span class="token punctuation">,</span>
            formatter<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"eslint/lib/formatters/checkstyle"</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#gotchas" id="gotchas"></a>
<span class="text">Gotchas</span>
<a aria-label="Gotchas" class="icon-link" href="#gotchas"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#noerrorsplugin" id="noerrorsplugin"></a>
<span class="text">NoErrorsPlugin</span>
<a aria-label="NoErrorsPlugin" class="icon-link" href="#noerrorsplugin"></a>
</h3>
<p><code>NoErrorsPlugin</code> prevents webpack from outputting anything into a bundle. So even ESLint warnings
will fail the build. No matter what error settings are used for <code>eslint-loader</code>.</p>
<p>So if you want to see ESLint warnings in console during development using <code>WebpackDevServer</code>
remove <code>NoErrorsPlugin</code> from webpack config.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#defining-configfile-or-using-eslint-c-path-eslintrc" id="defining-configfile-or-using-eslint-c-path-eslintrc"></a>
<span class="text">Defining <code>configFile</code> or using <code>eslint -c path/.eslintrc</code></span>
<a aria-label="Defining &lt;code&gt;configFile&lt;/code&gt; or using &lt;code&gt;eslint -c path/.eslintrc&lt;/code&gt;" class="icon-link" href="#defining-configfile-or-using-eslint-c-path-eslintrc"></a>
</h3>
<p>Bear in mind that when you define <code>configFile</code>, <code>eslint</code> doesn't automatically look for
<code>.eslintrc</code> files in the directory of the file to be linted.
More information is available in official eslint documentation in section <a href="http://eslint.org/docs/user-guide/configuring#using-configuration-files"><em>Using Configuration Files</em></a>.
See <a href="https://github.com/webpack-contrib/eslint-loader/issues/129">#129</a>.</p>
<hr/>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#changelog" id="changelog"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/eslint-loader/master/CHANGELOG.md">Changelog</a></span>
<a aria-label="&lt;a href=" changelog.md="" eslint-loader="" https:="" master="" raw.githubusercontent.com="" webpack-contrib="">Changelog</a>" class="icon-link" href="#changelog"&gt;
      </h2>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/eslint-loader/master/LICENSE">License</a></span>
<a aria-label="&lt;a href=" eslint-loader="" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">License</a>" class="icon-link" href="#license"&gt;
      </h2>
</div>
<br/><h1>exports-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>exports loader module for webpack</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>exports-loader</code>:</p>
<pre><code class="lang-console">$ npm install exports-loader --save-dev
</code></pre>
<p>Then add the loader to the desired <code>require</code> calls. For example:</p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'exports-loader?file,parse=helpers.parse!./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// adds the following code to the file's source:</span>
<span class="token comment">//  exports['file'] = file;</span>
<span class="token comment">//  exports['parse'] = helpers.parse;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'exports-loader?file!./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// adds the following code to the file's source:</span>
<span class="token comment">//  module.exports = file;</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'exports-loader?[name]!./file.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// adds the following code to the file's source:</span>
<span class="token comment">//  module.exports = file;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/exports-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></span>
<a .github="" aria-label="&lt;a href=" contributing.md="" exports-loader="" https:="" master="" raw.githubusercontent.com="" webpack-contrib="">CONTRIBUTING</a>" class="icon-link" href="#contributing"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/exports-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" exports-loader="" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>expose-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>expose loader module for webpack</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>expose-loader</code>:</p>
<pre><code class="lang-console">$ npm install expose-loader --save-dev
</code></pre>
<p>Then add the loader to your <code>webpack</code> config. For example:</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.js/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`expose-loader`</span></span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>options<span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And then require the target file in your bundle's code:</p>
<pre><code class="lang-js"><span class="token comment">// src/entry.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"expose-loader?libraryName!./thing.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<p>例如，假设你要将 jQuery 暴露至全局并称为 <code>$</code>：</p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"expose-loader?$!jquery"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，<code>window.$</code> 就可以在浏览器控制台中使用。</p>
<p>或者，你可以通过配置文件来设置：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'expose-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token string">'$'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>除了暴露为 <code>window. $</code> 之外，假设你还想把它暴露为 <code>window.jQuery</code>。
对于多个暴露，你可以在 loader 字符串中使用 <code>!</code>：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'expose-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token string">'jQuery'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'expose-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token string">'$'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><a href="https://nodejs.org/api/modules.html#modules_require_resolve_request_options"><code>require.resolve</code></a> 调用是一个 Node.js 函数
（与 webpack 处理流程中的 <code>require.resolve</code> 无关）。
<code>require.resolve</code> 用来获取模块的绝对路径
（<code>"/.../app/node_modules/react/react.js"</code>）。
所以这里的暴露只会作用于 React 模块。
并且只在 bundle 中使用到它时，才进行暴露。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/expose-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></span>
<a .github="" aria-label="&lt;a href=" contributing.md="" expose-loader="" https:="" master="" raw.githubusercontent.com="" webpack-contrib="">CONTRIBUTING</a>" class="icon-link" href="#contributing"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/expose-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" expose-loader="" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>extract-loader</h1>
<div><h1 class="header">
<a aria-hidden="true" class="anchor" href="#extract-loader" id="extract-loader"></a>
<span class="text">extract-loader</span>
<a aria-label="extract-loader" class="icon-link" href="#extract-loader"></a>
</h1>
<p><strong>webpack loader to extract HTML and CSS from the bundle.</strong></p>
<p><a href="https://www.npmjs.com/package/extract-loader"><img alt="" src="https://img.shields.io/npm/v/extract-loader.svg"/></a>
<a href="https://www.npmjs.com/package/extract-loader"><img alt="" src="https://img.shields.io/npm/dm/extract-loader.svg"/></a>
<a href="https://david-dm.org/peerigon/extract-loader"><img alt="Dependency Status" src="https://david-dm.org/peerigon/extract-loader.svg"/></a>
<a href="https://travis-ci.org/peerigon/extract-loader"><img alt="Build Status" src="https://travis-ci.org/peerigon/extract-loader.svg?branch=master"/></a>
<a href="https://coveralls.io/r/peerigon/extract-loader?branch=master"><img alt="Coverage Status" src="https://img.shields.io/coveralls/peerigon/extract-loader.svg"/></a></p>
<p>The extract-loader evaluates the given source code on the fly and returns the result as string. Its main use-case is to resolve urls within HTML and CSS coming from their respective loaders. Use the <a href="/loaders/file-loader/">file-loader</a> to emit the extract-loader's result as separate file.</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> stylesheetUrl <span class="token keyword">from</span> <span class="token string">"file-loader!extract-loader!css-loader!main.css"</span><span class="token punctuation">;</span>
<span class="token comment">// stylesheetUrl will now be the hashed url to the final stylesheet</span>
</code></pre>
<p>The extract-loader works similar to the <a href="/plugins/extract-text-webpack-plugin/">extract-text-webpack-plugin</a> and the <a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> and is meant as a lean alternative to it. When evaluating the source code, it provides a fake context which was especially designed to cope with the code generated by the <a href="/loaders/html-loader/">html-</a> or the <a href="/loaders/css-loader/">css-loader</a>. Thus it might not work in other situations.</p>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#installation" id="installation"></a>
<span class="text">Installation</span>
<a aria-label="Installation" class="icon-link" href="#installation"></a>
</h2>
<p><code>npm install extract-loader</code></p>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<p>##</p>
<p>Bundling CSS with webpack has some nice advantages like referencing images and fonts with hashed urls or <a href="https://webpack.js.org/concepts/hot-module-replacement">hot module replacement</a> in development. In production, on the other hand, it's not a good idea to apply your stylesheets depending on JS execution. Rendering may be delayed or even a <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC</a> might be visible. Thus it's still better to have them as separate files in your final production build.</p>
<p>With the extract-loader, you are able to reference your <code>main.css</code> as regular <code>entry</code>. The following <code>webpack.config.js</code> shows how to load your styles with the <a href="/loaders/style-loader/">style-loader</a> in development and as separate file in production.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pathToMainCss <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./app/main.css"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> loaders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> <span class="token string">"production"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        loaders<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>
            <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
            <span class="token string">"extract-loader"</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        loaders<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span><span class="token string">"style-loader"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        mode<span class="token punctuation">,</span>
        entry<span class="token punctuation">:</span> pathToMainCss<span class="token punctuation">,</span>
        module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    test<span class="token punctuation">:</span> pathToMainCss<span class="token punctuation">,</span>
                    loaders<span class="token punctuation">:</span> loaders
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extracting-the-index-html" id="extracting-the-index-html"></a>
<span class="text"><a href="https://github.com/peerigon/extract-loader/tree/master/examples/index-html">Extracting the index.html</a></span>
<a aria-label="&lt;a href=" examples="" extract-loader="" github.com="" https:="" index-html="" master="" peerigon="" tree="">Extracting the index.html</a>" class="icon-link" href="#extracting-the-index-html"&gt;
      </h3>
<p>You can even add your <code>index.html</code> as <code>entry</code> and just reference your stylesheets from there. You just need to tell the html-loader to also pick up <code>link:href</code>:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> mode <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> pathToMainJs <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./app/main.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> pathToIndexHtml <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./app/index.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        mode<span class="token punctuation">,</span>
        entry<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            pathToMainJs<span class="token punctuation">,</span>
            pathToIndexHtml
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                    test<span class="token punctuation">:</span> pathToIndexHtml<span class="token punctuation">,</span>
                    use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                        <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
                        <span class="token string">"extract-loader"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>
                            loader<span class="token punctuation">:</span> <span class="token string">"html-loader"</span><span class="token punctuation">,</span>
                            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                                attrs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"img:src"</span><span class="token punctuation">,</span> <span class="token string">"link:href"</span><span class="token punctuation">]</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                    use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                        <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
                        <span class="token string">"extract-loader"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">{</span>
                            loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
                            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                                sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span>
                    test<span class="token punctuation">:</span> <span class="token regex">/\.jpg$/</span><span class="token punctuation">,</span>
                    use<span class="token punctuation">:</span> <span class="token string">"file-loader"</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>turns</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>main.css<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>hi.jpg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>into</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>7c57758b88216530ef48069c2a4c685a.css<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>6ac05174ae9b62257ff3aa8be43cf828.jpg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#source-maps" id="source-maps"></a>
<span class="text">Source Maps</span>
<a aria-label="Source Maps" class="icon-link" href="#source-maps"></a>
</h2>
<p>If you want source maps in your extracted CSS files, you need to set the <a href="https://github.com/webpack-contrib/css-loader#sourcemap"><code>sourceMap</code> option</a> of the <strong>css-loader</strong>:</p>
<pre><code class="lang-js">    <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<p>There is currently exactly one option: <code>publicPath</code>.
If you are using a relative <code>publicPath</code> in webpack's <a href="https://webpack.js.org/configuration/output/#output-publicpath">output options</a> and extracting to a file with the <code>file-loader</code>, you might need this to account for the location of your extracted file. <code>publicPath</code> may be defined as a string or a function that accepts current <a href="https://webpack.js.org/api/loaders/#the-loader-context">loader context</a> as single argument.</p>
<p>Example with publicPath option as a string:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./dist"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        publicPath<span class="token punctuation">:</span> <span class="token string">"dist/"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            name<span class="token punctuation">:</span> <span class="token string">"assets/[name].[ext]"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"extract-loader"</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            publicPath<span class="token punctuation">:</span> <span class="token string">"../"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Example with publicPath option as a function:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./dist"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        publicPath<span class="token punctuation">:</span> <span class="token string">"dist/"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            name<span class="token punctuation">:</span> <span class="token string">"assets/[name].[ext]"</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"extract-loader"</span><span class="token punctuation">,</span>
                        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                            <span class="token comment">// dynamically return a relative publicPath based on how deep in directory structure the loaded file is in /src/ directory</span>
                            publicPath<span class="token punctuation">:</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'../'</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>context<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token punctuation">{</span>
                        loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>You need another option? Then you should think about:</p>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>From opening a bug report to creating a pull request: <strong>every contribution is appreciated and welcome</strong>. If you're planing to implement a new feature or change the api please create an issue first. This way we can ensure that your precious work is not in vain.</p>
<p>All pull requests should have 100% test coverage (with notable exceptions) and need to pass all tests.</p>
<ul>
<li>Call <code>npm test</code> to run the unit tests</li>
<li>Call <code>npm run coverage</code> to check the test coverage (using <a href="https://github.com/gotwarlost/istanbul">istanbul</a>)</li>
</ul>
<p><br/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p>Unlicense</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#sponsors" id="sponsors"></a>
<span class="text">Sponsors</span>
<a aria-label="Sponsors" class="icon-link" href="#sponsors"></a>
</h2>
<p><a href="https://peerigon.com/"><img src="https://assets.peerigon.com/peerigon/logo/peerigon-logo-flat-spinat.png" width="150"/></a></p>
</div>
<br/><h1>file-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>The <code>file-loader</code> resolves <code>import</code>/<code>require()</code> on a file into a url and emits the file into the output directory.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>file-loader</code>：</p>
<pre><code class="lang-console">$ npm install file-loader --save-dev
</code></pre>
<p>在一个 bundle 文件中 import（或 <code>require</code>）目标文件：</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./file.png'</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，在 <code>webpack</code> 配置中添加 loader。例如：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。将 <code>file.png</code> 作为一个文件，生成到输出目录，
（如果指定了选项，则使用指定的命名约定）
并返回文件的 public URI。</p>
<blockquote>
<p>ℹ️ 默认情况下，生成文件的文件名，是文件内容的 MD5 哈希值，并会保留所引用资源的原始扩展名。</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#name" id="name"></a>
<span class="text"><code>name</code></span>
<a aria-label="&lt;code&gt;name&lt;/code&gt;" class="icon-link" href="#name"></a>
</h3>
<p>类型：<code>String|Function</code>
默认：<code>'[hash].[ext]'</code></p>
<p>Specifies a custom filename template for the target file(s) using the query
parameter <code>name</code>. For example, to emit a file from your <code>context</code> directory into
the output directory retaining the full directory structure, you might use:</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string">'[path][name].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token function">name</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token string">'[path][name].[ext]'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token string">'[hash].[ext]'</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>ℹ️ 默认情况下，文件会按照你指定的路径和名称输出同一目录中，且会使用相同的 URI 路径来访问文件。</p>
</blockquote>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#outputpath" id="outputpath"></a>
<span class="text"><code>outputPath</code></span>
<a aria-label="&lt;code&gt;outputPath&lt;/code&gt;" class="icon-link" href="#outputpath"></a>
</h3>
<p>类型：<code>String|Function</code>
默认：<code>undefined</code></p>
<p>Specify a filesystem path where the target file(s) will be placed.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              outputPath<span class="token punctuation">:</span> <span class="token string">'images'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              outputPath<span class="token punctuation">:</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> resourcePath<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// `resourcePath` is original absolute path to asset</span>
                <span class="token comment">// `context` is directory where stored asset (`rootContext`) or `context` option</span>

                <span class="token comment">// To get relative path you can use</span>
                <span class="token comment">// const relativePath = path.relative(context, resourcePath);</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/my-custom-image\.png/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`other_output_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/images/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`image_output_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`output_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#publicpath" id="publicpath"></a>
<span class="text"><code>publicPath</code></span>
<a aria-label="&lt;code&gt;publicPath&lt;/code&gt;" class="icon-link" href="#publicpath"></a>
</h3>
<p>类型：<code>String|Function</code>
默认：<a href="https://webpack.js.org/api/module-variables/#__webpack_public_path__-webpack-specific-"><code>__webpack_public_path__</code></a></p>
<p>Specifies a custom public path for the target file(s).</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token punctuation">:</span> <span class="token string">'assets'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              publicPath<span class="token punctuation">:</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> resourcePath<span class="token punctuation">,</span> context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// `resourcePath` is original absolute path to asset</span>
                <span class="token comment">// `context` is directory where stored asset (`rootContext`) or `context` option</span>

                <span class="token comment">// To get relative path you can use</span>
                <span class="token comment">// const relativePath = path.relative(context, resourcePath);</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/my-custom-image\.png/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`other_public_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/images/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                  <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`image_output_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`public_path/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h3>
<p>类型：<code>String</code>
默认：<a href="https://webpack.js.org/configuration/entry-context/#context"><code>context</code></a></p>
<p>Specifies a custom file context.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              context<span class="token punctuation">:</span> <span class="token string">'project'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#emitfile" id="emitfile"></a>
<span class="text"><code>emitFile</code></span>
<a aria-label="&lt;code&gt;emitFile&lt;/code&gt;" class="icon-link" href="#emitfile"></a>
</h3>
<p>类型：<code>Boolean</code>
默认：<code>true</code></p>
<p>如果是 true，生成一个文件（向文件系统写入一个文件）。
如果是 false，loader 会返回 public URI，但<strong>不会</strong>生成文件。
对于服务器端 package，禁用此选项通常很有用。</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token comment">// bundle file</span>
<span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./file.png'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              emitFile<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#regexp" id="regexp"></a>
<span class="text"><code>regExp</code></span>
<a aria-label="&lt;code&gt;regExp&lt;/code&gt;" class="icon-link" href="#regexp"></a>
</h3>
<p>类型：<code>RegExp</code>
默认：<code>undefined</code></p>
<p>Specifies a Regular Expression to one or many parts of the target file path.
The capture groups can be reused in the <code>name</code> property using <code>[N]</code>
<a href="https://github.com/webpack-contrib/file-loader#placeholders">placeholder</a>.</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./customer01/file.png'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              regExp<span class="token punctuation">:</span> <span class="token regex">/\/([a-z0-9]+)\/[a-z0-9]+\.png$/</span><span class="token punctuation">,</span>
              name<span class="token punctuation">:</span> <span class="token string">'[1]-[name].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>ℹ️ If <code>[0]</code> is used, it will be replaced by the entire tested string, whereas <code>[1]</code> will contain the first capturing parenthesis of your regex and so on...</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#placeholders" id="placeholders"></a>
<span class="text">placeholders</span>
<a aria-label="placeholders" class="icon-link" href="#placeholders"></a>
</h2>
<p>Full information about placeholders you can find <a href="https://github.com/webpack/loader-utils#interpolatename">here</a>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-ext-" id="-ext-"></a>
<span class="text"><code>[ext]</code></span>
<a aria-label="&lt;code&gt;[ext]&lt;/code&gt;" class="icon-link" href="#-ext-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>file.extname</code></p>
<p>目标文件/资源的文件扩展名。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-name-" id="-name-"></a>
<span class="text"><code>[name]</code></span>
<a aria-label="&lt;code&gt;[name]&lt;/code&gt;" class="icon-link" href="#-name-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>file.basename</code></p>
<p>文件/资源的基本名称。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-path-" id="-path-"></a>
<span class="text"><code>[path]</code></span>
<a aria-label="&lt;code&gt;[path]&lt;/code&gt;" class="icon-link" href="#-path-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>file.directory</code></p>
<p>The path of the resource relative to the webpack/config <code>context</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-folder-" id="-folder-"></a>
<span class="text"><code>[folder]</code></span>
<a aria-label="&lt;code&gt;[folder]&lt;/code&gt;" class="icon-link" href="#-folder-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>file.folder</code></p>
<p>The folder of the resource is in.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-emoji-" id="-emoji-"></a>
<span class="text"><code>[emoji]</code></span>
<a aria-label="&lt;code&gt;[emoji]&lt;/code&gt;" class="icon-link" href="#-emoji-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>undefined</code></p>
<p>A random emoji representation of <code>content</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-emoji-" id="-emoji-"></a>
<span class="text"><code>[emoji:&lt;length&gt;]</code></span>
<a aria-label="&lt;code&gt;[emoji:&lt;length&gt;]&lt;/code&gt;" class="icon-link" href="#-emoji-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>undefined</code></p>
<p>Same as above, but with a customizable number of emojis</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-hash-" id="-hash-"></a>
<span class="text"><code>[hash]</code></span>
<a aria-label="&lt;code&gt;[hash]&lt;/code&gt;" class="icon-link" href="#-hash-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>md5</code></p>
<p>指定生成文件内容哈希值的哈希方法。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-hash-" id="-hash-"></a>
<span class="text"><code>[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]</code></span>
<a aria-label="&lt;code&gt;[&lt;hashType&gt;:hash:&lt;digestType&gt;:&lt;length&gt;]&lt;/code&gt;" class="icon-link" href="#-hash-"></a>
</h3>
<p>类型：<code>String</code></p>
<p>The hash of options.content (Buffer) (by default it's the hex digest of the hash).</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#digesttype" id="digesttype"></a>
<span class="text"><code>digestType</code></span>
<a aria-label="&lt;code&gt;digestType&lt;/code&gt;" class="icon-link" href="#digesttype"></a>
</h4>
<p>类型：<code>String</code>
默认：<code>'hex'</code></p>
<p>The <a href="https://en.wikipedia.org/wiki/Cryptographic_hash_function">digest</a> that the
hash function should use. Valid values include: base26, base32, base36,
base49, base52, base58, base62, base64, and hex.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#hashtype" id="hashtype"></a>
<span class="text"><code>hashType</code></span>
<a aria-label="&lt;code&gt;hashType&lt;/code&gt;" class="icon-link" href="#hashtype"></a>
</h4>
<p>类型：<code>String</code>
默认：<code>'md5'</code></p>
<p>The type of hash that the has function should use. Valid values include: <code>md5</code>,
<code>sha1</code>, <code>sha256</code>, and <code>sha512</code>.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#length" id="length"></a>
<span class="text"><code>length</code></span>
<a aria-label="&lt;code&gt;length&lt;/code&gt;" class="icon-link" href="#length"></a>
</h4>
<p>类型：<code>Number</code>
默认：<code>undefined</code></p>
<p>Users may also specify a length for the computed hash.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-n-" id="-n-"></a>
<span class="text"><code>[N]</code></span>
<a aria-label="&lt;code&gt;[N]&lt;/code&gt;" class="icon-link" href="#-n-"></a>
</h3>
<p>类型：<code>String</code>
默认：<code>undefined</code></p>
<p>The n-th match obtained from matching the current file name against the <code>regExp</code>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>The following examples show how one might use <code>file-loader</code> and what the result would be.</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> png <span class="token keyword">from</span> <span class="token string">'./image.png'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string">'dirname/[hash].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>结果：</p>
<pre><code class="lang-bash"><span class="token comment"># result</span>
dirname/0dcbbaa701328ae351f.png
</code></pre>
<hr/>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> png <span class="token keyword">from</span> <span class="token string">'./image.png'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string">'[sha512:hash:base64:7].[ext]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>结果：</p>
<pre><code class="lang-bash"><span class="token comment"># result</span>
gdyb21L.png
</code></pre>
<hr/>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> png <span class="token keyword">from</span> <span class="token string">'./path/to/file.png'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              name<span class="token punctuation">:</span> <span class="token string">'[path][name].[ext]?[hash]'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>结果：</p>
<pre><code class="lang-bash"><span class="token comment"># result</span>
path/to/file.png?e43b20c069c4a01867c31e98cbce33c9
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>如果你从未阅读过我们的贡献指南，请在上面花点时间。</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/file-loader/master/.github/CONTRIBUTING.md">贡献指南</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/file-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>gzip-loader</h1>
<div><p>gzip loader module for webpack</p>
<p>Enables loading gzipped resources.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev gzip-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.gz$/</span><span class="token punctuation">,</span>
        enforce<span class="token punctuation">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'gzip-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>bundle.js</strong></p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"gzip-loader!./file.js.gz"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/jdalton"></a></p><a href="https://github.com/jdalton">
<p><img height="150" src="https://avatars.githubusercontent.com/u/4303?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      John-David Dalton
</code></pre></a><p><a href="https://github.com/jdalton"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p><img height="150" src="https://github.com/bebraw.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Juho Vepsäläinen
</code></pre></a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p><img height="150" src="https://github.com/d3viant0ne.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Joshua Wiens
</code></pre></a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/michael-ciniawsky"></a></p><a href="https://github.com/michael-ciniawsky">
<p><img height="150" src="https://github.com/michael-ciniawsky.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Michael Ciniawsky
</code></pre></a><p><a href="https://github.com/michael-ciniawsky"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/evilebottnawi"></a></p><a href="https://github.com/evilebottnawi">
<p><img height="150" src="https://github.com/evilebottnawi.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Alexander Krasnoyarov
</code></pre></a><p><a href="https://github.com/evilebottnawi"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>html-loader</h1>
<div><p>Exports HTML as string. HTML is minimized when the compiler demands.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D html-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>默认情况下，每个本地的 <code>&lt;img src="image.png"&gt;</code> 都需要通过 require （<code>require('./image.png')</code>）来进行加载。你可能需要在配置中为图片指定 loader（推荐 <code>file-loader</code> 或 <code>url-loader</code> ）</p>
<p>你可以通过查询参数 <code>attrs</code>，来指定哪个标签属性组合(tag-attribute combination)应该被此 loader 处理。传递数组或以空格分隔的 <code>&lt;tag&gt;:&lt;attribute&gt;</code> 组合的列表。（默认值：<code>attrs=img:src</code>）</p>
<p>If you use <code>&lt;custom-elements&gt;</code>, and lots of them make use of a <code>custom-src</code> attribute, you don't have to specify each combination <code>&lt;tag&gt;:&lt;attribute&gt;</code>: just specify an empty tag like <code>attrs=:custom-src</code> and it will match every element.</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.(html)$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      attrs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">':data-src'</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>要完全禁用对标签属性的处理（例如，如果你在客户端处理图片加载），你可以传入 <code>attrs=false</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>使用此配置：</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.jpg$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"file-loader"</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> test<span class="token punctuation">:</span> <span class="token regex">/\.png$/</span><span class="token punctuation">,</span> use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"url-loader?mimetype=image/png"</span> <span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    publicPath<span class="token punctuation">:</span> <span class="token string">"http://cdn.example.com/[hash]/"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-html"><span class="token comment">&lt;!-- file.html --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image.png<span class="token punctuation">"</span></span> <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>image2x.png<span class="token punctuation">"</span></span> <span class="token punctuation">&gt;</span></span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img src="http://cdn.example.com/49eba9f/a992ca.png"</span>
<span class="token comment">//         data-src="image2x.png"&gt;'</span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?attrs=img:data-src!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img src="image.png" data-src="data:image/png;base64,..." &gt;'</span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?attrs=img:src img:data-src!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?attrs[]=img:src&amp;attrs[]=img:data-src!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img  src="http://cdn.example.com/49eba9f/a992ca.png"</span>
<span class="token comment">//           data-src="data:image/png;base64,..." &gt;'</span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?-attrs!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img  src="image.jpg"  data-src="image2x.png" &gt;'</span>
</code></pre>
<p>通过运行 <code>webpack --optimize-minimize</code> 来最小化</p>
<pre><code class="lang-html">'<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span>http://cdn.example.com/49eba9f/a9f92ca.jpg</span>
      <span class="token attr-name">data-src</span><span class="token attr-value"><span class="token punctuation">=</span>data:image/png;base64,...</span><span class="token punctuation">&gt;</span></span>'
</code></pre>
<p>或者在 <code>webpack.conf.js</code> 的 rule 选项中指定 <code>minimize</code> 属性</p>
<pre><code class="lang-js">module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        minimize<span class="token punctuation">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>See <a href="https://github.com/kangax/html-minifier#options-quick-reference">html-minifier</a>'s documentation for more information on the available options.</p>
<p>The enabled rules for minimizing by default are the following ones:</p>
<ul>
<li>removeComments</li>
<li>removeCommentsFromCDATA</li>
<li>removeCDATASectionsFromCDATA</li>
<li>collapseWhitespace</li>
<li>conservativeCollapse</li>
<li>removeAttributeQuotes</li>
<li>useShortDoctype</li>
<li>keepClosingSlash</li>
<li>minifyJS</li>
<li>minifyCSS</li>
<li>removeScriptTypeAttributes</li>
<li><p>removeStyleTypeAttributes</p>
<p>The rules can be disabled using the following options in your <code>webpack.conf.js</code></p>
</li>
</ul>
<pre><code class="lang-js">module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
    use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        removeComments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        collapseWhitespace<span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>##</p>
<p>对于以 <code>/</code> 开头的 url，默认行为是不转换它们。
如果设置了 <code>root</code> 查询参数，它将被添加到 URL 之前，然后进行转换。</p>
<p>和上面配置相同：</p>
<pre><code class="lang-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/image.jpg<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img  src="/image.jpg"&gt;'</span>
</code></pre>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?root=.!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// =&gt; '&lt;img  src="http://cdn.example.com/49eba9f/a992ca.jpg"&gt;'</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#插值" id="插值"></a>
<span class="text">插值</span>
<a aria-label="插值" class="icon-link" href="#插值"></a>
</h3>
<p>你可以使用 <code>interpolate</code> 标记，为 ES6 模板字符串启用插值语法，就像这样：</p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?interpolate!./file.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${require(`./images/gallery.png`)}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>${require('./components/gallery.html')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>如果你只想在模板中使用 <code>require</code>，任何其它的 <code>${}</code> 不被转换，你可以设置 <code>interpolate</code> 标记为 <code>require</code>，就像这样：</p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"html-loader?interpolate=require!./file.ftl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#list</span> <span class="token attr-name">list</span> <span class="token attr-name">as</span> <span class="token attr-name">list</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${list.href!}<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>${list.name}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>#list</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${require(`./images/gallery.png`)}<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>${require('./components/gallery.html')}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#导出格式" id="导出格式"></a>
<span class="text">导出格式</span>
<a aria-label="导出格式" class="icon-link" href="#导出格式"></a>
</h3>
<p>这里有几种不同的可用导出格式：</p>
<ul>
<li><code>module.exports</code>（默认配置，cjs 格式）。"Hello world" 转为 <code>module.exports = "Hello world";</code></li>
<li><code>exports.default</code> (当设置了 <code>exportAsDefault</code> 参数，es6to5 格式）。"Hello world" 转为 <code>exports.default = "Hello world";</code></li>
<li><code>export default</code> (当设置了 <code>exportAsEs6Default</code> 参数，es6 格式)。"Hello world" 转为 <code>export default "Hello world";</code></li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#高级选项" id="高级选项"></a>
<span class="text">高级选项</span>
<a aria-label="高级选项" class="icon-link" href="#高级选项"></a>
</h3>
<p>如果你需要传递<a href="https://github.com/webpack/html-loader/pull/46">更多高级选项</a>，特别是那些不能被字符串化，你还可以在 <code>webpack.config.js</code> 中定义一个 <code>htmlLoader</code> 属性：</p>
<pre><code class="lang-js"><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"html-loader"</span> <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  htmlLoader<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ignoreCustomFragments<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">/</span>\<span class="token punctuation">{</span>\<span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token operator">*</span><span class="token operator">?</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">/</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    root<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'assets'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    attrs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'img:src'</span><span class="token punctuation">,</span> <span class="token string">'link:href'</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果你需要定义两个不同的 loader 配置，你也可以通过 <code>html-loader?config=otherHtmlLoaderConfig</code> 改变配置的属性名：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">"html-loader?config=otherHtmlLoaderConfig"</span> <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  otherHtmlLoaderConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#导出到-html-文件" id="导出到-html-文件"></a>
<span class="text">导出到 HTML 文件</span>
<a aria-label="导出到 HTML 文件" class="icon-link" href="#导出到-html-文件"></a>
</h3>
<p>一个很常见的场景，将 HTML 导出到 <em>.html</em> 文件中，直接访问它们，而不是使用 javascript 注入。这可以通过3个 loader 的组合来实现：</p>
<ul>
<li><a href="https://github.com/webpack/file-loader">file-loader</a></li>
<li><a href="https://github.com/peerigon/extract-loader">extract-loader</a></li>
<li>html-loader</li>
</ul>
<p>html-loader 将解析 URL，并请求图片和你所期望的一切资源。extract-loader 会将 javascript 解析为合适的 html 文件，确保引用的图片指向正确的路径，file-loader 将结果写入 .html 文件。示例：</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'file-loader?name=[name].[ext]'</span><span class="token punctuation">,</span> <span class="token string">'extract-loader'</span><span class="token punctuation">,</span> <span class="token string">'html-loader'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/18315?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/hemanth"></a></p><a href="https://github.com/hemanth">
<p>Hemanth</p>
</a><p><a href="https://github.com/hemanth"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/8420490?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/5419992?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/michael-ciniawsky"></a></p><a href="https://github.com/michael-ciniawsky">
<p>Michael Ciniawsky</p>
</a><p><a href="https://github.com/michael-ciniawsky"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/6542274?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/imvetri"></a></p><a href="https://github.com/imvetri">
<p>Imvetri</p>
</a><p><a href="https://github.com/imvetri"></a></p>
<p></p></td>
</tr>
<tr><td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/1520965?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/andreicek"></a></p><a href="https://github.com/andreicek">
<p>Andrei Crnković</p>
</a><p><a href="https://github.com/andreicek"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/3367801?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/abouthiroppy"></a></p><a href="https://github.com/abouthiroppy">
<p>Yuta Hiroto</p>
</a><p><a href="https://github.com/abouthiroppy"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/80044?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/petrunov"></a></p><a href="https://github.com/petrunov">
<p>Vesselin Petrunov</p>
</a><p><a href="https://github.com/petrunov"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/973543?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/gajus"></a></p><a href="https://github.com/gajus">
<p>Gajus Kuizinas</p>
</a><p><a href="https://github.com/gajus"></a></p>
<p></p></td>
</tr>
</tbody>
</table><p></p>
</div>
<br/><h1>i18n-loader</h1>
<div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-colors-json" id="-colors-json"></a>
<span class="text">./colors.json</span>
<a aria-label="./colors.json" class="icon-link" href="#-colors-json"></a>
</h3>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
    <span class="token string">"red"</span><span class="token punctuation">:</span> <span class="token string">"red"</span><span class="token punctuation">,</span>
    <span class="token string">"green"</span><span class="token punctuation">:</span> <span class="token string">"green"</span><span class="token punctuation">,</span>
    <span class="token string">"blue"</span><span class="token punctuation">:</span> <span class="token string">"blue"</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-de-de-colors-json" id="-de-de-colors-json"></a>
<span class="text">./de-de.colors.json</span>
<a aria-label="./de-de.colors.json" class="icon-link" href="#-de-de-colors-json"></a>
</h3>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
    <span class="token string">"red"</span><span class="token punctuation">:</span> <span class="token string">"rot"</span><span class="token punctuation">,</span>
    <span class="token string">"green"</span><span class="token punctuation">:</span> <span class="token string">"gr�n"</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#调用" id="调用"></a>
<span class="text">调用</span>
<a aria-label="调用" class="icon-link" href="#调用"></a>
</h3>
<pre><code class="lang-javascript"><span class="token comment">// 假如我们的所在区域是 "de-de-berlin"</span>
<span class="token keyword">var</span> locale <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n!./colors.json"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等待准备就绪，在一个 web 项目中所有地区只需要一次</span>
<span class="token comment">// 因为所有地区的语言被合并到一个块中</span>
<span class="token function">locale</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span>red<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 rot</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>locale<span class="token punctuation">.</span>blue<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出 blue</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h3>
<p>如果想要一次加载然后可以同步地使用，
你应该告诉 loader 所有要使用的地区。</p>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
  <span class="token string">"i18n"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">"locales"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">"de"</span><span class="token punctuation">,</span>
      <span class="token string">"de-de"</span><span class="token punctuation">,</span>
      <span class="token string">"fr"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// "bundleTogether": false</span>
    <span class="token comment">// 可以禁止所有地区打包到一起</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#可选的调用方法" id="可选的调用方法"></a>
<span class="text">可选的调用方法</span>
<a aria-label="可选的调用方法" class="icon-link" href="#可选的调用方法"></a>
</h3>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n/choose!./file.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 根据地区选择正确的文件，</span>
                    <span class="token comment">// 但是不会合并到对象中</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n/concat!./file.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拼接所有合适的地区</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n/merge!./file.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 合并到对象中</span>
                    <span class="token comment">// ./file.js 在编译时会被排除掉</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n!./file.json"</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"i18n/merge!json!./file.json"</span><span class="token punctuation">)</span>
</code></pre>
<p>如果需要在 node 中使用，不要忘记填补（polyfill）<code>require</code>。
可以参考 <code>webpack</code> 文档。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p>MIT (<a href="http://www.opensource.org/licenses/mit-license.php">http://www.opensource.org/licenses/mit-license.php</a>)</p>
</div>
<br/><h1>imports-loader</h1>
<div><p>The imports loader allows you to use modules that depend on specific global variables.</p>
<p>This is useful for third-party modules that rely on global variables like <code>$</code> or <code>this</code> being the <code>window</code> object. The imports loader can add the necessary <code>require('whatever')</code> calls, so those modules work with webpack.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> imports-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text"><a href="https://webpack.js.org/concepts/loaders">用法</a></span>
<a aria-label="&lt;a href=" concepts="" https:="" loaders="" webpack.js.org="">用法</a>" class="icon-link" href="#用法"&gt;
      </h2>
<p>假设你有 <code>example.js</code> 这个文件</p>
<pre><code class="lang-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">doSomeAwesomeJqueryPluginStuff</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>然后你可以像下面这样通过配置 imports-loader 插入 <code>$</code> 变量到模块中：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"imports-loader?$=jquery!./example.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这将简单的把 <code>var $ = require("jquery");</code> 前置插入到 <code>example.js</code> 中。</p>
<p>##</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">loader 查询值</div><div class="table-th">含义</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        loader 查询值
    </div>
<div class="table-td-content">
<code>angular</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>var angular = require("angular");</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        loader 查询值
    </div>
<div class="table-td-content">
<code>$=jquery</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>var $ = require("jquery");</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        loader 查询值
    </div>
<div class="table-td-content">
<code>define=&gt;false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>var define = false;</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        loader 查询值
    </div>
<div class="table-td-content">
<code>config=&gt;{size:50}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>var config = {size:50};</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        loader 查询值
    </div>
<div class="table-td-content">
<code>this=&gt;window</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        含义
    </div>
<div class="table-td-content">
<code>(function () { ... }).call(window);</code>
</div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#多个值" id="多个值"></a>
<span class="text">多个值</span>
<a aria-label="多个值" class="icon-link" href="#多个值"></a>
</h3>
<p>使用逗号 <code>,</code> 来分隔和使用多个值：</p>
<pre><code class="lang-javascript"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"imports-loader?$=jquery,angular,config=&gt;{size:50}!./file.js"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#webpack-config-js" id="webpack-config-js"></a>
<span class="text">webpack.config.js</span>
<a aria-label="webpack.config.js" class="icon-link" href="#webpack-config-js"></a>
</h3>
<p>同样的，在你的 <code>webpack.config.js</code> 配置文件中进行配置会更好：</p>
<pre><code class="lang-javascript"><span class="token comment">// ./webpack.config.js</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"some-module"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                use<span class="token punctuation">:</span> <span class="token string">"imports-loader?this=&gt;window"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#典型的使用场景" id="典型的使用场景"></a>
<span class="text">典型的使用场景</span>
<a aria-label="典型的使用场景" class="icon-link" href="#典型的使用场景"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#jquery-插件" id="jquery-插件"></a>
<span class="text">jQuery 插件</span>
<a aria-label="jQuery 插件" class="icon-link" href="#jquery-插件"></a>
</h3>
<p><code>imports-loader?$=jquery</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#自定义的-angular-模块" id="自定义的-angular-模块"></a>
<span class="text">自定义的 Angular 模块</span>
<a aria-label="自定义的 Angular 模块" class="icon-link" href="#自定义的-angular-模块"></a>
</h3>
<p><code>imports-loader?angular</code></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#禁用-amd" id="禁用-amd"></a>
<span class="text">禁用 AMD</span>
<a aria-label="禁用 AMD" class="icon-link" href="#禁用-amd"></a>
</h3>
<p>有很多模块在使用 CommonJS 前会进行 <code>define</code> 函数的检查。自从 webpack 两种格式都可以使用后，在这种场景下默认使用了 AMD 可能会造成某些问题（如果接口的实现比较古怪）。</p>
<p>你可以像下面这样轻松的禁用 AMD</p>
<pre><code class="lang-javascript">imports<span class="token operator">-</span>loader<span class="token operator">?</span>define<span class="token operator">=</span><span class="token operator">&gt;</span><span class="token boolean">false</span>
</code></pre>
<p>关于兼容性问题的更多提示，可以参考官方的文档 <a href="http://webpack.github.io/docs/shimming-modules.html">Shimming Modules</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>istanbul-instrumenter-loader</h1>
<div><p>Instrument JS files with <a href="https://github.com/istanbuljs/istanbuljs/tree/master/packages/istanbul-lib-instrument">istanbul-lib-instrument</a> for subsequent code coverage reporting</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D istanbul-instrumenter-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text"><a href="https://webpack.js.org/concepts/loaders">用法</a></span>
<a aria-label="&lt;a href=" concepts="" https:="" loaders="" webpack.js.org="">用法</a>" class="icon-link" href="#用法"&gt;
      </h2>
<p>##</p>
<ul>
<li><a href="https://github.com/webpack/karma-webpack">karma-webpack</a></li>
<li><a href="https://github.com/mattlewis92/karma-coverage-istanbul-reporter">karma-coverage-istanbul-reporter</a></li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#结构" id="结构"></a>
<span class="text"><code>结构</code></span>
<a aria-label="&lt;code&gt;结构&lt;/code&gt;" class="icon-link" href="#结构"></a>
</h3>
<pre><code>├─ src
│ <span class="token operator">|</span>– components
│ <span class="token operator">|</span> <span class="token operator">|</span>– bar
│ <span class="token operator">|</span> │ <span class="token operator">|</span>─ index.js
│ <span class="token operator">|</span> <span class="token operator">|</span>– foo/
│     <span class="token operator">|</span>– index.js
<span class="token operator">|</span>– <span class="token function">test</span>
<span class="token operator">|</span> <span class="token operator">|</span>– src
<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>– components
<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>– foo
<span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span> <span class="token operator">|</span>– index.js
</code></pre><p>为生成所有组件（包括你没写测试的那些）的代码覆盖率报告，你需要 require 所有<strong>业务</strong>和<strong>测试</strong>的代码。相关内容在 <a href="https://github.com/webpack/karma-webpack#alternative-usage">karma-webpack 其他用法</a>中有涉及</p>
<p><strong>test/index.js</strong></p>
<pre><code class="lang-js"><span class="token comment">// requires 所有在 `project/test/src/components</span><span class="token comment">/**/</span>index<span class="token punctuation">.</span>js` 中的测试
<span class="token keyword">const</span> tests <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'./src/components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/index\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

tests<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>tests<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// requires 所有在 `project/src/components</span><span class="token comment">/**/</span>index<span class="token punctuation">.</span>js` 中的组件
<span class="token keyword">const</span> components <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">context</span><span class="token punctuation">(</span><span class="token string">'../src/components/'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token regex">/index\.js$/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

components<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>components<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>ℹ️  以下为 <code>karma</code> 的唯一<code>入口</code>起点文件</p>
</blockquote>
<p><strong>karma.conf.js</strong></p>
<pre><code class="lang-js">config<span class="token punctuation">.</span><span class="token keyword">set</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  files<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">'test/index.js'</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  preprocessors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'test/index.js'</span><span class="token punctuation">:</span> <span class="token string">'webpack'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  webpack<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 用 Istanbul 只监测业务代码</span>
        <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
          use<span class="token punctuation">:</span> <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'istanbul-instrumenter-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src/components/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  reporters<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'progress'</span><span class="token punctuation">,</span> <span class="token string">'coverage-istanbul'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
  coverageIstanbulReporter<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    reports<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'text-summary'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
    fixWebpackSourcePaths<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-babel" id="使用-babel"></a>
<span class="text">使用 <code>Babel</code></span>
<a aria-label="使用 &lt;code&gt;Babel&lt;/code&gt;" class="icon-link" href="#使用-babel"></a>
</h3>
<p>You must run the instrumentation as a post step</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$|\.jsx$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">'istanbul-instrumenter-loader'</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span> esModules<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  enforce<span class="token punctuation">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
  exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules|\.spec\.js$/</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text"><a href="https://github.com/istanbuljs/istanbuljs/blob/master/packages/istanbul-lib-instrument/api.md#instrumenter">Options</a></span>
<a api.md="" aria-label="&lt;a href=" blob="" github.com="" https:="" istanbul-lib-instrument="" istanbuljs="" master="" packages="">Options</a>" class="icon-link" href="#options"&gt;
      </h2>
<p>此 loader 支持 <code>istanbul-lib-instrument</code> 的所有配置选项</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>debug</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Turn on debugging mode
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>compact</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Generate compact code
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>autoWrap</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Set to <code>true</code> to allow return statements outside of functions
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>esModules</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Set to <code>true</code> to instrument ES2015 Modules
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>coverageVariable</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>__coverage__</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Name of global coverage variable
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>preserveComments</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Preserve comments in <code>output</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>produceSourceMap</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Set to <code>true</code> to produce a source map for the instrumented code
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>sourceMapUrlCallback</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>null</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        A callback function that is called when a source map URL is found in the original code. This function is called with the source filename and the source map URL
    </div>
</div></div>
</div>
</div>
</div><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">'istanbul-instrumenter-loader'</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>options<span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/u/266822?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/deepsweet"></a></p><a href="https://github.com/deepsweet">
<p>Kir Belevich</p>
</a><p><a href="https://github.com/deepsweet"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p><img height="150" src="https://github.com/bebraw.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Juho Vepsäläinen
</code></pre></a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p><img height="150" src="https://github.com/d3viant0ne.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Joshua Wiens
</code></pre></a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/michael-ciniawsky"></a></p><a href="https://github.com/michael-ciniawsky">
<p><img height="150" src="https://github.com/michael-ciniawsky.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Michael Ciniawsky
</code></pre></a><p><a href="https://github.com/michael-ciniawsky"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/mattlewis92"></a></p><a href="https://github.com/mattlewis92">
<p><img height="150" src="https://github.com/mattlewis92.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Matt Lewis
</code></pre></a><p><a href="https://github.com/mattlewis92"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>jshint-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>处理 JSHint 模块的 webpack loader。
在构建时(build-time)，对 bundle 中的 JavaScript 文件，执行 <a href="http://jshint.com/">JSHint</a> 检查。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>jshint-loader</code>：</p>
<pre><code class="lang-console">$ npm install jshint-loader --save-dev
</code></pre>
<p>然后，在 <code>webpack</code> 配置中添加 loader。例如：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/.js/</span><span class="token punctuation">,</span>
        enforce<span class="token punctuation">:</span> <span class="token string">'pre'</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`jshint-loader`</span></span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>options<span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>除了下面列出的自定义 loader 选项外，
所有有效的 JSHint 选项在此对象中都有效：</p>
<p>delete options.;
delete options.;
delete options.;</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#emiterrors" id="emiterrors"></a>
<span class="text"><code>emitErrors</code></span>
<a aria-label="&lt;code&gt;emitErrors&lt;/code&gt;" class="icon-link" href="#emiterrors"></a>
</h3>
<p>类型：<code>Boolean</code>
默认值：<code>undefined</code></p>
<p>命令 loader，将所有 JSHint 警告和错误，都作为 webpack 错误触发。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#failonhint" id="failonhint"></a>
<span class="text"><code>failOnHint</code></span>
<a aria-label="&lt;code&gt;failOnHint&lt;/code&gt;" class="icon-link" href="#failonhint"></a>
</h3>
<p>类型：<code>Boolean</code>
默认值：<code>undefined</code></p>
<p>命令 loader，在所有 JSHint 发生警告和错误时，
都产生 webpack 构建失败。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#reporter" id="reporter"></a>
<span class="text"><code>reporter</code></span>
<a aria-label="&lt;code&gt;reporter&lt;/code&gt;" class="icon-link" href="#reporter"></a>
</h3>
<p>类型：<code>Function</code>
默认值：<code>undefined</code></p>
<p>此函数用于对 JSHint 输出进行格式化，也可以发出警告和错误。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#自定义报告函数-custom-reporter-" id="自定义报告函数-custom-reporter-"></a>
<span class="text">自定义报告函数(custom reporter)</span>
<a aria-label="自定义报告函数(custom reporter)" class="icon-link" href="#自定义报告函数-custom-reporter-"></a>
</h2>
<p>默认情况下，<code>jshint-loader</code> 自带一个默认报告函数。</p>
<p>然而，如果你想设置自定义的报告函数，
向 <code>jshint</code> 选项的 <code>reporter</code> 属性传递一个函数（查看<em>上面</em>用法）</p>
<p>报告函数执行时，会传入一个 JSHint 产生的，
由错误/警告构成的数组，结构如下：</p>
<pre><code class="lang-js"><span class="token punctuation">[</span>
<span class="token punctuation">{</span>
    id<span class="token punctuation">:</span>        <span class="token punctuation">[</span>字符串，通常是 <span class="token string">'(error)'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    code<span class="token punctuation">:</span>      <span class="token punctuation">[</span>字符串，错误<span class="token operator">/</span><span class="token function">警告编码</span><span class="token punctuation">(</span>error<span class="token operator">/</span>warning code<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    reason<span class="token punctuation">:</span>    <span class="token punctuation">[</span>字符串，错误<span class="token operator">/</span><span class="token function">警告消息</span><span class="token punctuation">(</span>error<span class="token operator">/</span>warning message<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    evidence<span class="token punctuation">:</span>  <span class="token punctuation">[</span>字符串，产生此错误的那段代码<span class="token punctuation">]</span>
    line<span class="token punctuation">:</span>      <span class="token punctuation">[</span>数字<span class="token punctuation">]</span>
    character<span class="token punctuation">:</span> <span class="token punctuation">[</span>数字<span class="token punctuation">]</span>
    scope<span class="token punctuation">:</span>     <span class="token punctuation">[</span>字符串，消息作用域；
                通常是 <span class="token string">'(main)'</span> <span class="token function">除非代码被解析过</span><span class="token punctuation">(</span>eval<span class="token punctuation">)</span><span class="token punctuation">]</span>

    <span class="token punctuation">[</span><span class="token operator">+</span> 还有一些旧有字段，不必关心。<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// ...</span>
<span class="token comment">// 更多的错误/警告</span>
<span class="token punctuation">]</span>
</code></pre>
<p>报告函数执行时，loader context 会作为函数中的 <code>this</code>。
你可以使用 <code>this.emitWarning(...)</code> 或 <code>this.emitError(...)</code> 来发出消息。
查看 <a href="https://webpack.js.org/api/loaders/#the-loader-context">webpack 文档中关于 loader context 的部分</a>。</p>
<p><em>注意：JSHint reporter <strong>并不兼容</strong> JSHint-loader！
这是因为，事实上 reporter 的输入，
只能处理一个文件，而不能处理多个文件。
以这种方式报告的错误，不同于用于 JSHint 的 <a href="http://www.jshint.com/docs/reporters/">传统 reporter</a> 报告的错误，
这是因为，会对每个资源文件执行 loader plugin（也就是 JSHint-loader），
因此 reporter 函数也会被每个文件执行。</em></p>
<p>webpack CLI 中的输出通常是：</p>
<pre><code class="lang-js"><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
WARNING <span class="token keyword">in</span> <span class="token punctuation">.</span><span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>file<span class="token punctuation">.</span>js
<span class="token operator">&lt;</span>reporter output<span class="token operator">&gt;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre>
<p>`</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>如果你从未阅读过我们的贡献指南，请在上面花点时间。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#贡献指南" id="贡献指南"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/jshint-loader/master/.github/CONTRIBUTING">贡献指南</a></span>
<a .github="" aria-label="&lt;a href=" contributing="" https:="" jshint-loader="" master="" raw.githubusercontent.com="" webpack-contrib="">贡献指南</a>" class="icon-link" href="#贡献指南"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/jshint-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" jshint-loader="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>json-loader</h1>
<div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev json-loader
</code></pre>
<blockquote>
<p>⚠️ <strong>注意：由于 <code>webpack &gt;= v2.0.0</code> 默认支持导入 JSON 文件。如果你使用自定义文件扩展名，你可能仍然需要使用此 loader。See the <a href="https://webpack.js.org/migrate/3/#json-loader-is-not-required-anymore">v1.0.0 -&gt; v2.0.0 Migration Guide</a> for more information</strong></p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>##</p>
<pre><code class="lang-js"><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'json-loader!./file.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#通过配置-推荐-" id="通过配置-推荐-"></a>
<span class="text"><code>通过配置</code>（推荐）</span>
<a aria-label="&lt;code&gt;通过配置&lt;/code&gt;（推荐）" class="icon-link" href="#通过配置-推荐-"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">const</span> json <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.json$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'json-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars.githubusercontent.com/sokra?v=3" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/sokra"></a></p><a href="https://github.com/sokra">
<p>Tobias Koppers</p>
</a><p><a href="https://github.com/sokra"></a></p>
<p></p></td>
</tr>
</tbody>
</table><p></p>
</div>
<br/><h1>json5-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![cover][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>A webpack loader for parsing <a href="https://json5.org/">json5</a> files into JavaScript objects.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>json5-loader</code>:</p>
<pre><code class="lang-sh">$ npm <span class="token function">install</span> json5-loader --save-dev
</code></pre>
<p>你可以通过以下两种用法使用此 loader：</p>
<ul>
<li>在 webpack 配置里的 <code>module.loaders</code> 对象中配置 <code>json5-loader</code>；</li>
<li>或者，直接在 require 语句中使用 <code>json5-loader!</code> 前缀。</li>
</ul>
<p>假设我们有如下 <code>json5</code> 文件：</p>
<p><strong>file.json5</strong></p>
<pre><code class="lang-json5">// file.json5
{
  env: 'production',
  passwordStrength: 'strong',
}
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#usage-with-preconfigured-loader" id="usage-with-preconfigured-loader"></a>
<span class="text">Usage with preconfigured loader</span>
<a aria-label="Usage with preconfigured loader" class="icon-link" href="#usage-with-preconfigured-loader"></a>
</h3>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 使所有以 .json5 结尾的文件使用 `json5-loader`</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.json5$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'json5-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// index.js</span>
<span class="token keyword">var</span> appConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./appData.json5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 或者 ES6 语法</span>
<span class="token comment">// import appConfig from './appData.json5'</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>appConfig<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'production'</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#require-语句使用-loader-前缀的用法" id="require-语句使用-loader-前缀的用法"></a>
<span class="text">require 语句使用 loader 前缀的用法</span>
<a aria-label="require 语句使用 loader 前缀的用法" class="icon-link" href="#require-语句使用-loader-前缀的用法"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">var</span> appConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'json5-loader!./appData.json5'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 返回的是 json 解析过的对象</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>appConfig<span class="token punctuation">.</span>env<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'production'</span>
</code></pre>
<p>如果需要在 Node.js 中使用，不要忘记兼容(polyfill) require。更多参考 webpack 文档。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/json5-loader/master/.github/CONTRIBUTING.md">贡献指南</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/json5-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>bundle-loader</h1>
<div><p>webpack 的 bundle loader</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i bundle-loader --save
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.bundle\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'bundle-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>当你引用 bundle-loader 时，chunk 会被浏览器请求(request)。</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> bundle <span class="token keyword">from</span> <span class="token string">'./file.bundle.js'</span><span class="token punctuation">;</span>
</code></pre>
<p>为了 chunk 在浏览器加载（以及在获取其导出）时可用时，
你需要异步等待。</p>
<pre><code class="lang-js"><span class="token function">bundle</span><span class="token punctuation">(</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// use the file like it was required</span>
  <span class="token keyword">const</span> file <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./file.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>上述代码会将 <code>require('file.js')</code> 包裹在一段 <code>require.ensure</code> 代码块中</p>
<p>可以添加多个回调函数。它们会按照添加的顺序依次执行。</p>
<pre><code class="lang-js"><span class="token function">bundle</span><span class="token punctuation">(</span>callbackTwo<span class="token punctuation">)</span>
<span class="token function">bundle</span><span class="token punctuation">(</span>callbackThree<span class="token punctuation">)</span>
</code></pre>
<p>当依赖模块都加载完毕时, 如果此时添加一个回调函数，它将会立即执行。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项-options-" id="选项-options-"></a>
<span class="text">选项(options)</span>
<a aria-label="选项(options)" class="icon-link" href="#选项-options-"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">默认值</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>lazy</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        异步加载导入的 bundle
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>name</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>[id].[name]</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        为导入的 bundle 配置自定义文件名
    </div>
</div></div>
</div>
</div>
</div><p>##</p>
<p>当你使用 bundle-loader 时，文件会被请求(request)。如果想让它按需加载(request it lazy)，请使用：</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'bundle-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    lazy<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token keyword">import</span> bundle <span class="token keyword">from</span> <span class="token string">'./file.bundle.js'</span>

<span class="token function">bundle</span><span class="token punctuation">(</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<blockquote>
<p>ℹ️  只有调用 load 函数时，chunk 才会被请求(request)</p>
</blockquote>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#name" id="name"></a>
<span class="text"><code>name</code></span>
<a aria-label="&lt;code&gt;name&lt;/code&gt;" class="icon-link" href="#name"></a>
</h3>
<p>可以通过配置中 <code>name</code> 选项参数，来设置 bundle 的名称。
查看 <a href="https://github.com/webpack/loader-utils#interpolatename">文档</a>。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'bundle-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'[name]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote>
<p>:warning: 一旦 loader 创建了 chunk，它们将遵循以下命名规则
<a href="https://webpack.js.org/configuration/output/#output-chunkfilename"><code>output.chunkFilename</code></a> 规则，默认是 <code>[id].[name]</code>。这里 <code>[name]</code> 对应着配置中 <code>name</code> 选项参数设置的 chunk 名称。</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">import</span> bundle <span class="token keyword">from</span> <span class="token string">'./file.bundle.js'</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
   index<span class="token punctuation">:</span> <span class="token string">'./App.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'dest'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'[name].js'</span><span class="token punctuation">,</span>
    <span class="token comment">// 此处可以自定义其他格式</span>
    chunkFilename<span class="token punctuation">:</span> <span class="token string">'[name].[id].js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.bundle\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          loader<span class="token punctuation">:</span> <span class="token string">'bundle-loader'</span><span class="token punctuation">,</span>
          options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            name<span class="token punctuation">:</span> <span class="token string">'my-chunk'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>一般情况下，chunk 会使用上面的 <code>filename</code> 规则，并根据其对应的 <code>[chunkname]</code> 命名。</p>
<p>然而，来自 <code>bundle-loader</code> 中的 chunk 会使用 <code>chunkFilename</code> 规则命名。因此，打包后的示例文件最终将生成为 <code>my-chunk.1.js</code> 和 <code>file-2.js</code>。</p>
<p>当然，你也可以在 <code>chunkFilename</code> 添加哈希值作为文件名的一部分，这是因为在 bundle 的配置选项中放置 <code>[hash]</code> 不会生效。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p><img height="150" src="https://github.com/bebraw.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Juho Vepsäläinen
</code></pre></a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p><img height="150" src="https://github.com/d3viant0ne.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Joshua Wiens
</code></pre></a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/michael-ciniawsky"></a></p><a href="https://github.com/michael-ciniawsky">
<p><img height="150" src="https://github.com/michael-ciniawsky.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Michael Ciniawsky
</code></pre></a><p><a href="https://github.com/michael-ciniawsky"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/evilebottnawi"></a></p><a href="https://github.com/evilebottnawi">
<p><img height="150" src="https://github.com/evilebottnawi.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Alexander Krasnoyarov
</code></pre></a><p><a href="https://github.com/evilebottnawi"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>mocha-loader</h1>
<div><p>Allows <a href="http://mochajs.org/">Mocha</a> tests to be loaded and run via webpack</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D mocha-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>##</p>
<pre><code class="lang-bash">webpack --module-bind <span class="token string">'mocha-loader!./test'</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">'mocha-loader!./test'</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置-推荐-" id="配置-推荐-"></a>
<span class="text">配置（推荐）</span>
<a aria-label="配置（推荐）" class="icon-link" href="#配置-推荐-"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> test <span class="token keyword">from</span> <span class="token string">'./test'</span>
</code></pre>
<p><strong><code>webpack.config.js</code></strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'./entry.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/test\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'mocha-loader'</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/node_modules/</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<blockquote>
</blockquote>
<blockquote>
<p><strong>None</strong></p>
</blockquote>
<blockquote>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#基本" id="基本"></a>
<span class="text">基本</span>
<a aria-label="基本" class="icon-link" href="#基本"></a>
</h3>
<p><strong><code>module.js</code></strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre>
<p><strong><code>test.js</code></strong></p>
<pre><code class="lang-js"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'Test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should succeed'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>done<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should fail'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Failed'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should randomly fail'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Randomly failed'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
</div>
<br/><h1>multi-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>用于分离模块和组合使用多个 loader 的 <code>webpack</code> loader。
这个 loader 会多次引用一个模块，每次不同的 loader 加载这个模块，
就像下面配置中定义的那样。</p>
<p><em>注意：在多入口，最后一项的 exports 会被导出。</em></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>multi-loader</code>：</p>
<pre><code class="lang-console">$ npm install multi-loader --save-dev
</code></pre>
<p>然后，在 <code>webpack</code> 配置中添加 loader。例如：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> multi <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'multi-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
                <span class="token comment">// 向 DOM 中添加 CSS，然后返回原始内容</span>
                loader<span class="token punctuation">:</span> <span class="token function">multi</span><span class="token punctuation">(</span>
                    <span class="token string">'style-loader!css-loader!autoprefixer-loader'</span><span class="token punctuation">,</span>
                    <span class="token string">'raw-loader'</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/multi-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" multi-loader="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>node-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>A <a href="https://nodejs.org/dist/latest/docs/api/addons.html">Node.js add-ons</a> loader
module for enhanced-require. Executes add-ons in
<a href="https://github.com/webpack/enhanced-require">enhanced-require</a>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>node-loader</code>:</p>
<pre><code class="lang-console">$ npm install node-loader --save-dev
</code></pre>
<p>Then add the loader to your <code>webpack</code> config. For example:</p>
<pre><code class="lang-js"><span class="token keyword">import</span> node <span class="token keyword">from</span> <span class="token string">'file.node'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.node$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'node-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Or on the command-line:</p>
<pre><code class="lang-console">$ webpack --module-bind 'node=node-loader'
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#inline" id="inline"></a>
<span class="text">Inline</span>
<a aria-label="Inline" class="icon-link" href="#inline"></a>
</h3>
<p><strong>In your application</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> node <span class="token keyword">from</span> <span class="token string">'node-loader!./file.node'</span><span class="token punctuation">;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/node-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" node-loader="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>null-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>返回一个空模块的 webpack loader。</p>
<p>此 loader 的一个用途是，使依赖项导入的模块静音。
例如，项目依赖于一个 ES6 库，会导入不需要的 polyfill，
因此删除它将不会导致功能损失。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>null-loader</code>：</p>
<pre><code class="lang-console">$ npm install null-loader --save-dev
</code></pre>
<p>然后，在 <code>webpack</code> 配置中添加 loader。例如：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token comment">// 匹配一个 polyfill（或任何文件），</span>
        <span class="token comment">// 然后在 bundle 中不会引入这个 polyfill</span>
        test<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules/library/polyfill.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'null-loader'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献人员" id="贡献人员"></a>
<span class="text">贡献人员</span>
<a aria-label="贡献人员" class="icon-link" href="#贡献人员"></a>
</h2>
<p>如果你从未阅读过我们的贡献指南，请在上面花点时间。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#贡献指南" id="贡献指南"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/null-loader/master/.github/CONTRIBUTING">贡献指南</a></span>
<a .github="" aria-label="&lt;a href=" contributing="" https:="" master="" null-loader="" raw.githubusercontent.com="" webpack-contrib="">贡献指南</a>" class="icon-link" href="#贡献指南"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/null-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" null-loader="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>polymer-webpack-loader</h1>
<div><p><a href="https://badge.fury.io/js/polymer-webpack-loader"><img alt="npm version" src="https://badge.fury.io/js/polymer-webpack-loader.svg"/></a>
<a href="https://travis-ci.org/webpack-contrib/polymer-webpack-loader"><img alt="build status" src="https://travis-ci.org/webpack-contrib/polymer-webpack-loader.svg?branch=master"/></a></p>
<blockquote>
<p><a href="https://www.polymer-project.org/">Polymer</a> component loader for <a href="https://webpack.js.org/">webpack</a>.</p>
</blockquote>
<p>The loader allows you to write mixed HTML, CSS and JavaScript Polymer elements and
still use the full webpack ecosystem including module bundling and code splitting.</p>
<p><img alt="" src="https://user-images.githubusercontent.com/1066253/28131928-3b257288-66f0-11e7-8295-cb968cefb040.png" width="1024"/></p>
<p>The loader transforms your components:</p>
<ul>
<li><code>&lt;link rel="import" href="./my-other-element.html"&gt;</code> -&gt; <code>import './my-other-element.html';</code></li>
<li><code>&lt;dom-module&gt;</code> becomes a string which is registered at runtime</li>
<li><code>&lt;script src="./other-script.js"&gt;&lt;/script&gt;</code> -&gt; <code>import './other-script.js';</code></li>
<li><p><code>&lt;script&gt;/* contents */&lt;/script&gt;</code> -&gt; <code>/* contents */</code></p>
<p>What does that mean?</p>
<p>Any <code>&lt;link&gt;</code> "href" or <code>&lt;script&gt;</code> "src" that is <strong>not an external link</strong> and does not start with <code>~</code>, <code>/</code>, <code>./</code> or a series of <code>../</code> will have <code>./</code> appended to the beginning of the value. To prevent this change use options ignoreLinks below.</p>
</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#path-translations" id="path-translations"></a>
<span class="text">Path Translations</span>
<a aria-label="Path Translations" class="icon-link" href="#path-translations"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th"><code>tag</code></div><div class="table-th"><code>import</code></div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>tag</code>
</div>
<div class="table-td-content">
<code>&lt;link rel="import" href="path/to/some-element.html"&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import</code>
</div>
<div class="table-td-content">
<code>import "./path/to/some-element.html"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>tag</code>
</div>
<div class="table-td-content">
<code>&lt;link rel="import" href="/path/to/some-element.html"&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import</code>
</div>
<div class="table-td-content">
<code>import "/path/to/some-element.html"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>tag</code>
</div>
<div class="table-td-content">
<code>&lt;link rel="import" href="../path/to/some-element.html"&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import</code>
</div>
<div class="table-td-content">
<code>import "../path/to/some-element.html"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>tag</code>
</div>
<div class="table-td-content">
<code>&lt;link rel="import" href="./path/to/some-element.html"&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import</code>
</div>
<div class="table-td-content">
<code>import "./path/to/some-element.html"</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
<code>tag</code>
</div>
<div class="table-td-content">
<code>&lt;link rel="import" href="~path/to/some-element.html"&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
<code>import</code>
</div>
<div class="table-td-content">
<code>import "~path/to/some-element.html"</code>
</div>
</div></div>
</div>
</div>
</div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#configuring-the-loader" id="configuring-the-loader"></a>
<span class="text">Configuring the Loader</span>
<a aria-label="Configuring the Loader" class="icon-link" href="#configuring-the-loader"></a>
</h2>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> <span class="token function">Condition</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">,</span>
  exclude<span class="token punctuation">:</span> <span class="token function">Condition</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    ignoreLinks<span class="token punctuation">:</span> <span class="token function">Condition</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">,</span>
    ignorePathReWrite<span class="token punctuation">:</span> <span class="token function">Condition</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">,</span>
    processStyleLinks<span class="token punctuation">:</span> Boolean <span class="token punctuation">(</span>optional<span class="token punctuation">)</span><span class="token punctuation">,</span>
    htmlLoader<span class="token punctuation">:</span> Object <span class="token punctuation">(</span>optional<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  loader<span class="token punctuation">:</span> <span class="token string">'polymer-webpack-loader'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#include-condition-s-" id="include-condition-s-"></a>
<span class="text">include: Condition(s)</span>
<a aria-label="include: Condition(s)" class="icon-link" href="#include-condition-s-"></a>
</h3>
<p>See [Rule.include] and [Condition] in the webpack documentation. Paths
matching this option will be processed by polymer-webpack-loader.  WARNING: If
this property exists the loader will only process files matching the given
conditions. If your component has a <code>&lt;link&gt;</code> pointing to a component e.g. in
another directory, the <code>include</code> condition(s) MUST also match that directory.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exclude-condition-s-" id="exclude-condition-s-"></a>
<span class="text">exclude: Condition(s)</span>
<a aria-label="exclude: Condition(s)" class="icon-link" href="#exclude-condition-s-"></a>
</h3>
<p>See [Rule.exclude] and [Condition] in the webpack documentation. Paths
matching this option will be excluded from processing by
polymer-webpack-loader. NOTE: Files imported through a <code>&lt;link&gt;</code> will not be
excluded by this property. See <code>Options.ignoreLinks</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h3>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#ignorelinks-condition-s-" id="ignorelinks-condition-s-"></a>
<span class="text">ignoreLinks: Condition(s)</span>
<a aria-label="ignoreLinks: Condition(s)" class="icon-link" href="#ignorelinks-condition-s-"></a>
</h4>
<p><code>&lt;link&gt;</code>s pointing to paths matching these conditions (see [Condition] in the
webpack documentation) will not be transformed into <code>import</code>s.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#ignorepathrewrite-condition-s-" id="ignorepathrewrite-condition-s-"></a>
<span class="text">ignorePathReWrite: Condition(s)</span>
<a aria-label="ignorePathReWrite: Condition(s)" class="icon-link" href="#ignorepathrewrite-condition-s-"></a>
</h4>
<p><code>&lt;link&gt;</code> paths matching these conditions (see [Condition] in the webpack
documentation) will not be changed when transformed into <code>import</code>s. This can
be useful for respecting aliases, loader syntax (e.g.
<code>markup-inline-loader!./my-element.html</code>), or module paths.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#processstylelinks-boolean" id="processstylelinks-boolean"></a>
<span class="text">processStyleLinks Boolean</span>
<a aria-label="processStyleLinks Boolean" class="icon-link" href="#processstylelinks-boolean"></a>
</h4>
<p>If set to true the loader will rewrite <code>&lt;link import="css" href="..."&gt;</code> or <code>&lt;link rel="stylesheet" href="..."&gt;</code> that are inside the dom-module with <code>&lt;style&gt;require('...')&lt;/style&gt;</code>. This will allow for the file to be processed by loaders that are set up in the webpack config to handle their file type.</p>
<ol start="undefined">
<li>Any <code>&lt;link&gt;</code> that is inside the <code>&lt;dom-module&gt;</code> but not in the <code>&lt;template&gt;</code> will be added to the <code>&lt;template&gt;</code> in the order the tags appear in the file.</li>
</ol>
<pre><code class="lang-html">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dom-module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file1.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>file2.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dom-module</span><span class="token punctuation">&gt;</span></span>

  would produce

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dom-module</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'file1.css'</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style language-css"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'file2.css'</span><span class="token punctuation">)</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dom-module</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<ol start="undefined">
<li>The loader will only replace a <code>&lt;link&gt;</code> if the href is a relative path. Any link attempting to access an external link i.e. <code>http</code>, <code>https</code> or <code>//</code> will not be replaced.</li>
</ol>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#htmlloader-object" id="htmlloader-object"></a>
<span class="text">htmlLoader: Object</span>
<a aria-label="htmlLoader: Object" class="icon-link" href="#htmlloader-object"></a>
</h4>
<p>Options to pass to the html-loader. See <a href="/loaders/html-loader/">html-loader</a>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#use-with-babel-or-other-js-transpilers-" id="use-with-babel-or-other-js-transpilers-"></a>
<span class="text">Use with Babel (or other JS transpilers)</span>
<a aria-label="Use with Babel (or other JS transpilers)" class="icon-link" href="#use-with-babel-or-other-js-transpilers-"></a>
</h3>
<p>If you'd like to transpile the contents of your element's <code>&lt;script&gt;</code> block you can <a href="https://webpack.js.org/configuration/module/#rule-use">chain an additional loader</a>.</p>
<pre><code class="lang-js">module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// Chained loaders are applied last to first</span>
        <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'babel-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'polymer-webpack-loader'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// alternative syntax</span>

module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
      <span class="token comment">// Chained loaders are applied right to left</span>
      loader<span class="token punctuation">:</span> <span class="token string">'babel-loader!polymer-webpack-loader'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#use-of-htmlwebpackplugin" id="use-of-htmlwebpackplugin"></a>
<span class="text">Use of HtmlWebpackPlugin</span>
<a aria-label="Use of HtmlWebpackPlugin" class="icon-link" href="#use-of-htmlwebpackplugin"></a>
</h3>
<p>Depending on how you configure the HtmlWebpackPlugin you may encounter conflicts with the polymer-webpack-loader.</p>
<p>Example:</p>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
  loader<span class="token punctuation">:</span> <span class="token string">'html-loader'</span><span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.html$/</span><span class="token punctuation">,</span>
  loader<span class="token punctuation">:</span> <span class="token string">'polymer-webpack-loader'</span>
<span class="token punctuation">}</span>
</code></pre>
<p>This would expose your index.html file to the polymer-webpack-loader based on the process used by the html-loader. In this case you would need to exclude your html file from the polymer-webpack-loader or look for other ways to avoid this conflict. See: <a href="https://github.com/jantimon/html-webpack-plugin/blob/master/docs/template-option.md">html-webpack-plugin template options</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#shimming" id="shimming"></a>
<span class="text">Shimming</span>
<a aria-label="Shimming" class="icon-link" href="#shimming"></a>
</h2>
<p>Not all Polymer Elements have been written to execute as a module and will
require changes to work with webpack. The most common issue encountered is because modules do not execute
in the global scope. Variables, functions and classes will no longer be global unless
they are declared as properties on the global object (window).</p>
<pre><code class="lang-js"><span class="token keyword">class</span> <span class="token class-name">MyElement</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// I'm not global anymore</span>
window<span class="token punctuation">.</span>myElement <span class="token operator">=</span> MyElement<span class="token punctuation">;</span> <span class="token comment">// Now I'm global again</span>
</code></pre>
<p>For external library code, webpack provides <a href="https://webpack.js.org/guides/shimming/">shimming options</a>.</p>
<ul>
<li>Use the <a href="https://webpack.js.org/guides/shimming/#exports-loader">exports-loader</a> to
add a module export to components which expect a symbol to be global.</li>
<li>Use the <a href="https://webpack.js.org/guides/shimming/#imports-loader">imports-loader</a> when a script
expects the <code>this</code> keyword to reference <code>window</code>.</li>
<li>Use the <a href="https://webpack.js.org/guides/shimming/#provideplugin">ProvidePlugin</a> to add a module
import statement when a script expects a variable to be globally defined (but is now a module export).</li>
<li>Use the <a href="https://webpack.js.org/plugins/normal-module-replacement-plugin/">NormalModuleReplacementPlugin</a>
to have webpack swap a module-compliant version for a script.</li>
</ul>
<p>You may need to apply multiple shimming techniques to the same component.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#boostrapping-your-application" id="boostrapping-your-application"></a>
<span class="text">Boostrapping Your Application</span>
<a aria-label="Boostrapping Your Application" class="icon-link" href="#boostrapping-your-application"></a>
</h2>
<p>The webcomponent polyfills must be added in a specific order. If you do not delay loading the main bundle with your components, you will see the following exceptions in the browser console:</p>
<pre><code>Uncaught TypeError: Failed to construct <span class="token string">'HTMLElement'</span><span class="token keyword">:</span> Please use the <span class="token string">'new'</span> operator, this DOM object constructor cannot be called as a function.
</code></pre><p>Reference the <a href="https://github.com/webpack-contrib/polymer-webpack-loader/blob/master/demo/src/index.ejs">demo html file</a>
for the proper loading sequence.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/bryandcoulter"></a></p><a href="https://github.com/bryandcoulter">
<p><img height="150" src="https://avatars.githubusercontent.com/u/18359726?v=3" width="150"/></p>
<p><br/></p>
<pre><code>      Bryan Coulter
</code></pre></a><p><a href="https://github.com/bryandcoulter"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/ChadKillingsworth"></a></p><a href="https://github.com/ChadKillingsworth">
<p><img height="150" src="https://avatars.githubusercontent.com/u/1247639?v=3" width="150"/></p>
<p><br/></p>
<pre><code>      Chad Killingsworth
</code></pre></a><p><a href="https://github.com/ChadKillingsworth"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/robdodson"></a></p><a href="https://github.com/robdodson">
<p><img height="150" src="https://avatars.githubusercontent.com/u/1066253?v=3" width="150"/></p>
<p><br/></p>
<pre><code>      Rob Dodson
</code></pre></a><p><a href="https://github.com/robdodson"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>postcss-loader</h1>
<div><p> </p><p>Loader for <a href="https://webpack.js.org/">webpack</a> to process CSS with <a href="https://postcss.org/">PostCSS</a></p>
</div>
<br/><h1>raw-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>可以将文件作为字符串导入的 webpack loader。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>raw-loader</code>：</p>
<pre><code class="lang-console">$ npm install raw-loader --save-dev
</code></pre>
<p>在然后 <code>webpack</code> 配置中添加 loader：</p>
<p><strong>file.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> txt <span class="token keyword">from</span> <span class="token string">'./file.txt'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.txt$/i</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token string">'raw-loader'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或者，通过命令行使用：</p>
<pre><code class="lang-console">$ webpack --module-bind 'txt=raw-loader'
</code></pre>
<p>然后，运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#inline" id="inline"></a>
<span class="text">Inline</span>
<a aria-label="Inline" class="icon-link" href="#inline"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> txt <span class="token keyword">from</span> <span class="token string">'raw-loader!./file.txt'</span><span class="token punctuation">;</span>
</code></pre>
<p>Beware, if you already define loader(s) for extension(s) in <code>webpack.config.js</code> you should use:</p>
<pre><code class="lang-js"><span class="token keyword">import</span> css <span class="token keyword">from</span> <span class="token string">'!!raw-loader!./file.css'</span><span class="token punctuation">;</span> <span class="token comment">// Adding `!!` to a request will disable all loaders specified in the configuration</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/raw-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/raw-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>react-proxy-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]</p>
<p>[![chat][chat]][chat-url]</p>
<p>通过将 react 组件包裹在一个代理组件中，来启用代码分离(code splitting)功能，
可以按需加载 react 组件和它的依赖。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>react-proxy-loader</code>：</p>
<pre><code class="lang-console">$ npm install react-proxy-loader --save-dev
</code></pre>
<p>然后，在 <code>webpack</code> 配置中添加 loader。例如：</p>
<pre><code class="lang-js"><span class="token comment">// 返回代理组件，并按需加载</span>
<span class="token comment">// webpack 会为此组件和它的依赖创建一个额外的 chunk</span>
<span class="token keyword">const</span> Component <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-proxy-loader!./Component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回代理组件的 mixin</span>
<span class="token comment">// 可以在这里设置代理组件的加载中状态</span>
<span class="token keyword">const</span> ComponentProxyMixin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react-proxy-loader!./Component'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Mixin<span class="token punctuation">;</span>

<span class="token keyword">const</span> ComponentProxy <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    mixins<span class="token punctuation">:</span> <span class="token punctuation">[</span>ComponentProxyMixin<span class="token punctuation">]</span><span class="token punctuation">,</span>
    renderUnavailable<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>或者，在配置中指定需要代理的组件：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        loaders<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token comment">/* ... */</span>
            <span class="token punctuation">{</span>
                test<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                    <span class="token regex">/component\.jsx$/</span><span class="token punctuation">,</span> <span class="token comment">// 通过正则表达式(RegExp)匹配选择组件</span>
                    <span class="token regex">/\.async\.jsx$/</span><span class="token punctuation">,</span> <span class="token comment">// 通过扩展名(extension)匹配选择组件</span>
                    <span class="token string">"/abs/path/to/component.jsx"</span> <span class="token comment">// 通过绝对路径(absolute path)匹配选择组件</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                loader<span class="token punctuation">:</span> <span class="token string">"react-proxy-loader"</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>或者，在 <code>name</code> 查询参数中提供一个 chunk 名称：</p>
<pre><code class="lang-js"><span class="token keyword">var</span> Component <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"react-proxy-loader?name=chunkName!./Component"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/react-proxy-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" react-proxy-loader="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>restyle-loader</h1>
<div><div align="center"><p>Updates style <code>&lt;link&gt;</code></p>
<p> href value with a hash to trigger a style reload</p>
<p>Loader new home: <a href="https://github.com/danielverejan/restyle-loader">restyle-loader</a></p>
<p></p></div><p></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev restyle-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p><a href="https://webpack.js.org/loaders/">文档：使用 loader</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css?$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">"restyle-loader"</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">"file-loader"</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">:</span> <span class="token string">"[name].css?[hash:8]"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>hash 需要启用热模块替换(Hot Module Replacement)</p>
<p><strong>bundle.js</strong></p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./index.css"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在这里打包代码...</span>
</code></pre>
<p><strong>index.html</strong></p>
<pre><code class="lang-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>css/index.css<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

</code></pre>
<p>loader 运行后就变成</p>
<pre><code class="lang-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>css/index.css?531fdfd0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>

</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/"></a></p><a href="https://github.com/">
<p><img height="150" src="https://avatars2.githubusercontent.com/u/7072732?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
</a><p><a href="https://github.com/"></a><a href="https://github.com/"></a></p><a href="https://github.com/">
<p>Daniel Verejan</p>
</a><p><a href="https://github.com/"></a></p>
<p></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>sass-loader</h1>
<div><p>Loads a Sass/SCSS file and compiles it to CSS.</p>
<p>Use the <a href="/loaders/css-loader/">css-loader</a> or the <a href="/loaders/raw-loader/">raw-loader</a> to turn it into a JS module and the <a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> to extract it into a separate file.
Looking for the webpack 1 loader? Check out the <a href="https://github.com/webpack-contrib/sass-loader/tree/archive/webpack-1">archive/webpack-1 branch</a>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> sass-loader node-sass webpack --save-dev
</code></pre>
<p><a href="https://github.com/webpack">webpack</a> 是 sass-loader 的 <a href="https://docs.npmjs.com/files/package.json#peerdependencies"><code>peerDependency</code></a>，
并且还需要你预先安装
<a href="https://github.com/sass/node-sass">Node Sass</a> 或 <a href="https://github.com/sass/dart-sass">Dart Sass</a>。
这可以控制所有依赖的版本，
并选择要使用的 Sass 实现。</p>
<p>[Node Sass]：<a href="https://github.com/sass/node-sass">https://github.com/sass/node-sass</a>
[Dart Sass]：<a href="http://sass-lang.com/dart-sass">http://sass-lang.com/dart-sass</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>通过将 <a href="https://github.com/webpack-contrib/style-loader">style-loader</a> 和 <a href="https://github.com/webpack-contrib/css-loader">css-loader</a> 与 sass-loader 链式调用，可以立刻将样式作用在 DOM 元素。</p>
<pre><code class="lang-bash">npm <span class="token function">install</span> style-loader css-loader --save-dev
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">"style-loader"</span><span class="token punctuation">,</span> <span class="token comment">// 将 JS 字符串生成为 style 节点</span>
                <span class="token string">"css-loader"</span><span class="token punctuation">,</span> <span class="token comment">// 将 CSS 转化成 CommonJS 模块</span>
                <span class="token string">"sass-loader"</span> <span class="token comment">// 将 Sass 编译成 CSS，默认使用 Node Sass</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>也可以直接将选项传递给 [Node Sass][] 或 [Dart Sass][]：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"style-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          includePaths<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"absolute/path/a"</span><span class="token punctuation">,</span> <span class="token string">"absolute/path/b"</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>更多 Sass 可用选项，查看 <a href="https://github.com/sass/node-sass/blob/master/README.md#options">Node Sass 文档</a> for all available Sass options.</p>
<p>By default the loader resolve the implementation based on your dependencies.
Just add required implementation to <code>package.json</code>
(<code>node-sass</code> or <code>sass</code> package) and install dependencies.</p>
<p>Example where the <code>sass-loader</code> loader uses the <code>sass</code> (<code>dart-sass</code>) implementation:</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
   <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"sass-loader"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
      <span class="token property">"sass"</span><span class="token operator">:</span> <span class="token string">"*"</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Example where the <code>sass-loader</code> loader uses the <code>node-sass</code> implementation:</p>
<p><strong>package.json</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
   <span class="token property">"devDependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"sass-loader"</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span>
      <span class="token property">"node-sass"</span><span class="token operator">:</span> <span class="token string">"*"</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Beware the situation
when <code>node-sass</code> and <code>sass</code> was installed, by default the <code>sass-loader</code>
prefers <code>node-sass</code>, to avoid this situation use the <code>implementation</code> option.</p>
<p>The special <code>implementation</code> option determines which implementation of Sass to
use. It takes either a [Node Sass][] or a [Dart Sass][] module. For example, to
use Dart Sass, you'd pass:</p>
<pre><code class="lang-js"><span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            implementation<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"sass"</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token comment">// ...</span>
</code></pre>
<p>Note that when using Dart Sass, <strong>synchronous compilation is twice as fast as
asynchronous compilation</strong> by default, due to the overhead of asynchronous
callbacks. To avoid this overhead, you can use the
<a href="https://www.npmjs.com/package/fibers"><code>fibers</code></a> package to call asynchronous
importers from the synchronous code path. To enable this, pass the <code>Fiber</code> class
to the <code>fiber</code> option:</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> Fiber <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fibers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"style-loader"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    implementation<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"sass"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    fiber<span class="token punctuation">:</span> Fiber
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>##</p>
<p>通常，生产环境下比较推荐的做法是，使用 <a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> 将样式表抽离成专门的单独文件。这样，样式表将不再依赖于 JavaScript：</p>
<pre><code class="lang-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token comment">// fallback to style-loader in development</span>
                process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
                <span class="token string">"css-loader"</span><span class="token punctuation">,</span>
                <span class="token string">"sass-loader"</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
            <span class="token comment">// both options are optional</span>
            filename<span class="token punctuation">:</span> <span class="token string">"[name].css"</span><span class="token punctuation">,</span>
            chunkFilename<span class="token punctuation">:</span> <span class="token string">"[id].css"</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#导入-import-" id="导入-import-"></a>
<span class="text">导入(import)</span>
<a aria-label="导入(import)" class="icon-link" href="#导入-import-"></a>
</h3>
<p>webpack 提供一种<a href="https://webpack.js.org/concepts/module-resolution/">解析文件的高级的机制</a>。sass-loader 使用 Sass 的 custom importer 特性，将所有的 query 传递给 webpack 的解析引擎(resolving engine)。只要它们前面加上 <code>~</code>，告诉 webpack 它不是一个相对路径，这样就可以 import 导入 <code>node_modules</code> 目录里面的 sass 模块：</p>
<pre><code class="lang-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">"~bootstrap/dist/css/bootstrap"</span><span class="token punctuation">;</span></span>
</code></pre>
<p>重要的是，只在前面加上 <code>~</code>，因为 <code>~/</code> 会解析到主目录(home directory)。webpack 需要区分 <code>bootstrap</code> 和 <code>~bootstrap</code>，因为 CSS 和 Sass 文件没有用于导入相关文件的特殊语法。<code>@import "file"</code> 与 <code>@import "./file";</code> 这两种写法是相同的</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#url-的问题" id="url-的问题"></a>
<span class="text"><code>url(...)</code> 的问题</span>
<a aria-label="&lt;code&gt;url(...)&lt;/code&gt; 的问题" class="icon-link" href="#url-的问题"></a>
</h3>
<p>由于 Sass/<a href="https://github.com/sass/libsass">libsass</a> 并没有提供<a href="https://github.com/sass/libsass/issues/532">url rewriting</a> 的功能，所以所有的链接资源都是相对输出文件(output)而言。</p>
<ul>
<li>如果生成的 CSS 没有传递给 css-loader，它相对于网站的根目录。</li>
<li>如果生成的 CSS 传递给了 css-loader，则所有的 url 都相对于入口文件（例如：<code>main.scss</code>）。</li>
</ul>
<p>第二种情况可能会带来一些问题。正常情况下我们期望相对路径的引用是相对于 <code>.scss</code> 去解析（如同在 <code>.css</code> 文件一样）。幸运的是，有2个方法可以解决这个问题：</p>
<ul>
<li>将 <a href="https://github.com/bholloway/resolve-url-loader">resolve-url-loader</a> 设置于 loader 链中的 sass-loader 之前，就可以重写 url。</li>
<li>Library 作者一般都会提供变量，用来设置资源路径，如 <a href="https://github.com/twbs/bootstrap-sass">bootstrap-sass</a> 可以通过 <code>$icon-font-path</code> 来设置。参见<a href="https://github.com/webpack-contrib/sass-loader/tree/master/test/bootstrapSass">this working bootstrap example</a>。</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#提取样式表" id="提取样式表"></a>
<span class="text">提取样式表</span>
<a aria-label="提取样式表" class="icon-link" href="#提取样式表"></a>
</h3>
<p>使用 webpack 打包 CSS 有许多优点，在开发环境，可以通过 hashed urls 或 <a href="https://webpack.js.org/concepts/hot-module-replacement/">模块热替换(HMR)</a> 引用图片和字体资源。而在线上环境，使样式依赖 JS 执行环境并不是一个好的实践。渲染会被推迟，甚至会出现 <a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC</a>，因此在最终线上环境构建时，最好还是能够将 CSS 放在单独的文件中。</p>
<p>从 bundle 中提取样式表，有2种可用的方法：</p>
<ul>
<li><a href="https://github.com/peerigon/extract-loader">extract-loader</a> （简单，专门针对 css-loader 的输出）</li>
<li><a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> (use this, when using webpack 4 configuration. Works in all use-cases)</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#source-maps" id="source-maps"></a>
<span class="text">Source maps</span>
<a aria-label="Source maps" class="icon-link" href="#source-maps"></a>
</h3>
<p>要启用 CSS source map，需要将 <code>sourceMap</code> 选项作为参数，传递给 <em>sass-loader</em> 和 <em>css-loader</em>。此时<code>webpack.config.js</code> 如下：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    devtool<span class="token punctuation">:</span> <span class="token string">"source-map"</span><span class="token punctuation">,</span> <span class="token comment">// any "source-map"-like devtool is possible</span>
    module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
            test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
            use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"style-loader"</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>如果你要在 Chrome 中编辑原始的 Sass 文件，建议阅读<a href="https://medium.com/@toolmantim/getting-started-with-css-sourcemaps-and-in-browser-sass-editing-b4daab987fb0">这篇不错的博客文章</a>。具体示例参考 <a href="https://github.com/webpack-contrib/sass-loader/tree/master/test">test/sourceMap</a>。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#-环境变量" id="-环境变量"></a>
<span class="text">环境变量</span>
<a aria-label="环境变量" class="icon-link" href="#-环境变量"></a>
</h3>
<p>如果你要将 Sass 代码放在实际的入口文件(entry file)之前，可以设置 <code>data</code> 选项。此时 sass-loader 不会覆盖 <code>data</code> 选项，只会将它拼接在入口文件的内容之前。当 Sass 变量依赖于环境时，这一点尤其有用。</p>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">:</span> <span class="token string">"$env: "</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">+</span> <span class="token string">";"</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The <code>data</code> option supports <code>Function</code> notation:</p>
<pre><code class="lang-javascript"><span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">"sass-loader"</span><span class="token punctuation">,</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">(</span>loaderContext<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// More information about avalaible options https://webpack.js.org/api/loaders/</span>
          <span class="token keyword">const</span> <span class="token punctuation">{</span> resourcePath<span class="token punctuation">,</span> rootContext <span class="token punctuation">}</span> <span class="token operator">=</span> loaderContext<span class="token punctuation">;</span>
          <span class="token keyword">const</span> relativePath <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">relative</span><span class="token punctuation">(</span>rootContext<span class="token punctuation">,</span>resourcePath<span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>relativePath <span class="token operator">===</span> <span class="token string">"styles/foo.scss"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token string">"$value: 100px;"</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token string">"$value: 200px;"</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>注意：</strong>由于代码注入, 会破坏整个入口文件的 source map。通常一个简单的解决方案是，多个 Sass 文件入口。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/jhnns"></a></p><a href="https://github.com/jhnns">
<p><img height="150" src="https://avatars0.githubusercontent.com/u/781746?v=3" width="150"/></p>
</a><p><a href="https://github.com/jhnns"></a></p>
<p><br/></p>
<p><a href="https://github.com/jhnns"></a></p><a href="https://github.com/jhnns">
<p>Johannes Ewald</p>
</a><p><a href="https://github.com/jhnns"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/webpack-contrib"></a></p><a href="https://github.com/webpack-contrib">
<p><img height="150" src="https://avatars1.githubusercontent.com/u/1243901?v=3&amp;s=460" width="150"/></p>
</a><p><a href="https://github.com/webpack-contrib"></a></p>
<p><br/></p>
<p><a href="https://github.com/webpack-contrib"></a></p><a href="https://github.com/webpack-contrib">
<p>Jorik Tangelder</p>
</a><p><a href="https://github.com/webpack-contrib"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/akiran"></a></p><a href="https://github.com/akiran">
<p><img height="150" src="https://avatars1.githubusercontent.com/u/3403295?v=3" width="150"/></p>
</a><p><a href="https://github.com/akiran"></a></p>
<p><br/></p>
<p><a href="https://github.com/akiran"></a></p><a href="https://github.com/akiran">
<p>Kiran</p>
</a><p><a href="https://github.com/akiran"></a></p>
<p></p></td>
</tr><tr></tr></tbody></table><p></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="http://www.opensource.org/licenses/mit-license.php">MIT</a></p>
</div>
<br/><h1>script-loader</h1>
<div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev script-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>在全局上下文(global context)执行一次 JS 脚本。</p>
<blockquote>
<p>:警告: 在 node.js 中不会运行</p>
</blockquote>
<p>##</p>
<pre><code class="lang-js"><span class="token keyword">import</span> exec <span class="token keyword">from</span> <span class="token string">'script.exec.js'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.exec\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token string">'script-loader'</span> <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#内联" id="内联"></a>
<span class="text">内联</span>
<a aria-label="内联" class="icon-link" href="#内联"></a>
</h3>
<pre><code class="lang-js"><span class="token keyword">import</span> exec <span class="token keyword">from</span> <span class="token string">'script-loader!./script.js'</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><a href="#sourcemap"><code>sourceMap</code></a></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Enable/Disable Sourcemaps
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>To include source maps set the <code>sourceMap</code> option.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.script\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'script-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>source-map-loader</h1>
<div><p>Extracts source maps from existing source files (from their <code>sourceMappingURL</code>).</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D source-map-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p><a href="https://webpack.js.org/concepts/#loaders">文档：使用 loader</a></p>
<p>##</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"source-map-loader"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        enforce<span class="token punctuation">:</span> <span class="token string">"pre"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><code>source-map-loader</code> extracts existing source maps from all JavaScript entries. This includes both inline source maps as well as those linked via URL. All source map data is passed to webpack for processing as per a chosen <a href="https://webpack.js.org/configuration/devtool/">source map style</a> specified by the <code>devtool</code> option in <a href="https://webpack.js.org/configuration/">webpack.config.js</a>.</p>
<p>This loader is especially useful when using 3rd-party libraries having their own source maps. If not extracted and processed into the source map of the webpack bundle, browsers may misinterpret source map data. <code>source-map-loader</code> allows webpack to maintain source map data continuity across libraries so ease of debugging is preserved.</p>
<p><code>source-map-loader</code> will extract from any JavaScript file, including those in the <code>node_modules</code> directory. Be mindful in setting <a href="https://webpack.js.org/configuration/module/#rule-include">include</a> and <a href="https://webpack.js.org/configuration/module/#rule-exclude">exclude</a> rule conditions to maximize bundling performance.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>style-loader</h1>
<div><p>Adds CSS to the DOM by injecting a <code>&lt;style&gt;</code> tag</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> style-loader --save-dev
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>建议将 <code>style-loader</code> 与 <a href="https://github.com/webpack/css-loader"><code>css-loader</code></a> 结合使用</p>
<p><strong>component.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>###</p>
<p>在使用<a href="https://github.com/webpack/css-loader#css-scope">局部作用域 CSS</a> 时，模块导出生成的（局部）标识符(identifier)。</p>
<p><strong>component.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./file.css'</span><span class="token punctuation">;</span>

style<span class="token punctuation">.</span>className <span class="token operator">===</span> <span class="token string">'z849f98ca812'</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#url" id="url"></a>
<span class="text"><code>Url</code></span>
<a aria-label="&lt;code&gt;Url&lt;/code&gt;" class="icon-link" href="#url"></a>
</h3>
<p>也可以添加一个URL <code>&lt;link href="path/to/file.css" rel="stylesheet"&gt;</code>，而不是用带有 <code>&lt;style&gt;&lt;/style&gt;</code> 标签的内联 CSS <code>{String}</code>。</p>
<pre><code class="lang-js"><span class="token keyword">import</span> url <span class="token keyword">from</span> <span class="token string">'file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader/url'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>path/to/file.css<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre>
<blockquote>
<p>ℹ️ 使用 <code>url</code> 引用的 Source map 和资源：当 style-loader 与 <code>{ options: { sourceMap: true } }</code> 选项一起使用时，CSS 模块将生成为 <code>Blob</code>，因此相对路径无法正常工作（他们将相对于 <code>chrome:blob</code> 或 <code>chrome:devtools</code>）。为了使资源保持正确的路径，必须设置 webpack 配置中的 <code>output.publicPath</code> 属性，以便生成绝对路径。或者，你可以启用上面提到的 <code>convertToAbsoluteUrls</code> 选项。</p>
</blockquote>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#可选的-useable-" id="可选的-useable-"></a>
<span class="text"><code>可选的(Useable)</code></span>
<a aria-label="&lt;code&gt;可选的(Useable)&lt;/code&gt;" class="icon-link" href="#可选的-useable-"></a>
</h3>
<p>The <code>style-loader</code> injects the styles lazily making them useable on-demand via <code>style.use()</code> / <code>style.unuse()</code></p>
<p>按照惯例，<code>引用计数器 API(Reference Counter API)</code> 应关联到 <code>.useable.css</code>，而 <code>.css</code> 的载入，应该使用基本的 <code>style-loader</code> 用法（类似于其他文件类型，例如 <code>.useable.less</code> 和 <code>.less</code>）。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/\.useable\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">"style-loader"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.useable\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">"style-loader/useable"</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">"css-loader"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#引用计数器-api-reference-counter-api-" id="引用计数器-api-reference-counter-api-"></a>
<span class="text"><code>引用计数器 API(reference counter API)</code></span>
<a aria-label="&lt;code&gt;引用计数器 API(reference counter API)&lt;/code&gt;" class="icon-link" href="#引用计数器-api-reference-counter-api-"></a>
</h4>
<p><strong>component.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./file.css'</span><span class="token punctuation">;</span>

style<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// = style.ref();</span>
style<span class="token punctuation">.</span><span class="token function">unuse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// = style.unref();</span>
</code></pre>
<p>样式不会添加在 <code>import/require()</code> 上，而是在调用 <code>use</code>/<code>ref</code> 时添加。如果 <code>unuse</code>/<code>unref</code> 与 <code>use</code>/<code>ref</code> 一样频繁地被调用，那么样式将从页面中删除。</p>
<blockquote>
<p>⚠️ 当 <code>unuse</code>/<code>unref</code> 比 <code>use</code>/<code>ref</code> 调用频繁的时候，产生的行为是不确定的。所以不要这样做。</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">默认值</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>hmr</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Enable/disable Hot Module Replacement (HMR), if disabled no HMR Code will be added (good for non local development/production)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>base</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Number}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>true</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        设置模块 ID 基础 (DLLPlugin)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>attrs</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>{}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        添加自定义 attrs 到 <code>&lt;style&gt;&lt;/style&gt;</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>transform</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        转换/条件加载 CSS，通过传递转换/条件函数
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>insertAt</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String|Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>bottom</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        在给定位置处插入 <code>&lt;style&gt;&lt;/style&gt;</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>insertInto</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>&lt;head&gt;</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        给定位置中插入 <code>&lt;style&gt;&lt;/style&gt;</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>singleton</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        Reuses a single <code>&lt;style&gt;&lt;/style&gt;</code> element, instead of adding/removing individual elements for each required module.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>sourceMap</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用/禁用 Sourcemap
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>convertToAbsoluteUrls</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        默认值
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        启用 source map 后，将相对 URL 转换为绝对 URL
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#hmr" id="hmr"></a>
<span class="text"><code>hmr</code></span>
<a aria-label="&lt;code&gt;hmr&lt;/code&gt;" class="icon-link" href="#hmr"></a>
</h3>
<p>Enable/disable Hot Module Replacement (HMR), if disabled no HMR Code will be added.
This could be used for non local development and production.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    hmr<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#base" id="base"></a>
<span class="text"><code>base</code></span>
<a aria-label="&lt;code&gt;base&lt;/code&gt;" class="icon-link" href="#base"></a>
</h3>
<p>当使用一个或多个 <a href="https://robertknight.github.io/posts/webpack-dll-plugins/">DllPlugin</a> 时，此设置主要用作 <a href="https://github.com/webpack-contrib/style-loader/issues/163">css 冲突</a> 的修补方案。<code>base</code> 可以防止 <em>app</em> 的 css（或 <em>DllPlugin2</em> 的 css）覆盖 <em>DllPlugin1</em> 的 css，方法是指定一个 css 模块的 id 大于 <em>DllPlugin1</em> 的范围，例如：</p>
<p><strong>webpack.dll1.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
    <span class="token string">'css-loader'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>webpack.dll2.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span> base<span class="token punctuation">:</span> <span class="token number">1000</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string">'css-loader'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>webpack.app.config.js</strong></p>
<pre><code><span class="token punctuation">{</span>
  test: /\.css$/,
  use: <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> loader: <span class="token string">'style-loader'</span>, options: <span class="token punctuation">{</span> base: 2000 <span class="token punctuation">}</span> <span class="token punctuation">}</span>,
    <span class="token string">'css-loader'</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><h3 class="header">
<a aria-hidden="true" class="anchor" href="#attrs" id="attrs"></a>
<span class="text"><code>attrs</code></span>
<a aria-label="&lt;code&gt;attrs&lt;/code&gt;" class="icon-link" href="#attrs"></a>
</h3>
<p>如果已定义，style-loader 将把属性值附加在 <code>&lt;style&gt;</code> / <code>&lt;link&gt;</code> 元素上。</p>
<p><strong>component.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> style <span class="token keyword">from</span> <span class="token string">'./file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span> attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'id'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token style language-css"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#url" id="url"></a>
<span class="text"><code>Url</code></span>
<a aria-label="&lt;code&gt;Url&lt;/code&gt;" class="icon-link" href="#url"></a>
</h4>
<p><strong>component.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> link <span class="token keyword">from</span> <span class="token string">'./file.css'</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
  use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'style-loader/url'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span> attrs<span class="token punctuation">:</span> <span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token string">'id'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
    <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'file-loader'</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#transform" id="transform"></a>
<span class="text"><code>transform</code></span>
<a aria-label="&lt;code&gt;transform&lt;/code&gt;" class="icon-link" href="#transform"></a>
</h3>
<p><code>transform</code> 是一个函数，可以在通过 style-loader 加载到页面之前修改 css。
该函数将在即将加载的 css 上调用，函数的返回值将被加载到页面，而不是原始的 css 中。
如果 <code>transform</code> 函数的返回值是 falsy 值，那么 css 根本就不会加载到页面中。</p>
<blockquote>
<p>⚠️ In case you are using ES Module syntax in <code>tranform.js</code> then, you <strong>need to transpile</strong> it or otherwise it will throw an <code>{Error}</code>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    transform<span class="token punctuation">:</span> <span class="token string">'path/to/transform.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>transform.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Here we can change the original css</span>
  <span class="token keyword">const</span> transformed <span class="token operator">=</span> css<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'.classNameA'</span><span class="token punctuation">,</span> <span class="token string">'.classNameB'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> transformed<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#conditional" id="conditional"></a>
<span class="text"><code>Conditional</code></span>
<a aria-label="&lt;code&gt;Conditional&lt;/code&gt;" class="icon-link" href="#conditional"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    transform<span class="token punctuation">:</span> <span class="token string">'path/to/conditional.js'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>conditional.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>css<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果条件匹配则加载[和转换] CSS</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>css<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'something I want to check'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> css<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 如果返回 falsy 值，则不会加载 CSS</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#insertat" id="insertat"></a>
<span class="text"><code>insertAt</code></span>
<a aria-label="&lt;code&gt;insertAt&lt;/code&gt;" class="icon-link" href="#insertat"></a>
</h3>
<p>默认情况下，style-loader 将 <code>&lt;style&gt;</code> 元素附加到样式目标(style target)的末尾，即页面的 <code>&lt;head&gt;</code> 标签，也可以是由 <code>insertInto</code> 指定其他标签。这将导致 loader 创建的 CSS 优先于目标中已经存在的 CSS。要在目标的起始处插入 style 元素，请将此查询参数(query parameter)设置为 'top'，例如</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    insertAt<span class="token punctuation">:</span> <span class="token string">'top'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>A new <code>&lt;style&gt;</code> element can be inserted before a specific element by passing an object, e.g.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    insertAt<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        before<span class="token punctuation">:</span> <span class="token string">'#id'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#insertinto" id="insertinto"></a>
<span class="text"><code>insertInto</code></span>
<a aria-label="&lt;code&gt;insertInto&lt;/code&gt;" class="icon-link" href="#insertinto"></a>
</h3>
<p>默认情况下，样式加载器将 <code>&lt;style&gt;</code> 元素插入到页面的 <code>&lt;head&gt;</code> 标签中。如果要将标签插入到其他位置，可以在这里为该元素指定 CSS 选择器。如果你想要插入到 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLIFrameElement">IFrame</a> 中，请确保你具有足够的访问权限，样式将被注入到内容文档的 head 中。</p>
<p>You can also pass function to override default behavior and insert styles in your container, e.g</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    insertInto<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#root"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>通过使用函数，可以将样式插入到 <a href="https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot">ShadowRoot</a> 中，例如</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    insertInto<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"#root"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#singleton" id="singleton"></a>
<span class="text"><code>singleton</code></span>
<a aria-label="&lt;code&gt;singleton&lt;/code&gt;" class="icon-link" href="#singleton"></a>
</h3>
<p>如果已定义，则 style-loader 将重用单个 <code>&lt;style&gt;&lt;/style&gt;</code> 元素，而不是为每个所需的模块添加/删除单个元素。</p>
<blockquote>
<p>ℹ️ 默认情况下启用此选项，IE9 对页面上允许的 style 标签数量有严格的限制。你可以使用 singleton 选项来启用或禁用它。</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    singleton<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>启用/禁用 source map 加载</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#converttoabsoluteurls" id="converttoabsoluteurls"></a>
<span class="text"><code>convertToAbsoluteUrls</code></span>
<a aria-label="&lt;code&gt;convertToAbsoluteUrls&lt;/code&gt;" class="icon-link" href="#converttoabsoluteurls"></a>
</h3>
<p>如果 convertToAbsoluteUrls 和 sourceMaps 都启用，那么相对 url 将在 css 注入页面之前，被转换为绝对 url。这解决了在启用 source map 时，相对资源无法加载的<a href="https://github.com/webpack/style-loader/pull/96">问题</a>。你可以使用 convertToAbsoluteUrls 选项启用它。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    convertToAbsoluteUrls<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p><img height="150" src="https://github.com/bebraw.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Juho Vepsäläinen
</code></pre></a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p><img height="150" src="https://github.com/d3viant0ne.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Joshua Wiens
</code></pre></a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/sapegin"></a></p><a href="https://github.com/sapegin">
<p><img height="150" src="https://github.com/sapegin.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Artem Sapegin
</code></pre></a><p><a href="https://github.com/sapegin"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/michael-ciniawsky"></a></p><a href="https://github.com/michael-ciniawsky">
<p><img height="150" src="https://github.com/michael-ciniawsky.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Michael Ciniawsky
</code></pre></a><p><a href="https://github.com/michael-ciniawsky"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/evilebottnawi"></a></p><a href="https://github.com/evilebottnawi">
<p><img height="150" src="https://github.com/evilebottnawi.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Alexander Krasnoyarov
</code></pre></a><p><a href="https://github.com/evilebottnawi"></a></p>
<p></p></td>
</tr>
<tr><td align="center"><p><a href="https://github.com/sokra"></a></p><a href="https://github.com/sokra">
<p><img height="150" src="https://github.com/sokra.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Tobias Koppers
</code></pre></a><p><a href="https://github.com/sokra"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p><img height="150" src="https://github.com/SpaceK33z.png?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<pre><code>      Kees Kluskens
</code></pre></a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
</tr><tr></tr></tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>svg-inline-loader</h1>
<div><p>This Webpack loader inlines SVG as module. If you use Adobe suite or Sketch to export SVGs, you will get auto-generated, unneeded crusts. This loader removes it for you, too.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> svg-inline-loader --save-dev
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h2>
<p>只需加载配置对象到 <code>module.loaders</code> 像下面这样。</p>
<pre><code class="lang-javascript">    <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.svg$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'svg-inline-loader'</span>
    <span class="token punctuation">}</span>
</code></pre>
<p>警告: 这个loader你应只配置一次，通过 <code>module.loaders</code> 或者 <code>require('!...')</code> 配置。 更多细节参考 <a href="https://github.com/webpack-contrib/svg-inline-loader/issues/15">#15</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#query-选项" id="query-选项"></a>
<span class="text">Query 选项</span>
<a aria-label="Query 选项" class="icon-link" href="#query-选项"></a>
</h2>
<p>###</p>
<p>删除指定的标签和它的子元素，你可以指定标签通过设置 <code>removingTags</code> 查询多个。</p>
<p>默认值: <code>removeTags: false</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#removingtags-string-" id="removingtags-string-"></a>
<span class="text"><code>removingTags: [...string]</code></span>
<a aria-label="&lt;code&gt;removingTags: [...string]&lt;/code&gt;" class="icon-link" href="#removingtags-string-"></a>
</h4>
<p>警告: 你指定 <code>removeTags: true</code> 时，它才会执行。</p>
<p>默认值: <code>removingTags: ['title', 'desc', 'defs', 'style']</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#warntags-string-" id="warntags-string-"></a>
<span class="text"><code>warnTags: [...string]</code></span>
<a aria-label="&lt;code&gt;warnTags: [...string]&lt;/code&gt;" class="icon-link" href="#warntags-string-"></a>
</h4>
<p>警告标签,例: ['desc', 'defs', 'style']</p>
<p>默认值: <code>warnTags: []</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#removesvgtagattrs-boolean" id="removesvgtagattrs-boolean"></a>
<span class="text"><code>removeSVGTagAttrs: boolean</code></span>
<a aria-label="&lt;code&gt;removeSVGTagAttrs: boolean&lt;/code&gt;" class="icon-link" href="#removesvgtagattrs-boolean"></a>
</h4>
<p>删除 <code>&lt;svg /&gt;</code> 的 <code>width</code> 和 <code>height</code> 属性。</p>
<p>默认值: <code>removeSVGTagAttrs: true</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#removingtagattrs-string-" id="removingtagattrs-string-"></a>
<span class="text"><code>removingTagAttrs: [...string]</code></span>
<a aria-label="&lt;code&gt;removingTagAttrs: [...string]&lt;/code&gt;" class="icon-link" href="#removingtagattrs-string-"></a>
</h4>
<p>删除内部的 <code>&lt;svg /&gt;</code>的属性。</p>
<p>默认值: <code>removingTagAttrs: []</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#warntagattrs-string-" id="warntagattrs-string-"></a>
<span class="text"><code>warnTagAttrs: [...string]</code></span>
<a aria-label="&lt;code&gt;warnTagAttrs: [...string]&lt;/code&gt;" class="icon-link" href="#warntagattrs-string-"></a>
</h4>
<p>在console发出关于内部 <code>&lt;svg /&gt;</code> 属性的警告</p>
<p>默认值: <code>warnTagAttrs: []</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#classprefix-boolean-string" id="classprefix-boolean-string"></a>
<span class="text"><code>classPrefix: boolean || string</code></span>
<a aria-label="&lt;code&gt;classPrefix: boolean || string&lt;/code&gt;" class="icon-link" href="#classprefix-boolean-string"></a>
</h4>
<p>添加一个前缀到svg文件的class，以避免碰撞。</p>
<p>默认值: <code>classPrefix: false</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#idprefix-boolean-string" id="idprefix-boolean-string"></a>
<span class="text"><code>idPrefix: boolean || string</code></span>
<a aria-label="&lt;code&gt;idPrefix: boolean || string&lt;/code&gt;" class="icon-link" href="#idprefix-boolean-string"></a>
</h4>
<p>添加一个前缀到svg文件的id，以避免碰撞。</p>
<p>默认值: <code>idPrefix: false</code></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用示例" id="使用示例"></a>
<span class="text">使用示例</span>
<a aria-label="使用示例" class="icon-link" href="#使用示例"></a>
</h2>
<pre><code class="lang-js"><span class="token comment">// 使用默认 hashed prefix (__[hash:base64:7]__)</span>
<span class="token keyword">var</span> logoTwo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'svg-inline-loader?classPrefix!./logo_two.svg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用自定义字符串</span>
<span class="token keyword">var</span> logoOne <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'svg-inline-loader?classPrefix=my-prefix-!./logo_one.svg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 使用自定义字符串和hash</span>
<span class="token keyword">var</span> logoThree <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'svg-inline-loader?classPrefix=__prefix-[sha512:hash:hex:5]__!./logo_three.svg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>hash 操作请参照 <a href="https://github.com/webpack/loader-utils#interpolatename">loader-utils</a>。</p>
<p>通过 <code>module.loaders</code> 优先使用:</p>
<pre><code class="lang-js">    <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.svg$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token string">'svg-inline-loader?classPrefix'</span>
    <span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>thread-loader</h1>
<div><p>Runs the following loaders in a worker pool.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev thread-loader
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>把这个 loader 放置在其他 loader 之前， 放置在这个 loader 之后的 loader 就会在一个单独的 worker 池(worker pool)中运行</p>
<p>在 worker 池(worker pool)中运行的 loader 是受到限制的。例如：</p>
<ul>
<li>这些 loader 不能产生新的文件。</li>
<li>这些 loader 不能使用定制的 loader API（也就是说，通过插件）。</li>
<li>这些 loader 无法获取 webpack 的选项设置。</li>
</ul>
<p>每个 worker 都是一个单独的有 600ms 限制的 node.js 进程。同时跨进程的数据交换也会被限制。</p>
<p>请仅在耗时的 loader 上使用</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
        include<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"src"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token string">"thread-loader"</span><span class="token punctuation">,</span>
          <span class="token comment">// your expensive loader (e.g babel-loader)</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>可配选项</strong></p>
<pre><code class="lang-js">use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    loader<span class="token punctuation">:</span> <span class="token string">"thread-loader"</span><span class="token punctuation">,</span>
    <span class="token comment">// 有同样配置的 loader 会共享一个 worker 池(worker pool)</span>
    options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// 产生的 worker 的数量，默认是 (cpu 核心数 - 1)</span>
      <span class="token comment">// 或者，在 require('os').cpus() 是 undefined 时回退至 1</span>
      workers<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>

      <span class="token comment">// 一个 worker 进程中并行执行工作的数量</span>
      <span class="token comment">// 默认为 20</span>
      workerParallelJobs<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>

      <span class="token comment">// 额外的 Node.js 参数</span>
      workerNodeArgs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'--max-old-space-size=1024'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>

      <span class="token comment">// Allow to respawn a dead worker pool</span>
      <span class="token comment">// respawning slows down the entire compilation</span>
      <span class="token comment">// and should be set to false for development</span>
      poolRespawn<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>

      <span class="token comment">// 闲置时定时删除 worker 进程</span>
      <span class="token comment">// 默认为 500ms</span>
      <span class="token comment">// 可以设置为无穷大， 这样在监视模式(--watch)下可以保持 worker 持续存在</span>
      poolTimeout<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>

      <span class="token comment">// 池(pool)分配给 worker 的工作数量</span>
      <span class="token comment">// 默认为 200</span>
      <span class="token comment">// 降低这个数值会降低总体的效率，但是会提升工作分布更均一</span>
      poolParallelJobs<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>

      <span class="token comment">// 池(pool)的名称</span>
      <span class="token comment">// 可以修改名称来创建其余选项都一样的池(pool)</span>
      name<span class="token punctuation">:</span> <span class="token string">"my-pool"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// your expensive loader (e.g babel-loader)</span>
<span class="token punctuation">]</span>
</code></pre>
<p><strong>预热</strong></p>
<p>可以通过预热 worker 池(worker pool)来防止启动 worker 时的高延时。</p>
<p>这会启动池(pool)内最大数量的 worker 并把指定的模块载入 node.js 的模块缓存中。</p>
<pre><code class="lang-js"><span class="token keyword">const</span> threadLoader <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'thread-loader'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

threadLoader<span class="token punctuation">.</span><span class="token function">warmup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// pool options, like passed to loader options</span>
  <span class="token comment">// must match loader options to boot the correct pool</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
  <span class="token comment">// modules to load</span>
  <span class="token comment">// can be any module, i. e.</span>
  <span class="token string">'babel-loader'</span><span class="token punctuation">,</span>
  <span class="token string">'babel-preset-es2015'</span><span class="token punctuation">,</span>
  <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/sokra"></a></p><a href="https://github.com/sokra">
<p><img height="150" src="https://github.com/sokra.png?size=150" width="150"/></p>
<p><br/></p>
<pre><code>      sokra
</code></pre></a><p><a href="https://github.com/sokra"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>transform-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>A browserify transformation loader for webpack.</p>
<p>This loader allows use of
<a href="https://github.com/substack/node-browserify/wiki/list-of-transforms">browserify transforms</a>
via a webpack loader.query parameter</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>transform-loader</code>:</p>
<pre><code class="lang-console">$ npm install transform-loader --save-dev
</code></pre>
<p><em>Note: We're using the <a href="https://github.com/jnordberg/coffeeify">coffeeify</a>
tranform for these examples.</em></p>
<p>Then invoke the loader through a require like so:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> thing <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'!transform-loader?coffeeify!widget/thing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Or add the loader to your <code>webpack</code> config. For example:</p>
<pre><code class="lang-js"><span class="token comment">// entry.js</span>
<span class="token keyword">import</span> thing <span class="token keyword">from</span> <span class="token string">'widget/thing'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.coffee?$/</span><span class="token punctuation">,</span>
        loader<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`transform-loader?coffeeify`</span></span><span class="token punctuation">,</span>
        <span class="token comment">// options: {...}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#querystring-options" id="querystring-options"></a>
<span class="text">QueryString Options</span>
<a aria-label="QueryString Options" class="icon-link" href="#querystring-options"></a>
</h2>
<p>When using the loader via a <code>require</code> query string you may specify one of two
types; a loader name, or a function index.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#" id=""></a>
<span class="text"><loder-name></loder-name></span>
<a aria-label="&lt;loder-name&gt;" class="icon-link" href="#"></a>
</h3>
<p>Type: <code>String</code></p>
<p>The name of the <code>browserify</code> transform you wish to use.</p>
<p><em>Note: You must install the correct transform manually. Webpack nor this loader
will do that for you.</em></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#" id=""></a>
<span class="text"><loder-index></loder-index></span>
<a aria-label="&lt;loder-index&gt;" class="icon-link" href="#"></a>
</h3>
<p>Type: <code>Number</code></p>
<p>The index of a function contained within <code>options.transforms</code> which to use to
transform the target file(s).</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#transforms" id="transforms"></a>
<span class="text"><code>transforms</code></span>
<a aria-label="&lt;code&gt;transforms&lt;/code&gt;" class="icon-link" href="#transforms"></a>
</h3>
<p>Type: <code>Array[Function]</code>
Default: <code>undefined</code></p>
<p>An array of <code>functions</code> that can be used to transform a given file matching the
configured loader <code>test</code>. For example:</p>
<pre><code class="lang-js"><span class="token comment">// entry.js</span>
<span class="token keyword">const</span> thing <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'widget/thing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> through <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'through2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.ext$/</span><span class="token punctuation">,</span>
        <span class="token comment">// NOTE: we've specified an index of 0, which will use the `transform`</span>
        <span class="token comment">//       function in `transforms` below.</span>
        loader<span class="token punctuation">:</span> <span class="token string">'transform-loader?0'</span><span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          transforms<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token keyword">function</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token keyword">return</span> <span class="token function">through</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span>buffer<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
                  <span class="token keyword">const</span> result <span class="token operator">=</span> buffer
                    <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">127</span> <span class="token operator">-</span> chunk<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>
              <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/transform-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" transform-loader="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>url-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>A loader for webpack which transforms files into base64 URIs.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>url-loader</code>:</p>
<pre><code class="lang-console">$ npm install url-loader --save-dev
</code></pre>
<p><code>url-loader</code> works like
<a href="/loaders/file-loader/"><code>file-loader</code></a>, but can return
a DataURL if the file is smaller than a byte limit.</p>
<pre><code class="lang-js"><span class="token keyword">import</span> img <span class="token keyword">from</span> <span class="token string">'./image.png'</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(png|jpg|gif)$/i</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              limit<span class="token punctuation">:</span> <span class="token number">8192</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#fallback" id="fallback"></a>
<span class="text"><code>fallback</code></span>
<a aria-label="&lt;code&gt;fallback&lt;/code&gt;" class="icon-link" href="#fallback"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>'file-loader'</code></p>
<p>Specifies an alternative loader to use when a target file's size exceeds the
limit set in the <code>limit</code> option.</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fallback<span class="token punctuation">:</span> <span class="token string">'responsive-loader'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The fallback loader will receive the same configuration options as url-loader.</p>
<p>For example, to set the quality option of a responsive-loader above use:</p>
<pre><code class="lang-js"><span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fallback<span class="token punctuation">:</span> <span class="token string">'responsive-loader'</span><span class="token punctuation">,</span>
    quality<span class="token punctuation">:</span> <span class="token number">85</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#limit" id="limit"></a>
<span class="text"><code>limit</code></span>
<a aria-label="&lt;code&gt;limit&lt;/code&gt;" class="icon-link" href="#limit"></a>
</h3>
<p>Type: <code>Number</code>
Default: <code>undefined</code></p>
<p>A <code>Number</code> specifying the maximum size of a file in bytes. If the file is
greater than the limit,
<a href="/loaders/file-loader/"><code>file-loader</code></a> is used by
default and all query parameters are passed to it. Using an alternative to
<code>file-loader</code> is enabled via the <code>fallback</code> option.</p>
<p>The limit can be specified via loader options and defaults to no limit.</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    limit<span class="token punctuation">:</span> <span class="token number">8192</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#mimetype" id="mimetype"></a>
<span class="text"><code>mimetype</code></span>
<a aria-label="&lt;code&gt;mimetype&lt;/code&gt;" class="icon-link" href="#mimetype"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>(file extension)</code></p>
<p>Sets the MIME type for the file to be transformed. If unspecified the file
extensions will be used to lookup the MIME type.</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    mimetype<span class="token punctuation">:</span> <span class="token string">'image/png'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/url-loader/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/url-loader/master/LICENSE">MIT</a></p>
</div>
<br/><h1>val-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>A webpack loader which executes a given module, and returns the result of the
execution at build-time, when the module is required in the bundle. In this way,
the loader changes a module from code to a result.</p>
<p>Another way to view <code>val-loader</code>, is that it allows a user a way to make their
own custom loader logic, without having to write a custom loader.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>val-loader</code>:</p>
<pre><code class="lang-console">$ npm install val-loader --save-dev
</code></pre>
<p>Then add the loader to your <code>webpack</code> config. For example:</p>
<pre><code class="lang-js"><span class="token comment">// target-file.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> code<span class="token punctuation">:</span> <span class="token string">'module.exports = 42;'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/target-file.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`val-loader`</span></span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// src/entry.js</span>
<span class="token keyword">const</span> answer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'test-file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#return-object-properties" id="return-object-properties"></a>
<span class="text">Return Object Properties</span>
<a aria-label="Return Object Properties" class="icon-link" href="#return-object-properties"></a>
</h2>
<p>Targeted modules of this loader must export either a <code>Function</code> or <code>Promise</code>
that returns an object containing a <code>code</code> property at a minimum, but can
contain any number of additional properties.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#code" id="code"></a>
<span class="text"><code>code</code></span>
<a aria-label="&lt;code&gt;code&lt;/code&gt;" class="icon-link" href="#code"></a>
</h3>
<p>Type: <code>String|Buffer</code>
Default: <code>undefined</code>
<em>Required</em></p>
<p>Code passed along to webpack or the next loader that will replace the module.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>Type: <code>Object</code>
Default: <code>undefined</code></p>
<p>A source map passed along to webpack or the next loader.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#ast" id="ast"></a>
<span class="text"><code>ast</code></span>
<a aria-label="&lt;code&gt;ast&lt;/code&gt;" class="icon-link" href="#ast"></a>
</h3>
<p>Type: <code>Array[Object]</code>
Default: <code>undefined</code></p>
<p>An <a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree">Abstract Syntax Tree</a>
that will be passed to the next loader. Useful to speed up the build time if the
next loader uses the same AST.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#dependencies" id="dependencies"></a>
<span class="text"><code>dependencies</code></span>
<a aria-label="&lt;code&gt;dependencies&lt;/code&gt;" class="icon-link" href="#dependencies"></a>
</h3>
<p>Type: <code>Array[String]</code>
Default: <code>[]</code></p>
<p>An array of absolute, native paths to file dependencies that should be watched
by webpack for changes.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#contextdependencies" id="contextdependencies"></a>
<span class="text"><code>contextDependencies</code></span>
<a aria-label="&lt;code&gt;contextDependencies&lt;/code&gt;" class="icon-link" href="#contextdependencies"></a>
</h3>
<p>Type: <code>Array[String]</code>
Default: <code>[]</code></p>
<p>An array of absolute, native paths to directory dependencies that should be
watched by webpack for changes.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cacheable" id="cacheable"></a>
<span class="text"><code>cacheable</code></span>
<a aria-label="&lt;code&gt;cacheable&lt;/code&gt;" class="icon-link" href="#cacheable"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>If <code>true</code>, specifies that the code can be re-used in watch mode if none of the
<code>dependencies</code> have changed.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<p>In this example the loader is configured to operator on a file name of
<code>years-in-ms.js</code>, execute the code, and store the result in the bundle as the
result of the execution. This example passes <code>years</code> as an <code>option</code>, which
corresponds to the <code>years</code> parameter in the target module exported function:</p>
<pre><code class="lang-js"><span class="token comment">// years-in-ms.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">yearsInMs</span><span class="token punctuation">(</span><span class="token punctuation">{</span> years <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> years <span class="token operator">*</span> <span class="token number">365</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token comment">// NOTE: this return value will replace the module in the bundle</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span> code<span class="token punctuation">:</span> <span class="token string">'module.exports = '</span> <span class="token operator">+</span> value <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'src/years-in-ms.js'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> <span class="token string">'val-loader'</span><span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              years<span class="token punctuation">:</span> <span class="token number">10</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>In the bundle, requiring the module then returns:</p>
<pre><code class="lang-js"><span class="token comment">// ... bundle code ...</span>

  <span class="token keyword">const</span> tenYearsMs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'years-in-ms'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 315360000000</span>

<span class="token comment">// ... bundle code ...</span>
</code></pre>
<p>require("val-loader!tenyearsinms") == 315360000000</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/val-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" val-loader="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>worker-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>将脚本注册为 Web Worker 的 webpack loader</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>worker-loader</code>：</p>
<pre><code class="lang-console">$ npm install worker-loader --save-dev
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#内联" id="内联"></a>
<span class="text">内联</span>
<a aria-label="内联" class="icon-link" href="#内联"></a>
</h3>
<pre><code class="lang-js"><span class="token comment">// App.js</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'worker-loader!./Worker.js'</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h3>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.worker\.js$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// App.js</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'./file.worker.js'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#fallback" id="fallback"></a>
<span class="text"><code>fallback</code></span>
<a aria-label="&lt;code&gt;fallback&lt;/code&gt;" class="icon-link" href="#fallback"></a>
</h3>
<p>类型：<code>Boolean</code>
默认值：<code>false</code></p>
<p>是否需要支持非 worker 环境的回退</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> fallback<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#inline" id="inline"></a>
<span class="text"><code>inline</code></span>
<a aria-label="&lt;code&gt;inline&lt;/code&gt;" class="icon-link" href="#inline"></a>
</h3>
<p>类型：<code>Boolean</code>
默认值：<code>false</code></p>
<p>你也可以使用 <code>inline</code> 参数，将 worker 内联为一个 BLOB</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> inline<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><em>注意：内联模式还会为不支持内联 worker 的浏览器创建 chunk，
要禁用此行为，只需将<code>fallback</code> 参数设置为
<code>false</code>。</em></p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> inline<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> fallback<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#name" id="name"></a>
<span class="text"><code>name</code></span>
<a aria-label="&lt;code&gt;name&lt;/code&gt;" class="icon-link" href="#name"></a>
</h3>
<p>类型：<code>String</code>
默认值：<code>[hash].worker.js</code></p>
<p>使用 <code>name</code> 参数，为每个输出的脚本，设置一个自定义名称。
名称可能含有 <code>[hash]</code> 字符串，会被替换为依赖内容哈希值(content dependent hash)，用于缓存目的。
只使用 <code>name</code> 时，可以省略 <code>[hash]</code>。</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'WorkerName.[hash].js'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#publicpath" id="publicpath"></a>
<span class="text">publicPath</span>
<a aria-label="publicPath" class="icon-link" href="#publicpath"></a>
</h3>
<p>类型：<code>String</code>
默认值：<code>null</code></p>
<p>重写 worker 脚本的下载路径。如果未指定，
则使用与其他 webpack 资源相同的公共路径(public path)。</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> publicPath<span class="token punctuation">:</span> <span class="token string">'/scripts/workers/'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>worker 文件可以像其他脚本文件导入依赖那样，来导入依赖：</p>
<pre><code class="lang-js"><span class="token comment">// Worker.js</span>
<span class="token keyword">const</span> _ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'lodash'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// 发送数据到父线程</span>
self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 响应父线程的消息</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#集成-es2015-模块" id="集成-es2015-模块"></a>
<span class="text">集成 ES2015 模块</span>
<a aria-label="集成 ES2015 模块" class="icon-link" href="#集成-es2015-模块"></a>
</h3>
<p><em>注意：如果配置好 <a href="https://github.com/babel/babel-loader"><code>babel-loader</code></a> ，
你甚至可以使用 ES2015 模块。</em></p>
<pre><code class="lang-js"><span class="token comment">// Worker.js</span>
<span class="token keyword">import</span> _ <span class="token keyword">from</span> <span class="token string">'lodash'</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span>

_<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// 发送数据到父线程</span>
self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 响应父线程的消息</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#集成-typescript" id="集成-typescript"></a>
<span class="text">集成 TypeScript</span>
<a aria-label="集成 TypeScript" class="icon-link" href="#集成-typescript"></a>
</h3>
<p>集成 TypeScript，在导出 worker 时，你需要声明一个自定义模块</p>
<pre><code class="lang-typescript"><span class="token comment">// typings/custom.d.ts</span>
<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">"worker-loader!*"</span> <span class="token punctuation">{</span>
  <span class="token keyword">class</span> <span class="token class-name">WebpackWorker</span> <span class="token keyword">extends</span> <span class="token class-name">Worker</span> <span class="token punctuation">{</span>
    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> WebpackWorker<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre><code class="lang-typescript"><span class="token comment">// Worker.ts</span>
<span class="token keyword">const</span> ctx<span class="token punctuation">:</span> Worker <span class="token operator">=</span> self as <span class="token keyword">any</span><span class="token punctuation">;</span>

<span class="token comment">// 发送数据到父线程</span>
ctx<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token punctuation">:</span> <span class="token string">"foo"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 响应父线程的消息</span>
ctx<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-typescript"><span class="token comment">// App.ts</span>
<span class="token keyword">import</span> Worker from <span class="token string">"worker-loader!./Worker"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
worker<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

worker<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"message"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>event<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#跨域策略" id="跨域策略"></a>
<span class="text">跨域策略</span>
<a aria-label="跨域策略" class="icon-link" href="#跨域策略"></a>
</h3>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API"><code>WebWorkers</code></a>
受到 <a href="https://en.wikipedia.org/wiki/Same-origin_policy">同源策略</a> 的限制，
如果 <code>webpack</code> 资源的访问服务，和应用程序不是同源，
就会在浏览器中拦截其下载。
如果在 CDN 域下托管资源，
通常就会出现这种情况。
甚至从 <code>webpack-dev-server</code> 下载时都会被拦截。有两种解决方法：</p>
<p>第一种，通过配置 <a href="#inline"><code>inline</code></a> 参数，将 worker 作为 blob 内联，
而不是将其作为外部脚本下载</p>
<pre><code class="lang-js"><span class="token comment">// App.js</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'./file.worker.js'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> inline<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>第二种，通过配置 <a href="#publicpath"><code>publicPath</code></a> 选项，
重写 worker 脚本的基础下载 URL</p>
<pre><code class="lang-js"><span class="token comment">// App.js</span>
<span class="token comment">// 会从 `/workers/file.worker.js` 下载 worker 脚本</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">'./file.worker.js'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token punctuation">{</span>
  loader<span class="token punctuation">:</span> <span class="token string">'worker-loader'</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span> publicPath<span class="token punctuation">:</span> <span class="token string">'/workers/'</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>如果你从未阅读过我们的贡献指南，请在上面花点时间。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#贡献指南" id="贡献指南"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/worker-loader/master/.github/CONTRIBUTING.md">贡献指南</a></span>
<a .github="" aria-label="&lt;a href=" contributing.md="" https:="" master="" raw.githubusercontent.com="" webpack-contrib="" worker-loader="">贡献指南</a>" class="icon-link" href="#贡献指南"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/worker-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" webpack-contrib="" worker-loader="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>workerize-loader</h1>
<div><p><img alt="workerize-loader" src="https://i.imgur.com/HZZG8wr.jpg" width="1358"/></p>
<blockquote>
<p>A webpack loader that moves a module and its dependencies into a Web Worker, automatically reflecting exported functions as asynchronous proxies.</p>
</blockquote>
<ul>
<li>Bundles a tiny, purpose-built RPC implementation into your app</li>
<li>If exported module methods are already async, signature is unchanged</li>
<li>Supports synchronous and asynchronous worker functions</li>
<li>Works beautifully with async/await</li>
<li>Imported value is instantiable, just a decorated <code>Worker</code></li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#install" id="install"></a>
<span class="text">Install</span>
<a aria-label="Install" class="icon-link" href="#install"></a>
</h2>
<pre><code class="lang-sh">npm <span class="token function">install</span> -D workerize-loader
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h3>
<p><strong>worker.js</strong>:</p>
<pre><code class="lang-js"><span class="token comment">// block for `time` ms, then return the number of loops we could run in that time:</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">expensive</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> start <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        count <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start <span class="token operator">&lt;</span> time<span class="token punctuation">)</span> count<span class="token operator">++</span>
    <span class="token keyword">return</span> count
<span class="token punctuation">}</span>
</code></pre>
<p><strong>index.js</strong>: <em>(our demo)</em></p>
<pre><code class="lang-js"><span class="token keyword">import</span> worker <span class="token keyword">from</span> <span class="token string">'workerize-loader!./worker'</span>

<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token function">worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// `new` is optional</span>

instance<span class="token punctuation">.</span><span class="token function">expensive</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span> count <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Ran </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>count<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> loops`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#credit" id="credit"></a>
<span class="text">Credit</span>
<a aria-label="Credit" class="icon-link" href="#credit"></a>
</h3>
<p>The inner workings here are heavily inspired by <a href="/loaders/worker-loader/">worker-loader</a>. It's worth a read!</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h3>
<p><a href="https://oss.ninja/mit/developit">MIT License</a> © <a href="https://jasonformat.com/">Jason Miller</a></p>
</div>
<br/><h1>less-loader</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>处理 less 的 webpack loader。将 Less 编译为 CSS。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#要求" id="要求"></a>
<span class="text">要求</span>
<a aria-label="要求" class="icon-link" href="#要求"></a>
</h2>
<p>此模块需要 Node v6.9.0+ 和 webpack v4.0.0+。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>你需要预先安装 <code>less-loader</code>：</p>
<pre><code class="lang-console">$ npm install less-loader --save-dev
</code></pre>
<p>然后，修改 <code>webpack.config.js</code>：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span> <span class="token comment">// 将 Less 编译为 CSS</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>然后，通过你偏爱的方式去运行 <code>webpack</code>。</p>
<p>The <code>less-loader</code> requires <a href="https://github.com/less/less.js">less</a> as <a href="https://docs.npmjs.com/files/package.json#peerdependencies"><code>peerDependency</code></a>.
Thus you are able to control the versions accurately.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<p>将 <a href="/loaders/css-loader/"><code>css-loader</code></a>、
<a href="/loaders/style-loader/"><code>style-loader</code></a>
和 <code>less-loader</code> 链式调用，
可以把所有样式立即应用于 DOM。</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span> <span class="token comment">// creates style nodes from JS strings</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span> <span class="token comment">// translates CSS into CommonJS</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span> <span class="token comment">// compiles Less to CSS</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>You can pass any Less specific options to the <code>less-loader</code> via <a href="https://webpack.js.org/configuration/module/#rule-options-rule-query">loader options</a>.
See the <a href="http://lesscss.org/usage/#command-line-usage-options">Less documentation</a>
for all available options in dash-case. Since we're passing these options to
Less programmatically, you need to pass them in camelCase here:</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          strictMath<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          noIeCompat<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Unfortunately, Less doesn't map all options 1-by-1 to camelCase. When in doubt,
<a href="https://github.com/less/less.js/blob/3.x/bin/lessc">check their executable</a>
and search for the dash-case option.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#in-production" id="in-production"></a>
<span class="text">In production</span>
<a aria-label="In production" class="icon-link" href="#in-production"></a>
</h3>
<p>Usually, it's recommended to extract the style sheets into a dedicated file in
production using the
<a href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a>.
This way your styles are not dependent on JavaScript.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#imports" id="imports"></a>
<span class="text">Imports</span>
<a aria-label="Imports" class="icon-link" href="#imports"></a>
</h3>
<p>Starting with <code>less-loader</code> 4, you can now choose between Less' builtin resolver
and webpack's resolver. By default, webpack's resolver is used.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#webpack-resolver" id="webpack-resolver"></a>
<span class="text">webpack resolver</span>
<a aria-label="webpack resolver" class="icon-link" href="#webpack-resolver"></a>
</h4>
<p>webpack 提供了一种
<a href="https://webpack.js.org/configuration/resolve/">解析文件的高级机制</a>。
<code>less-loader</code> 应用一个 Less 插件，并且将所有查询参数传递给 webpack resolver。
所以，你可以从 <code>node_modules</code> 导入你的 less 模块。
只要添加一个 <code>~</code> 前缀，
告诉 webpack 去查询 <a href="https://webpack.js.org/configuration/resolve/#resolve-modules"><code>模块</code></a>。</p>
<pre><code class="lang-css"><span class="token atrule"><span class="token rule">@import</span> <span class="token string">'~bootstrap/less/bootstrap'</span><span class="token punctuation">;</span></span>
</code></pre>
<p>重要的是只使用 <code>~</code> 前缀，因为 <code>~/</code> 会解析为主目录。
webpack 需要区分 <code>bootstrap</code> 和 <code>~bootstrap</code>，
因为 CSS 和 Less 文件没有用于导入相对文件的特殊语法。
<code>@import "file"</code> 与 <code>@import "./file";</code> 写法相同</p>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#non-less-imports" id="non-less-imports"></a>
<span class="text">Non-Less imports</span>
<a aria-label="Non-Less imports" class="icon-link" href="#non-less-imports"></a>
</h5>
<p>使用 webpack resolver，你可以引入任何文件类型。
你只需要一个导出有效的 Less 代码的 loader。
通常，你还需要设置 <code>issuer</code> 条件，
以确保此规则仅适用于 Less 文件的导入：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.js$/</span><span class="token punctuation">,</span>
      issuer<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'js-to-less-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#less-resolver" id="less-resolver"></a>
<span class="text">Less resolver</span>
<a aria-label="Less resolver" class="icon-link" href="#less-resolver"></a>
</h4>
<p>If you specify the <code>paths</code> option, the <code>less-loader</code> will not use webpack's
resolver. Modules, that can't be resolved in the local folder, will be searched
in the given <code>paths</code>. This is Less' default behavior. <code>paths</code> should be an array
with absolute paths:</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          paths<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'node_modules'</span><span class="token punctuation">)</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>In this case, all webpack features like importing non-Less files or aliasing
won't work of course.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#插件" id="插件"></a>
<span class="text">插件</span>
<a aria-label="插件" class="icon-link" href="#插件"></a>
</h3>
<p>想要使用 <a href="http://lesscss.org/usage/#plugins">插件</a>，
只需像下面这样简单设置 <code>plugins</code> 选项：</p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> CleanCSSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'less-plugin-clean-css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token keyword">new</span> <span class="token class-name">CleanCSSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> advanced<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extracting-style-sheets" id="extracting-style-sheets"></a>
<span class="text">Extracting style sheets</span>
<a aria-label="Extracting style sheets" class="icon-link" href="#extracting-style-sheets"></a>
</h3>
<p>Bundling CSS with webpack has some nice advantages like referencing images and
fonts with hashed urls or
<a href="https://webpack.js.org/concepts/hot-module-replacement/">hot module replacement</a>
in development. In production, on the other hand, it's not a good idea to apply
your style sheets depending on JS execution. Rendering may be delayed or even a
<a href="https://en.wikipedia.org/wiki/Flash_of_unstyled_content">FOUC</a> might be visible.
Thus it's often still better to have them as separate files in your final
production build.</p>
<p>There are two possibilities to extract a style sheet from the bundle:</p>
<ul>
<li><a href="https://github.com/peerigon/extract-loader"><code>extract-loader</code></a> (simpler, but
specialized on the css-loader's output)</li>
<li><a href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a>
(more complex, but works in all use-cases)</li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#source-map" id="source-map"></a>
<span class="text">source map</span>
<a aria-label="source map" class="icon-link" href="#source-map"></a>
</h3>
<p>想要启用 CSS 的 source map，
你需要将 <code>sourceMap</code> 选项传递给 <em><code>less-loader</code></em> 和 <em><code>css-loader</code></em>。
所以你的 `webpack.config.js' 应该是这样：</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.less$/</span><span class="token punctuation">,</span>
      use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'style-loader'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span><span class="token punctuation">,</span> options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Also checkout the <a href="https://github.com/webpack-contrib/less-loader/tree/master/examples/sourceMaps">sourceMaps example</a>.</p>
<p>如果你要在 Chrome 中编辑原始 Less 文件，
<a href="https://medium.com/@toolmantim/getting-started-with-css-sourcemaps-and-in-browser-sass-editing-b4daab987fb0">这里有一个很好的博客文章</a>。
此博客文章是关于 Sass 的，但它也适用于 Less。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#css-modules-gotcha" id="css-modules-gotcha"></a>
<span class="text">CSS modules gotcha</span>
<a aria-label="CSS modules gotcha" class="icon-link" href="#css-modules-gotcha"></a>
</h3>
<p>There is a known problem with Less and
<a href="https://github.com/css-modules/css-modules">CSS modules</a> regarding relative
file paths in <code>url(...)</code> statements.
<a href="https://github.com/webpack-contrib/less-loader/issues/109#issuecomment-253797335">See this issue for an explanation</a>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#贡献" id="贡献"></a>
<span class="text">贡献</span>
<a aria-label="贡献" class="icon-link" href="#贡献"></a>
</h2>
<p>如果你从未阅读过我们的贡献指南，
请在上面花点时间。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#贡献指南" id="贡献指南"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/less-loader/master/.github/CONTRIBUTING.md">贡献指南</a></span>
<a .github="" aria-label="&lt;a href=" contributing.md="" https:="" less-loader="" master="" raw.githubusercontent.com="" webpack-contrib="">贡献指南</a>" class="icon-link" href="#贡献指南"&gt;
      </h4>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/less-loader/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" less-loader="" license="" master="" raw.githubusercontent.com="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>plugin</h1>
<div><p>webpack 有着丰富的插件接口(rich plugin interface)。webpack 自身的多数功能都使用这个插件接口。这个插件接口使 webpack 变得<strong>极其灵活</strong>。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/babel-minify-webpack-plugin"><code>BabelMinifyWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        使用 <a href="https://github.com/babel/minify">babel-minify</a>进行压缩
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/banner-plugin"><code>BannerPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        在每个生成的 chunk 顶部添加 banner
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/commons-chunk-plugin"><code>CommonsChunkPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        提取 chunks 之间共享的通用模块
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/compression-webpack-plugin"><code>CompressionWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        预先准备的资源压缩版本，使用 Content-Encoding 提供访问服务
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/context-replacement-plugin"><code>ContextReplacementPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        重写 <code>require</code> 表达式的推断上下文
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/copy-webpack-plugin"><code>CopyWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        将单个文件或整个目录复制到构建目录
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/define-plugin"><code>DefinePlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        允许在编译时(compile time)配置的全局常量
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/dll-plugin"><code>DllPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        为了极大减少构建时间，进行分离打包
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/environment-plugin"><code>EnvironmentPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
<a href="./define-plugin"><code>DefinePlugin</code></a> 中 <code>process.env</code> 键的简写方式。
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/extract-text-webpack-plugin"><code>ExtractTextWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        从 bundle 中提取文本（CSS）到单独的文件
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/hot-module-replacement-plugin"><code>HotModuleReplacementPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        启用模块热替换(Enable Hot Module Replacement - HMR)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        简单创建 HTML 文件，用于服务器访问
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/i18n-webpack-plugin"><code>I18nWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        为 bundle 增加国际化支持
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/ignore-plugin"><code>IgnorePlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        从 bundle 中排除某些模块
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/limit-chunk-count-plugin"><code>LimitChunkCountPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        设置 chunk 的最小/最大限制，以微调和控制 chunk
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/loader-options-plugin"><code>LoaderOptionsPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        用于从 webpack 1 迁移到 webpack 2
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/min-chunk-size-plugin"><code>MinChunkSizePlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        确保 chunk 大小超过指定限制
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/mini-css-extract-plugin"><code>MiniCssExtractPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        为每个引入 CSS 的 JS 文件创建一个 CSS 文件
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/configuration/optimization/#optimization-noemitonerrors"><code>NoEmitOnErrorsPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        在输出阶段时，遇到编译错误跳过
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/normal-module-replacement-plugin"><code>NormalModuleReplacementPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        替换与正则表达式匹配的资源
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/npm-install-webpack-plugin"><code>NpmInstallWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        在开发环境下自动安装缺少的依赖
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/progress-plugin"><code>ProgressPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        报告编译进度
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/provide-plugin"><code>ProvidePlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        不必通过 import/require 使用模块
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/source-map-dev-tool-plugin"><code>SourceMapDevToolPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        对 source map 进行更细粒度的控制
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/eval-source-map-dev-tool-plugin"><code>EvalSourceMapDevToolPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        对 eval source map 进行更细粒度的控制
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/uglifyjs-webpack-plugin"><code>UglifyjsWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        可以控制项目中 UglifyJS 的版本
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/terser-webpack-plugin"><code>TerserPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        允许控制项目中 Terser 的版本
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="/plugins/zopfli-webpack-plugin"><code>ZopfliWebpackPlugin</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        通过 node-zopfli 将资源预先压缩的版本
    </div>
</div></div>
</div>
</div>
</div><p>更多第三方插件，请查看 <a href="https://github.com/webpack-contrib/awesome-webpack#webpack-plugins">awesome-webpack</a> 列表。</p>
<p><img alt="Awesome" src="../assets/awesome-badge.svg"/></p>
</div>
<br/><h1>AutomaticPrefetchPlugin</h1>
<div><p>The <code>AutomaticPrefetchPlugin</code> discovers <strong>all modules</strong> from the previous compilation upfront while watching for changes, trying to improve the incremental build times. Compared to <a href="/plugins/prefetch-plugin/"><code>PrefetchPlugin</code></a> which discovers a <strong>single module</strong> upfront.</p>
<blockquote class="warning"><div class="tip-content"> May or may not have a performance benefit since the incremental build times are pretty fast. </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>AutomaticPrefetchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>ZopfliWebpackPlugin</h1>
<div><p>Node-Zopfli plugin for Webpack.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D zopfli-webpack-plugin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h2>
<pre><code class="lang-javascript"><span class="token keyword">var</span> ZopfliPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"zopfli-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ZopfliPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      asset<span class="token punctuation">:</span> <span class="token string">"[path].gz[query]"</span><span class="token punctuation">,</span>
      algorithm<span class="token punctuation">:</span> <span class="token string">"zopfli"</span><span class="token punctuation">,</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(js|html)$/</span><span class="token punctuation">,</span>
      threshold<span class="token punctuation">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token punctuation">:</span> <span class="token number">0.8</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#arguments" id="arguments"></a>
<span class="text">Arguments</span>
<a aria-label="Arguments" class="icon-link" href="#arguments"></a>
</h2>
<ul>
<li><code>asset</code>: The target asset name. <code>[file]</code> is replaced with the original asset. <code>[path]</code> is replaced with the path of the original asset and <code>[query]</code> with the query. Defaults to <code>"[path].gz[query]"</code>.</li>
<li><code>filename</code>: A <code>function(asset)</code> which receives the asset name (after processing <code>asset</code> option) and returns the new asset name. Defaults to <code>false</code>.</li>
<li><code>algorithm</code>: Can be a <code>function(buf, callback)</code> or a string. For a string the algorithm is taken from <code>zopfli</code>.</li>
<li><code>test</code>: All assets matching this RegExp are processed. Defaults to every asset.</li>
<li><code>threshold</code>: Only assets bigger than this size are processed. In bytes. Defaults to <code>0</code>.</li>
<li><code>minRatio</code>: Only assets that compress better that this ratio are processed. Defaults to <code>0.8</code>.</li>
<li><code>deleteOriginalAssets</code>: Whether to delete the original assets or not. Defaults to <code>false</code>.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#option-arguments" id="option-arguments"></a>
<span class="text">Option Arguments</span>
<a aria-label="Option Arguments" class="icon-link" href="#option-arguments"></a>
</h2>
<ul>
<li>verbose: Default: false,</li>
<li>verbose_more: Default: false,</li>
<li>numiterations: Default: 15,</li>
<li>blocksplitting: Default: true,</li>
<li>blocksplittinglast: Default: false,</li>
<li>blocksplittingmax: Default: 15</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>BannerPlugin</h1>
<div><p>为每个 chunk 文件头部添加 banner。</p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span>banner<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token punctuation">{</span>
  banner<span class="token punctuation">:</span> string <span class="token operator">|</span> <span class="token keyword">function</span><span class="token punctuation">,</span> <span class="token comment">// 其值为字符串或函数，将作为注释存在</span>
  raw<span class="token punctuation">:</span> boolean<span class="token punctuation">,</span> <span class="token comment">// 如果值为 true，将直出，不会被作为注释</span>
  entryOnly<span class="token punctuation">:</span> boolean<span class="token punctuation">,</span> <span class="token comment">// 如果值为 true，将只在入口 chunks 文件中添加</span>
  test<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp <span class="token operator">|</span> Array<span class="token punctuation">,</span>
  include<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp <span class="token operator">|</span> Array<span class="token punctuation">,</span>
  exclude<span class="token punctuation">:</span> string <span class="token operator">|</span> RegExp <span class="token operator">|</span> Array<span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h2>
<pre><code class="lang-javascript"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>

<span class="token comment">// string</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  banner<span class="token punctuation">:</span> <span class="token string">'hello world'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// function</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  banner<span class="token punctuation">:</span> <span class="token punctuation">(</span>yourVariable<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`yourVariable: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>yourVariable<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#占位符-placeholder-" id="占位符-placeholder-"></a>
<span class="text">占位符(placeholder)</span>
<a aria-label="占位符(placeholder)" class="icon-link" href="#占位符-placeholder-"></a>
</h2>
<p>从 webpack 2.5.0 开始，会对 <code>banner</code> 字符串中的占位符取值：</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> webpack <span class="token keyword">from</span> <span class="token string">'webpack'</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>BannerPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  banner<span class="token punctuation">:</span> <span class="token string">'hash:[hash], chunkhash:[chunkhash], name:[name], filebase:[filebase], query:[query], file:[file]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>ClosureWebpackPlugin</h1>
<div><p><a href="https://badge.fury.io/js/closure-webpack-plugin"><img alt="npm version" src="https://badge.fury.io/js/closure-webpack-plugin.svg"/></a></p>
<p>This plugin supports the use of Google's Closure Tools with webpack.</p>
<p><strong>Note: This is the webpack 4 branch.</strong></p>
<p><a href="https://developers.google.com/closure/compiler/">Closure-Compiler</a> is a full optimizing compiler and transpiler.
It offers unmatched optimizations, provides type checking and can easily target transpilation to different versions of ECMASCRIPT.</p>
<p><a href="https://developers.google.com/closure/library/">Closure-Library</a> is a utility library designed for full compatibility
with Closure-Compiler. </p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#older-versions" id="older-versions"></a>
<span class="text">Older Versions</span>
<a aria-label="Older Versions" class="icon-link" href="#older-versions"></a>
</h2>
<p>For webpack 3 support, see <a href="https://github.com/webpack-contrib/closure-webpack-plugin/tree/webpack-3">https://github.com/webpack-contrib/closure-webpack-plugin/tree/webpack-3</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#install" id="install"></a>
<span class="text">Install</span>
<a aria-label="Install" class="icon-link" href="#install"></a>
</h2>
<p>You must install both the google-closure-compiler package as well as the closure-webpack-plugin.</p>
<pre><code>npm <span class="token function">install</span> --save-dev closure-webpack-plugin google-closure-compiler
</code></pre><h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage-example" id="usage-example"></a>
<span class="text">Usage example</span>
<a aria-label="Usage example" class="icon-link" href="#usage-example"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">const</span> ClosurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'closure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">ClosurePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>mode<span class="token punctuation">:</span> <span class="token string">'STANDARD'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token comment">// compiler flags here</span>
        <span class="token comment">//</span>
        <span class="token comment">// for debuging help, try these:</span>
        <span class="token comment">//</span>
        <span class="token comment">// formatting: 'PRETTY_PRINT'</span>
        <span class="token comment">// debug: true,</span>
        <span class="token comment">// renaming: false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<ul>
<li><strong>platform</strong> - <code>native</code>, <code>java</code> or <code>javascript</code>. Controls which version to use of closure-compiler.
  By default the plugin will attempt to automatically choose the fastest option available.<ul>
<li><code>JAVASCRIPT</code> does not require the JVM to be installed. Not all flags are supported. </li>
<li><code>JAVA</code> utilizes the jvm. Utilizes multiple threads for parsing and results in faster compilation for large builds.</li>
<li><code>NATIVE</code> only available on linux or MacOS. Faster compilation times without requiring a JVM.</li>
</ul>
</li>
<li><strong>mode</strong> - <code>STANDARD</code> (default) or <code>AGGRESSIVE_BUNDLE</code>. Controls how the plugin utilizes the compiler.  <ul>
<li><code>STANDARD</code> mode, closure-compiler is used as a direct replacement for other minifiers as well as most Babel transformations.  </li>
<li><code>AGGRESSIVE_BUNDLE</code> mode, the compiler performs additional optimizations of modules to produce a much smaller file</li>
</ul>
</li>
<li><strong>childCompilations</strong> - boolean or function. Defaults to <code>false</code>.
In order to decrease build times, this plugin by default only operates on the main compilation.
Plugins such as extract-text-plugin and html-webpack-plugin run as child compilations and
usually do not need transpilation or minification. You can enable this for all child compilations
by setting this option to <code>true</code>. For specific control, the option can be set to a function which
will be passed a compilation object.<br/>Example: <code>function(compilation) { return /html-webpack/.test(compilation.name); }</code>.</li>
<li><strong>output</strong> - An object with either <code>filename</code> or <code>chunkfilename</code> properties. Used to override the
output file naming for a particular compilation. See <a href="https://webpack.js.org/configuration/output/">https://webpack.js.org/configuration/output/</a>
for details.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#compiler-flags" id="compiler-flags"></a>
<span class="text">Compiler Flags</span>
<a aria-label="Compiler Flags" class="icon-link" href="#compiler-flags"></a>
</h2>
<p>The plugin controls several compiler flags. The following flags should not be used in any mode:</p>
<ul>
<li>module_resolution</li>
<li>output_wrapper</li>
<li>dependency_mode</li>
<li>create_source_map</li>
<li>module</li>
<li>entry_point</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#aggressive-bundle-mode" id="aggressive-bundle-mode"></a>
<span class="text">Aggressive Bundle Mode</span>
<a aria-label="Aggressive Bundle Mode" class="icon-link" href="#aggressive-bundle-mode"></a>
</h2>
<p>In this mode, the compiler rewrites CommonJS modules and hoists require calls. Some modules are not compatible with this type of rewritting. In particular, hoisting will cause the following code to execute out of order:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">addPolyfillToFoo</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Aggressive Bundle Mode utilizes a custom runtime in which modules within a chunk file are all included in the same scope.
This avoids <a href="https://nolanlawson.com/2016/08/15/the-cost-of-small-modules/">the cost of small modules</a>.</p>
<p>In Aggressive Bundle Mode, a file can only appear in a single output chunk. Use the <a href="https://webpack.js.org/plugins/split-chunks-plugin/">Split Chunks Plugin</a>
to split duplicated files into a single output chunk. If a module is utilized by more than one chunk, the
plugin will move it up to the first common parent to prevent code duplication.</p>
<p>The <a href="https://webpack.js.org/configuration/optimization/#optimization-concatenatemodules">concatenatedModules optimization</a>
is not compatible with this mode since Closure-Compiler performs an equivalent optimization).
The plugin will emit a warning if this optimization is not disabled.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#multiple-output-languages" id="multiple-output-languages"></a>
<span class="text">Multiple Output Languages</span>
<a aria-label="Multiple Output Languages" class="icon-link" href="#multiple-output-languages"></a>
</h2>
<p>You can add the plugin multiple times. This easily allows you to target multiple output languages.
Use <code>ECMASCRIPT_2015</code> for modern browsers and <code>ECMASCRIPT5</code> for older browsers.</p>
<p>Use the <code>output</code> option to change the filenames of specific plugin instances.</p>
<p>Use <code>&lt;script type="module" src="es6_out_path.js"&gt;</code> to target modern browsers and
<code>&lt;script nomodule src="es5_out_path.js"&gt;</code> for older browsers.</p>
<p>See the <a href="https://github.com/webpack-contrib/closure-webpack-plugin/tree/master/demo/es5-and-es6">es5 and es6 output demo</a>
for an example.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#other-tips-for-use" id="other-tips-for-use"></a>
<span class="text">Other tips for Use</span>
<a aria-label="Other tips for Use" class="icon-link" href="#other-tips-for-use"></a>
</h2>
<ul>
<li>Don't use babel at the same time - closure-compiler is also a transpiler.
If you need <a href="https://github.com/google/closure-compiler/wiki/ECMAScript6">features not yet supported</a> by closure-compiler, have babel
only target those features. Closure Compiler can transpile async/await - you don't need babel for that functionality either.</li>
</ul>
<h1 class="header">
<a aria-hidden="true" class="anchor" href="#closure-library-plugin" id="closure-library-plugin"></a>
<span class="text">Closure Library Plugin</span>
<a aria-label="Closure Library Plugin" class="icon-link" href="#closure-library-plugin"></a>
</h1>
<p>In order for webpack to recognize <code>goog.require</code>, <code>goog.provide</code>, <code>goog.module</code> and related primitives,
a separate plugin is shipped.</p>
<pre><code class="lang-js"><span class="token keyword">const</span> ClosurePlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'closure-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ClosurePlugin<span class="token punctuation">.</span>LibraryPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      closureLibraryBase<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>
        <span class="token string">'google-closure-library/closure/goog/base'</span>
      <span class="token punctuation">)</span><span class="token punctuation">,</span>
      deps<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'google-closure-library/closure/goog/deps'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">'./public/deps.js'</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>The plugin adds extra functionality to support using Closure Library without Closure Compiler.
This is typically used during development mode. When the webpack mode is <code>production</code>,
only dependency information is provided to webpack as Closure Compiler will natively recognize
the Closure Library primitives.</p>
<p>The Closure Library Plugin is only compatible with the <code>AGGRESSIVE_BUNDLE</code> mode of the Closure-Compiler
webpack plugin.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<ul>
<li><strong>closureLibraryBase</strong> - (optional) string. Path to the base.js file in Closure-Library.</li>
<li><strong>deps</strong> - (optional) string or Array. Closures style dependency mappings. Typically generated by the
<a href="https://developers.google.com/closure/library/docs/depswriter">depswriter.py script</a> included with Closure-Library.</li>
<li><strong>extraDeps</strong> - (optional) Object. Mapping of namespace to file path for closure-library provided namespaces.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/ChadKillingsworth"></a></p><a href="https://github.com/ChadKillingsworth">
<p><img alt="" height="150" src="https://avatars.githubusercontent.com/u/1247639?v=3" width="150"/></p>
<p><br/></p>
<pre><code>      Chad Killingsworth
</code></pre></a><p><a href="https://github.com/ChadKillingsworth"></a></p>
<p></p></td>
<td align="center"><p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p><img alt="" height="150" src="https://avatars.githubusercontent.com/u/8420490?v=3" width="150"/></p>
<p><br/></p>
<pre><code>      Joshua Wiens
</code></pre></a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>CommonsChunkPlugin</h1>
<div><p><code>CommonsChunkPlugin</code> 插件，是一个可选的用于建立一个独立文件(又称作 chunk)的功能，这个文件包括多个入口 <code>chunk</code> 的公共模块。</p>
<blockquote class="warning"><div class="tip-content"> The CommonsChunkPlugin 已经从 webpack v4 legato 中移除。想要了解在最新版本中如何处理 chunk，请查看 <a href="/plugins/split-chunks-plugin/">SplitChunksPlugin</a>。 </div></blockquote><p>通过将公共模块拆出来，最终合成的文件能够在最开始的时候加载一次，便存到缓存中供后续使用。这个带来页面速度上的提升，因为浏览器会迅速将公共的代码从缓存中取出来，而不是每次访问一个新页面时，再去加载一个更大的文件。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h2>
<!-- eslint-skip -->
<pre><code class="lang-js"><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> string<span class="token punctuation">,</span> <span class="token comment">// or</span>
  names<span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 这是 common chunk 的名称。已经存在的 chunk 可以通过传入一个已存在的 chunk 名称而被选择。</span>
  <span class="token comment">// 如果一个字符串数组被传入，这相当于插件针对每个 chunk 名被多次调用</span>
  <span class="token comment">// 如果该选项被忽略，同时 `options.async` 或者 `options.children` 被设置，所有的 chunk 都会被使用，</span>
  <span class="token comment">// 否则 `options.filename` 会用于作为 chunk 名。</span>
  <span class="token comment">// When using `options.async` to create common chunks from other async chunks you must specify an entry-point</span>
  <span class="token comment">// chunk name here instead of omitting the `option.name`.</span>

  filename<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  <span class="token comment">// common chunk 的文件名模板。可以包含与 `output.filename` 相同的占位符。</span>
  <span class="token comment">// 如果被忽略，原本的文件名不会被修改(通常是 `output.filename` 或者 `output.chunkFilename`)。</span>
  <span class="token comment">// This option is not permitted if you're using `options.async` as well, see below for more details.</span>

  minChunks<span class="token punctuation">:</span> number<span class="token operator">|</span><span class="token number">Infinity</span><span class="token operator">|</span><span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> boolean<span class="token punctuation">,</span>
  <span class="token comment">// 在传入  公共chunk(commons chunk) 之前所需要包含的最少数量的 chunks 。</span>
  <span class="token comment">// 数量必须大于等于2，或者少于等于 chunks的数量</span>
  <span class="token comment">// 传入 `Infinity` 会马上生成 公共chunk，但里面没有模块。</span>
  <span class="token comment">// 你可以传入一个 `function` ，以添加定制的逻辑（默认是 chunk 的数量）</span>

  chunks<span class="token punctuation">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 通过 chunk name 去选择 chunks 的来源。chunk 必须是  公共chunk 的子模块。</span>
  <span class="token comment">// 如果被忽略，所有的，所有的 入口chunk (entry chunk) 都会被选择。</span>

  children<span class="token punctuation">:</span> boolean<span class="token punctuation">,</span>
  <span class="token comment">// 如果设置为 `true`，所有公共 chunk 的子模块都会被选择</span>

  deepChildren<span class="token punctuation">:</span> boolean<span class="token punctuation">,</span>
  <span class="token comment">// 如果设置为 `true`，所有公共 chunk 的后代模块都会被选择</span>

  <span class="token keyword">async</span><span class="token punctuation">:</span> boolean<span class="token operator">|</span>string<span class="token punctuation">,</span>
  <span class="token comment">// 如果设置为 `true`，一个异步的  公共chunk 会作为 `options.name` 的子模块，和 `options.chunks` 的兄弟模块被创建。</span>
  <span class="token comment">// 它会与 `options.chunks` 并行被加载。</span>
  <span class="token comment">// Instead of using `option.filename`, it is possible to change the name of the output file by providing</span>
  <span class="token comment">// the desired string here instead of `true`.</span>

  minSize<span class="token punctuation">:</span> number<span class="token punctuation">,</span>
  <span class="token comment">// 在 公共chunk 被创建立之前，所有 公共模块 (common module) 的最少大小。</span>
<span class="token punctuation">}</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> webpack1 构造函数 <code>new webpack.optimize.CommonsChunkPlugin(options, filenameTemplate, selectedChunks, minChunks)</code> 不再被支持。请使用相应的选项对象。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#例子" id="例子"></a>
<span class="text">例子</span>
<a aria-label="例子" class="icon-link" href="#例子"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#公共chunk-用于-入口chunk-entry-chunk-" id="公共chunk-用于-入口chunk-entry-chunk-"></a>
<span class="text">公共chunk 用于 入口chunk (entry chunk)</span>
<a aria-label="公共chunk 用于 入口chunk (entry chunk)" class="icon-link" href="#公共chunk-用于-入口chunk-entry-chunk-"></a>
</h3>
<p>生成一个额外的 chunk 包含入口chunk 的公共模块。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'commons'</span><span class="token punctuation">,</span>
  <span class="token comment">// (公共 chunk(commnon chunk) 的名称)</span>

  filename<span class="token punctuation">:</span> <span class="token string">'commons.js'</span><span class="token punctuation">,</span>
  <span class="token comment">// (公共chunk 的文件名)</span>

  <span class="token comment">// minChunks: 3,</span>
  <span class="token comment">// (模块必须被3个 入口chunk 共享)</span>

  <span class="token comment">// chunks: ["pageA", "pageB"],</span>
  <span class="token comment">// (只使用这些 入口chunk)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>你必须在 入口chunk 之前加载生成的这个 公共chunk:</p>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>commons.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>entry.bundle.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#明确第三方库-chunk" id="明确第三方库-chunk"></a>
<span class="text">明确第三方库 chunk</span>
<a aria-label="明确第三方库 chunk" class="icon-link" href="#明确第三方库-chunk"></a>
</h3>
<p>将你的代码拆分成公共代码和应用代码。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    vendor<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'other-lib'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    app<span class="token punctuation">:</span> <span class="token string">'./entry'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
      <span class="token comment">// filename: "vendor.js"</span>
      <span class="token comment">// (给 chunk 一个不同的名字)</span>

      minChunks<span class="token punctuation">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
      <span class="token comment">// (随着 entry chunk 越来越多，</span>
      <span class="token comment">// 这个配置保证没其它的模块会打包进 vendor chunk)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>vendor.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>app.js<span class="token punctuation">"</span></span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 结合长期缓存，你可能需要使用这个<a href="https://github.com/soundcloud/chunk-manifest-webpack-plugin">插件</a>去避免 公共chunk 改变。 你也需要使用 <code>records</code> 去保持稳定的模块 id，例如，使用 <a href="/plugins/named-modules-plugin"><code>NamedModulesPlugin</code></a> 或 <a href="/plugins/hashed-module-ids-plugin"><code>HashedModuleIdsPlugin</code></a>。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#将公共模块打包进父-chunk" id="将公共模块打包进父-chunk"></a>
<span class="text">将公共模块打包进父 chunk</span>
<a aria-label="将公共模块打包进父 chunk" class="icon-link" href="#将公共模块打包进父-chunk"></a>
</h3>
<p>使用<a href="/guides/code-splitting">代码拆分</a>功能，一个 chunk 的多个子 chunk 会有公共的依赖。为了防止重复，可以将这些公共模块移入父 chunk。这会减少总体的大小，但会对首次加载时间产生不良影响。如果预期到用户需要下载许多兄弟 chunks（例如，入口 trunk 的子 chunk），那这对改善加载时间将非常有用。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// names: ["app", "subPageA"]</span>
  <span class="token comment">// (选择 chunks，或者忽略该项设置以选择全部 chunks)</span>

  children<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (选择所有被选 chunks 的子 chunks)</span>

  <span class="token comment">// minChunks: 3,</span>
  <span class="token comment">// (在提取之前需要至少三个子 chunk 共享这个模块)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#额外的异步-公共chunk" id="额外的异步-公共chunk"></a>
<span class="text">额外的异步 公共chunk</span>
<a aria-label="额外的异步 公共chunk" class="icon-link" href="#额外的异步-公共chunk"></a>
</h3>
<p>与上面的类似，但是并非将公共模块移动到父 chunk（增加初始加载时间），而是使用新的异步加载的额外公共chunk。当下载额外的 chunk 时，它将自动并行下载。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'app'</span><span class="token punctuation">,</span>
  <span class="token comment">// or</span>
  names<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'app'</span><span class="token punctuation">,</span> <span class="token string">'subPageA'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// the name or list of names must match the name or names</span>
  <span class="token comment">// of the entry points that create the async chunks</span>

  children<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (选择所有被选 chunks 的子 chunks)</span>

  <span class="token keyword">async</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">// (创建一个异步 公共chunk)</span>

  minChunks<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token comment">// (在提取之前需要至少三个子 chunk 共享这个模块)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#给-minchunks-配置传入函数" id="给-minchunks-配置传入函数"></a>
<span class="text">给 <code>minChunks</code> 配置传入函数</span>
<a aria-label="给 &lt;code&gt;minChunks&lt;/code&gt; 配置传入函数" class="icon-link" href="#给-minchunks-配置传入函数"></a>
</h3>
<p>你也可以给 <code>minChunks</code> 传入一个函数。这个函数会被 <code>CommonsChunkPlugin</code> 插件回调，并且调用函数时会传入 <code>module</code> 和 <code>count</code> 参数。</p>
<p><code>module</code> 参数代表每个 chunks 里的模块，这些 chunks 是你通过 <code>name</code>/<code>names</code> 参数传入的。
<code>module</code> has the shape of a <a href="https://github.com/webpack/webpack/blob/master/lib/NormalModule.js">NormalModule</a>, which has two particularly useful properties for this use case:</p>
<ul>
<li><code>module.context</code>: The directory that stores the file. For example: <code>'/my_project/node_modules/example-dependency'</code></li>
<li><code>module.resource</code>: The name of the file being processed. For example: <code>'/my_project/node_modules/example-dependency/index.js'</code></li>
</ul>
<p><code>count</code> 参数表示 <code>module</code> 被使用的 chunk 数量。</p>
<p>当你想要对 <code>CommonsChunk</code> 如何决定模块被打包到哪里的算法有更为细致的控制， 这个配置就会非常有用。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'my-single-lib-chunk'</span><span class="token punctuation">,</span>
  filename<span class="token punctuation">:</span> <span class="token string">'my-single-lib-chunk.js'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果模块是一个路径，而且在路径中有 "somelib" 这个名字出现，</span>
    <span class="token comment">// 而且它还被三个不同的 chunks/入口chunk 所使用，那请将它拆分到</span>
    <span class="token comment">// 另一个分开的 chunk 中，chunk 的 keyname 是 "my-single-lib-chunk"，而文件名是 "my-single-lib-chunk.js"</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token regex">/somelib/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> count <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>正如上面看到的，这个例子允许你只将其中一个库移到一个分开的文件当中，当而仅当函数中的所有条件都被满足了。</p>
<p>This concept may be used to obtain implicit common vendor chunks:</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// this assumes your vendor imports exist in the node_modules directory</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In order to obtain a single CSS file containing your application and vendor CSS, use the following <code>minChunks</code> function together with <a href="/plugins/extract-text-webpack-plugin/"><code>ExtractTextPlugin</code></a>:</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// This prevents stylesheet resources with the .css or .scss extension</span>
    <span class="token comment">// from being moved from their original chunk to the vendor chunk</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token regex">/^.*\.(css|scss)$/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">.</span>resource<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#manifest-file" id="manifest-file"></a>
<span class="text">Manifest file</span>
<a aria-label="Manifest file" class="icon-link" href="#manifest-file"></a>
</h2>
<p>To extract the webpack bootstrap logic into a separate file, use the <code>CommonsChunkPlugin</code> on a <code>name</code> which is not defined as <code>entry</code>. Commonly the name <code>manifest</code> is used. See the <a href="/guides/caching">caching guide</a> for details.</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'manifest'</span><span class="token punctuation">,</span>
  minChunks<span class="token punctuation">:</span> <span class="token number">Infinity</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#combining-implicit-common-vendor-chunks-and-manifest-file" id="combining-implicit-common-vendor-chunks-and-manifest-file"></a>
<span class="text">Combining implicit common vendor chunks and manifest file</span>
<a aria-label="Combining implicit common vendor chunks and manifest file" class="icon-link" href="#combining-implicit-common-vendor-chunks-and-manifest-file"></a>
</h2>
<p>Since the <code>vendor</code> and <code>manifest</code> chunk use a different definition for <code>minChunks</code>, you need to invoke the plugin twice:</p>
<pre><code class="lang-javascript"><span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
    minChunks<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> module<span class="token punctuation">.</span>context <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'node_modules'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>CommonsChunkPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'manifest'</span><span class="token punctuation">,</span>
    minChunks<span class="token punctuation">:</span> <span class="token number">Infinity</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#more-examples" id="more-examples"></a>
<span class="text">More Examples</span>
<a aria-label="More Examples" class="icon-link" href="#more-examples"></a>
</h2>
<ul>
<li><a href="https://github.com/webpack/webpack/tree/master/examples/common-chunk-and-vendor-chunk">Common and Vendor Chunks</a></li>
<li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-commons-chunks">Multiple Common Chunks</a></li>
<li><a href="https://github.com/webpack/webpack/tree/8b888fedfaeaac6bd39168c0952cc19e6c34280a/examples/multiple-entry-points-commons-chunk-css-bundle">Multiple Entry Points with Commons Chunk</a></li>
</ul>
</div>
<br/><h1>CompressionWebpackPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![cover][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>预先提供带 Content-Encoding 编码的压缩版本的资源。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#需求" id="需求"></a>
<span class="text">需求</span>
<a aria-label="需求" class="icon-link" href="#需求"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#起步" id="起步"></a>
<span class="text">起步</span>
<a aria-label="起步" class="icon-link" href="#起步"></a>
</h2>
<p>To begin, you'll need to install <code>compression-webpack-plugin</code>:</p>
<pre><code class="lang-console">$ npm install compression-webpack-plugin --save-dev
</code></pre>
<p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> CompressionPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'compression-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#test" id="test"></a>
<span class="text"><code>test</code></span>
<a aria-label="&lt;code&gt;test&lt;/code&gt;" class="icon-link" href="#test"></a>
</h3>
<p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p>
<p>匹配所有对应的文件。</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  test<span class="token punctuation">:</span> <span class="token regex">/\.js(\?.*)?$/i</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#include" id="include"></a>
<span class="text"><code>include</code></span>
<a aria-label="&lt;code&gt;include&lt;/code&gt;" class="icon-link" href="#include"></a>
</h3>
<p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认：<code>undefined</code></p>
<p>所有包含(include)的文件。</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  include<span class="token punctuation">:</span> <span class="token regex">/\/includes/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exclude" id="exclude"></a>
<span class="text"><code>exclude</code></span>
<a aria-label="&lt;code&gt;exclude&lt;/code&gt;" class="icon-link" href="#exclude"></a>
</h3>
<p>类型：<code>String|RegExp|Array&lt;String|RegExp&gt;</code>
默认：<code>undefined</code></p>
<p>所有排除(exclude)的文件。</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  exclude<span class="token punctuation">:</span> <span class="token regex">/\/excludes/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cache" id="cache"></a>
<span class="text"><code>cache</code></span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt;" class="icon-link" href="#cache"></a>
</h3>
<p>类型：<code>Boolean|String</code>
默认：<code>false</code></p>
<p>Enable file caching.
The default path to cache directory: <code>node_modules/.cache/compression-webpack-plugin</code>.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable file caching.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  cache<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>Enable file caching and set path to cache directory.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  cache<span class="token punctuation">:</span> <span class="token string">'path/to/cache'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#filename" id="filename"></a>
<span class="text"><code>filename</code></span>
<a aria-label="&lt;code&gt;filename&lt;/code&gt;" class="icon-link" href="#filename"></a>
</h3>
<p>类型：<code>String|Function</code>
默认：<code>[path].gz[query]</code></p>
<p>目标资源文件名称。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p><code>[file]</code> is replaced with the original asset filename.
<code>[path]</code> is replaced with the path of the original asset.
<code>[query]</code> is replaced with the query.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token punctuation">:</span> <span class="token string">'[path].gz[query]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">filename</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// info.file is the original asset filename</span>
    <span class="token comment">// info.path is the path of the original asset</span>
    <span class="token comment">// info.query is the query</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.gz</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>info<span class="token punctuation">.</span>query<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#algorithm" id="algorithm"></a>
<span class="text"><code>algorithm</code></span>
<a aria-label="&lt;code&gt;algorithm&lt;/code&gt;" class="icon-link" href="#algorithm"></a>
</h3>
<p>类型：<code>String|Function</code>
默认：<code>gzip</code></p>
<p>The compression algorithm/function.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>The algorithm is taken from <a href="https://nodejs.org/api/zlib.html">zlib</a>.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  algorithm<span class="token punctuation">:</span> <span class="token string">'gzip'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function" id="function"></a>
<span class="text"><code>Function</code></span>
<a aria-label="&lt;code&gt;Function&lt;/code&gt;" class="icon-link" href="#function"></a>
</h4>
<p>Allow to specify a custom compression function.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">algorithm</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">compressionFunction</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#compressionoptions" id="compressionoptions"></a>
<span class="text"><code>compressionOptions</code></span>
<a aria-label="&lt;code&gt;compressionOptions&lt;/code&gt;" class="icon-link" href="#compressionoptions"></a>
</h3>
<p>类型：<code>Object</code>
默认：<code>{ level: 9 }</code></p>
<p>If you use custom function for the <code>algorithm</code> option, the default value is <code>{}</code>.</p>
<p>Compression options.
You can find all options here <a href="https://nodejs.org/api/zlib.html#zlib_class_options">zlib</a>.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  compressionOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span> level<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#threshold" id="threshold"></a>
<span class="text"><code>threshold</code></span>
<a aria-label="&lt;code&gt;threshold&lt;/code&gt;" class="icon-link" href="#threshold"></a>
</h3>
<p>类型：<code>Number</code>
默认：<code>0</code></p>
<p>只处理比这个值大的资源。按字节计算。</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  threshold<span class="token punctuation">:</span> <span class="token number">8192</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minratio" id="minratio"></a>
<span class="text"><code>minRatio</code></span>
<a aria-label="&lt;code&gt;minRatio&lt;/code&gt;" class="icon-link" href="#minratio"></a>
</h3>
<p>类型：<code>Number</code>
默认：<code>0.8</code></p>
<p>只有压缩率比这个值小的资源才会被处理（<code>minRatio = 压缩大小 / 原始大小</code>）。
Example: you have <code>image.png</code> file with 1024b size, compressed version of file has 768b size, so <code>minRatio</code> equal <code>0.75</code>.
In other words assets will be processed when the <code>Compressed Size / Original Size</code> value less <code>minRatio</code> value.
You can use <code>1</code> value to process all assets.</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minRatio<span class="token punctuation">:</span> <span class="token number">0.8</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#deleteoriginalassets" id="deleteoriginalassets"></a>
<span class="text"><code>deleteOriginalAssets</code></span>
<a aria-label="&lt;code&gt;deleteOriginalAssets&lt;/code&gt;" class="icon-link" href="#deleteoriginalassets"></a>
</h3>
<p>类型：<code>Boolean</code>
默认：<code>false</code></p>
<p>是否删除原始资源。</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
<span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  deleteOriginalAssets<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例" id="示例"></a>
<span class="text">示例</span>
<a aria-label="示例" class="icon-link" href="#示例"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-zopfli" id="使用-zopfli"></a>
<span class="text">使用 Zopfli</span>
<a aria-label="使用 Zopfli" class="icon-link" href="#使用-zopfli"></a>
</h3>
<p>Prepare compressed versions of assets using <code>zopfli</code> library.</p>
<blockquote>
<p>ℹ️ <code>@gfx/zopfli</code> require minimum <code>8</code> version of <code>node</code>.</p>
</blockquote>
<p>To begin, you'll need to install <code>@gfx/zopfli</code>:</p>
<pre><code class="lang-console">$ npm install @gfx/zopfli --save-dev
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> zopfli <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'@gfx/zopfli'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      compressionOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
         numiterations<span class="token punctuation">:</span> <span class="token number">15</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token function">algorithm</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> zopfli<span class="token punctuation">.</span><span class="token function">gzip</span><span class="token punctuation">(</span>input<span class="token punctuation">,</span> compressionOptions<span class="token punctuation">,</span> callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-brotli" id="使用-brotli"></a>
<span class="text">使用 Brotli</span>
<a aria-label="使用 Brotli" class="icon-link" href="#使用-brotli"></a>
</h3>
<p><a href="https://en.wikipedia.org/wiki/Brotli">Brotli</a> is a compression algorithm originally developed by Google, and offers compression superior to gzip.</p>
<p>Node 11.7.0 and later has <a href="https://nodejs.org/api/zlib.html#zlib_zlib_createbrotlicompress_options">native support</a> for Brotli compression in its zlib module.</p>
<p>We can take advantage of this built-in support for Brotli in Node 11.7.0 and later by just passing in the appropriate <code>algorithm</code> to the CompressionPlugin:</p>
<pre><code class="lang-js"><span class="token comment">// 在 webpack.config.js 中</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CompressionPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">'[path].br[query]'</span><span class="token punctuation">,</span>
      algorithm<span class="token punctuation">:</span> <span class="token string">'brotliCompress'</span><span class="token punctuation">,</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.(js|css|html|svg)$/</span><span class="token punctuation">,</span>
      compressionOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span> level<span class="token punctuation">:</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      threshold<span class="token punctuation">:</span> <span class="token number">10240</span><span class="token punctuation">,</span>
      minRatio<span class="token punctuation">:</span> <span class="token number">0.8</span><span class="token punctuation">,</span>
      deleteOriginalAssets<span class="token punctuation">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>N.B.:</strong> The <code>level</code> option matches <code>BROTLI_PARAM_QUALITY</code> <a href="https://nodejs.org/api/zlib.html#zlib_for_brotli_based_streams">for Brotli-based streams</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/compression-webpack-plugin/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/compression-webpack-plugin/master/LICENSE">MIT</a></p>
</div>
<br/><h1>ContextReplacementPlugin</h1>
<div><p><em>上下文(context)</em> 与一个 <a href="/guides/dependency-management/#require-with-expression">含有表达式的 require 语句</a> 相关，例如 <code>require('./locale/' + name + '.json')</code>。遇见此类表达式时，webpack 查找目录 (<code>'./locale/'</code>) 下符合正则表达式 (<code>/^.*\.json$/</code>)的文件。由于 <code>name</code> 在编译时(compile time)还是未知的，webpack 会将每个文件都作为模块引入到 bundle 中。</p>
<p><code>上下文替换插件(ContextReplacementPlugin)</code> 允许你覆盖查找规则，该插件有许多配置方式：</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<!-- eslint-skip -->
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token punctuation">:</span> RegExp<span class="token punctuation">,</span>
  newContentResource<span class="token operator">?</span><span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  newContentRecursive<span class="token operator">?</span><span class="token punctuation">:</span> boolean<span class="token punctuation">,</span>
  newContentRegExp<span class="token operator">?</span><span class="token punctuation">:</span> RegExp
<span class="token punctuation">)</span>
</code></pre>
<p>如果资源（或目录）符合 <code>resourceRegExp</code> 正则表达式，插件会替换默认资源为 <code>newContentResource</code>，布尔值 <code>newContentRecursive</code> 表明是否使用递归查找，<code>newContextRegExp</code> 用于筛选新上下文里的资源。如果 <code>newContentResource</code> 为相对路径，会相对于前一匹配资源路径去解析。</p>
<p>这是一个限制模块使用的小例子：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span>
  <span class="token regex">/moment[/\\]locale$/</span><span class="token punctuation">,</span>
  <span class="token regex">/de|fr|hu/</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>限定查找 <code>moment/locale</code> 上下文里符合 <code>/de|fr|hu/</code> 表达式的文件，因此也只会打包这几种本地化内容（更多详细信息，请查看<a href="https://github.com/moment/moment/issues/2373">这个 issue</a>）。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#内容回调函数" id="内容回调函数"></a>
<span class="text">内容回调函数</span>
<a aria-label="内容回调函数" class="icon-link" href="#内容回调函数"></a>
</h2>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token punctuation">:</span> RegExp<span class="token punctuation">,</span>
  newContentCallback<span class="token punctuation">:</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">void</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>newContentCallback</code> 函数的第一形参为<a href="/api/plugins/module-factories/"><code>上下文模块工厂(ContextModuleFactory)</code>的 <code>data</code> 对象</a>，你需要覆写该对象的 <code>request</code> 属性。</p>
<p>使用这个回调函数，我们可以动态地将请求重定向到一个新的位置：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span><span class="token regex">/\/moment\//</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>context<span class="token punctuation">.</span>context<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    regExp<span class="token punctuation">:</span> <span class="token regex">/^\.\/\w+/</span><span class="token punctuation">,</span>
    request<span class="token punctuation">:</span> <span class="token string">'../../locale'</span> <span class="token comment">// 相对路径解析</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#其他选项" id="其他选项"></a>
<span class="text">其他选项</span>
<a aria-label="其他选项" class="icon-link" href="#其他选项"></a>
</h2>
<p><code>newContentResource</code> 和 <code>newContentCreateContextMap</code> 参数也可用：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ContextReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token punctuation">:</span> RegExp<span class="token punctuation">,</span>
  newContentResource<span class="token punctuation">:</span> string<span class="token punctuation">,</span>
  newContentCreateContextMap<span class="token punctuation">:</span> object <span class="token comment">// 将运行时请求(runtime-request)映射到编译时请求(compile-time request)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>这两个参数可以一起使用，来更加有针对性的重定向请求。 <code>newContentCreateContextMap</code> 允许你将运行时的请求，映射为形式为对象的编译请求：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">ContextReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/selector/</span><span class="token punctuation">,</span> <span class="token string">'./folder'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token string">'./request'</span><span class="token punctuation">:</span> <span class="token string">'./request'</span><span class="token punctuation">,</span>
  <span class="token string">'./other-request'</span><span class="token punctuation">:</span> <span class="token string">'./new-request'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>CopyWebpackPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![cover][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>Copies individual files or entire directories to the build directory.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>copy-webpack-plugin</code>:</p>
<pre><code class="lang-console">$ npm install copy-webpack-plugin --save-dev
</code></pre>
<p>Then add the loader to your <code>webpack</code> config. For example:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> CopyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'source'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'dest'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'other'</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> <span class="token string">'public'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>ℹ️ If you want <code>webpack-dev-server</code> to write files to the output directory during development, you can force it with the <a href="https://github.com/webpack/webpack-dev-middleware#writetodisk"><code>writeToDisk</code></a> option or the <a href="https://github.com/gajus/write-file-webpack-plugin"><code>write-file-webpack-plugin</code></a>.</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<p>The plugin's signature:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span>patterns<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#patterns" id="patterns"></a>
<span class="text">Patterns</span>
<a aria-label="Patterns" class="icon-link" href="#patterns"></a>
</h3>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#from"><code>from</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String|Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Glob or path from where we сopy files.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#to"><code>to</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Output path.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#context"><code>context</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>options.context ||compiler.options.context</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        A path that determines how to interpret the <code>from</code> path.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#toType"><code>toType</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Determinate what is <code>to</code> option - directory, file or template.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#test"><code>test</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{RegExp}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Pattern for extracting elements to be used in <code>to</code> templates.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#force"><code>force</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Overwrites files already in <code>compilation.assets</code> (usually added by other plugins/loaders).
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#ignore"><code>ignore</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Array}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>[]</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Globs to ignore files.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#flatten"><code>flatten</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Removes all directory references and only copies file names.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#transform"><code>transform</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function|Promise}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows to modify the file contents.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#cache"><code>cache</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean|Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Enable <code>transform</code> caching. You can use <code>{ cache: { key: 'my-cache-key' } }</code> to invalidate the cache.
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#transformPath"><code>transformPath</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Function|Promise}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Allows to modify the writing path.
    </div>
</div></div>
</div>
</div>
</div><h4 class="header">
<a aria-hidden="true" class="anchor" href="#from" id="from"></a>
<span class="text"><code>from</code></span>
<a aria-label="&lt;code&gt;from&lt;/code&gt;" class="icon-link" href="#from"></a>
</h4>
<p>Type: <code>String\|Object</code>
Default: <code>undefined</code></p>
<p>Glob or path from where we сopy files.
Globs accept <a href="https://github.com/isaacs/minimatch">minimatch options</a>.</p>
<p>You can defined <code>from</code> as <code>Object</code> and use the <a href="https://github.com/isaacs/node-glob#options"><code>node-glob</code> options</a>.</p>
<blockquote>
<p>⚠️ Don't use directly <code>\\</code> in <code>from</code> (i.e <code>path\to\file.ext</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it's not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'relative/path/to/file.ext'</span><span class="token punctuation">,</span>
      <span class="token string">'/absolute/path/to/file.ext'</span><span class="token punctuation">,</span>
      <span class="token string">'relative/path/to/dir'</span><span class="token punctuation">,</span>
      <span class="token string">'/absolute/path/to/dir'</span><span class="token punctuation">,</span>
      '<span class="token operator">*</span><span class="token operator">*</span><span class="token comment">/*',
      { glob: '**/</span><span class="token operator">*</span>'<span class="token punctuation">,</span> dot<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#to" id="to"></a>
<span class="text"><code>to</code></span>
<a aria-label="&lt;code&gt;to&lt;/code&gt;" class="icon-link" href="#to"></a>
</h4>
<p>Type: <code>String</code>
Default: <code>undefined</code></p>
<p>Output path.</p>
<blockquote>
<p>⚠️ Don't use directly <code>\\</code> in <code>to</code> (i.e <code>path\to\dest</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it's not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token punctuation">:</span> '<span class="token operator">*</span><span class="token operator">*</span><span class="token comment">/*', to: 'relative/path/to/dest/' },
      { from: '**/</span><span class="token operator">*</span><span class="token string">', to: '</span><span class="token operator">/</span>absolute<span class="token operator">/</span>path<span class="token operator">/</span>to<span class="token operator">/</span>dest<span class="token operator">/</span>' <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h4>
<p>Type: <code>String</code>
Default: <code>options.context|compiler.options.context</code></p>
<p>A path that determines how to interpret the <code>from</code> path.</p>
<blockquote>
<p>⚠️ Don't use directly <code>\\</code> in <code>context</code> (i.e <code>path\to\context</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it's not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.txt'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        context<span class="token punctuation">:</span> <span class="token string">'app/'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#totype" id="totype"></a>
<span class="text"><code>toType</code></span>
<a aria-label="&lt;code&gt;toType&lt;/code&gt;" class="icon-link" href="#totype"></a>
</h4>
<p>Type: <code>String</code>
Default: <code>undefined</code></p>
<p>Determinate what is <code>to</code> option - directory, file or template.
Sometimes it is hard to say what is <code>to</code>, example <code>path/to/dir-with.ext</code>.
If you want to copy files in directory you need use <code>dir</code> option.
We try to automatically determine the <code>type</code> so you most likely do not need this option.</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>'dir'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        If <code>from</code> is directory, <code>to</code> has no extension or ends in <code>'/'</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>'file'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        If <code>to</code> has extension or <code>from</code> is file
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<strong><code>'template'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>undefined</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        If <code>to</code> contains <a href="https://github.com/webpack-contrib/file-loader#placeholders">a template pattern</a>
</div>
</div></div>
</div>
</div>
</div><h5 class="header">
<a aria-hidden="true" class="anchor" href="#-dir-" id="-dir-"></a>
<span class="text"><code>'dir'</code></span>
<a aria-label="&lt;code&gt;'dir'&lt;/code&gt;" class="icon-link" href="#-dir-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'path/to/file.txt'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'directory/with/extension.ext'</span><span class="token punctuation">,</span>
        toType<span class="token punctuation">:</span> <span class="token string">'dir'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-file-" id="-file-"></a>
<span class="text"><code>'file'</code></span>
<a aria-label="&lt;code&gt;'file'&lt;/code&gt;" class="icon-link" href="#-file-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'path/to/file.txt'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'file/without/extension'</span><span class="token punctuation">,</span>
        toType<span class="token punctuation">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-template-" id="-template-"></a>
<span class="text"><code>'template'</code></span>
<a aria-label="&lt;code&gt;'template'&lt;/code&gt;" class="icon-link" href="#-template-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/[name].[hash].[ext]'</span><span class="token punctuation">,</span>
        toType<span class="token punctuation">:</span> <span class="token string">'template'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#test" id="test"></a>
<span class="text"><code>test</code></span>
<a aria-label="&lt;code&gt;test&lt;/code&gt;" class="icon-link" href="#test"></a>
</h4>
<p>Type: <code>RegExp</code>
Default: <code>undefined</code></p>
<p>Pattern for extracting elements to be used in <code>to</code> templates.</p>
<p>Defines a <code>{RegExp}</code> to match some parts of the file path.
These capture groups can be reused in the name property using <code>[N]</code> placeholder.
Note that <code>[0]</code> will be replaced by the entire path of the file,
whereas <code>[1]</code> will contain the first capturing parenthesis of your <code>{RegExp}</code>
and so on...</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'*/*'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'[1]-[2].[hash].[ext]'</span><span class="token punctuation">,</span>
        test<span class="token punctuation">:</span> <span class="token regex">/([^/]+)\/(.+)\.png$/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#force" id="force"></a>
<span class="text"><code>force</code></span>
<a aria-label="&lt;code&gt;force&lt;/code&gt;" class="icon-link" href="#force"></a>
</h4>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>Overwrites files already in <code>compilation.assets</code> (usually added by other plugins/loaders).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> 'src<span class="token comment">/**/</span><span class="token operator">*</span>'<span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        force<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#ignore" id="ignore"></a>
<span class="text"><code>ignore</code></span>
<a aria-label="&lt;code&gt;ignore&lt;/code&gt;" class="icon-link" href="#ignore"></a>
</h4>
<p>Type: <code>Array</code>
Default: <code>[]</code></p>
<p>Globs to ignore files.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> 'src<span class="token comment">/**/</span><span class="token operator">*</span>'<span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        ignore<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*.js'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#flatten" id="flatten"></a>
<span class="text"><code>flatten</code></span>
<a aria-label="&lt;code&gt;flatten&lt;/code&gt;" class="icon-link" href="#flatten"></a>
</h4>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>Removes all directory references and only copies file names.</p>
<blockquote>
<p>⚠️ If files have the same name, the result is non-deterministic.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> 'src<span class="token comment">/**/</span><span class="token operator">*</span>'<span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        flatten<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#transform" id="transform"></a>
<span class="text"><code>transform</code></span>
<a aria-label="&lt;code&gt;transform&lt;/code&gt;" class="icon-link" href="#transform"></a>
</h4>
<p>Type: <code>Function|Promise</code>
Default: <code>undefined</code></p>
<p>Allows to modify the file contents.</p>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-function-" id="-function-"></a>
<span class="text"><code>{Function}</code></span>
<a aria-label="&lt;code&gt;{Function}&lt;/code&gt;" class="icon-link" href="#-function-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.png'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        <span class="token function">transform</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-promise-" id="-promise-"></a>
<span class="text"><code>{Promise}</code></span>
<a aria-label="&lt;code&gt;{Promise}&lt;/code&gt;" class="icon-link" href="#-promise-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.png'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        <span class="token function">transform</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#cache" id="cache"></a>
<span class="text"><code>cache</code></span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt;" class="icon-link" href="#cache"></a>
</h4>
<p>Type: <code>Boolean|Object</code>
Default: <code>false</code></p>
<p>Enable/disable <code>transform</code> caching. You can use <code>{ cache: { key: 'my-cache-key' } }</code> to invalidate the cache.
Default path to cache directory: <code>node_modules/.cache/copy-webpack-plugin</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.png'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        <span class="token function">transform</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">optimize</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#transformpath" id="transformpath"></a>
<span class="text"><code>transformPath</code></span>
<a aria-label="&lt;code&gt;transformPath&lt;/code&gt;" class="icon-link" href="#transformpath"></a>
</h4>
<p>Type: <code>Function|Promise</code>
Default: <code>undefined</code></p>
<p>Allows to modify the writing path.</p>
<blockquote>
<p>⚠️ Don't return directly <code>\\</code> in <code>transformPath</code> (i.e <code>path\to\newFile</code>) option because on UNIX the backslash is a valid character inside a path component, i.e., it's not a separator.
On Windows, the forward slash and the backward slash are both separators.
Instead please use <code>/</code> or <code>path</code> methods.</p>
</blockquote>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-function-" id="-function-"></a>
<span class="text"><code>{Function}</code></span>
<a aria-label="&lt;code&gt;{Function}&lt;/code&gt;" class="icon-link" href="#-function-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.png'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        <span class="token function">transformPath</span><span class="token punctuation">(</span>targetPath<span class="token punctuation">,</span> absolutePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token string">'newPath'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#-promise-" id="-promise-"></a>
<span class="text"><code>{Promise}</code></span>
<a aria-label="&lt;code&gt;{Promise}&lt;/code&gt;" class="icon-link" href="#-promise-"></a>
</h5>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token keyword">from</span><span class="token punctuation">:</span> <span class="token string">'src/*.png'</span><span class="token punctuation">,</span>
        to<span class="token punctuation">:</span> <span class="token string">'dest/'</span><span class="token punctuation">,</span>
        <span class="token function">transformPath</span><span class="token punctuation">(</span>targePath<span class="token punctuation">,</span> absolutePath<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'newPath'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h3>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Name</div><div class="table-th">Type</div><div class="table-th">Default</div><div class="table-th">Description</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#logLevel"><code>logLevel</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<strong><code>'warn'</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Level of messages that the module will log
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#ignore"><code>ignore</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Array}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>[]</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Array of globs to ignore (applied to <code>from</code>)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#context"><code>context</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>compiler.options.context</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        A path that determines how to interpret the <code>from</code> path, shared for all patterns
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Name
    </div>
<div class="table-td-content">
<a href="#copyUnmodified"><code>copyUnmodified</code></a>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Type
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Default
    </div>
<div class="table-td-content">
<code>false</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Description
    </div>
<div class="table-td-content">
        Copies files, regardless of modification when using watch or <code>webpack-dev-server</code>. All files are copied on first build, regardless of this option
    </div>
</div></div>
</div>
</div>
</div><h4 class="header">
<a aria-hidden="true" class="anchor" href="#loglevel" id="loglevel"></a>
<span class="text"><code>logLevel</code></span>
<a aria-label="&lt;code&gt;logLevel&lt;/code&gt;" class="icon-link" href="#loglevel"></a>
</h4>
<p>This property defines the level of messages that the module will log. Valid levels include:</p>
<ul>
<li><code>trace</code></li>
<li><code>debug</code></li>
<li><code>info</code></li>
<li><code>warn</code> (default)</li>
<li><code>error</code></li>
<li><code>silent</code></li>
</ul>
<p>Setting a log level means that all other levels below it will be visible in the
console. Setting <code>logLevel: 'silent'</code> will hide all console output. The module
leverages <a href="https://github.com/webpack-contrib/webpack-log#readme"><code>webpack-log</code></a>
for logging management, and more information can be found on its page.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>patterns<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> logLevel<span class="token punctuation">:</span> <span class="token string">'debug'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#ignore" id="ignore"></a>
<span class="text"><code>ignore</code></span>
<a aria-label="&lt;code&gt;ignore&lt;/code&gt;" class="icon-link" href="#ignore"></a>
</h4>
<p>Array of globs to ignore (applied to <code>from</code>).</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>patterns<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> ignore<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'*.js'</span><span class="token punctuation">,</span> <span class="token string">'*.css'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h4>
<p>A path that determines how to interpret the <code>from</code> path, shared for all patterns.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>patterns<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> context<span class="token punctuation">:</span> <span class="token string">'/app'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#copyunmodified" id="copyunmodified"></a>
<span class="text"><code>copyUnmodified</code></span>
<a aria-label="&lt;code&gt;copyUnmodified&lt;/code&gt;" class="icon-link" href="#copyunmodified"></a>
</h4>
<p>Copies files, regardless of modification when using watch or <code>webpack-dev-server</code>. All files are copied on first build, regardless of this option.</p>
<blockquote>
<p>ℹ️ By default, we only copy <strong>modified</strong> files during a <code>webpack --watch</code> or <code>webpack-dev-server</code> build. Setting this option to <code>true</code> will copy all files.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">CopyPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>patterns<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> copyUnmodified<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/copy-webpack-plugin/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/copy-webpack-plugin/master/LICENSE">MIT</a></p>
</div>
<br/><h1>CssWebpackPlugin</h1>
<div><p>Nothing to see here .... yet</p>
</div>
<br/><h1>DefinePlugin</h1>
<div><p><code>DefinePlugin</code> 允许创建一个在<strong>编译</strong>时可以配置的全局常量。这可能会对开发模式和生产模式的构建允许不同的行为非常有用。如果在开发构建中，而不在发布构建中执行日志记录，则可以使用全局常量来决定是否记录日志。这就是 <code>DefinePlugin</code> 的用处，设置它，就可以忘记开发环境和生产环境构建的规则。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Definitions...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>每个传进 <code>DefinePlugin</code> 的键值都是一个标志符或者多个用 <code>.</code> 连接起来的标志符。</p>
<ul>
<li>如果这个值是一个字符串，它会被当作一个代码片段来使用。</li>
<li>如果这个值不是字符串，它会被转化为字符串(包括函数)。</li>
<li>如果这个值是一个对象，它所有的 key 会被同样的方式定义。</li>
<li>如果在一个 key 前面加了 <code>typeof</code>,它会被定义为 typeof 调用。</li>
</ul>
<p>这些值会被内联进那些允许传一个代码压缩参数的代码中，从而减少冗余的条件判断。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  PRODUCTION<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  VERSION<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'5fa3b9'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  BROWSER_SUPPORTS_HTML5<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  TWO<span class="token punctuation">:</span> <span class="token string">'1+1'</span><span class="token punctuation">,</span>
  <span class="token string">'typeof window'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'process.env.NODE_ENV'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Running App version '</span> <span class="token operator">+</span> VERSION<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>BROWSER_SUPPORTS_HTML5<span class="token punctuation">)</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html5shiv'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> When defining values for <code>process</code> prefer <code>'process.env.NODE_ENV': JSON.stringify('production')</code> over <code>process: { env: { NODE_ENV: JSON.stringify('production') } }</code>. Using the latter will overwrite the <code>process</code> object which can break compatibility with some modules that expect other values on the process object to be defined. </div></blockquote><blockquote class="tip"><div class="tip-content"> 注意，因为这个插件直接执行文本替换，给定的值必须包含字符串本身内的<strong>实际引号</strong>。通常，有两种方式来达到这个效果，使用 <code>'"production"'</code>, 或者使用 <code>JSON.stringify('production')</code>。 </div></blockquote><p><strong>index.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>PRODUCTION<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debug info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>PRODUCTION<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production log'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>通过没有使用压缩的 webpack 的结果：</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debug info'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production log'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>通过使用压缩的 webpack 的结果:</p>
<pre><code class="lang-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Production log'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#功能标记-feature-flags-" id="功能标记-feature-flags-"></a>
<span class="text">功能标记(Feature Flags)</span>
<a aria-label="功能标记(Feature Flags)" class="icon-link" href="#功能标记-feature-flags-"></a>
</h2>
<p>使用<a href="https://en.wikipedia.org/wiki/Feature_toggle">功能标记</a>来「启用/禁用」「生产/开发」构建中的功能。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'NICE_FEATURE'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'EXPERIMENTAL_FEATURE'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#服务-url-service-url-" id="服务-url-service-url-"></a>
<span class="text">服务 URL(Service URL)</span>
<a aria-label="服务 URL(Service URL)" class="icon-link" href="#服务-url-service-url-"></a>
</h2>
<p>在生产/开发构建中使用不同的服务 URL(Service URL)：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'SERVICE_URL'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token string">'http://dev.example.com'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>DllPlugin</h1>
<div><p><code>DLLPlugin</code> 和 <code>DLLReferencePlugin</code> 用某种方法实现了拆分 bundles，同时还大大提升了构建的速度。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#dllplugin" id="dllplugin"></a>
<span class="text"><code>DllPlugin</code></span>
<a aria-label="&lt;code&gt;DllPlugin&lt;/code&gt;" class="icon-link" href="#dllplugin"></a>
</h2>
<p>这个插件是在一个额外的独立的 webpack 设置中创建一个只有 dll 的 bundle(dll-only-bundle)。 这个插件会生成一个名为 <code>manifest.json</code> 的文件，这个文件是用来让 <a href="/plugins/dll-plugin#dllreferenceplugin"><code>DLLReferencePlugin</code></a> 映射到相关的依赖上去的。</p>
<ul>
<li><code>context</code> (optional): manifest 文件中请求的上下文(context)(默认值为 webpack 的上下文(context))</li>
<li><code>name</code>: 暴露出的 DLL 的函数名 (<a href="https://github.com/webpack/webpack/blob/master/lib/TemplatedPathPlugin.js">TemplatePaths</a>: <code>[hash]</code> &amp; <code>[name]</code> )</li>
<li><code>path</code>: manifest json 文件的<strong>绝对路径</strong> (输出文件)</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>在给定的 <code>path</code> 路径下创建一个名为 <code>manifest.json</code> 的文件。 这个文件包含了从 <code>require</code> 和 <code>import</code> 的request到模块 id 的映射。 <code>DLLReferencePlugin</code> 也会用到这个文件。</p>
<p>这个插件与 <a href="/configuration/output/#output-library"><code>output.library</code></a> 的选项相结合可以暴露出 (也叫做放入全局域) dll 函数。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#dllreferenceplugin" id="dllreferenceplugin"></a>
<span class="text"><code>DllReferencePlugin</code></span>
<a aria-label="&lt;code&gt;DllReferencePlugin&lt;/code&gt;" class="icon-link" href="#dllreferenceplugin"></a>
</h2>
<p>这个插件是在 webpack 主配置文件中设置的， 这个插件把只有 dll 的 bundle(们)(dll-only-bundle(s)) 引用到需要的预编译的依赖。</p>
<ul>
<li><code>context</code>: (<strong>绝对路径</strong>) manifest (或者是内容属性)中请求的上下文</li>
<li><code>manifest</code>: 包含 <code>content</code> 和 <code>name</code> 的对象，或者在编译时(compilation)的一个用于加载的 JSON manifest 绝对路径</li>
<li><code>content</code> (optional): 请求到模块 id 的映射 (默认值为 <code>manifest.content</code>)</li>
<li><code>name</code> (optional): dll 暴露的地方的名称 (默认值为 <code>manifest.name</code>) (可参考 <a href="/configuration/externals/"><code>externals</code></a>)</li>
<li><code>scope</code> (optional): dll 中内容的前缀</li>
<li><code>sourceType</code> (optional): dll 是如何暴露的 (<a href="/configuration/output/#output-librarytarget">libraryTarget</a>)</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>通过引用 dll 的 manifest 文件来把依赖的名称映射到模块的 id 上，之后再在需要的时候通过内置的 <code>__webpack_require__</code> 函数来 <code>require</code> 他们</p>
<blockquote class="warning"><div class="tip-content"> 与 <a href="/configuration/output/#output-library"><code>output.library</code></a> 保持 <code>name</code> 的一致性。 </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#模式-modes-" id="模式-modes-"></a>
<span class="text">模式(Modes)</span>
<a aria-label="模式(Modes)" class="icon-link" href="#模式-modes-"></a>
</h3>
<p>这个插件支持两种模式，分别是<em>作用域(scoped)</em>和<em>映射(mapped)</em>。</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#作用域模式-scoped-mode-" id="作用域模式-scoped-mode-"></a>
<span class="text">作用域模式(Scoped Mode)</span>
<a aria-label="作用域模式(Scoped Mode)" class="icon-link" href="#作用域模式-scoped-mode-"></a>
</h4>
<p>dll 中的内容可以在模块前缀下才能被引用，举例来说，令<code>scope = "xyz"</code>的话，这个 dll 中的名为 <code>abc</code> 的文件可以通过 <code>require("xyz/abc")</code> 来获取</p>
<blockquote class="tip"><div class="tip-content"> <a href="https://github.com/webpack/webpack/tree/master/examples/dll-user">作用域的用例</a> </div></blockquote><h4 class="header">
<a aria-hidden="true" class="anchor" href="#映射模式-mapped-mode-" id="映射模式-mapped-mode-"></a>
<span class="text">映射模式(Mapped Mode)</span>
<a aria-label="映射模式(Mapped Mode)" class="icon-link" href="#映射模式-mapped-mode-"></a>
</h4>
<p>dll 中的内容被映射到了当前目录下。如果一个被 <code>require</code> 的文件符合 dll 中的某个文件(解析之后)，那么这个dll中的这个文件就会被使用。</p>
<p>由于这是在解析了 dll 中每个文件之后才发生的，相同的路径必须能够确保这个 dll bundle 的使用者(不一定是人，可指某些代码)有权限访问。 举例来说， 假如一个 dll bundle 中含有 <code>loadash</code>库 以及 文件<code>abc</code>， 那么 <code>require("lodash")</code> 和 <code>require("./abc")</code> 都不会被编译进主要的 bundle文件，而是会被 dll 所使用。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法-usage-" id="用法-usage-"></a>
<span class="text">用法(Usage)</span>
<a aria-label="用法(Usage)" class="icon-link" href="#用法-usage-"></a>
</h2>
<blockquote class="warning"><div class="tip-content"> <code>DllReferencePlugin</code> 和 <code>DLL插件DllPlugin</code> 都是在_另外_的 webpack 设置中使用的。 </div></blockquote><p><strong>webpack.vendor.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'[name]_[hash]'</span><span class="token punctuation">,</span>
  path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.app.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DllReferencePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  context<span class="token punctuation">:</span> __dirname<span class="token punctuation">,</span>
  manifest<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./manifest.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> <span class="token string">'./my-dll.js'</span><span class="token punctuation">,</span>
  scope<span class="token punctuation">:</span> <span class="token string">'xyz'</span><span class="token punctuation">,</span>
  sourceType<span class="token punctuation">:</span> <span class="token string">'commonjs2'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#示例-examples-" id="示例-examples-"></a>
<span class="text">示例(Examples)</span>
<a aria-label="示例(Examples)" class="icon-link" href="#示例-examples-"></a>
</h2>
<p><a href="https://github.com/webpack/webpack/tree/master/examples/dll">Vendor</a> and <a href="https://github.com/webpack/webpack/tree/master/examples/dll-user">User</a></p>
<p><em>两个单独的用例，用来分别演示作用域(scope)和上下文(context)。</em></p>
<blockquote class="tip"><div class="tip-content"> 多个 <code>DllPlugins</code> 和 <code>DllReferencePlugins</code>. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#引用参考-references-" id="引用参考-references-"></a>
<span class="text">引用参考(References)</span>
<a aria-label="引用参考(References)" class="icon-link" href="#引用参考-references-"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#source" id="source"></a>
<span class="text">Source</span>
<a aria-label="Source" class="icon-link" href="#source"></a>
</h3>
<ul>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/DllPlugin.js">DllPlugin source</a></li>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/DllReferencePlugin.js">DllReferencePlugin source</a></li>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/DllEntryPlugin.js">DllEntryPlugin source</a></li>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/DllModuleFactory.js">DllModuleFactory source</a></li>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/LibManifestPlugin.js">ManifestPlugin source</a></li>
</ul>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#tests" id="tests"></a>
<span class="text">Tests</span>
<a aria-label="Tests" class="icon-link" href="#tests"></a>
</h3>
<ul>
<li><a href="https://github.com/webpack/webpack/blob/master/test/configCases/dll-plugin/0-create-dll/webpack.config.js">DllPlugin creation test</a></li>
<li><a href="https://github.com/webpack/webpack/blob/master/test/configCases/dll-plugin/2-use-dll-without-scope/webpack.config.js">DllPlugin without scope test</a></li>
<li><a href="https://github.com/webpack/webpack/tree/master/test/configCases/dll-plugin">DllReferencePlugin use Dll test</a></li>
</ul>
</div>
<br/><h1>EnvironmentPlugin</h1>
<div><p><code>EnvironmentPlugin</code> 是一个通过 <a href="/plugins/define-plugin"><code>DefinePlugin</code></a> 来设置 <a href="https://nodejs.org/api/process.html#process_process_env"><code>process.env</code></a> 环境变量的快捷方式。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p><code>EnvironmentPlugin</code> 可以接收键数组或将键映射到其默认值的对象。（译者注：键是指要设定的环境变量名）</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'NODE_ENV'</span><span class="token punctuation">,</span> <span class="token string">'DEBUG'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>上面的写法和下面这样使用 <code>DefinePlugin</code> 的效果相同：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'process.env.NODE_ENV'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token string">'process.env.DEBUG'</span><span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> 使用不存在的环境变量会导致一个 "<code>EnvironmentPlugin</code> - <code>${key}</code> environment variable is undefined" 错误。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#带默认值使用" id="带默认值使用"></a>
<span class="text">带默认值使用</span>
<a aria-label="带默认值使用" class="icon-link" href="#带默认值使用"></a>
</h2>
<p>或者，<code>EnvironmentPlugin</code> 也可以接收一个指定相应默认值的对象，如果在 <code>process.env</code> 中对应的环境变量不存在时将使用指定的默认值。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EnvironmentPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  NODE_ENV<span class="token punctuation">:</span> <span class="token string">'development'</span><span class="token punctuation">,</span> <span class="token comment">// 除非有定义 process.env.NODE_ENV，否则就使用 'development'</span>
  DEBUG<span class="token punctuation">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 从 <code>process.env</code> 中取到的值类型均为字符串。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 不同于 <a href="/plugins/define-plugin"><code>DefinePlugin</code></a>，默认值将被 <code>EnvironmentPlugin</code> 执行 <code>JSON.stringify</code>。 </div></blockquote><blockquote class="tip"><div class="tip-content"> 如果要指定一个未设定的默认值，使用 <code>null</code> 来代替 <code>undefined</code>。 </div></blockquote><p><strong>示例：</strong></p>
<p>让我们看一下对下面这个用来试验的文件 <code>entry.js</code> 执行前面配置的 <code>EnvironmentPlugin</code> 的结果：</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Welcome to production'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debugging output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>当在终端执行 <code>NODE_ENV=production webpack</code> 来构建时，<code>entry.js</code> 变成了这样：</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'production'</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;-- NODE_ENV 的 'production' 被带过来了</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Welcome to production'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;-- 使用了默认值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debugging output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>执行 <code>DEBUG=false webpack</code> 则会生成：</p>
<pre><code class="lang-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'development'</span> <span class="token operator">===</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;-- 使用了默认值</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Welcome to production'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'false'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// &lt;-- DEBUG 的 'false' 被带过来了</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Debugging output'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#dotenvplugin" id="dotenvplugin"></a>
<span class="text"><code>DotenvPlugin</code></span>
<a aria-label="&lt;code&gt;DotenvPlugin&lt;/code&gt;" class="icon-link" href="#dotenvplugin"></a>
</h2>
<p>The third-party <a href="https://github.com/mrsteele/dotenv-webpack"><code>DotenvPlugin</code></a> (<code>dotenv-webpack</code>) allows you to expose (a subset of) <a href="https://www.npmjs.com/package/dotenv">dotenv variables</a>:</p>
<pre><code class="lang-bash">// .env
DB_HOST<span class="token operator">=</span>127.0.0.1
DB_PASS<span class="token operator">=</span>foobar
S3_API<span class="token operator">=</span>mysecretkey
</code></pre>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">Dotenv</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'./.env'</span><span class="token punctuation">,</span> <span class="token comment">// Path to .env file (this is the default)</span>
  safe<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token comment">// load .env.example (defaults to "false" which does not use dotenv-safe)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>EvalSourceMapDevToolPlugin</h1>
<div><p>This plugin enables more fine grained control of source map generation. It is also enabled automatically by certain settings of the <a href="/configuration/devtool/"><code>devtool</code></a> configuration option.</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<p>The following options are supported:</p>
<ul>
<li><code>test</code> (<code>string|regex|array</code>): Include source maps for modules based on their extension (defaults to <code>.js</code> and <code>.css</code>).</li>
<li><code>include</code> (<code>string|regex|array</code>): Include source maps for module paths that match the given value.</li>
<li><code>exclude</code> (<code>string|regex|array</code>): Exclude modules that match the given value from source map generation.</li>
<li><code>filename</code> (<code>string</code>): Defines the output filename of the SourceMap (will be inlined if no value is provided).</li>
<li><code>append</code> (<code>string</code>): Appends the given value to the original asset. Usually the <code>#sourceMappingURL</code> comment. <code>[url]</code> is replaced with a URL to the source map file. <code>false</code> disables the appending.</li>
<li><code>moduleFilenameTemplate</code> (<code>string</code>): See <a href="/configuration/output/#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>.</li>
<li><code>sourceURLTemplate</code>: Define the sourceURL default: <code>webpack-internal:///${module.identifier}</code></li>
<li><code>module</code> (<code>boolean</code>): Indicates whether loaders should generate source maps (defaults to <code>true</code>).</li>
<li><code>columns</code> (<code>boolean</code>): Indicates whether column mappings should be used (defaults to <code>true</code>).</li>
<li><code>protocol</code> (<code>string</code>): Allows user to override default protocol (<code>webpack-internal://</code>)</li>
</ul>
<blockquote class="tip"><div class="tip-content"> Setting <code>module</code> and/or <code>columns</code> to <code>false</code> will yield less accurate source maps but will also improve compilation performance significantly. </div></blockquote><blockquote class="tip"><div class="tip-content"> If you want to use a custom configuration for this plugin in <a href="/concepts/mode/#mode-development">development mode</a>, make sure to disable the default one. I.e. set <code>devtool: false</code>. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<p>The following examples demonstrate some common use cases for this plugin.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#basic-use-case" id="basic-use-case"></a>
<span class="text">Basic Use Case</span>
<a aria-label="Basic Use Case" class="icon-link" href="#basic-use-case"></a>
</h3>
<p>You can use the following code to replace the configuration option <code>devtool: eval-source-map</code> with an equivalent custom plugin configuration:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devtool<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exclude-vendor-maps" id="exclude-vendor-maps"></a>
<span class="text">Exclude Vendor Maps</span>
<a aria-label="Exclude Vendor Maps" class="icon-link" href="#exclude-vendor-maps"></a>
</h3>
<p>The following code would exclude source maps for any modules in the <code>vendor.js</code> bundle:</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token punctuation">:</span> <span class="token string">'[name].js.map'</span><span class="token punctuation">,</span>
  exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vendor.js'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#setting-sourceurl" id="setting-sourceurl"></a>
<span class="text">Setting sourceURL</span>
<a aria-label="Setting sourceURL" class="icon-link" href="#setting-sourceurl"></a>
</h3>
<p>Set a URL for source maps. Useful for avoiding cross-origin issues such as:</p>
<pre><code class="lang-bash">A cross-origin error was thrown. React doesn't have access to the actual error object <span class="token keyword">in</span> development. See https://fb.me/react-crossorigin-error <span class="token keyword">for</span> <span class="token function">more</span> information.
</code></pre>
<p>The option can be set to a function:</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  sourceURLTemplate<span class="token punctuation">:</span> module <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token template-string"><span class="token string">`/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>module<span class="token punctuation">.</span>identifier<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>Or a substitution string:</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>EvalSourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  sourceURLTemplate<span class="token punctuation">:</span> <span class="token string">'[all-loaders][resource]'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>ExtractTextWebpackPlugin</h1>
<div><p>Extract text from a bundle, or bundles, into a separate file.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">
npm <span class="token function">install</span> --save-dev extract-text-webpack-plugin
<span class="token comment"># 对于 webpack 2</span>
npm <span class="token function">install</span> --save-dev extract-text-webpack-plugin@2.1.2
<span class="token comment"># 对于 webpack 1</span>
npm <span class="token function">install</span> --save-dev extract-text-webpack-plugin@1.0.1
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<blockquote>
<p>:warning: Since webpack v4 the <code>extract-text-webpack-plugin</code> should not be used for css. Use <a href="/plugins/mini-css-extract-plugin/">mini-css-extract-plugin</a> instead.</p>
</blockquote>
<blockquote>
<p>:warning: 对于 webpack v1, 请看 <a href="https://github.com/webpack/extract-text-webpack-plugin/blob/webpack-1/README.md">分支为 webpack-1 的 README 文档</a>。</p>
</blockquote>
<pre><code class="lang-js"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"extract-text-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          fallback<span class="token punctuation">:</span> <span class="token string">"style-loader"</span><span class="token punctuation">,</span>
          use<span class="token punctuation">:</span> <span class="token string">"css-loader"</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">"styles.css"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p>它会将所有的入口 chunk(entry chunks)中引用的 <code>*.css</code>，移动到独立分离的 CSS 文件。因此，你的样式将不再内嵌到 JS bundle 中，而是会放到一个单独的 CSS 文件（即 <code>styles.css</code>）当中。 如果你的样式文件大小较大，这会做更快提前加载，因为 CSS bundle 会跟 JS bundle 并行加载。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">优点</div><div class="table-th">缺点</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        优点
    </div>
<div class="table-td-content">
        更少 style 标签 (旧版本的 IE 浏览器有限制)
    </div>
</div><div class="table-td">
<div class="table-td-title">
        缺点
    </div>
<div class="table-td-content">
        额外的 HTTP 请求
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        优点
    </div>
<div class="table-td-content">
        CSS SourceMap (使用 <code>devtool: "source-map"</code> 和 <code>extract-text-webpack-plugin?sourceMap</code> 配置)
    </div>
</div><div class="table-td">
<div class="table-td-title">
        缺点
    </div>
<div class="table-td-content">
        更长的编译时间
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        优点
    </div>
<div class="table-td-content">
        CSS 请求并行
    </div>
</div><div class="table-td">
<div class="table-td-title">
        缺点
    </div>
<div class="table-td-content">
        没有运行时(runtime)的公共路径修改
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        优点
    </div>
<div class="table-td-content">
        CSS 单独缓存
    </div>
</div><div class="table-td">
<div class="table-td-title">
        缺点
    </div>
<div class="table-td-content">
        没有热替换
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        优点
    </div>
<div class="table-td-content">
        更快的浏览器运行时(runtime) (更少代码和 DOM 操作)
    </div>
</div><div class="table-td">
<div class="table-td-title">
        缺点
    </div>
<div class="table-td-content">
        ...
    </div>
</div></div>
</div>
</div>
</div><h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span> filename <span class="token operator">|</span> object<span class="token punctuation">)</span>
</code></pre>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>id</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        此插件实例的唯一 ident。（仅限高级用途，默认情况下自动生成）
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>filename</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String|Function}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        生成文件的文件名。可能包含 <code>[name]</code>, <code>[id]</code> and <code>[contenthash]</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>allChunks</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        从所有额外的 chunk(additional chunk) 提取（默认情况下，它仅从初始chunk(initial chunk) 中提取）<br/>当使用 <code>CommonsChunkPlugin</code> 并且在公共 chunk 中有提取的 chunk（来自<code>ExtractTextPlugin.extract</code>）时，<code>allChunks</code> **必须设置为 <code>true</code>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>disable</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        禁用插件
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>ignoreOrder</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{Boolean}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        禁用顺序检查 (这对 CSS 模块很有用！)，默认 <code>false</code>
</div>
</div></div>
</div>
</div>
</div><ul>
<li><code>[name]</code> chunk 的名称</li>
<li><code>[id]</code> chunk 的数量</li>
<li><code>[contenthash]</code> 根据提取文件的内容生成的 hash</li>
<li><code>[&lt;hashType&gt;:contenthash:&lt;digestType&gt;:&lt;length&gt;]</code> optionally you can configure<ul>
<li>other <code>hashType</code>s, e.g. <code>sha1</code>, <code>md5</code>, <code>sha256</code>, <code>sha512</code></li>
<li>other <code>digestType</code>s, e.g. <code>hex</code>, <code>base26</code>, <code>base32</code>, <code>base36</code>, <code>base49</code>, <code>base52</code>, <code>base58</code>, <code>base62</code>, <code>base64</code></li>
<li>and <code>length</code>, the length of the hash in chars</li>
</ul>
</li>
</ul>
<blockquote>
<p>:警告: <code>ExtractTextPlugin</code> 对 <strong> 每个入口 chunk</strong> 都生成一个对应的文件，所以当你配置多个入口 chunk 的时候，你必须使用 <code>[name]</code>, <code>[id]</code> 或 <code>[contenthash]</code>，</p>
</blockquote>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#-extract" id="-extract"></a>
<span class="text"><code>#extract</code></span>
<a aria-label="&lt;code&gt;#extract&lt;/code&gt;" class="icon-link" href="#-extract"></a>
</h4>
<pre><code class="lang-js">ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span>options<span class="token punctuation">:</span> loader <span class="token operator">|</span> object<span class="token punctuation">)</span>
</code></pre>
<p>从一个已存在的 loader 中，创建一个提取(extract) loader。支持的 loader 类型 <code>{ loader: [name]-loader -&gt; {String}, options: {} -&gt; {Object} }</code>。</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">名称</div><div class="table-th">类型</div><div class="table-th">描述</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>options.use</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>/<code>{Array}</code>/<code>{Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        loader 被用于将资源转换成一个 CSS 导出模块 <em>(必填)</em>
</div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>options.fallback</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>/<code>{Array}</code>/<code>{Object}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        loader（例如 <code>'style-loader'</code>）应用于当 CSS 没有被提取(也就是一个额外的 chunk，当 <code>allChunks: false</code>)
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        名称
    </div>
<div class="table-td-content">
<strong><code>options.publicPath</code></strong>
</div>
</div><div class="table-td">
<div class="table-td-title">
        类型
    </div>
<div class="table-td-content">
<code>{String}</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        描述
    </div>
<div class="table-td-content">
        重写此 loader 的 <code>publicPath</code> 配置
    </div>
</div></div>
</div>
</div>
</div><h4 class="header">
<a aria-hidden="true" class="anchor" href="#多个实例" id="多个实例"></a>
<span class="text">多个实例</span>
<a aria-label="多个实例" class="icon-link" href="#多个实例"></a>
</h4>
<p>如果有多于一个 <code>ExtractTextPlugin</code> 示例的情形，请使用此方法每个实例上的 <code>extract</code> 方法。</p>
<pre><code class="lang-js"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 创建多个实例</span>
<span class="token keyword">const</span> extractCSS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'stylesheets/[name]-one.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> extractLESS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'stylesheets/[name]-two.css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> extractCSS<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.less$/i</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> extractLESS<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'less-loader'</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    extractCSS<span class="token punctuation">,</span>
    extractLESS
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#提取-sass-或-less" id="提取-sass-或-less"></a>
<span class="text">提取 Sass 或 LESS</span>
<a aria-label="提取 Sass 或 LESS" class="icon-link" href="#提取-sass-或-less"></a>
</h3>
<p>配置和上面是相同的，需要时可以将 <code>sass-loader</code> 切换为 <code>less-loader</code>。</p>
<pre><code class="lang-js"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          use<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'css-loader'</span><span class="token punctuation">,</span> <span class="token string">'sass-loader'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token string">'style.css'</span><span class="token punctuation">)</span>
    <span class="token comment">//如果想要传入选项，你可以这样做：</span>
    <span class="token comment">//new ExtractTextPlugin({</span>
    <span class="token comment">//  filename: 'style.css'</span>
    <span class="token comment">//})</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#url-resolving" id="url-resolving"></a>
<span class="text"><code>url()</code> Resolving</span>
<a aria-label="&lt;code&gt;url()&lt;/code&gt; Resolving" class="icon-link" href="#url-resolving"></a>
</h3>
<p>If you are finding that urls are not resolving properly when you run webpack. You can expand your loader functionality with options. The <code>url: false</code> property allows your paths resolved without any changes.</p>
<pre><code class="lang-js"><span class="token keyword">const</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'extract-text-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.scss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    <span class="token comment">// If you are having trouble with urls not resolving add this setting.</span>
                    <span class="token comment">// See https://github.com/webpack-contrib/css-loader#url</span>
                    url<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                    minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                loader<span class="token punctuation">:</span> <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
                options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                    sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#修改文件名" id="修改文件名"></a>
<span class="text">修改文件名</span>
<a aria-label="修改文件名" class="icon-link" href="#修改文件名"></a>
</h3>
<p><code>filename</code> 参数可以是 <code>Function</code>。它通过 <code>getPath</code> 来处理格式，如 <code>css/[name].css</code>，并返回真实的文件名，你可以用 <code>css</code> 替换 <code>css/js</code>，你会得到新的路径 <code>css/a.css</code>。</p>
<pre><code class="lang-js">entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token string">'js/a'</span><span class="token punctuation">:</span> <span class="token string">"./a"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">ExtractTextPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    filename<span class="token punctuation">:</span>  <span class="token punctuation">(</span>getPath<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">getPath</span><span class="token punctuation">(</span><span class="token string">'css/[name].css'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'css/js'</span><span class="token punctuation">,</span> <span class="token string">'css'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    allChunks<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>HashedModuleIdsPlugin</h1>
<div><p>该插件会根据模块的相对路径生成一个四位数的hash作为模块id, 建议用于生产环境。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 选项……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#参数" id="参数"></a>
<span class="text">参数</span>
<a aria-label="参数" class="icon-link" href="#参数"></a>
</h2>
<p>该插件支持以下参数：</p>
<ul>
<li><code>hashFunction</code>: 散列算法，默认为 'md4'。支持 Node.JS <a href="https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options"><code>crypto.createHash</code></a> 的所有功能。</li>
<li><code>hashDigest</code>: 在生成 hash 时使用的编码方式，默认为 'base64'。支持 Node.js <a href="https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding"><code>hash.digest</code></a> 的所有编码。</li>
<li><code>hashDigestLength</code>: 散列摘要的前缀长度，默认为 4。Note that some generated ids might be longer than specified here, to avoid module id collisions.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>下面是使用该插件的例子：</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HashedModuleIdsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  hashFunction<span class="token punctuation">:</span> <span class="token string">'sha256'</span><span class="token punctuation">,</span>
  hashDigest<span class="token punctuation">:</span> <span class="token string">'hex'</span><span class="token punctuation">,</span>
  hashDigestLength<span class="token punctuation">:</span> <span class="token number">20</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>HotModuleReplacementPlugin</h1>
<div><p>启用<a href="/concepts/hot-module-replacement">热替换模块(Hot Module Replacement)</a>，也被称为 HMR。</p>
<blockquote class="warning"><div class="tip-content"> <strong>永远不要</strong>在生产环境(production)下启用 HMR </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本用法-basic-usage-" id="基本用法-basic-usage-"></a>
<span class="text">基本用法(Basic Usage)</span>
<a aria-label="基本用法(Basic Usage)" class="icon-link" href="#基本用法-basic-usage-"></a>
</h2>
<p>启用 HMR 非常简单，在大多数情况下也不需要设置选项。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>HotModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项-options-" id="选项-options-"></a>
<span class="text">选项(Options)</span>
<a aria-label="选项(Options)" class="icon-link" href="#选项-options-"></a>
</h2>
<p>包含如下选项：</p>
<ul>
<li><code>multiStep</code> (boolean)：设置为 <code>true</code> 时，插件会分成两步构建文件。首先编译热加载 chunks，之后再编译剩余的通常的资源。</li>
<li><code>fullBuildTimeout</code> (number)：当 <code>multiStep</code> 启用时，表示两步构建之间的延时。</li>
<li><code>requestTimeout</code> (number)：下载 manifest 的延时（webpack 3.0.0 后的版本支持）。</li>
</ul>
<blockquote class="warning"><div class="tip-content"> 这些选项属于实验性内容，因此以后可能会被弃用。就如同上文所说的那样，这些选项通常情况下都是没有必要设置的，仅仅是设置一下 <code>new webpack.HotModuleReplacementPlugin()</code> 在大部分情况下就足够了。 </div></blockquote></div>
<br/><h1>HtmlWebpackPlugin</h1>
<div><p><a href="https://github.com/jantimon/html-webpack-plugin"><code>HtmlWebpackPlugin</code></a>简化了HTML文件的创建，以便为你的webpack包提供服务。这对于在文件名中包含每次会随着编译而发生变化哈希的 webpack bundle 尤其有用。 你可以让插件为你生成一个HTML文件，使用<a href="https://lodash.com/docs#template">lodash模板</a>提供你自己的模板，或使用你自己的<a href="/loaders">loader</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev html-webpack-plugin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本用法" id="基本用法"></a>
<span class="text">基本用法</span>
<a aria-label="基本用法" class="icon-link" href="#基本用法"></a>
</h2>
<p>该插件将为你生成一个 HTML5 文件，
其中包括使用 <code>script</code> 标签的 body 中的所有 webpack 包。
只需添加插件到你的 webpack 配置如下：</p>
<pre><code class="lang-javascript"><span class="token keyword">var</span> HtmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'html-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">'index.js'</span><span class="token punctuation">,</span>
  output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'./dist'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    filename<span class="token punctuation">:</span> <span class="token string">'index_bundle.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>这将会产生一个包含以下内容的文件 <code>dist/index.html</code>：</p>
<pre><code class="lang-html"><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>webpack App<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>index_bundle.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<p>如果你有多个 webpack 入口点，
他们都会在生成的HTML文件中的 <code>script</code> 标签内。</p>
<p>如果你有任何CSS assets 在webpack的输出中（例如，
利用 <a href="/plugins/mini-css-extract-plugin/">MiniCssExtractPlugin</a> 提取CSS），
那么这些将被包含在HTML head中的<code>&lt;link&gt;</code>标签内。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h2>
<p>获取所有的配置选项，请浏览<a href="https://github.com/jantimon/html-webpack-plugin#options">插件文档</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#第三方插件" id="第三方插件"></a>
<span class="text">第三方插件</span>
<a aria-label="第三方插件" class="icon-link" href="#第三方插件"></a>
</h2>
<p>这个插件支持第三方插件。详细列表参阅<a href="https://github.com/jantimon/html-webpack-plugin#plugins">文档</a>。</p>
</div>
<br/><h1>I18nWebpackPlugin</h1>
<div><p>i18n (localization) plugin for Webpack.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm i -D i18n-webpack-plugin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>此插件会创建包含译文的 bundle。所以你可以将翻译后的 bundle 提供给客户端。</p>
<p>参考 <a href="https://github.com/webpack/webpack/tree/master/examples/i18n">webpack/webpack/examples/i18n</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置" id="配置"></a>
<span class="text">配置</span>
<a aria-label="配置" class="icon-link" href="#配置"></a>
</h2>
<pre><code>plugins: <span class="token punctuation">[</span>
  <span class="token punctuation">..</span>.
  new I18nPlugin<span class="token punctuation">(</span>languageConfig, optionsObj<span class="token punctuation">)</span>
<span class="token punctuation">]</span>,
</code></pre><ul>
<li><code>optionsObj.functionName</code>：默认值为 <code>__</code>, 你可以更改为其他函数名。</li>
<li><code>optionsObj.failOnMissing</code>：默认值为 <code>false</code>，找不到映射文本(mapping text)时会给出一个警告信息，如果设置为 <code>true</code>，则会给出一个错误信息。</li>
<li><code>optionsObj.hideMessage</code>：默认值为 <code>false</code>，将会显示警告/错误信息。如果设置为 <code>true</code>，警告/错误信息将会被隐藏。</li>
<li><code>optionsObj.nested</code>: the default value is <code>false</code>. If set to <code>true</code>, the keys in <code>languageConfig</code> can be nested. This option is interpreted only if <code>languageConfig</code> isn't a function.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>IgnorePlugin</h1>
<div><p>IgnorePlugin 防止在 <code>import</code> 或 <code>require</code> 调用时，生成以下正则表达式匹配的模块：</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#using-regular-expressions" id="using-regular-expressions"></a>
<span class="text">Using regular expressions</span>
<a aria-label="Using regular expressions" class="icon-link" href="#using-regular-expressions"></a>
</h2>
<ul>
<li><code>resourceRegExp</code>：匹配(test)资源请求路径的正则表达式。</li>
<li><code>contextRegExp</code>：（可选）匹配(test)资源上下文（目录）的正则表达式。</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>resourceRegExp<span class="token punctuation">,</span> contextRegExp<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// old way, deprecated in webpack v5</span>
<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span>resourceRegExp<span class="token punctuation">,</span> <span class="token punctuation">[</span>contextRegExp<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#using-filter-functions" id="using-filter-functions"></a>
<span class="text">Using filter functions</span>
<a aria-label="Using filter functions" class="icon-link" href="#using-filter-functions"></a>
</h2>
<ul>
<li><code>checkContext(context)</code> A Filter function that receives context as the argument, must return boolean.</li>
<li><code>checkResource(resource)</code> A Filter function that receives resource as the argument, must return boolean.</li>
</ul>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  checkContext <span class="token punctuation">(</span>context<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something with context</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  checkResource <span class="token punctuation">(</span>resource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something with resource</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token operator">|</span><span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#忽略-moment-本地化内容的示例" id="忽略-moment-本地化内容的示例"></a>
<span class="text">忽略 moment 本地化内容的示例</span>
<a aria-label="忽略 moment 本地化内容的示例" class="icon-link" href="#忽略-moment-本地化内容的示例"></a>
</h2>
<p><a href="https://momentjs.com/">moment</a> 2.18 会将所有本地化内容和核心功能一起打包（见<a href="https://github.com/moment/moment/issues/2373">该 GitHub issue</a>）。</p>
<p>The <code>resourceRegExp</code> parameter passed to <code>IgnorePlugin</code> is not tested against the resolved file names or absolute module names being imported or required, but rather against the <em>string</em> passed to <code>require</code> or <code>import</code> <em>within the source code where the import is taking place</em>. For example, if you're trying to exclude <code>node_modules/moment/locale/*.js</code>, this won't work:</p>
<pre><code class="lang-diff"><span class="token deleted">-new webpack.IgnorePlugin(/moment\/locale\//);</span>
</code></pre>
<p>Rather, because <code>moment</code> imports with this code:</p>
<pre><code class="lang-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./locale/'</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>...your first regexp must match that <code>'./locale/'</code> string. The second <code>contextRegExp</code> parameter is then used to select specific directories from where the import took place. The following will cause those locale files to be ignored:</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>IgnorePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  resourceRegExp<span class="token punctuation">:</span> <span class="token regex">/^\.\/locale$/</span><span class="token punctuation">,</span>
  contextRegExp<span class="token punctuation">:</span> <span class="token regex">/moment$/</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>...which means "any require statement matching <code>'./locale'</code> from any directories ending with <code>'moment'</code> will be ignored.</p>
</div>
<br/><h1>BabelMinifyWebpackPlugin</h1>
<div><p>一个用于<a href="https://github.com/babel/minify">babel-minify</a>的 webpack 插件 - 基于 babel 的 minifier</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> babel-minify-webpack-plugin --save-dev
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> MinifyPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"babel-minify-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token comment">//...,</span>
  output<span class="token punctuation">:</span> <span class="token comment">//...,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MinifyPlugin</span><span class="token punctuation">(</span>minifyOpts<span class="token punctuation">,</span> pluginOpts<span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>###</p>
<p><code>minifyOpts</code> 被传递给 babel-preset-minify。 你可以在包目录中找到<a href="https://github.com/babel/minify/tree/master/packages/babel-preset-minify#options">所有可用的选项</a>。</p>
<p><code>Default: {}</code></p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#pluginopts" id="pluginopts"></a>
<span class="text">pluginOpts</span>
<a aria-label="pluginOpts" class="icon-link" href="#pluginopts"></a>
</h4>
<ul>
<li><code>test</code>: Test to match files against. Default: <code>/\.js($|\?)/i</code></li>
<li><code>include</code>: Files to <code>include</code>. Default: <code>undefined</code></li>
<li><code>exclude</code>: Files to <code>exclude</code>. Default: <code>undefined</code></li>
<li><code>comments</code>: 保留注释。默认：<code>/^\**!|@preserve|@license|@cc_on/</code>，falsy 值将移除所有注释。可以接受函数，带有属性匹配（正则）的对象和值。</li>
<li><code>sourceMap</code>: Configure a sourcemap style. 默认：<a href="https://webpack.js.org/configuration/devtool/">webpackConfig.devtool</a></li>
<li><code>parserOpts</code>: 配置具有特殊解析器选项的 babel。</li>
<li><code>babel</code>: 传入一个自定义的 <code>babel-core</code>。默认：<code>require("babel-core")</code></li>
<li><code>minifyPreset</code>: 传入一个自定义 <code>babel-minify</code> preset 代替原来的。默认：<code>require("babel-preset-minify")</code></li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#为什么" id="为什么"></a>
<span class="text">为什么</span>
<a aria-label="为什么" class="icon-link" href="#为什么"></a>
</h2>
<p>你也可以在webpack中使用<a href="https://github.com/babel/babel-loader">babel-loader</a>，引入 <code>minify</code> <a href="https://github.com/babel/minify#babel-preset">作为一个预设</a>并且应该运行的更快 - 因为 <code>babel-minify</code> 将运行在更小的文件。但是，这个插件为什么还存在呢？</p>
<ul>
<li>webpack loader 对单个文件进行操作，并且 minify preset 作为一个 webpack loader将会把每个文件视为在浏览器全局范围内直接执行（默认情况下），并且不会优化顶级作用域内的某些内容。要在文件的顶级作用域内进行优化，请在 minifyOptions 中设置 <code>mangle: { topLevel: true }</code>。</li>
<li>当你排除 <code>node_modules</code> 不通过 babel-loader 运行时，babel-minify 优化不会应用于被排除的文件，因为它们不会通过 minifier。</li>
<li>当你使用带有 webpack 的 babel-loader 时，由 webpack 为模块系统生成的代码不会通过 loader，并且不会通过 babel-minify 进行优化。</li>
<li>一个 webpack 插件可以在整个 chunk/bundle 输出上运行，并且可以优化整个bundle，你可以看到一些细微的输出差异。但是，由于文件大小通常非常大，所以会慢很多。所以这里有<a href="https://github.com/webpack-contrib/babel-minify-webpack-plugin/issues/8">一个想法</a> - 我们可以将一些优化作为 loader 的一部分，并在插件中进行一些优化。</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#维护人员" id="维护人员"></a>
<span class="text">维护人员</span>
<a aria-label="维护人员" class="icon-link" href="#维护人员"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/294474?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/boopathi"></a></p><a href="https://github.com/boopathi">
<p>Boopathi Rajaa</p>
</a><p><a href="https://github.com/boopathi"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/166921?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/bebraw"></a></p><a href="https://github.com/bebraw">
<p>Juho Vepsäläinen</p>
</a><p><a href="https://github.com/bebraw"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/8420490?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/d3viant0ne"></a></p><a href="https://github.com/d3viant0ne">
<p>Joshua Wiens</p>
</a><p><a href="https://github.com/d3viant0ne"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/533616?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/SpaceK33z"></a></p><a href="https://github.com/SpaceK33z">
<p>Kees Kluskens</p>
</a><p><a href="https://github.com/SpaceK33z"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/3408176?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/TheLarkInn"></a></p><a href="https://github.com/TheLarkInn">
<p>Sean Larkin</p>
</a><p><a href="https://github.com/TheLarkInn"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>LimitChunkCountPlugin</h1>
<div><p>当你在编写代码时，可能已经添加了许多代码分离点(code split point)来实现按需加载(load stuff on demand)。在编译完之后，你可能会注意到有一些很小的 chunk - 这产生了大量 HTTP 请求开销。<code>LimitChunkCountPlugin</code> 插件可以通过合并的方式，后处理你的 chunk，以减少请求数。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>LimitChunkCountPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 选项……</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>可以支持以下选项：</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#maxchunks" id="maxchunks"></a>
<span class="text"><code>maxChunks</code></span>
<a aria-label="&lt;code&gt;maxChunks&lt;/code&gt;" class="icon-link" href="#maxchunks"></a>
</h3>
<p><code>number</code></p>
<p>使用大于或等于 <code>1</code> 的值，来限制 chunk 的最大数量。使用 <code>1</code> 防止添加任何其他额外的 chunk，这是因为 entry/main chunk 也会包含在计数之中。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>LimitChunkCountPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      maxChunks<span class="token punctuation">:</span> <span class="token number">5</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minchunksize" id="minchunksize"></a>
<span class="text"><code>minChunkSize</code></span>
<a aria-label="&lt;code&gt;minChunkSize&lt;/code&gt;" class="icon-link" href="#minchunksize"></a>
</h3>
<p><code>number</code></p>
<p>设置 chunk 的最小大小。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>LimitChunkCountPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      minChunkSize<span class="token punctuation">:</span> <span class="token number">1000</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#命令行接口-cli-用法" id="命令行接口-cli-用法"></a>
<span class="text">命令行接口(CLI)用法</span>
<a aria-label="命令行接口(CLI)用法" class="icon-link" href="#命令行接口-cli-用法"></a>
</h2>
<p>此插件和其选项还可以通过 <a href="/api/cli/">命令行接口(CLI)</a> 执行：</p>
<pre><code class="lang-bash">webpack --optimize-max-chunks 15
</code></pre>
<p>或</p>
<pre><code class="lang-bash">webpack --optimize-min-chunk-size 10000
</code></pre>
</div>
<br/><h1>LoaderOptionsPlugin</h1>
<div><p><code>loader-options-plugin</code> 和其他插件不同，它用于将 webpack 1 迁移至 webpack 2。在 webpack 2 中，对 <code>webpack.config.js</code> 的结构要求变得更加严格；不再开放扩展给其他的 loader/插件。webpack 2 推荐的使用方式是直接传递 <code>options</code> 给 loader/插件（换句话说，<code>配置选项</code>将<strong>不是</strong>全局/共享的）。</p>
<p>不过，在某个 loader 升级为依靠直接传递给它的配置选项运行之前，可以使用 <code>loader-options-plugin</code> 来抹平差异。你可以通过这个插件配置全局/共享的 loader 配置，使所有的 loader 都能收到这些配置。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>LoaderOptionsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// Options...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> 将来这个插件可能会被移除，因为它只是用于迁移。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>此插件支持以下选项：</p>
<ul>
<li><code>options.debug</code> (<code>boolean</code>)：loader 是否为 <code>debug</code> 模式。<code>debug</code> 在 webpack 3 中将被移除。</li>
<li><code>options.minimize</code> (<code>boolean</code>)：loader 是否要切换到优化模式。</li>
<li><code>options.options</code> (<code>object</code>)：一个配置对象，用来配置旧的 loader - 将使用和 <code>webpack.config.js</code> 相同的结构。</li>
<li><code>options.options.context</code> (<code>string</code>)：配置 loader 时使用的上下文。</li>
<li>任何其他选项和在 <code>webpack.config.js</code> 中一样……</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>关于此插件可能的用法，这里有个示例：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>LoaderOptionsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minimize<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  debug<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    context<span class="token punctuation">:</span> __dirname
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>MinChunkSizePlugin</h1>
<div><p>通过合并小于 <code>minChunkSize</code> 大小的 chunk，将 chunk 体积保持在指定大小限制以上。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>MinChunkSizePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  minChunkSize<span class="token punctuation">:</span> <span class="token number">10000</span> <span class="token comment">// Minimum number of characters</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>MiniCssExtractPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![coverage][cover]][cover-url]
[![chat][chat]][chat-url]</p>
<p>This plugin extracts CSS into separate files. It creates a CSS file per JS file which contains CSS. It supports On-Demand-Loading of CSS and SourceMaps.</p>
<p>It builds on top of a new webpack v4 feature (module types) and requires webpack 4 to work.</p>
<p>Compared to the extract-text-webpack-plugin:</p>
<ul>
<li>Async loading</li>
<li>No duplicate compilation (performance)</li>
<li>Easier to use</li>
<li>Specific to CSS</li>
</ul>
<p>TODO:</p>
<ul>
<li>HMR support</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#install" id="install"></a>
<span class="text">Install</span>
<a aria-label="Install" class="icon-link" href="#install"></a>
</h2>
<pre><code class="lang-bash">npm <span class="token function">install</span> --save-dev mini-css-extract-plugin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h2>
<p>##</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#minimal-example" id="minimal-example"></a>
<span class="text">Minimal example</span>
<a aria-label="Minimal example" class="icon-link" href="#minimal-example"></a>
</h4>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
      <span class="token comment">// both options are optional</span>
      filename<span class="token punctuation">:</span> <span class="token string">"[name].css"</span><span class="token punctuation">,</span>
      chunkFilename<span class="token punctuation">:</span> <span class="token string">"[id].css"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            loader<span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
            options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
              <span class="token comment">// you can specify a publicPath here</span>
              <span class="token comment">// by default it use publicPath in webpackOptions.output</span>
              publicPath<span class="token punctuation">:</span> <span class="token string">'../'</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string">"css-loader"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#advanced-configuration-example" id="advanced-configuration-example"></a>
<span class="text">Advanced configuration example</span>
<a aria-label="Advanced configuration example" class="icon-link" href="#advanced-configuration-example"></a>
</h4>
<p>This plugin should be used only on <code>production</code> builds without <code>style-loader</code> in the loaders chain, especially if you want to have HMR in <code>development</code>.</p>
<p>Here is an example to have both HMR in <code>development</code> and your styles extracted in a file for <code>production</code> builds.</p>
<p>(Loaders options left out for clarity, adapt accordingly to your needs.)</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> devMode <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>NODE_ENV <span class="token operator">!==</span> <span class="token string">'production'</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Options similar to the same options in webpackOptions.output</span>
      <span class="token comment">// both options are optional</span>
      filename<span class="token punctuation">:</span> devMode <span class="token operator">?</span> <span class="token string">'[name].css'</span> <span class="token punctuation">:</span> <span class="token string">'[name].[hash].css'</span><span class="token punctuation">,</span>
      chunkFilename<span class="token punctuation">:</span> devMode <span class="token operator">?</span> <span class="token string">'[id].css'</span> <span class="token punctuation">:</span> <span class="token string">'[id].[hash].css'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(sa|sc|c)ss$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          devMode <span class="token operator">?</span> <span class="token string">'style-loader'</span> <span class="token punctuation">:</span> MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">'css-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'postcss-loader'</span><span class="token punctuation">,</span>
          <span class="token string">'sass-loader'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minimizing-for-production" id="minimizing-for-production"></a>
<span class="text">Minimizing For Production</span>
<a aria-label="Minimizing For Production" class="icon-link" href="#minimizing-for-production"></a>
</h3>
<p>While webpack 5 is likely to come with a CSS minimizer built-in, with webpack 4 you need to bring your own. To minify the output, use a plugin like <a href="https://github.com/NMFR/optimize-css-assets-webpack-plugin">optimize-css-assets-webpack-plugin</a>. Setting <code>optimization.minimizer</code> overrides the defaults provided by webpack, so make sure to also specify a JS minimizer:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> TerserJSPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"terser-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> OptimizeCSSAssetsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"optimize-css-assets-webpack-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserJSPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">OptimizeCSSAssetsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">"[name].css"</span><span class="token punctuation">,</span>
      chunkFilename<span class="token punctuation">:</span> <span class="token string">"[id].css"</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">"css-loader"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#features" id="features"></a>
<span class="text">Features</span>
<a aria-label="Features" class="icon-link" href="#features"></a>
</h3>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#using-preloaded-or-inlined-css" id="using-preloaded-or-inlined-css"></a>
<span class="text">Using preloaded or inlined CSS</span>
<a aria-label="Using preloaded or inlined CSS" class="icon-link" href="#using-preloaded-or-inlined-css"></a>
</h4>
<p>The runtime code detects already added CSS via <code>&lt;link&gt;</code> or <code>&lt;style&gt;</code> tag.
This can be useful when injecting CSS on server-side for Server-Side-Rendering.
The <code>href</code> of the <code>&lt;link&gt;</code> tag has to match the URL that will be used for loading the CSS chunk.
The <code>data-href</code> attribute can be used for <code>&lt;link&gt;</code> and <code>&lt;style&gt;</code> too.
When inlining CSS <code>data-href</code> must be used.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#extracting-all-css-in-a-single-file" id="extracting-all-css-in-a-single-file"></a>
<span class="text">Extracting all CSS in a single file</span>
<a aria-label="Extracting all CSS in a single file" class="icon-link" href="#extracting-all-css-in-a-single-file"></a>
</h4>
<p>Similar to what <a href="/plugins/extract-text-webpack-plugin/">extract-text-webpack-plugin</a> does, the CSS
can be extracted in one CSS file using <code>optimization.splitChunks.cacheGroups</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        styles<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'styles'</span><span class="token punctuation">,</span>
          test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">"[name].css"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">"css-loader"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#extracting-css-based-on-entry" id="extracting-css-based-on-entry"></a>
<span class="text">Extracting CSS based on entry</span>
<a aria-label="Extracting CSS based on entry" class="icon-link" href="#extracting-css-based-on-entry"></a>
</h4>
<p>You may also extract the CSS based on the webpack entry name. This is especially useful if you import routes dynamically
but want to keep your CSS bundled according to entry. This also prevents the CSS duplication issue one had with the
ExtractTextPlugin.</p>
<pre><code class="lang-javascript"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MiniCssExtractPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"mini-css-extract-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">recursiveIssuer</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span>issuer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">recursiveIssuer</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>issuer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>m<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> m<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    foo<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/foo'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    bar<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'src/bar'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        fooStyles<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'foo'</span><span class="token punctuation">,</span>
          test<span class="token punctuation">:</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span>c<span class="token punctuation">,</span>entry <span class="token operator">=</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> m<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'CssModule'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">recursiveIssuer</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">===</span> entry<span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        barStyles<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span>
          test<span class="token punctuation">:</span> <span class="token punctuation">(</span>m<span class="token punctuation">,</span>c<span class="token punctuation">,</span>entry <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> m<span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'CssModule'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">recursiveIssuer</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span> <span class="token operator">===</span> entry<span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">MiniCssExtractPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      filename<span class="token punctuation">:</span> <span class="token string">"[name].css"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.css$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
          MiniCssExtractPlugin<span class="token punctuation">.</span>loader<span class="token punctuation">,</span>
          <span class="token string">"css-loader"</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#long-term-caching" id="long-term-caching"></a>
<span class="text">Long Term Caching</span>
<a aria-label="Long Term Caching" class="icon-link" href="#long-term-caching"></a>
</h4>
<p>For long term caching use <code>filename: "[contenthash].css"</code>. Optionally add <code>[name]</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#media-query-plugin" id="media-query-plugin"></a>
<span class="text">Media Query Plugin</span>
<a aria-label="Media Query Plugin" class="icon-link" href="#media-query-plugin"></a>
</h3>
<p>If you'd like to extract the media queries from the extracted CSS (so mobile users don't need to load desktop or tablet specific CSS anymore) you should use one of the following plugins:</p>
<ul>
<li><a href="https://github.com/SassNinja/media-query-plugin">Media Query Plugin</a></li>
<li><a href="https://github.com/mike-diamond/media-query-splitting-plugin">Media Query Splitting Plugin</a></li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><a href="https://github.com/sokra"></a></p><a href="https://github.com/sokra">
<p><img height="150" src="https://github.com/sokra.png?size=150" width="150"/></p>
<p><br/></p>
<pre><code>      Tobias Koppers
</code></pre></a><p><a href="https://github.com/sokra"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/mini-css-extract-plugin/master/LICENSE">MIT</a></p>
</div>
<br/><h1>ModuleConcatenationPlugin</h1>
<div><p>过去 webpack 打包时的一个取舍是将 bundle 中各个模块单独打包成闭包。这些打包函数使你的 JavaScript 在浏览器中处理的更慢。相比之下，一些工具像 Closure Compiler 和 RollupJS 可以提升(hoist)或者预编译所有模块到一个闭包中，提升你的代码在浏览器中的执行速度。</p>
<p>这个插件会在 webpack 中实现以上的预编译功能。By default this plugin is already enabled in <a href="/concepts/mode/#mode-production">production <code>mode</code></a> and disabled otherwise. If you need it in other modes, you can add it manually:</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>optimize<span class="token punctuation">.</span>ModuleConcatenationPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<blockquote>
<p>这种连结行为被称为“作用域提升(scope hoisting)”。</p>
<p>由于实现 ECMAScript 模块语法，作用域提升(scope hoisting)这个特定于此语法的功能才成为可能。<code>webpack</code> 可能会根据你正在使用的模块类型和<a href="https://medium.com/webpack/webpack-freelancing-log-book-week-5-7-4764be3266f5">其他的情况</a>，回退到普通打包。</p>
</blockquote>
<blockquote class="warning"><div class="tip-content"> 记住，此插件仅适用于由 webpack 直接处理的 <a href="/api/module-methods/#es6-recommended-">ES6 模块</a>。在使用转译器(transpiler)时，你需要禁用对模块的处理（例如 Babel 中的 <a href="https://babel.docschina.org/docs/en/babel-preset-es2015/#optionsmodules"><code>modules</code></a> 选项）。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#绑定失败的优化-optimization-bailouts-" id="绑定失败的优化-optimization-bailouts-"></a>
<span class="text">绑定失败的优化[Optimization Bailouts]</span>
<a aria-label="绑定失败的优化[Optimization Bailouts]" class="icon-link" href="#绑定失败的优化-optimization-bailouts-"></a>
</h2>
<p>像文章中解释的，webpack 试图达到分批的作用域提升(scope hoisting)。它会将一些模块绑定到一个作用域内，但并不是任何情况下都会这么做。如果 webpack 不能绑定模块，将会有两个选择 Prevent 和 Root，Prevent 意思是模块必须在自己的作用域内。 Root 意味着将创建一个新的模块组。以下条件决定了输出结果：</p>
<div class="table">
<div class="table-wrap">
<div class="table-header">
<div class="table-tr"><div class="table-th">Condition</div><div class="table-th">Outcome</div></div>
</div>
<div class="table-body">
<div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Non ES6 Module
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Prevent
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Imported By Non Import
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Root
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Imported From Other Chunk
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Root
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Imported By Multiple Other Module Groups
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Root
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Imported With <code>import()</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Root
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Affected By <code>ProvidePlugin</code> Or Using <code>module</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Prevent
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        HMR Accepted
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Root
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        Using <code>eval()</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Prevent
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
        In Multiple Chunks
    </div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Prevent
    </div>
</div></div><div class="table-tr"><div class="table-td">
<div class="table-td-title">
        Condition
    </div>
<div class="table-td-content">
<code>export * from "cjs-module"</code>
</div>
</div><div class="table-td">
<div class="table-td-title">
        Outcome
    </div>
<div class="table-td-content">
        Prevent
    </div>
</div></div>
</div>
</div>
</div><h3 class="header">
<a aria-hidden="true" class="anchor" href="#模块分组算法-module-grouping-algorithm-" id="模块分组算法-module-grouping-algorithm-"></a>
<span class="text">模块分组算法[Module Grouping Algorithm]</span>
<a aria-label="模块分组算法[Module Grouping Algorithm]" class="icon-link" href="#模块分组算法-module-grouping-algorithm-"></a>
</h3>
<p>以下 JavaScript 伪代码解释了算法：</p>
<pre><code class="lang-js">modules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>module <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> group <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModuleGroup</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    root<span class="token punctuation">:</span> module
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  module<span class="token punctuation">.</span>dependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>dependency <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">tryToAdd</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> dependency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">.</span>modules<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    orderedModules <span class="token operator">=</span> <span class="token function">topologicalSort</span><span class="token punctuation">(</span>group<span class="token punctuation">.</span>modules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    concatenatedModule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcatenatedModule</span><span class="token punctuation">(</span>orderedModules<span class="token punctuation">)</span><span class="token punctuation">;</span>
    chunk<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>concatenatedModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    orderedModules<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>groupModule <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
      chunk<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>groupModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">tryToAdd</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> module<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>group<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasPreconditions</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> nextGroup <span class="token operator">=</span> group<span class="token punctuation">;</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> module<span class="token punctuation">.</span>dependents<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span>check<span class="token punctuation">,</span> dependent<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> check <span class="token operator">&amp;&amp;</span> <span class="token function">tryToAdd</span><span class="token punctuation">(</span>nextGroup<span class="token punctuation">,</span> dependent<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  module<span class="token punctuation">.</span>dependencies<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>dependency <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">tryToAdd</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> dependency<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  group<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>nextGroup<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#优化绑定失败的调试-debugging-optimization-bailouts-" id="优化绑定失败的调试-debugging-optimization-bailouts-"></a>
<span class="text">优化绑定失败的调试[Debugging Optimization Bailouts]</span>
<a aria-label="优化绑定失败的调试[Debugging Optimization Bailouts]" class="icon-link" href="#优化绑定失败的调试-debugging-optimization-bailouts-"></a>
</h3>
<p>当我们使用 webpack CLI 时，加上参数 <code>--display-optimization-bailout</code> 将显示绑定失败的原因。在 webpack 配置里，只需将以下内容添加到 stats 对象中：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  stats<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// Examine all modules</span>
    maxModules<span class="token punctuation">:</span> <span class="token number">Infinity</span><span class="token punctuation">,</span>
    <span class="token comment">// Display bailout reasons</span>
    optimizationBailout<span class="token punctuation">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>NormalModuleReplacementPlugin</h1>
<div><p><code>NormalModuleReplacementPlugin</code> 允许你用 <code>newResource</code> 替换与 <code>resourceRegExp</code> 匹配的资源。如果 <code>newResource</code> 是相对路径，它会相对于先前的资源被解析。如果 <code>newResource</code> 是函数，它将会覆盖之前被提供资源的请求。</p>
<p>这对于允许在构建中的不同行为是有用的。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span>
  resourceRegExp<span class="token punctuation">,</span>
  newResource
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#基本示例" id="基本示例"></a>
<span class="text">基本示例</span>
<a aria-label="基本示例" class="icon-link" href="#基本示例"></a>
</h2>
<p>在构建<a href="/guides/production">开发环境</a>时替换特定的模块。</p>
<p>假设你有一个配置文件 <code>some/path/config.development.module.js</code> 并且在生产环境有一个特殊的版本 <code>some/path/config.production.module.js</code></p>
<p>只需在生产构建时添加以下插件：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span>
  <span class="token regex">/some\/path\/config\.development\.js/</span><span class="token punctuation">,</span>
  <span class="token string">'./config.production.js'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#高级示例" id="高级示例"></a>
<span class="text">高级示例</span>
<a aria-label="高级示例" class="icon-link" href="#高级示例"></a>
</h2>
<p>根据<a href="/configuration/configuration-types">指定环境</a>的条件构建。</p>
<p>假设你想要一个为了不同构建目标的特定值的配置。</p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> appTarget <span class="token operator">=</span> env<span class="token punctuation">.</span>APP_TARGET <span class="token operator">||</span> <span class="token string">'VERSION_A'</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>NormalModuleReplacementPlugin</span><span class="token punctuation">(</span><span class="token regex">/(.*)-APP_TARGET(\.*)/</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resource<span class="token punctuation">.</span>request <span class="token operator">=</span> resource<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/-APP_TARGET/</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>appTarget<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>创建两个配置文件：</p>
<p><strong>app/config-VERSION_A.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title <span class="token punctuation">:</span> <span class="token string">'I am version A'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>app/config-VERSION_B.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  title <span class="token punctuation">:</span> <span class="token string">'I am version B'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>然后使用在正则中查找的关键字来引入配置：</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> config <span class="token keyword">from</span> <span class="token string">'app/config-APP_TARGET'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>根据你的构建目标，现在你引入了正确的配置。</p>
<pre><code class="lang-shell">webpack --env.APP_TARGET VERSION_A
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'I am version A'</span>

webpack --env.APP_TARGET VERSION_B
<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'I am version B'</span>
</code></pre>
</div>
<br/><h1>NpmInstallWebpackPlugin</h1>
<div><p>Speed up development by <b>automatically installing &amp; saving dependencies</b> with Webpack.</p>
<p>It is inefficient to <kbd>Ctrl-C</kbd> your
build script &amp; server just to install
a dependency you didn't know you needed until now.</p>
<p>Instead, use <code>require</code> or <code>import</code> how you normally would and <code>npm install</code>
will happen <strong>automatically to install &amp; save missing dependencies</strong> while you work!</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#安装" id="安装"></a>
<span class="text">安装</span>
<a aria-label="安装" class="icon-link" href="#安装"></a>
</h2>
<pre><code class="lang-bash">$ npm <span class="token function">install</span> --save-dev npm-install-webpack-plugin
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>在 <code>webpack.config.js</code> 中：</p>
<pre><code class="lang-js">plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">NpmInstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre>
<p><strong>相当于</strong>：</p>
<pre><code class="lang-js">plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">NpmInstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// 使用 --save 或者 --save-dev</span>
    dev<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// 安装缺少的 peerDependencies</span>
    peerDependencies<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// 减少控制台日志记录的数量</span>
    quiet<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token comment">// npm command used inside company, yarn is not supported yet</span>
    npm<span class="token punctuation">:</span> <span class="token string">'tnpm'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre>
<p>可以提供一个 <code>Function</code> 来动态设置 <code>dev</code>：</p>
<pre><code class="lang-js">plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">NpmInstallPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    dev<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token string">"babel-preset-react-hmre"</span><span class="token punctuation">,</span>
        <span class="token string">"webpack-dev-middleware"</span><span class="token punctuation">,</span>
        <span class="token string">"webpack-hot-middleware"</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>module<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#demo" id="demo"></a>
<span class="text">Demo</span>
<a aria-label="Demo" class="icon-link" href="#demo"></a>
</h2>
<p><img alt="npm-install-webpack-plugin demo" src="https://cloud.githubusercontent.com/assets/15182/12540538/6a4e8f1a-c2d0-11e5-97ee-4ddaf6892645.gif"/></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#features" id="features"></a>
<span class="text">Features</span>
<a aria-label="Features" class="icon-link" href="#features"></a>
</h2>
<ul>
<li>[x] Works with both Webpack <code>^v1.12.0</code> and <code>^2.1.0-beta.0</code>.</li>
<li>[x] Auto-installs <code>.babelrc</code> plugins &amp; presets.</li>
<li>[x] Supports both ES5 &amp; ES6 Modules.
(e.g. <code>require</code>, <code>import</code>)</li>
<li>[x] Supports Namespaced packages.
(e.g. <code>@cycle/dom</code>)</li>
<li>[x] Supports Dot-delimited packages.
(e.g. <code>lodash.capitalize</code>)</li>
<li>[x] Supports CSS imports.
(e.g. <code>@import "~bootstrap"</code>)</li>
<li>[x] Supports Webpack loaders.
(e.g. <code>babel-loader</code>, <code>file-loader</code>, etc.)</li>
<li>[x] Supports inline Webpack loaders.
(e.g. <code>require("bundle?lazy!./App"</code>)</li>
<li>[x] Auto-installs missing <code>peerDependencies</code>.
(e.g. <code>@cycle/core</code> will automatically install <code>rx@*</code>)</li>
<li>[x] Supports Webpack's <code>resolve.alias</code> &amp; <code>resolve.root</code> configuration.
(e.g. <code>require("react")</code> can alias to <code>react-lite</code>)</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#maintainers" id="maintainers"></a>
<span class="text">Maintainers</span>
<a aria-label="Maintainers" class="icon-link" href="#maintainers"></a>
</h2>
<p></p><p></p><p></p><p></p><p></p><table><tbody><tr><td align="center"><p><img height="150" src="https://avatars2.githubusercontent.com/u/15182?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/ericclemmons"></a></p><a href="https://github.com/ericclemmons">
<p>Eric Clemmons</p>
</a><p><a href="https://github.com/ericclemmons"></a></p>
<p></p></td>
<td align="center"><p><img height="150" src="https://avatars3.githubusercontent.com/u/226692?v=3&amp;s=150" width="150"/></p>
<p><br/></p>
<p><a href="https://github.com/insin"></a></p><a href="https://github.com/insin">
<p>Jonny Buchanan</p>
</a><p><a href="https://github.com/insin"></a></p>
<p></p></td>
</tr>
</tbody><tbody></tbody></table><p></p>
</div>
<br/><h1>PrefetchPlugin</h1>
<div><p>预取出普通的模块请求(module request)，可以让这些模块在他们被 <code>import</code> 或者是 <code>require</code> 之前就解析并且编译。使用这个预取插件可以提升性能。可以多试试在编译前记录时间(profile)来决定最佳的预取的节点。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>PrefetchPlugin</span><span class="token punctuation">(</span><span class="token punctuation">[</span>context<span class="token punctuation">]</span><span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<ul>
<li><code>context</code>：文件夹的绝对路径</li>
<li><code>request</code>：普通模块的 request 字符串</li>
</ul>
</div>
<br/><h1>ProfilingPlugin</h1>
<div><p>Generate Chrome profile file which includes timings of plugins execution. Outputs <code>events.json</code> file by default. It is possible to provide custom file path using <code>outputPath</code> option.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<ul>
<li><code>outputPath</code>: A relative path to a custom output file (json)</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage-default" id="usage-default"></a>
<span class="text">Usage: default</span>
<a aria-label="Usage: default" class="icon-link" href="#usage-default"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>ProfilingPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage-custom-outputpath" id="usage-custom-outputpath"></a>
<span class="text">Usage: custom <code>outputPath</code></span>
<a aria-label="Usage: custom &lt;code&gt;outputPath&lt;/code&gt;" class="icon-link" href="#usage-custom-outputpath"></a>
</h2>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>debug<span class="token punctuation">.</span>ProfilingPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  outputPath<span class="token punctuation">:</span> <span class="token string">'profiling/profileEvents.json'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>In order to view the profile file:</p>
<ol start="undefined">
<li>Run webpack with <code>ProfilingPlugin</code>.</li>
<li>Go to Chrome, open DevTools, and go to the <code>Performance</code> tab (formerly <code>Timeline</code>).</li>
<li>Drag and drop generated file (<code>events.json</code> by default) into the profiler.</li>
</ol>
<p>It will then display timeline stats and calls per plugin!</p>
</div>
<br/><h1>ProgressPlugin</h1>
<div><p>The <code>ProgressPlugin</code> provides a way to customize how progress is reported during a compilation.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#usage" id="usage"></a>
<span class="text">Usage</span>
<a aria-label="Usage" class="icon-link" href="#usage"></a>
</h2>
<p>Create an instance of <code>ProgressPlugin</code> with a handler function which will be called when hooks report progress:</p>
<pre><code class="lang-js"><span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// e.g. Output each progress message directly to the console:</span>
  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>percentage<span class="token punctuation">,</span> message<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProgressPlugin</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<ul>
<li><code>handler</code> is a function which takes these arguments:</li>
<li><code>percentage</code>: a number between 0 and 1 indicating the completion percentage of the compilation.</li>
<li><code>message</code>: a short description of the currently-executing hook.</li>
<li><code>...args</code>: zero or more additional strings describing the current progress.</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#supported-hooks" id="supported-hooks"></a>
<span class="text">Supported Hooks</span>
<a aria-label="Supported Hooks" class="icon-link" href="#supported-hooks"></a>
</h2>
<p>The following hooks report progress information to <code>ProgressPlugin</code>.</p>
<blockquote class="tip"><div class="tip-content"> <em>Hooks marked with * allow plugins to report progress information using <code>reportProgress</code>. For more, see <a href="/api/plugins/#reporting-progress">Plugin API: Reporting Progress</a></em> </div></blockquote><p><strong>Compiler</strong></p>
<ul>
<li>compilation</li>
<li>emit*</li>
<li>afterEmit*</li>
<li>done</li>
</ul>
<p><strong>Compilation</strong></p>
<ul>
<li>buildModule</li>
<li>failedModule</li>
<li>succeedModule</li>
<li>finishModules*</li>
<li>seal*</li>
<li>optimizeDependenciesBasic*</li>
<li>optimizeDependencies*</li>
<li>optimizeDependenciesAdvanced*</li>
<li>afterOptimizeDependencies*</li>
<li>optimize*</li>
<li>optimizeModulesBasic*</li>
<li>optimizeModules*</li>
<li>optimizeModulesAdvanced*</li>
<li>afterOptimizeModules*</li>
<li>optimizeChunksBasic*</li>
<li>optimizeChunks*</li>
<li>optimizeChunksAdvanced*</li>
<li>afterOptimizeChunks*</li>
<li>optimizeTree*</li>
<li>afterOptimizeTree*</li>
<li>optimizeChunkModulesBasic*</li>
<li>optimizeChunkModules*</li>
<li>optimizeChunkModulesAdvanced*</li>
<li>afterOptimizeChunkModules*</li>
<li>reviveModules*</li>
<li>optimizeModuleOrder*</li>
<li>advancedOptimizeModuleOrder*</li>
<li>beforeModuleIds*</li>
<li>moduleIds*</li>
<li>optimizeModuleIds*</li>
<li>afterOptimizeModuleIds*</li>
<li>reviveChunks*</li>
<li>optimizeChunkOrder*</li>
<li>beforeChunkIds*</li>
<li>optimizeChunkIds*</li>
<li>afterOptimizeChunkIds*</li>
<li>recordModules*</li>
<li>recordChunks*</li>
<li>beforeHash*</li>
<li>afterHash*</li>
<li>recordHash*</li>
<li>beforeModuleAssets*</li>
<li>beforeChunkAssets*</li>
<li>additionalChunkAssets*</li>
<li>record*</li>
<li>additionalAssets*</li>
<li>optimizeChunkAssets*</li>
<li>afterOptimizeChunkAssets*</li>
<li>optimizeAssets*</li>
<li>afterOptimizeAssets*</li>
<li>afterSeal*</li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#source" id="source"></a>
<span class="text">Source</span>
<a aria-label="Source" class="icon-link" href="#source"></a>
</h2>
<ul>
<li><a href="https://github.com/webpack/webpack/blob/master/lib/ProgressPlugin.js"><code>ProgressPlugin</code> source</a></li>
</ul>
</div>
<br/><h1>ProvidePlugin</h1>
<div><p>自动加载模块，而不必到处 <code>import</code> 或 <code>require</code> 。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token punctuation">:</span> <span class="token string">'module1'</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>or</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  identifier<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'module1'</span><span class="token punctuation">,</span> <span class="token string">'property1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>任何时候，当 <code>identifier</code> 被当作未赋值的变量时，<code>module</code> 就会自动被加载，并且 <code>identifier</code> 会被这个 <code>module</code> 导出的内容所赋值。（或者被模块的 <code>property</code> 导出的内容所赋值，以支持命名导出(named export)）。</p>
<blockquote class="warning"><div class="tip-content"> 对于 ES2015 模块的 default export，你必须指定模块的 default 属性。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-jquery" id="使用-jquery"></a>
<span class="text">使用：jQuery</span>
<a aria-label="使用：jQuery" class="icon-link" href="#使用-jquery"></a>
</h2>
<p>要自动加载 <code>jquery</code>，我们可以将两个变量都指向对应的 node 模块：</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  $<span class="token punctuation">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span>
  jQuery<span class="token punctuation">:</span> <span class="token string">'jquery'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>然后在我们任意源码中：</p>
<pre><code class="lang-javascript"><span class="token comment">// in a module</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;= 起作用</span>
<span class="token function">jQuery</span><span class="token punctuation">(</span><span class="token string">'#item'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;= 起作用</span>
<span class="token comment">// $ 自动被设置为 "jquery" 输出的内容</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-jquery-和-angular-1" id="使用-jquery-和-angular-1"></a>
<span class="text">使用：jQuery 和 Angular 1</span>
<a aria-label="使用：jQuery 和 Angular 1" class="icon-link" href="#使用-jquery-和-angular-1"></a>
</h2>
<p>Angular 会寻找 <code>window.jQuery</code> 来决定 jQuery 是否存在, 查看<a href="https://github.com/angular/angular.js/blob/v1.5.9/src/Angular.js#L1821-L1823">源码</a>。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'window.jQuery'</span><span class="token punctuation">:</span> <span class="token string">'jquery'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#使用-lodash-map" id="使用-lodash-map"></a>
<span class="text">使用：Lodash Map</span>
<a aria-label="使用：Lodash Map" class="icon-link" href="#使用-lodash-map"></a>
</h2>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  _map<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'lodash'</span><span class="token punctuation">,</span> <span class="token string">'map'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#使用-vue-js" id="使用-vue-js"></a>
<span class="text">使用：Vue.js</span>
<a aria-label="使用：Vue.js" class="icon-link" href="#使用-vue-js"></a>
</h3>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>ProvidePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  Vue<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vue/dist/vue.esm.js'</span><span class="token punctuation">,</span> <span class="token string">'default'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</div>
<br/><h1>SourceMapDevToolPlugin</h1>
<div><p>本插件实现了对 source map 生成内容进行更细粒度的控制。它也可以通过 <a href="/configuration/devtool/"><code>devtool</code></a> 配置选项的某些设置自动启用。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<p>支持以下选项：</p>
<ul>
<li><code>test</code> (<code>string|regex|array</code>)：包含基于扩展名的模块的 source map（默认是 <code>.js</code>, <code>.mjs</code> 和 <code>.css</code>）。</li>
<li><code>include</code> (<code>string|regex|array</code>)：使路径与该值匹配的模块生成 source map。</li>
<li><code>exclude</code> (<code>string|regex|array</code>)：使匹配该值的模块不生成 source map。</li>
<li><code>filename</code> (<code>string</code>)：定义生成的 source map 的名称（如果没有值将会变成 inlined）。</li>
<li><code>append</code> (<code>string</code>)：在原始资源后追加给定值。通常是 <code>#sourceMappingURL</code> 注释。<code>[url]</code> 被替换成 source map 文件的 URL。<code>false</code> 将禁用追加。</li>
<li><code>moduleFilenameTemplate</code> (<code>string</code>): 查看 <a href="/configuration/output/#output-devtoolmodulefilenametemplate"><code>output.devtoolModuleFilenameTemplate</code></a>.</li>
<li><code>fallbackModuleFilenameTemplate</code> (<code>string</code>)：同上。</li>
<li><code>module</code> (<code>boolean</code>)：表示 loader 是否生成 source map（默认为 <code>true</code>）。</li>
<li><code>columns</code> (<code>boolean</code>)：表示是否应该使用 column mapping（默认为 <code>true</code>）。</li>
<li><code>lineToLine</code> (<code>boolean</code> 或 <code>object</code>)：通过行到行源代码映射(line to line source mappings)简化和提升匹配模块的源代码映射速度。</li>
<li><code>noSources</code> (<code>boolean</code>)：防止源文件的内容被包含在 source map 里（默认为 <code>false</code>）。</li>
<li><code>publicPath</code> (<code>string</code>)：生成带 public path 前缀的绝对 URL，例如：<code>https://example.com/project/</code>。</li>
<li><code>fileContext</code> (<code>string</code>)：使得 <code>[file]</code> 参数作为本目录的相对路径。</li>
</ul>
<p><code>lineToLine</code> 对象允许的值和上面 <code>test</code>，<code>include</code>，<code>exclude</code> 选项一样。</p>
<p><code>fileContext</code> 选项在你想要将 source maps 存储到上层目录，避免 <code>../../</code> 出现在绝对路径 <code>[url]</code> 里面时有用。</p>
<blockquote class="tip"><div class="tip-content"> 设置 <code>module</code> 和/或 <code>columns</code> 为 <code>false</code> 将会生成不太精确的 source map，但同时会显著地提升编译性能。 </div></blockquote><blockquote class="tip"><div class="tip-content"> If you want to use a custom configuration for this plugin in <a href="/concepts/mode/#mode-development">development mode</a>, make sure to disable the default one. I.e. set <code>devtool: false</code>. </div></blockquote><blockquote class="warning"><div class="tip-content"> 记得在使用 <a href="/plugins/terser-webpack-plugin"><code>TerserPlugin</code></a> 时，必须使用 <code>sourceMap</code> 选项。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#用法" id="用法"></a>
<span class="text">用法</span>
<a aria-label="用法" class="icon-link" href="#用法"></a>
</h2>
<p>下面的示例展示了本插件的一些常见用例。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#basic-use-case" id="basic-use-case"></a>
<span class="text">Basic Use Case</span>
<a aria-label="Basic Use Case" class="icon-link" href="#basic-use-case"></a>
</h3>
<p>You can use the following code to replace the configuration option <code>devtool: inline-source-map</code> with an equivalent custom plugin configuration:</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  devtool<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#排除-vendor-的-map" id="排除-vendor-的-map"></a>
<span class="text">排除 vendor 的 map</span>
<a aria-label="排除 vendor 的 map" class="icon-link" href="#排除-vendor-的-map"></a>
</h3>
<p>以下代码会排除 <code>vendor.js</code> 内模块的 source map。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token punctuation">:</span> <span class="token string">'[name].js.map'</span><span class="token punctuation">,</span>
  exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'vendor.js'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#在宿主环境外部化-source-map" id="在宿主环境外部化-source-map"></a>
<span class="text">在宿主环境外部化 source map</span>
<a aria-label="在宿主环境外部化 source map" class="icon-link" href="#在宿主环境外部化-source-map"></a>
</h3>
<p>设置 source map 的 URL。在宿主环境需要授权的情况下很有用。</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  append<span class="token punctuation">:</span> '\n<span class="token comment">//# sourceMappingURL=http://example.com/sourcemap/[url]',</span>
  filename<span class="token punctuation">:</span> <span class="token string">'[name].map'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>还有一种场景，source map 存储在上层目录中时：</p>
<pre><code class="lang-code">project
|- dist
  |- public
    |- bundle-[hash].js
  |- sourcemaps
    |- bundle-[hash].js.map
</code></pre>
<p>如下设置：</p>
<pre><code class="lang-js"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>SourceMapDevToolPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  filename<span class="token punctuation">:</span> <span class="token string">'sourcemaps/[file].map'</span><span class="token punctuation">,</span>
  publicPath<span class="token punctuation">:</span> <span class="token string">'https://example.com/project/'</span><span class="token punctuation">,</span>
  fileContext<span class="token punctuation">:</span> <span class="token string">'public'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>将会生成以下 URL：</p>
<pre><code class="lang-code">https://example.com/project/sourcemaps/bundle-[hash].js.map
</code></pre>
</div>
<br/><h1>SplitChunksPlugin</h1>
<div><p>Originally, chunks (and modules imported inside them) were connected by a parent-child relationship in the internal webpack graph. The <code>CommonsChunkPlugin</code> was used to avoid duplicated dependencies across them, but further optimizations were not possible.</p>
<p>Since webpack v4, the <code>CommonsChunkPlugin</code> was removed in favor of <code>optimization.splitChunks</code>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#defaults" id="defaults"></a>
<span class="text">Defaults</span>
<a aria-label="Defaults" class="icon-link" href="#defaults"></a>
</h2>
<p>Out of the box <code>SplitChunksPlugin</code> should work well for most users.</p>
<p>By default it only affects on-demand chunks, because changing initial chunks would affect the script tags the HTML file should include to run the project.</p>
<p>webpack will automatically split chunks based on these conditions:</p>
<ul>
<li>New chunk can be shared OR modules are from the <code>node_modules</code> folder</li>
<li>New chunk would be bigger than 30kb (before min+gz)</li>
<li>Maximum number of parallel requests when loading chunks on demand would be lower or equal to 5</li>
<li>Maximum number of parallel requests at initial page load would be lower or equal to 3</li>
</ul>
<p>When trying to fulfill the last two conditions, bigger chunks are preferred.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#configuration" id="configuration"></a>
<span class="text">Configuration</span>
<a aria-label="Configuration" class="icon-link" href="#configuration"></a>
</h2>
<p>webpack provides a set of options for developers that want more control over this functionality. </p>
<blockquote class="warning"><div class="tip-content"> The default configuration was chosen to fit web performance best practices, but the optimal strategy for your project might differ. If you're changing the configuration, you should measure the impact of your changes to ensure there's a real benefit. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimization-splitchunks" id="optimization-splitchunks"></a>
<span class="text"><code>optimization.splitChunks</code></span>
<a aria-label="&lt;code&gt;optimization.splitChunks&lt;/code&gt;" class="icon-link" href="#optimization-splitchunks"></a>
</h2>
<p>This configuration object represents the default behavior of the <code>SplitChunksPlugin</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'async'</span><span class="token punctuation">,</span>
      minSize<span class="token punctuation">:</span> <span class="token number">30000</span><span class="token punctuation">,</span>
      maxSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      minChunks<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      maxAsyncRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
      maxInitialRequests<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      automaticNameDelimiter<span class="token punctuation">:</span> <span class="token string">'~'</span><span class="token punctuation">,</span>
      name<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">10</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          priority<span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">20</span><span class="token punctuation">,</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-automaticnamedelimiter" id="splitchunks-automaticnamedelimiter"></a>
<span class="text"><code>splitChunks.automaticNameDelimiter</code></span>
<a aria-label="&lt;code&gt;splitChunks.automaticNameDelimiter&lt;/code&gt;" class="icon-link" href="#splitchunks-automaticnamedelimiter"></a>
</h3>
<p><code>string</code></p>
<p>By default webpack will generate names using origin and name of the chunk (e.g. <code>vendors~main.js</code>). This option lets you specify the delimiter to use for the generated names.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-chunks" id="splitchunks-chunks"></a>
<span class="text"><code>splitChunks.chunks</code></span>
<a aria-label="&lt;code&gt;splitChunks.chunks&lt;/code&gt;" class="icon-link" href="#splitchunks-chunks"></a>
</h3>
<p><code>function (chunk) | string</code></p>
<p>This indicates which chunks will be selected for optimization. When a string is provided, valid values are <code>all</code>, <code>async</code>, and <code>initial</code>. Providing <code>all</code> can be particularly powerful, because it means that chunks can be shared even between async and non-async chunks.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// include all types of chunks</span>
      chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>Alternatively, you may provide a function for more control. The return value will indicate whether to include each chunk.</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      chunks <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// exclude `my-excluded-chunk`</span>
        <span class="token keyword">return</span> chunk<span class="token punctuation">.</span>name <span class="token operator">!==</span> <span class="token string">'my-excluded-chunk'</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> You can combine this configuration with the <a href="/plugins/html-webpack-plugin/">HtmlWebpackPlugin</a>. It will inject all the generated vendor chunks for you. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-maxasyncrequests" id="splitchunks-maxasyncrequests"></a>
<span class="text"><code>splitChunks.maxAsyncRequests</code></span>
<a aria-label="&lt;code&gt;splitChunks.maxAsyncRequests&lt;/code&gt;" class="icon-link" href="#splitchunks-maxasyncrequests"></a>
</h3>
<p><code>number</code></p>
<p>Maximum number of parallel requests when on-demand loading.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-maxinitialrequests" id="splitchunks-maxinitialrequests"></a>
<span class="text"><code>splitChunks.maxInitialRequests</code></span>
<a aria-label="&lt;code&gt;splitChunks.maxInitialRequests&lt;/code&gt;" class="icon-link" href="#splitchunks-maxinitialrequests"></a>
</h3>
<p><code>number</code></p>
<p>Maximum number of parallel requests at an entry point.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-minchunks" id="splitchunks-minchunks"></a>
<span class="text"><code>splitChunks.minChunks</code></span>
<a aria-label="&lt;code&gt;splitChunks.minChunks&lt;/code&gt;" class="icon-link" href="#splitchunks-minchunks"></a>
</h3>
<p><code>number</code></p>
<p>Minimum number of chunks that must share a module before splitting.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-minsize" id="splitchunks-minsize"></a>
<span class="text"><code>splitChunks.minSize</code></span>
<a aria-label="&lt;code&gt;splitChunks.minSize&lt;/code&gt;" class="icon-link" href="#splitchunks-minsize"></a>
</h3>
<p><code>number</code></p>
<p>Minimum size, in bytes, for a chunk to be generated.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-maxsize" id="splitchunks-maxsize"></a>
<span class="text"><code>splitChunks.maxSize</code></span>
<a aria-label="&lt;code&gt;splitChunks.maxSize&lt;/code&gt;" class="icon-link" href="#splitchunks-maxsize"></a>
</h3>
<p><code>number</code></p>
<p>Using <code>maxSize</code> (either globally <code>optimization.splitChunks.maxSize</code> per cache group <code>optimization.splitChunks.cacheGroups[x].maxSize</code> or for the fallback cache group <code>optimization.splitChunks.fallbackCacheGroup.maxSize</code>) tells webpack to try to split chunks bigger than <code>maxSize</code> into smaller parts. Parts will be at least <code>minSize</code> (next to <code>maxSize</code>) in size.
The algorithm is deterministic and changes to the modules will only have local impact. So that it is usable when using long term caching and doesn't require records. <code>maxSize</code> is only a hint and could be violated when modules are bigger than <code>maxSize</code> or splitting would violate <code>minSize</code>.</p>
<p>When the chunk has a name already, each part will get a new name derived from that name. Depending on the value of <code>optimization.splitChunks.hidePathInfo</code> it will add a key derived from the first module name or a hash of it.</p>
<p><code>maxSize</code> options is intended to be used with HTTP/2 and long term caching. It increase the request count for better caching. It could also be used to decrease the file size for faster rebuilding.</p>
<blockquote class="tip"><div class="tip-content"> <code>maxSize</code> takes higher priority than <code>maxInitialRequest/maxAsyncRequests</code>. Actual priority is <code>maxInitialRequest/maxAsyncRequests &lt; maxSize &lt; minSize</code>. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-name" id="splitchunks-name"></a>
<span class="text"><code>splitChunks.name</code></span>
<a aria-label="&lt;code&gt;splitChunks.name&lt;/code&gt;" class="icon-link" href="#splitchunks-name"></a>
</h3>
<p><code>boolean: true | function (module, chunks, cacheGroupKey) | string</code></p>
<p>The name of the split chunk. Providing <code>true</code> will automatically generate a name based on chunks and cache group key. Providing a string or function will allow you to use a custom name. If the name matches an entry point name, the entry point will be removed.</p>
<blockquote class="tip"><div class="tip-content"> It is recommended to set <code>splitChunks.name</code> to <code>false</code> for production builds so that it doesn't change names unnecessarily. </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name <span class="token punctuation">(</span>module<span class="token punctuation">,</span> chunks<span class="token punctuation">,</span> cacheGroupKey<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// generate a chunk name...</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">//...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> When assigning equal names to different split chunks, all vendor modules are placed into a single shared chunk, though it's not recommend since it can result in more code downloaded. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups" id="splitchunks-cachegroups"></a>
<span class="text"><code>splitChunks.cacheGroups</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups"></a>
</h3>
<p>Cache groups can inherit and/or override any options from <code>splitChunks.*</code>; but <code>test</code>, <code>priority</code> and <code>reuseExistingChunk</code> can only be configured on cache group level. To disable any of the default cache groups, set them to <code>false</code>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups-priority" id="splitchunks-cachegroups-priority"></a>
<span class="text"><code>splitChunks.cacheGroups.priority</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups.priority&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups-priority"></a>
</h4>
<p><code>number</code></p>
<p>A module can belong to multiple cache groups. The optimization will prefer the cache group with a higher <code>priority</code>. The default groups have a negative priority to allow custom groups to take higher priority (default value is <code>0</code> for custom groups).</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups-cachegroup-reuseexistingchunk" id="splitchunks-cachegroups-cachegroup-reuseexistingchunk"></a>
<span class="text"><code>splitChunks.cacheGroups.{cacheGroup}.reuseExistingChunk</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups.{cacheGroup}.reuseExistingChunk&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups-cachegroup-reuseexistingchunk"></a>
</h4>
<p><code>boolean</code></p>
<p>If the current chunk contains modules already split out from the main bundle, it will be reused instead of a new one being generated. This can impact the resulting file name of the chunk.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups-cachegroup-test" id="splitchunks-cachegroups-cachegroup-test"></a>
<span class="text"><code>splitChunks.cacheGroups.{cacheGroup}.test</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups.{cacheGroup}.test&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups-cachegroup-test"></a>
</h4>
<p><code>function (module, chunk) | RegExp | string</code></p>
<p>Controls which modules are selected by this cache group. Omitting it selects all modules. It can match the absolute module resource path or chunk names. When a chunk name is matched, all modules in the chunk are selected.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token function">test</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> chunks<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//...</span>
            <span class="token keyword">return</span> module<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'javascript/auto'</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups-cachegroup-filename" id="splitchunks-cachegroups-cachegroup-filename"></a>
<span class="text"><code>splitChunks.cacheGroups.{cacheGroup}.filename</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups.{cacheGroup}.filename&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups-cachegroup-filename"></a>
</h4>
<p><code>string</code></p>
<p>Allows to override the filename when and only when it's an initial chunk.
All placeholders available in <a href="/configuration/output/#output-filename"><code>output.filename</code></a> are also available here.</p>
<blockquote class="warning"><div class="tip-content"> This option can also be set globally in <code>splitChunks.filename</code>, but this isn't recommended and will likely lead to an error if <a href="#splitchunks-chunks"><code>splitChunks.chunks</code></a> is not set to <code>'initial'</code>. Avoid setting it globally. </div></blockquote><p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          filename<span class="token punctuation">:</span> <span class="token string">'[name].bundle.js'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#splitchunks-cachegroups-cachegroup-enforce" id="splitchunks-cachegroups-cachegroup-enforce"></a>
<span class="text"><code>splitChunks.cacheGroups.{cacheGroup}.enforce</code></span>
<a aria-label="&lt;code&gt;splitChunks.cacheGroups.{cacheGroup}.enforce&lt;/code&gt;" class="icon-link" href="#splitchunks-cachegroups-cachegroup-enforce"></a>
</h4>
<p><code>boolean: false</code></p>
<p>Tells webpack to ignore <a href="#splitchunks-minsize"><code>splitChunks.minSize</code></a>, <a href="#splitchunks-minchunks"><code>splitChunks.minChunks</code></a>, <a href="#splitchunks-maxasyncrequests"><code>splitChunks.maxAsyncRequests</code></a> and <a href="#splitchunks-maxinitialrequests"><code>splitChunks.maxInitialRequests</code></a> options and always create chunks for this cache group.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendors<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#defaults-example-1" id="defaults-example-1"></a>
<span class="text">Defaults: Example 1</span>
<a aria-label="Defaults: Example 1" class="icon-link" href="#defaults-example-1"></a>
</h3>
<pre><code class="lang-js"><span class="token comment">// index.js</span>

<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// dynamic import</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// a.js</span>
<span class="token keyword">import</span> <span class="token string">'react'</span><span class="token punctuation">;</span>

<span class="token comment">//...</span>
</code></pre>
<p><strong>Result:</strong> A separate chunk would be created containing <code>react</code>. At the import call this chunk is loaded in parallel to the original chunk containing <code>./a</code>.</p>
<p>Why:</p>
<ul>
<li>Condition 1: The chunk contains modules from <code>node_modules</code></li>
<li>Condition 2: <code>react</code> is bigger than 30kb</li>
<li>Condition 3: Number of parallel requests at the import call is 2</li>
<li>Condition 4: Doesn't affect request at initial page load</li>
</ul>
<p>What's the reasoning behind this? <code>react</code> probably won't change as often as your application code. By moving it into a separate chunk this chunk can be cached separately from your app code (assuming you are using chunkhash, records, Cache-Control or other long term cache approach).</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#defaults-example-2" id="defaults-example-2"></a>
<span class="text">Defaults: Example 2</span>
<a aria-label="Defaults: Example 2" class="icon-link" href="#defaults-example-2"></a>
</h3>
<pre><code class="lang-js"><span class="token comment">// entry.js</span>

<span class="token comment">// dynamic imports</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// a.js</span>
<span class="token keyword">import</span> <span class="token string">'./helpers'</span><span class="token punctuation">;</span> <span class="token comment">// helpers is 40kb in size</span>

<span class="token comment">//...</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// b.js</span>
<span class="token keyword">import</span> <span class="token string">'./helpers'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'./more-helpers'</span><span class="token punctuation">;</span> <span class="token comment">// more-helpers is also 40kb in size</span>

<span class="token comment">//...</span>
</code></pre>
<p><strong>Result:</strong> A separate chunk would be created containing <code>./helpers</code> and all dependencies of it. At the import calls this chunk is loaded in parallel to the original chunks.</p>
<p>Why:</p>
<ul>
<li>Condition 1: The chunk is shared between both import calls</li>
<li>Condition 2: <code>helpers</code> is bigger than 30kb</li>
<li>Condition 3: Number of parallel requests at the import calls is 2</li>
<li>Condition 4: Doesn't affect request at initial page load</li>
</ul>
<p>Putting the content of <code>helpers</code> into each chunk will result into its code being downloaded twice. By using a separate chunk this will only happen once. We pay the cost of an additional request, which could be considered a tradeoff. That's why there is a minimum size of 30kb.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#split-chunks-example-1" id="split-chunks-example-1"></a>
<span class="text">Split Chunks: Example 1</span>
<a aria-label="Split Chunks: Example 1" class="icon-link" href="#split-chunks-example-1"></a>
</h3>
<p>Create a <code>commons</code> chunk, which includes all code shared between entry points.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        commons<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          name<span class="token punctuation">:</span> <span class="token string">'commons'</span><span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'initial'</span><span class="token punctuation">,</span>
          minChunks<span class="token punctuation">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> This configuration can enlarge your initial bundles, it is recommended to use dynamic imports when a module is not immediately needed. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#split-chunks-example-2" id="split-chunks-example-2"></a>
<span class="text">Split Chunks: Example 2</span>
<a aria-label="Split Chunks: Example 2" class="icon-link" href="#split-chunks-example-2"></a>
</h3>
<p>Create a <code>vendors</code> chunk, which includes all code from <code>node_modules</code> in the whole application.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        commons<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/]/</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'vendors'</span><span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="warning"><div class="tip-content"> This might result in a large chunk containing all external packages. It is recommended to only include your core frameworks and utilities and dynamically load the rest of the dependencies. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#split-chunks-example-3" id="split-chunks-example-3"></a>
<span class="text">Split Chunks: Example 3</span>
<a aria-label="Split Chunks: Example 3" class="icon-link" href="#split-chunks-example-3"></a>
</h3>
<p> Create a <code>custom vendor</code> chunk, which contains certain <code>node_modules</code> packages matched by <code>RegExp</code>.</p>
<p> <strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    splitChunks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      cacheGroups<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        vendor<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          test<span class="token punctuation">:</span> <span class="token regex">/[\\/]node_modules[\\/](react|react-dom)[\\/]/</span><span class="token punctuation">,</span>
          name<span class="token punctuation">:</span> <span class="token string">'vendor'</span><span class="token punctuation">,</span>
          chunks<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<blockquote class="tip"><div class="tip-content"> This will result in splitting <code>react</code> and <code>react-dom</code> into a separate chunk. If you're not sure what packages have been included in a chunk you may refer to <a href="/guides/code-splitting/#bundle-analysis">Bundle Analysis</a> section for details. </div></blockquote></div>
<br/><h1>StylelintWebpackPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![chat][chat]][chat-url]</p>
<p>A Stylelint plugin for webpack</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#differences-with-stylelint-loader" id="differences-with-stylelint-loader"></a>
<span class="text">Differences With stylelint-loader</span>
<a aria-label="Differences With stylelint-loader" class="icon-link" href="#differences-with-stylelint-loader"></a>
</h2>
<p>Both <a href="https://github.com/adrianhall/stylelint-loader"><code>stylelint-loader</code></a> and
this module have their uses. <code>stylelint-loader</code> lints the files you <code>require</code> 
(or the ones you define as an <code>entry</code> in your <code>webpack</code> config). However,
<code>@imports</code> in files are not followed, meaning only the main file for each
<code>require/entry</code> is linted.</p>
<p><code>stylelint-webpack-plugin</code> allows defining a
<a href="https://en.wikipedia.org/wiki/Glob_(programming">glob pattern</a>) matching the
configuration and use of <code>stylelint</code>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>stylelint-webpack-plugin</code>:</p>
<pre><code class="lang-console">$ npm install stylelint-webpack-plugin --save-dev
</code></pre>
<p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><strong>file.ext</strong></p>
<pre><code class="lang-js"><span class="token keyword">import</span> file <span class="token keyword">from</span> <span class="token string">'file.ext'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> StyleLintPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'stylelint-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">StyleLintPlugin</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<p>See stylelint's <a href="http://stylelint.io/user-guide/node-api/#options">options</a> for
the complete list of options available. These options are passed through to the
<code>stylelint</code> directly.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#configfile" id="configfile"></a>
<span class="text"><code>configFile</code></span>
<a aria-label="&lt;code&gt;configFile&lt;/code&gt;" class="icon-link" href="#configfile"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>undefined</code></p>
<p>Specify the config file location to be used by <code>stylelint</code>.</p>
<p><em>Note: By default this is
<a href="http://stylelint.io/user-guide/configuration/">handled by <code>stylelint</code></a> via
cosmiconfig.</em></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#context" id="context"></a>
<span class="text"><code>context</code></span>
<a aria-label="&lt;code&gt;context&lt;/code&gt;" class="icon-link" href="#context"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>compiler.context</code></p>
<p>A <code>String</code> indicating the root of your <code>SCSS</code> files.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#emiterrors" id="emiterrors"></a>
<span class="text"><code>emitErrors</code></span>
<a aria-label="&lt;code&gt;emitErrors&lt;/code&gt;" class="icon-link" href="#emiterrors"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>true</code></p>
<p>If true, pipes <code>stylelint</code> error severity messages to the <code>webpack</code> compiler's
error message handler.</p>
<p><em>Note: When this property is disabled all <code>stylelint</code> messages are piped to the
<code>webpack</code> compiler's warning message handler.</em></p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#failonerror" id="failonerror"></a>
<span class="text"><code>failOnError</code></span>
<a aria-label="&lt;code&gt;failOnError&lt;/code&gt;" class="icon-link" href="#failonerror"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>If true, throws a fatal error in the global build process. This will end the
build process on any <code>stylelint</code> error.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#files" id="files"></a>
<span class="text"><code>files</code></span>
<a aria-label="&lt;code&gt;files&lt;/code&gt;" class="icon-link" href="#files"></a>
</h3>
<p>Type: <code>String|Array[String]</code>
Default: <code>'**/*.s?(a|c)ss'</code></p>
<p>Specify the glob pattern for finding files. Must be relative to <code>options.context</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#formatter" id="formatter"></a>
<span class="text"><code>formatter</code></span>
<a aria-label="&lt;code&gt;formatter&lt;/code&gt;" class="icon-link" href="#formatter"></a>
</h3>
<p>Type: <code>Object</code>
Default: <code>require('stylelint').formatters.string</code></p>
<p>Specify a custom formatter to format errors printed to the console.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#lintdirtymodulesonly" id="lintdirtymodulesonly"></a>
<span class="text"><code>lintDirtyModulesOnly</code></span>
<a aria-label="&lt;code&gt;lintDirtyModulesOnly&lt;/code&gt;" class="icon-link" href="#lintdirtymodulesonly"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>Lint only changed files, skip lint on start.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#syntax" id="syntax"></a>
<span class="text"><code>syntax</code></span>
<a aria-label="&lt;code&gt;syntax&lt;/code&gt;" class="icon-link" href="#syntax"></a>
</h3>
<p>Type: <code>String</code>
Default: <code>undefined</code></p>
<p>See the <code>styelint</code>
<a href="https://stylelint.io/user-guide/node-api/#syntax">user guide</a> for more info.
e.g. use <code>'scss'</code> to lint .scss files.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#error-reporting" id="error-reporting"></a>
<span class="text">Error Reporting</span>
<a aria-label="Error Reporting" class="icon-link" href="#error-reporting"></a>
</h2>
<p>By default the plugin will dump full reporting of errors. Set <code>failOnError</code> to
true if you want <code>webpack</code> build process breaking with any stylelint error. You
can use the <code>quiet</code> option to avoid error output to the console.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#acknowledgement" id="acknowledgement"></a>
<span class="text">Acknowledgement</span>
<a aria-label="Acknowledgement" class="icon-link" href="#acknowledgement"></a>
</h2>
<p>This project was inspired by, and is a heavily modified version of
<code>sasslint-webpack-plugin</code>.</p>
<p>Thanks to Javier (<a href="https://github.com/vieron">@vieron</a>) for authoring this
plugin.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#mit" id="mit"></a>
<span class="text"><a href="https://raw.githubusercontent.com/webpack-contrib/stylelint-webpack-plugin/master/LICENSE">MIT</a></span>
<a aria-label="&lt;a href=" https:="" license="" master="" raw.githubusercontent.com="" stylelint-webpack-plugin="" webpack-contrib="">MIT</a>" class="icon-link" href="#mit"&gt;
      </h4>
</div>
<br/><h1>TerserWebpackPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![cover][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>This plugin uses <a href="https://github.com/terser-js/terser">terser</a> to minify your JavaScript.</p>
<blockquote>
<p>ℹ️ For <code>webpack@3</code> use <a href="https://www.npmjs.com/package/terser-webpack-plugin-legacy">terser-webpack-plugin-legacy</a> package</p>
</blockquote>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>terser-webpack-plugin</code>:</p>
<pre><code class="lang-console">$ npm install terser-webpack-plugin --save-dev
</code></pre>
<p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> TerserPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#options" id="options"></a>
<span class="text">Options</span>
<a aria-label="Options" class="icon-link" href="#options"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#test" id="test"></a>
<span class="text"><code>test</code></span>
<a aria-label="&lt;code&gt;test&lt;/code&gt;" class="icon-link" href="#test"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>/\.m?js(\?.*)?$/i</code></p>
<p>Test to match files against.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js(\?.*)?$/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#include" id="include"></a>
<span class="text"><code>include</code></span>
<a aria-label="&lt;code&gt;include&lt;/code&gt;" class="icon-link" href="#include"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p>
<p>Files to include.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token punctuation">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exclude" id="exclude"></a>
<span class="text"><code>exclude</code></span>
<a aria-label="&lt;code&gt;exclude&lt;/code&gt;" class="icon-link" href="#exclude"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p>
<p>Files to exclude.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#chunkfilter" id="chunkfilter"></a>
<span class="text"><code>chunkFilter</code></span>
<a aria-label="&lt;code&gt;chunkFilter&lt;/code&gt;" class="icon-link" href="#chunkfilter"></a>
</h3>
<p>Type: <code>Function&lt;(chunk) -&gt; boolean&gt;</code>
Default: <code>() =&gt; true</code></p>
<p>Allowing to filter which chunks should be uglified (by default all chunks are uglified).
Return <code>true</code> to uglify the chunk, <code>false</code> otherwise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        chunkFilter<span class="token punctuation">:</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Exclude uglification for the `vendor` chunk</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'vendor'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cache" id="cache"></a>
<span class="text"><code>cache</code></span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt;" class="icon-link" href="#cache"></a>
</h3>
<p>Type: <code>Boolean|String</code>
Default: <code>false</code></p>
<p>Enable file caching.
Default path to cache directory: <code>node_modules/.cache/terser-webpack-plugin</code>.</p>
<blockquote>
<p>ℹ️ If you use your own <code>minify</code> function please read the <code>minify</code> section for cache invalidation correctly.</p>
</blockquote>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable file caching.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>Enable file caching and set path to cache directory.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token string">'path/to/cache'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cachekeys" id="cachekeys"></a>
<span class="text"><code>cacheKeys</code></span>
<a aria-label="&lt;code&gt;cacheKeys&lt;/code&gt;" class="icon-link" href="#cachekeys"></a>
</h3>
<p>Type: <code>Function&lt;(defaultCacheKeys, file) -&gt; Object&gt;</code>
Default: <code>defaultCacheKeys =&gt; defaultCacheKeys</code></p>
<p>Allows you to override default cache keys.</p>
<p>Default cache keys:</p>
<pre><code class="lang-js"><span class="token punctuation">(</span><span class="token punctuation">{</span>
  terser<span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token comment">// terser version</span>
  <span class="token string">'terser-webpack-plugin'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token comment">// plugin version</span>
  <span class="token string">'terser-webpack-plugin-options'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token comment">// plugin options</span>
  path<span class="token punctuation">:</span> compiler<span class="token punctuation">.</span>outputPath <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>compiler<span class="token punctuation">.</span>outputPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> file<span class="token punctuation">,</span> <span class="token comment">// asset path</span>
  hash<span class="token punctuation">:</span> crypto
    <span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md4'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// source file hash</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cacheKeys<span class="token punctuation">:</span> <span class="token punctuation">(</span>defaultCacheKeys<span class="token punctuation">,</span> file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          defaultCacheKeys<span class="token punctuation">.</span>myCacheKey <span class="token operator">=</span> <span class="token string">'myCacheKeyValue'</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> defaultCacheKeys<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#parallel" id="parallel"></a>
<span class="text"><code>parallel</code></span>
<a aria-label="&lt;code&gt;parallel&lt;/code&gt;" class="icon-link" href="#parallel"></a>
</h3>
<p>Type: <code>Boolean|Number</code>
Default: <code>false</code></p>
<p>Use multi-process parallel running to improve the build speed.
Default number of concurrent runs: <code>os.cpus().length - 1</code>.</p>
<blockquote>
<p>ℹ️ Parallelization can speedup your build significantly and is therefore <strong>highly recommended</strong>.</p>
</blockquote>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable multi-process parallel running.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#number" id="number"></a>
<span class="text"><code>Number</code></span>
<a aria-label="&lt;code&gt;Number&lt;/code&gt;" class="icon-link" href="#number"></a>
</h4>
<p>Enable multi-process parallel running and set number of concurrent runs.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>Use source maps to map error message locations to modules (this slows down the compilation).
If you use your own <code>minify</code> function please read the <code>minify</code> section for handling source maps correctly.</p>
<blockquote>
<p>⚠️ <strong><code>cheap-source-map</code> options don't work with this plugin</strong>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minify" id="minify"></a>
<span class="text"><code>minify</code></span>
<a aria-label="&lt;code&gt;minify&lt;/code&gt;" class="icon-link" href="#minify"></a>
</h3>
<p>Type: <code>Function</code>
Default: <code>undefined</code></p>
<p>Allows you to override default minify function.
By default plugin uses <a href="https://github.com/terser-js/terser">terser</a> package.
Useful for using and testing unpublished versions or forks.</p>
<blockquote>
<p>⚠️ <strong>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</strong>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        minify<span class="token punctuation">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">,</span> sourceMap<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> extractedComments <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          <span class="token comment">// Custom logic for extract comments</span>

          <span class="token keyword">const</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> map<span class="token punctuation">,</span> code<span class="token punctuation">,</span> warnings <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglify-module'</span><span class="token punctuation">)</span> <span class="token comment">// Or require('./path/to/uglify-module')</span>
            <span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              <span class="token comment">/* Your options for minification */</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> map<span class="token punctuation">,</span> code<span class="token punctuation">,</span> warnings<span class="token punctuation">,</span> extractedComments <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#terseroptions" id="terseroptions"></a>
<span class="text"><code>terserOptions</code></span>
<a aria-label="&lt;code&gt;terserOptions&lt;/code&gt;" class="icon-link" href="#terseroptions"></a>
</h3>
<p>Type: <code>Object</code>
Default: <a href="https://github.com/terser-js/terser#minify-options">default</a></p>
<p>Terser minify <a href="https://github.com/terser-js/terser#minify-options">options</a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          ecma<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span>
          warnings<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          parse<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          compress<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          mangle<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Note `mangle.properties` is `false` by default.</span>
          module<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          output<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          toplevel<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          nameCache<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          ie8<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          keep_classnames<span class="token punctuation">:</span> undefined<span class="token punctuation">,</span>
          keep_fnames<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          safari10<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extractcomments" id="extractcomments"></a>
<span class="text"><code>extractComments</code></span>
<a aria-label="&lt;code&gt;extractComments&lt;/code&gt;" class="icon-link" href="#extractcomments"></a>
</h3>
<p>Type: <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;|Object</code>
Default: <code>false</code></p>
<p>Whether comments shall be extracted to a separate file, (see <a href="https://github.com/webpack/webpack/commit/71933e979e51c533b432658d5e37917f9e71595a">details</a>).
By default extract only comments using <code>/^\**!|@preserve|@license|@cc_on/i</code> regexp condition and remove remaining comments.
If the original file is named <code>foo.js</code>, then the comments will be stored to <code>foo.js.LICENSE</code>.
The <code>terserOptions.output.comments</code> option specifies whether the comment will be preserved, i.e. it is possible to preserve some comments (e.g. annotations) while extracting others or even preserving comments that have been extracted.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable extracting comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>Extract <code>all</code> or <code>some</code> (use <code>/^\**!|@preserve|@license|@cc_on/i</code> RegExp) comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#regexp" id="regexp"></a>
<span class="text"><code>RegExp</code></span>
<a aria-label="&lt;code&gt;RegExp&lt;/code&gt;" class="icon-link" href="#regexp"></a>
</h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token regex">/@extract/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function-boolean-" id="function-boolean-"></a>
<span class="text"><code>Function&lt;(node, comment) -&gt; Boolean&gt;</code></span>
<a aria-label="&lt;code&gt;Function&lt;(node, comment) -&gt; Boolean&gt;&lt;/code&gt;" class="icon-link" href="#function-boolean-"></a>
</h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">(</span>astNode<span class="token punctuation">,</span> comment<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/@extract/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#object" id="object"></a>
<span class="text"><code>Object</code></span>
<a aria-label="&lt;code&gt;Object&lt;/code&gt;" class="icon-link" href="#object"></a>
</h4>
<p>Allow to customize condition for extract comments, specify extracted file name and banner.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          banner<span class="token punctuation">:</span> <span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#condition" id="condition"></a>
<span class="text"><code>condition</code></span>
<a aria-label="&lt;code&gt;condition&lt;/code&gt;" class="icon-link" href="#condition"></a>
</h5>
<p>Type: <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;</code></p>
<p>Condition what comments you need extract.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token string">'some'</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          banner<span class="token punctuation">:</span> <span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#filename" id="filename"></a>
<span class="text"><code>filename</code></span>
<a aria-label="&lt;code&gt;filename&lt;/code&gt;" class="icon-link" href="#filename"></a>
</h5>
<p>Type: <code>String|Function&lt;(string) -&gt; String&gt;</code>
Default: <code>${file}.LICENSE</code></p>
<p>The file where the extracted comments will be stored.
Default is to append the suffix <code>.LICENSE</code> to the original filename.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token string">'extracted-comments.js'</span><span class="token punctuation">,</span>
          banner<span class="token punctuation">:</span> <span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#banner" id="banner"></a>
<span class="text"><code>banner</code></span>
<a aria-label="&lt;code&gt;banner&lt;/code&gt;" class="icon-link" href="#banner"></a>
</h5>
<p>Type: <code>Boolean|String|Function&lt;(string) -&gt; String&gt;</code>
Default: <code>/*! For license information please see ${commentsFile} */</code></p>
<p>The banner text that points to the extracted file and will be added on top of the original file.
Can be <code>false</code> (no banner), a <code>String</code>, or a <code>Function&lt;(string) -&gt; String&gt;</code> that will be called with the filename where extracted comments have been stored.
Will be wrapped into comment.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          banner<span class="token punctuation">:</span> <span class="token punctuation">(</span>commentsFile<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`My custom banner about license information </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commentsFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#warningsfilter" id="warningsfilter"></a>
<span class="text"><code>warningsFilter</code></span>
<a aria-label="&lt;code&gt;warningsFilter&lt;/code&gt;" class="icon-link" href="#warningsfilter"></a>
</h3>
<p>Type: <code>Function&lt;(warning, source) -&gt; Boolean&gt;</code>
Default: <code>() =&gt; true</code></p>
<p>Allow to filter <a href="https://github.com/terser-js/terser">terser</a> warnings.
Return <code>true</code> to keep the warning, <code>false</code> otherwise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        warningsFilter<span class="token punctuation">:</span> <span class="token punctuation">(</span>warning<span class="token punctuation">,</span> source<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/Dropping unreachable code/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>warning<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/filename\.js/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cache-and-parallel" id="cache-and-parallel"></a>
<span class="text">Cache And Parallel</span>
<a aria-label="Cache And Parallel" class="icon-link" href="#cache-and-parallel"></a>
</h3>
<p>Enable cache and multi-process parallel running.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#preserve-comments" id="preserve-comments"></a>
<span class="text">Preserve Comments</span>
<a aria-label="Preserve Comments" class="icon-link" href="#preserve-comments"></a>
</h3>
<p>Extract all legal comments (i.e. <code>/^\**!|@preserve|@license|@cc_on/i</code>) and preserve <code>/@license/i</code> comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            comments<span class="token punctuation">:</span> <span class="token regex">/@license/i</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        extractComments<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#remove-comments" id="remove-comments"></a>
<span class="text">Remove Comments</span>
<a aria-label="Remove Comments" class="icon-link" href="#remove-comments"></a>
</h3>
<p>If you avoid building with comments, set <strong>terserOptions.output.comments</strong> to <strong>false</strong> as in this config:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        terserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#custom-minify-function" id="custom-minify-function"></a>
<span class="text">Custom Minify Function</span>
<a aria-label="Custom Minify Function" class="icon-link" href="#custom-minify-function"></a>
</h3>
<p>Override default minify function - use <code>uglify-js</code> for minification.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">TerserPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// Uncomment lines below for cache invalidation correctly</span>
        <span class="token comment">// cache: true,</span>
        <span class="token comment">// cacheKeys: (defaultCacheKeys) =&gt; {</span>
        <span class="token comment">//   delete defaultCacheKeys.terser;</span>
        <span class="token comment">//</span>
        <span class="token comment">//   return Object.assign(</span>
        <span class="token comment">//     {},</span>
        <span class="token comment">//     defaultCacheKeys,</span>
        <span class="token comment">//     { 'uglify-js': require('uglify-js/package.json').version },</span>
        <span class="token comment">//   );</span>
        <span class="token comment">// },</span>
        minify<span class="token punctuation">:</span> <span class="token punctuation">(</span>file<span class="token punctuation">,</span> sourceMap<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://github.com/mishoo/UglifyJS2#minify-options</span>
          <span class="token keyword">const</span> uglifyJsOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">/* your `uglify-js` package options */</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>sourceMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uglifyJsOptions<span class="token punctuation">.</span>sourceMap <span class="token operator">=</span> <span class="token punctuation">{</span>
              content<span class="token punctuation">:</span> sourceMap<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglify-js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> uglifyJsOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/terser-webpack-plugin/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/terser-webpack-plugin/master/LICENSE">MIT</a></p>
</div>
<br/><h1>UglifyjsWebpackPlugin</h1>
<div><p>[![npm][npm]][npm-url]
[![node][node]][node-url]
[![deps][deps]][deps-url]
[![tests][tests]][tests-url]
[![cover][cover]][cover-url]
[![chat][chat]][chat-url]
[![size][size]][size-url]</p>
<p>This plugin uses <a href="https://github.com/mishoo/UglifyJS2">uglify-js</a> to minify your JavaScript.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#requirements" id="requirements"></a>
<span class="text">Requirements</span>
<a aria-label="Requirements" class="icon-link" href="#requirements"></a>
</h2>
<p>This module requires a minimum of Node v6.9.0 and Webpack v4.0.0.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#getting-started" id="getting-started"></a>
<span class="text">Getting Started</span>
<a aria-label="Getting Started" class="icon-link" href="#getting-started"></a>
</h2>
<p>To begin, you'll need to install <code>uglifyjs-webpack-plugin</code>:</p>
<pre><code class="lang-console">$ npm install uglifyjs-webpack-plugin --save-dev
</code></pre>
<p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js"><span class="token keyword">const</span> UglifyJsPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>And run <code>webpack</code> via your preferred method.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#test" id="test"></a>
<span class="text"><code>test</code></span>
<a aria-label="&lt;code&gt;test&lt;/code&gt;" class="icon-link" href="#test"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>/\.js(\?.*)?$/i</code></p>
<p>Test to match files against.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.js(\?.*)?$/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#include" id="include"></a>
<span class="text"><code>include</code></span>
<a aria-label="&lt;code&gt;include&lt;/code&gt;" class="icon-link" href="#include"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p>
<p>Files to include.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        include<span class="token punctuation">:</span> <span class="token regex">/\/includes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#exclude" id="exclude"></a>
<span class="text"><code>exclude</code></span>
<a aria-label="&lt;code&gt;exclude&lt;/code&gt;" class="icon-link" href="#exclude"></a>
</h3>
<p>Type: <code>String|RegExp|Array&lt;String|RegExp&gt;</code>
Default: <code>undefined</code></p>
<p>Files to exclude.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        exclude<span class="token punctuation">:</span> <span class="token regex">/\/excludes/</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#chunkfilter" id="chunkfilter"></a>
<span class="text"><code>chunkFilter</code></span>
<a aria-label="&lt;code&gt;chunkFilter&lt;/code&gt;" class="icon-link" href="#chunkfilter"></a>
</h3>
<p>Type: <code>Function&lt;(chunk) -&gt; boolean&gt;</code>
Default: <code>() =&gt; true</code></p>
<p>Allowing to filter which chunks should be uglified (by default all chunks are uglified).
Return <code>true</code> to uglify the chunk, <code>false</code> otherwise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        chunkFilter<span class="token punctuation">:</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token comment">// Exclude uglification for the `vendor` chunk</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>chunk<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'vendor'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cache" id="cache"></a>
<span class="text"><code>cache</code></span>
<a aria-label="&lt;code&gt;cache&lt;/code&gt;" class="icon-link" href="#cache"></a>
</h3>
<p>Type: <code>Boolean|String</code>
Default: <code>false</code></p>
<p>Enable file caching.
Default path to cache directory: <code>node_modules/.cache/uglifyjs-webpack-plugin</code>.</p>
<blockquote>
<p>ℹ️ If you use your own <code>minify</code> function please read the <code>minify</code> section for cache invalidation correctly.</p>
</blockquote>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable file caching.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>Enable file caching and set path to cache directory.</p>
<p><strong>webpack.config.js</strong></p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token string">'path/to/cache'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cachekeys" id="cachekeys"></a>
<span class="text"><code>cacheKeys</code></span>
<a aria-label="&lt;code&gt;cacheKeys&lt;/code&gt;" class="icon-link" href="#cachekeys"></a>
</h3>
<p>Type: <code>Function&lt;(defaultCacheKeys, file) -&gt; Object&gt;</code>
Default: <code>defaultCacheKeys =&gt; defaultCacheKeys</code></p>
<p>Allows you to override default cache keys.</p>
<p>Default cache keys:</p>
<pre><code class="lang-js"><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token string">'uglify-js'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglify-js/package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token comment">// uglify version</span>
  <span class="token string">'uglifyjs-webpack-plugin'</span><span class="token punctuation">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../package.json'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token comment">// plugin version</span>
  <span class="token string">'uglifyjs-webpack-plugin-options'</span><span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> <span class="token comment">// plugin options</span>
  path<span class="token punctuation">:</span> compiler<span class="token punctuation">.</span>outputPath <span class="token operator">?</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>compiler<span class="token punctuation">.</span>outputPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">:</span> file<span class="token punctuation">,</span> <span class="token comment">// asset path</span>
  hash<span class="token punctuation">:</span> crypto
    <span class="token punctuation">.</span><span class="token function">createHash</span><span class="token punctuation">(</span><span class="token string">'md4'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// source file hash</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        cacheKeys<span class="token punctuation">:</span> <span class="token punctuation">(</span>defaultCacheKeys<span class="token punctuation">,</span> file<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          defaultCacheKeys<span class="token punctuation">.</span>myCacheKey <span class="token operator">=</span> <span class="token string">'myCacheKeyValue'</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> defaultCacheKeys<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#parallel" id="parallel"></a>
<span class="text"><code>parallel</code></span>
<a aria-label="&lt;code&gt;parallel&lt;/code&gt;" class="icon-link" href="#parallel"></a>
</h3>
<p>Type: <code>Boolean|Number</code>
Default: <code>false</code></p>
<p>Use multi-process parallel running to improve the build speed.
Default number of concurrent runs: <code>os.cpus().length - 1</code>.</p>
<blockquote>
<p>ℹ️ Parallelization can speedup your build significantly and is therefore <strong>highly recommended</strong>.</p>
</blockquote>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable multi-process parallel running.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#number" id="number"></a>
<span class="text"><code>Number</code></span>
<a aria-label="&lt;code&gt;Number&lt;/code&gt;" class="icon-link" href="#number"></a>
</h4>
<p>Enable multi-process parallel running and set number of concurrent runs.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        parallel<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemap" id="sourcemap"></a>
<span class="text"><code>sourceMap</code></span>
<a aria-label="&lt;code&gt;sourceMap&lt;/code&gt;" class="icon-link" href="#sourcemap"></a>
</h3>
<p>Type: <code>Boolean</code>
Default: <code>false</code></p>
<p>Use source maps to map error message locations to modules (this slows down the compilation).
If you use your own <code>minify</code> function please read the <code>minify</code> section for handling source maps correctly.</p>
<blockquote>
<p>⚠️ <strong><code>cheap-source-map</code> options don't work with this plugin</strong>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        sourceMap<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minify" id="minify"></a>
<span class="text"><code>minify</code></span>
<a aria-label="&lt;code&gt;minify&lt;/code&gt;" class="icon-link" href="#minify"></a>
</h3>
<p>Type: <code>Function</code>
Default: <code>undefined</code></p>
<p>Allows you to override default minify function.
By default plugin uses <a href="https://github.com/mishoo/UglifyJS2">uglify-js</a> package.
Useful for using and testing unpublished versions or forks.</p>
<blockquote>
<p>⚠️ <strong>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</strong>.</p>
</blockquote>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> sourceMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> extractedComments <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

          <span class="token comment">// Custom logic for extract comments</span>

          <span class="token keyword">const</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> map<span class="token punctuation">,</span> code<span class="token punctuation">,</span> warnings <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'uglify-module'</span><span class="token punctuation">)</span> <span class="token comment">// Or require('./path/to/uglify-module')</span>
            <span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> <span class="token punctuation">{</span>
              <span class="token comment">/* Your options for minification */</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

          <span class="token keyword">return</span> <span class="token punctuation">{</span> error<span class="token punctuation">,</span> map<span class="token punctuation">,</span> code<span class="token punctuation">,</span> warnings<span class="token punctuation">,</span> extractedComments <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#uglifyoptions" id="uglifyoptions"></a>
<span class="text"><code>uglifyOptions</code></span>
<a aria-label="&lt;code&gt;uglifyOptions&lt;/code&gt;" class="icon-link" href="#uglifyoptions"></a>
</h3>
<p>Type: <code>Object</code>
Default: <a href="https://github.com/mishoo/UglifyJS2#minify-options">default</a></p>
<p>UglifyJS minify <a href="https://github.com/mishoo/UglifyJS2#minify-options">options</a>.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        uglifyOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          warnings<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          parse<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          compress<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          mangle<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Note `mangle.properties` is `false` by default.</span>
          output<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          toplevel<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          nameCache<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
          ie8<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          keep_fnames<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extractcomments" id="extractcomments"></a>
<span class="text"><code>extractComments</code></span>
<a aria-label="&lt;code&gt;extractComments&lt;/code&gt;" class="icon-link" href="#extractcomments"></a>
</h3>
<p>Type: <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;</code>
Default: <code>false</code></p>
<p>Whether comments shall be extracted to a separate file, (see <a href="https://github.com/webpack/webpack/commit/71933e979e51c533b432658d5e37917f9e71595a">details</a>).
By default extract only comments using <code>/^\**!|@preserve|@license|@cc_on/i</code> regexp condition and remove remaining comments.
If the original file is named <code>foo.js</code>, then the comments will be stored to <code>foo.js.LICENSE</code>.
The <code>uglifyOptions.output.comments</code> option specifies whether the comment will be preserved, i.e. it is possible to preserve some comments (e.g. annotations) while extracting others or even preserving comments that have been extracted.</p>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#boolean" id="boolean"></a>
<span class="text"><code>Boolean</code></span>
<a aria-label="&lt;code&gt;Boolean&lt;/code&gt;" class="icon-link" href="#boolean"></a>
</h4>
<p>Enable/disable extracting comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#string" id="string"></a>
<span class="text"><code>String</code></span>
<a aria-label="&lt;code&gt;String&lt;/code&gt;" class="icon-link" href="#string"></a>
</h4>
<p>Extract <code>all</code> or <code>some</code> (use <code>/^\**!|@preserve|@license|@cc_on/i</code> RegExp) comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token string">'all'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#regexp" id="regexp"></a>
<span class="text"><code>RegExp</code></span>
<a aria-label="&lt;code&gt;RegExp&lt;/code&gt;" class="icon-link" href="#regexp"></a>
</h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token regex">/@extract/i</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#function-boolean-" id="function-boolean-"></a>
<span class="text"><code>Function&lt;(node, comment) -&gt; Boolean&gt;</code></span>
<a aria-label="&lt;code&gt;Function&lt;(node, comment) -&gt; Boolean&gt;&lt;/code&gt;" class="icon-link" href="#function-boolean-"></a>
</h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>astNode<span class="token punctuation">,</span> comment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/@extract/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>comment<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h4 class="header">
<a aria-hidden="true" class="anchor" href="#object" id="object"></a>
<span class="text"><code>Object</code></span>
<a aria-label="&lt;code&gt;Object&lt;/code&gt;" class="icon-link" href="#object"></a>
</h4>
<p>Allow to customize condition for extract comments, specify extracted file name and banner.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          <span class="token function">filename</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">banner</span><span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#condition" id="condition"></a>
<span class="text"><code>condition</code></span>
<a aria-label="&lt;code&gt;condition&lt;/code&gt;" class="icon-link" href="#condition"></a>
</h5>
<p>Type: <code>Boolean|String|RegExp|Function&lt;(node, comment) -&gt; Boolean|Object&gt;</code></p>
<p>Condition what comments you need extract.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token string">'some'</span><span class="token punctuation">,</span>
          <span class="token function">filename</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">banner</span><span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#filename" id="filename"></a>
<span class="text"><code>filename</code></span>
<a aria-label="&lt;code&gt;filename&lt;/code&gt;" class="icon-link" href="#filename"></a>
</h5>
<p>Type: <code>Regex|Function&lt;(string) -&gt; String&gt;</code>
Default: <code>${file}.LICENSE</code></p>
<p>The file where the extracted comments will be stored.
Default is to append the suffix <code>.LICENSE</code> to the original filename.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token regex">/^\**!|@preserve|@license|@cc_on/i</span><span class="token punctuation">,</span>
          filename<span class="token punctuation">:</span> <span class="token string">'extracted-comments.js'</span><span class="token punctuation">,</span>
          <span class="token function">banner</span><span class="token punctuation">(</span>licenseFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`License information can be found in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>licenseFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h5 class="header">
<a aria-hidden="true" class="anchor" href="#banner" id="banner"></a>
<span class="text"><code>banner</code></span>
<a aria-label="&lt;code&gt;banner&lt;/code&gt;" class="icon-link" href="#banner"></a>
</h5>
<p>Type: <code>Boolean|String|Function&lt;(string) -&gt; String&gt;</code>
Default: <code>/*! For license information please see ${commentsFile} */</code></p>
<p>The banner text that points to the extracted file and will be added on top of the original file.
Can be <code>false</code> (no banner), a <code>String</code>, or a <code>Function&lt;(string) -&gt; String&gt;</code> that will be called with the filename where extracted comments have been stored.
Will be wrapped into comment.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        extractComments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          condition<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function">filename</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>file<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.LICENSE`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token function">banner</span><span class="token punctuation">(</span>commentsFile<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token template-string"><span class="token string">`My custom banner about license information </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>commentsFile<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#warningsfilter" id="warningsfilter"></a>
<span class="text"><code>warningsFilter</code></span>
<a aria-label="&lt;code&gt;warningsFilter&lt;/code&gt;" class="icon-link" href="#warningsfilter"></a>
</h3>
<p>Type: <code>Function&lt;(warning, source) -&gt; Boolean&gt;</code>
Default: <code>() =&gt; true</code></p>
<p>Allow to filter <a href="https://github.com/mishoo/UglifyJS2">uglify-js</a> warnings.
Return <code>true</code> to keep the warning, <code>false</code> otherwise.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        warningsFilter<span class="token punctuation">:</span> <span class="token punctuation">(</span>warning<span class="token punctuation">,</span> source<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/Dropping unreachable code/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>warning<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex">/filename\.js/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#examples" id="examples"></a>
<span class="text">Examples</span>
<a aria-label="Examples" class="icon-link" href="#examples"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cache-and-parallel" id="cache-and-parallel"></a>
<span class="text">Cache And Parallel</span>
<a aria-label="Cache And Parallel" class="icon-link" href="#cache-and-parallel"></a>
</h3>
<p>Enable cache and multi-process parallel running.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        cache<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        parallel<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#preserve-comments" id="preserve-comments"></a>
<span class="text">Preserve Comments</span>
<a aria-label="Preserve Comments" class="icon-link" href="#preserve-comments"></a>
</h3>
<p>Extract all legal comments (i.e. <code>/^\**!|@preserve|@license|@cc_on/i</code>) and preserve <code>/@license/i</code> comments.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        uglifyOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            comments<span class="token punctuation">:</span> <span class="token regex">/@license/i</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        extractComments<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#remove-comments" id="remove-comments"></a>
<span class="text">Remove Comments</span>
<a aria-label="Remove Comments" class="icon-link" href="#remove-comments"></a>
</h3>
<p>If you avoid building with comments, set <strong>uglifyOptions.output.comments</strong> to <strong>false</strong> as in this config:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        uglifyOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          output<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            comments<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#custom-minify-function" id="custom-minify-function"></a>
<span class="text">Custom Minify Function</span>
<a aria-label="Custom Minify Function" class="icon-link" href="#custom-minify-function"></a>
</h3>
<p>Override default minify function - use <a href="https://github.com/fabiosantoscode/terser">terser</a> for minification.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  optimization<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    minimizer<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">UglifyJsPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// Uncomment lines below for cache invalidation correctly</span>
        <span class="token comment">// cache: true,</span>
        <span class="token comment">// cacheKeys(defaultCacheKeys) {</span>
        <span class="token comment">//   delete defaultCacheKeys['uglify-js'];</span>
        <span class="token comment">//</span>
        <span class="token comment">//   return Object.assign(</span>
        <span class="token comment">//     {},</span>
        <span class="token comment">//     defaultCacheKeys,</span>
        <span class="token comment">//     { 'uglify-js': require('uglify-js/package.json').version },</span>
        <span class="token comment">//   );</span>
        <span class="token comment">// },</span>
        <span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> sourceMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// https://github.com/mishoo/UglifyJS2#minify-options</span>
          <span class="token keyword">const</span> uglifyJsOptions <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token comment">/* your `uglify-js` package options */</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

          <span class="token keyword">if</span> <span class="token punctuation">(</span>sourceMap<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uglifyJsOptions<span class="token punctuation">.</span>sourceMap <span class="token operator">=</span> <span class="token punctuation">{</span>
              content<span class="token punctuation">:</span> sourceMap<span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>

          <span class="token keyword">return</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'terser'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">minify</span><span class="token punctuation">(</span>file<span class="token punctuation">,</span> uglifyJsOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#contributing" id="contributing"></a>
<span class="text">Contributing</span>
<a aria-label="Contributing" class="icon-link" href="#contributing"></a>
</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/uglifyjs-webpack-plugin/master/.github/CONTRIBUTING.md">CONTRIBUTING</a></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#license" id="license"></a>
<span class="text">License</span>
<a aria-label="License" class="icon-link" href="#license"></a>
</h2>
<p><a href="https://raw.githubusercontent.com/webpack-contrib/uglifyjs-webpack-plugin/master/LICENSE">MIT</a></p>
</div>
<br/><h1>WatchIgnorePlugin</h1>
<div><p>无视指定的文件。换句话说，当处于<a href="/configuration/watch">监视模式(watch mode)</a>下，符合给定地址的文件或者满足给定正则表达式的文件的改动不会触发重编译。</p>
<pre><code class="lang-javascript"><span class="token keyword">new</span> <span class="token class-name">webpack<span class="token punctuation">.</span>WatchIgnorePlugin</span><span class="token punctuation">(</span>paths<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#选项" id="选项"></a>
<span class="text">选项</span>
<a aria-label="选项" class="icon-link" href="#选项"></a>
</h2>
<ul>
<li><code>路径(paths)</code> (array)：一个正则表达式或者绝对路径的数组。表示符合条件的文件将不会被监视</li>
</ul>
</div>
<br/><h1>Internal webpack plugins</h1>
<div><p>This is a list of plugins which are used by webpack internally.</p>
<blockquote class="warning"><div class="tip-content"> You should only care about them if you are building your own compiler based on webpack, or introspect the internals. </div></blockquote><p>Categories of internal plugins:</p>
<ul>
<li><a href="#environment">environment</a></li>
<li><a href="#compiler">compiler</a></li>
<li><a href="#entry">entry</a></li>
<li><a href="#output">output</a></li>
<li><a href="#source">source</a></li>
<li><a href="#optimize">optimize</a></li>
</ul>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#environment" id="environment"></a>
<span class="text">environment</span>
<a aria-label="environment" class="icon-link" href="#environment"></a>
</h2>
<p>Plugins affecting the environment of the compiler.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nodeenvironmentplugin" id="nodeenvironmentplugin"></a>
<span class="text">NodeEnvironmentPlugin</span>
<a aria-label="NodeEnvironmentPlugin" class="icon-link" href="#nodeenvironmentplugin"></a>
</h3>
<p><code>node/NodeEnvironmentPlugin()</code></p>
<p>Applies Node.js style filesystem to the compiler.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#compiler" id="compiler"></a>
<span class="text">compiler</span>
<a aria-label="compiler" class="icon-link" href="#compiler"></a>
</h2>
<p>Plugins affecting the compiler</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cacheplugin" id="cacheplugin"></a>
<span class="text">CachePlugin</span>
<a aria-label="CachePlugin" class="icon-link" href="#cacheplugin"></a>
</h3>
<p><code>CachePlugin([cache])</code></p>
<p>Adds a cache to the compiler, where modules are cached.</p>
<p>You can pass a <code>cache</code> object, where the modules are cached. Otherwise one is created per plugin instance.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#progressplugin" id="progressplugin"></a>
<span class="text">ProgressPlugin</span>
<a aria-label="ProgressPlugin" class="icon-link" href="#progressplugin"></a>
</h3>
<p><code>ProgressPlugin(handler)</code></p>
<p>Hook into the compiler to extract progress information. The <code>handler</code> must have the signature <code>function(percentage, message)</code>. Percentage is called with a value between 0 and 1, where 0 indicates the start and 1 the end.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#recordidsplugin" id="recordidsplugin"></a>
<span class="text">RecordIdsPlugin</span>
<a aria-label="RecordIdsPlugin" class="icon-link" href="#recordidsplugin"></a>
</h3>
<p><code>RecordIdsPlugin()</code></p>
<p>Saves and restores module and chunk ids from records.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#entry" id="entry"></a>
<span class="text">entry</span>
<a aria-label="entry" class="icon-link" href="#entry"></a>
</h2>
<p>Plugins, which add entry chunks to the compilation.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#singleentryplugin" id="singleentryplugin"></a>
<span class="text">SingleEntryPlugin</span>
<a aria-label="SingleEntryPlugin" class="icon-link" href="#singleentryplugin"></a>
</h3>
<p><code>SingleEntryPlugin(context, request, chunkName)</code></p>
<p>Adds an entry chunk on compilation. The chunk is named <code>chunkName</code> and contains only one module (plus dependencies). The module is resolved from <code>request</code> in <code>context</code> (absolute path).</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#multientryplugin" id="multientryplugin"></a>
<span class="text">MultiEntryPlugin</span>
<a aria-label="MultiEntryPlugin" class="icon-link" href="#multientryplugin"></a>
</h3>
<p><code>MultiEntryPlugin(context, requests, chunkName)</code></p>
<p>Adds an entry chunk on compilation. The chunk is named <code>chunkName</code> and contains a module for each item in the <code>requests</code> array (plus dependencies). Each item in <code>requests</code> is resolved in <code>context</code> (absolute path).</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#prefetchplugin" id="prefetchplugin"></a>
<span class="text">PrefetchPlugin</span>
<a aria-label="PrefetchPlugin" class="icon-link" href="#prefetchplugin"></a>
</h3>
<p><code>PrefetchPlugin(context, request)</code></p>
<p>Prefetches <code>request</code> and dependencies to enable a more parallel compilation. It doesn't create any chunk. The module is resolved from <code>request</code> in <code>context</code> (absolute path).</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#output" id="output"></a>
<span class="text">output</span>
<a aria-label="output" class="icon-link" href="#output"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#functionmoduleplugin" id="functionmoduleplugin"></a>
<span class="text">FunctionModulePlugin</span>
<a aria-label="FunctionModulePlugin" class="icon-link" href="#functionmoduleplugin"></a>
</h3>
<p><code>FunctionModulePlugin(context, options)</code></p>
<p>Each emitted module is wrapped in a function.</p>
<p><code>options</code> are the output options.</p>
<p>If <code>options.pathinfo</code> is set, each module function is annotated with a comment containing the module identifier shortened to <code>context</code> (absolute path).</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#jsonptemplateplugin" id="jsonptemplateplugin"></a>
<span class="text">JsonpTemplatePlugin</span>
<a aria-label="JsonpTemplatePlugin" class="icon-link" href="#jsonptemplateplugin"></a>
</h3>
<p><code>JsonpTemplatePlugin(options)</code></p>
<p>Chunks are wrapped into JSONP-calls. A loading algorithm is included in entry chunks. It loads chunks by adding a <code>&lt;script&gt;</code> tag.</p>
<p><code>options</code> are the output options.</p>
<p><code>options.jsonpFunction</code> is the JSONP function.</p>
<p><code>options.publicPath</code> is used as path for loading the chunks.</p>
<p><code>options.chunkFilename</code> is the filename under that chunks are expected.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nodetemplateplugin" id="nodetemplateplugin"></a>
<span class="text">NodeTemplatePlugin</span>
<a aria-label="NodeTemplatePlugin" class="icon-link" href="#nodetemplateplugin"></a>
</h3>
<p><code>node/NodeTemplatePlugin(options)</code></p>
<p>Chunks are wrapped into Node.js modules exporting the bundled modules. The entry chunks loads chunks by requiring them.</p>
<p><code>options</code> are the output options.</p>
<p><code>options.chunkFilename</code> is the filename under that chunks are expected.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#librarytemplateplugin" id="librarytemplateplugin"></a>
<span class="text">LibraryTemplatePlugin</span>
<a aria-label="LibraryTemplatePlugin" class="icon-link" href="#librarytemplateplugin"></a>
</h3>
<p><code>LibraryTemplatePlugin(name, target)</code></p>
<p>The entries chunks are decorated to form a library <code>name</code> of type <code>type</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#webworkertemplateplugin" id="webworkertemplateplugin"></a>
<span class="text">WebWorkerTemplatePlugin</span>
<a aria-label="WebWorkerTemplatePlugin" class="icon-link" href="#webworkertemplateplugin"></a>
</h3>
<p><code>webworker/WebWorkerTemplatePlugin(options)</code></p>
<p>Chunks are loaded by <code>importScripts</code>. Else it's similar to <a href="#jsonptemplateplugin"><code>JsonpTemplatePlugin</code></a>.</p>
<p><code>options</code> are the output options.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#evaldevtoolmoduleplugin" id="evaldevtoolmoduleplugin"></a>
<span class="text">EvalDevToolModulePlugin</span>
<a aria-label="EvalDevToolModulePlugin" class="icon-link" href="#evaldevtoolmoduleplugin"></a>
</h3>
<p>Decorates the module template by wrapping each module in a <code>eval</code> annotated with <code>// @sourceURL</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#sourcemapdevtoolplugin" id="sourcemapdevtoolplugin"></a>
<span class="text">SourceMapDevToolPlugin</span>
<a aria-label="SourceMapDevToolPlugin" class="icon-link" href="#sourcemapdevtoolplugin"></a>
</h3>
<p><code>SourceMapDevToolPlugin(sourceMapFilename, sourceMappingURLComment, moduleFilenameTemplate, fallbackModuleFilenameTemplate)</code></p>
<p>Decorates the templates by generating a SourceMap for each chunk.</p>
<p><code>sourceMapFilename</code> the filename template of the SourceMap. <code>[hash]</code>, <code>[name]</code>, <code>[id]</code>, <code>[file]</code> and <code>[filebase]</code> are replaced. If this argument is missing, the SourceMap will be inlined as DataUrl.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nohotmodulereplacementplugin" id="nohotmodulereplacementplugin"></a>
<span class="text">NoHotModuleReplacementPlugin</span>
<a aria-label="NoHotModuleReplacementPlugin" class="icon-link" href="#nohotmodulereplacementplugin"></a>
</h3>
<p><code>NoHotModuleReplacementPlugin()</code></p>
<p>Defines <code>module.hot</code> as <code>false</code> to remove hot module replacement code.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#hotmodulereplacementplugin" id="hotmodulereplacementplugin"></a>
<span class="text">HotModuleReplacementPlugin</span>
<a aria-label="HotModuleReplacementPlugin" class="icon-link" href="#hotmodulereplacementplugin"></a>
</h3>
<p><code>HotModuleReplacementPlugin(options)</code></p>
<p>Add support for hot module replacement. Decorates the templates to add runtime code. Adds <code>module.hot</code> API.</p>
<p><code>options.hotUpdateChunkFilename</code> the filename for hot update chunks.</p>
<p><code>options.hotUpdateMainFilename</code> the filename for the hot update manifest.</p>
<p><code>options.hotUpdateFunction</code> JSON function name for the hot update.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#source" id="source"></a>
<span class="text">source</span>
<a aria-label="source" class="icon-link" href="#source"></a>
</h2>
<p>Plugins affecting the source code of modules.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#apiplugin" id="apiplugin"></a>
<span class="text">APIPlugin</span>
<a aria-label="APIPlugin" class="icon-link" href="#apiplugin"></a>
</h3>
<p>Make webpack_public_path, webpack_require, webpack_modules and webpack_chunk_load accessible. Ensures that <code>require.valueOf</code> and <code>require.onError</code> are not processed by other plugins.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#compatibilityplugin" id="compatibilityplugin"></a>
<span class="text">CompatibilityPlugin</span>
<a aria-label="CompatibilityPlugin" class="icon-link" href="#compatibilityplugin"></a>
</h3>
<p>Currently useless. Ensures compatibility with other module loaders.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#consoleplugin" id="consoleplugin"></a>
<span class="text">ConsolePlugin</span>
<a aria-label="ConsolePlugin" class="icon-link" href="#consoleplugin"></a>
</h3>
<p>Offers a pseudo <code>console</code> if it is not available.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#constplugin" id="constplugin"></a>
<span class="text">ConstPlugin</span>
<a aria-label="ConstPlugin" class="icon-link" href="#constplugin"></a>
</h3>
<p>Tries to evaluate expressions in <code>if (...)</code> statements and ternaries to replace them with <code>true</code>/<code>false</code> for further possible dead branch elimination using hooks fired by the parser.</p>
<p>There are multiple optimizations in production mode regarding dead branches:</p>
<ul>
<li>The ones performed by Terser</li>
<li>The ones performed by webpack</li>
</ul>
<p>webpack will try to evaluate conditional statements. If it succeeds then the dead branch is removed. webpack can't do constant folding unless the compiler knows it. For example:</p>
<pre><code class="lang-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> calculateTax <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./tax'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> FOO <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>FOO <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// dead branch</span>
  <span class="token function">calculateTax</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>In the above example, webpack is unable to prune the branch, but Terser does. However, if <code>FOO</code> is defined using <a href="/plugins/define-plugin/">DefinePlugin</a>, webpack will succeed.</p>
<p>It is important to mention that <code>import { calculateTax } from './tax';</code> will also get pruned because <code>calculateTax()</code> call was in the dead branch and got eliminated.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#provideplugin" id="provideplugin"></a>
<span class="text">ProvidePlugin</span>
<a aria-label="ProvidePlugin" class="icon-link" href="#provideplugin"></a>
</h3>
<p><code>ProvidePlugin(name, request)</code></p>
<p>If <code>name</code> is used in a module it is filled by a module loaded by <code>require(&lt;request&gt;)</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nodestuffplugin" id="nodestuffplugin"></a>
<span class="text">NodeStuffPlugin</span>
<a aria-label="NodeStuffPlugin" class="icon-link" href="#nodestuffplugin"></a>
</h3>
<p><code>NodeStuffPlugin(options, context)</code></p>
<p>Provide stuff that is normally available in Node.js modules.</p>
<p>It also ensures that <code>module</code> is filled with some Node.js stuff if you use it.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#requirejsstuffplugin" id="requirejsstuffplugin"></a>
<span class="text">RequireJsStuffPlugin</span>
<a aria-label="RequireJsStuffPlugin" class="icon-link" href="#requirejsstuffplugin"></a>
</h3>
<p>Provide stuff that is normally available in require.js.</p>
<p><code>require[js].config</code> is removed. <code>require.version</code> is <code>0.0.0</code>. <code>requirejs.onError</code> is mapped to <code>require.onError</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nodesourceplugin" id="nodesourceplugin"></a>
<span class="text">NodeSourcePlugin</span>
<a aria-label="NodeSourcePlugin" class="icon-link" href="#nodesourceplugin"></a>
</h3>
<p><code>node/NodeSourcePlugin(options)</code></p>
<p>This module adds stuff from Node.js that is not available in non Node.js environments.</p>
<p>It adds polyfills for <code>process</code>, <code>console</code>, <code>Buffer</code> and <code>global</code> if used. It also binds the built in Node.js replacement modules.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#nodetargetplugin" id="nodetargetplugin"></a>
<span class="text">NodeTargetPlugin</span>
<a aria-label="NodeTargetPlugin" class="icon-link" href="#nodetargetplugin"></a>
</h3>
<p><code>node/NodeTargetPlugin()</code></p>
<p>The plugins should be used if you run the bundle in a Node.js environment.</p>
<p>If ensures that native modules are loaded correctly even if bundled.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#amdplugin" id="amdplugin"></a>
<span class="text">AMDPlugin</span>
<a aria-label="AMDPlugin" class="icon-link" href="#amdplugin"></a>
</h3>
<p><code>dependencies/AMDPlugin(options)</code></p>
<p>Provides AMD-style <code>define</code> and <code>require</code> to modules. Also bind <code>require.amd</code>, <code>define.amd</code> and webpack_amd_options##  to the <code>options</code> passed as parameter.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#commonjsplugin" id="commonjsplugin"></a>
<span class="text">CommonJsPlugin</span>
<a aria-label="CommonJsPlugin" class="icon-link" href="#commonjsplugin"></a>
</h3>
<p><code>dependencies/CommonJsPlugin</code></p>
<p>Provides CommonJs-style <code>require</code> to modules.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#labeledmodulesplugin" id="labeledmodulesplugin"></a>
<span class="text">LabeledModulesPlugin</span>
<a aria-label="LabeledModulesPlugin" class="icon-link" href="#labeledmodulesplugin"></a>
</h3>
<p><code>dependencies/LabeledModulesPlugin()</code></p>
<p>Provide labels <code>require:</code> and <code>exports:</code> to modules.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#requirecontextplugin" id="requirecontextplugin"></a>
<span class="text">RequireContextPlugin</span>
<a aria-label="RequireContextPlugin" class="icon-link" href="#requirecontextplugin"></a>
</h3>
<p><code>dependencies/RequireContextPlugin(modulesDirectories, extensions)</code></p>
<p>Provides <code>require.context</code>. The parameter <code>modulesDirectories</code> and <code>extensions</code> are used to find alternative requests for files. It's useful to provide the same arrays as you provide to the resolver.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#requireensureplugin" id="requireensureplugin"></a>
<span class="text">RequireEnsurePlugin</span>
<a aria-label="RequireEnsurePlugin" class="icon-link" href="#requireensureplugin"></a>
</h3>
<p><code>dependencies/RequireEnsurePlugin()</code></p>
<p>Provides <code>require.ensure</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#requireincludeplugin" id="requireincludeplugin"></a>
<span class="text">RequireIncludePlugin</span>
<a aria-label="RequireIncludePlugin" class="icon-link" href="#requireincludeplugin"></a>
</h3>
<p><code>dependencies/RequireIncludePlugin()</code></p>
<p>Provides <code>require.include</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#defineplugin" id="defineplugin"></a>
<span class="text">DefinePlugin</span>
<a aria-label="DefinePlugin" class="icon-link" href="#defineplugin"></a>
</h3>
<p><code>DefinePlugin(definitions)</code></p>
<p>Define constants for identifier.</p>
<p><code>definitions</code> is an object.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#optimize" id="optimize"></a>
<span class="text">optimize</span>
<a aria-label="optimize" class="icon-link" href="#optimize"></a>
</h2>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#limitchunkcountplugin" id="limitchunkcountplugin"></a>
<span class="text">LimitChunkCountPlugin</span>
<a aria-label="LimitChunkCountPlugin" class="icon-link" href="#limitchunkcountplugin"></a>
</h3>
<p><code>optimize/LimitChunkCountPlugin(options)</code></p>
<p>Merge chunks limit chunk count is lower than <code>options.maxChunks</code>.</p>
<p>The overhead for each chunks is provided by <code>options.chunkOverhead</code> or defaults to 10000. Entry chunks sizes are multiplied by <code>options.entryChunkMultiplicator</code> (or 10).</p>
<p>Chunks that reduce the total size the most are merged first. If multiple combinations are equal the minimal merged size wins.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#mergeduplicatechunksplugin" id="mergeduplicatechunksplugin"></a>
<span class="text">MergeDuplicateChunksPlugin</span>
<a aria-label="MergeDuplicateChunksPlugin" class="icon-link" href="#mergeduplicatechunksplugin"></a>
</h3>
<p><code>optimize/MergeDuplicateChunksPlugin()</code></p>
<p>Chunks with the same modules are merged.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#removeemptychunksplugin" id="removeemptychunksplugin"></a>
<span class="text">RemoveEmptyChunksPlugin</span>
<a aria-label="RemoveEmptyChunksPlugin" class="icon-link" href="#removeemptychunksplugin"></a>
</h3>
<p><code>optimize/RemoveEmptyChunksPlugin()</code></p>
<p>Modules that are included in every parent chunk are removed from the chunk.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#minchunksizeplugin" id="minchunksizeplugin"></a>
<span class="text">MinChunkSizePlugin</span>
<a aria-label="MinChunkSizePlugin" class="icon-link" href="#minchunksizeplugin"></a>
</h3>
<p><code>optimize/MinChunkSizePlugin(minChunkSize)</code></p>
<p>Merges chunks until each chunk has the minimum size of <code>minChunkSize</code>.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#flagincludedchunksplugin" id="flagincludedchunksplugin"></a>
<span class="text">FlagIncludedChunksPlugin</span>
<a aria-label="FlagIncludedChunksPlugin" class="icon-link" href="#flagincludedchunksplugin"></a>
</h3>
<p><code>optimize/FlagIncludedChunksPlugin()</code></p>
<p>Adds chunk ids of chunks which are included in the chunk. This eliminates unnecessary chunk loads.</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#occurrenceorderplugin" id="occurrenceorderplugin"></a>
<span class="text">OccurrenceOrderPlugin</span>
<a aria-label="OccurrenceOrderPlugin" class="icon-link" href="#occurrenceorderplugin"></a>
</h3>
<p><code>optimize/OccurrenceOrderPlugin(preferEntry)</code></p>
<p>Order the modules and chunks by occurrence. This saves space, because often referenced modules and chunks get smaller ids.</p>
<p><code>preferEntry</code> If true, references in entry chunks have higher priority</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#dedupeplugin" id="dedupeplugin"></a>
<span class="text">DedupePlugin</span>
<a aria-label="DedupePlugin" class="icon-link" href="#dedupeplugin"></a>
</h3>
<p><code>optimize/DedupePlugin()</code></p>
<p>Deduplicates modules and adds runtime code.</p>
</div>
<br/><h1>迁移</h1>
<div><p>此章节包含关于从较早版本的 webpack 迁移到较新版本的信息。</p>
</div>
<br/><h1>To v4 from v3</h1>
<div><p>This guide only shows major changes that affect end users. For more details please see <a href="https://github.com/webpack/webpack/releases">the changelog</a>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#node-js-v4" id="node-js-v4"></a>
<span class="text">Node.js v4</span>
<a aria-label="Node.js v4" class="icon-link" href="#node-js-v4"></a>
</h2>
<p>If you are still using Node.js v4 or lower, you need to upgrade your Node.js installation to Node.js v6 or higher.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#cli" id="cli"></a>
<span class="text">CLI</span>
<a aria-label="CLI" class="icon-link" href="#cli"></a>
</h2>
<p>The CLI has moved to a separate package: webpack-cli. You need to install it before using webpack, see <a href="/guides/getting-started/#basic-setup">basic setup</a>.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#update-plugins" id="update-plugins"></a>
<span class="text">Update plugins</span>
<a aria-label="Update plugins" class="icon-link" href="#update-plugins"></a>
</h2>
<p>Many 3rd-party plugins need to be upgraded to their latest version to be compatible.</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#mode" id="mode"></a>
<span class="text">mode</span>
<a aria-label="mode" class="icon-link" href="#mode"></a>
</h2>
<p>Add the new <a href="/concepts/mode/"><code>mode</code></a> option to your config. Set it to production or development in your configuration depending on config type.</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  mode: 'production',
}
</code></pre>
<p>Alternatively you can pass it via CLI: <code>--mode production</code>/<code>--mode development</code></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#deprecated-removed-plugins" id="deprecated-removed-plugins"></a>
<span class="text">Deprecated/Removed plugins</span>
<a aria-label="Deprecated/Removed plugins" class="icon-link" href="#deprecated-removed-plugins"></a>
</h2>
<p>These plugins can be removed from configuration as they are default in production mode:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NoEmitOnErrorsPlugin(),</span>
<span class="token deleted">-    new ModuleConcatenationPlugin(),</span>
<span class="token deleted">-    new DefinePlugin({ "process.env.NODE_ENV": JSON.stringify("production") })</span>
<span class="token deleted">-    new UglifyJsPlugin()</span>
  ],
}
</code></pre>
<p>These plugins are default in development mode</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NamedModulesPlugin()</span>
  ],
}
</code></pre>
<p>These plugins were deprecated and are now removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  plugins: [
<span class="token deleted">-    new NoErrorsPlugin(),</span>
<span class="token deleted">-    new NewWatchingPlugin()</span>
  ],
}
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#commonschunkplugin" id="commonschunkplugin"></a>
<span class="text">CommonsChunkPlugin</span>
<a aria-label="CommonsChunkPlugin" class="icon-link" href="#commonschunkplugin"></a>
</h2>
<p>The <code>CommonsChunkPlugin</code> was removed. Instead the <a href="/configuration/optimization/#optimization-splitchunks"><code>optimization.splitChunks</code></a> options can be used.</p>
<p>See documentation of the <a href="/configuration/optimization/#optimization-splitchunks"><code>optimization.splitChunks</code></a> for more details. The default configuration may already suit your needs.</p>
<blockquote class="tip"><div class="tip-content"> When generating the HTML from the stats you can use <code>optimization.splitChunks.chunks: "all"</code> which is the optimal configuration in most cases. </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#import-and-commonjs" id="import-and-commonjs"></a>
<span class="text">import() and CommonJS</span>
<a aria-label="import() and CommonJS" class="icon-link" href="#import-and-commonjs"></a>
</h2>
<p>When using <code>import()</code> to load non-ESM the result has changed in webpack 4. Now you need to access the <code>default</code> property to get the value of <code>module.exports</code>.</p>
<p><strong>non-esm.js</strong></p>
<pre><code class="lang-javascript">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  sayHello<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>example.js</strong></p>
<pre><code class="lang-javascript"><span class="token keyword">function</span> <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./non-esm.js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    module<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#json-and-loaders" id="json-and-loaders"></a>
<span class="text">json and loaders</span>
<a aria-label="json and loaders" class="icon-link" href="#json-and-loaders"></a>
</h2>
<p>When using a custom loader to transform <code>.json</code> files you now need to change the module <code>type</code>:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  rules: [
    {
      test: /config\.json$/,
      loader: 'special-loader',
<span class="token inserted">+     type: 'javascript/auto',</span>
      options: {...}
    }
  ]
};
</code></pre>
<p>When still using the <code>json-loader</code>, it can be removed:</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-diff">module.exports = {
  // ...
  rules: [
    {
<span class="token deleted">-     test: /\.json$/,</span>
<span class="token deleted">-     loader: 'json-loader'</span>
    }
  ]
};
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#module-loaders" id="module-loaders"></a>
<span class="text">module.loaders</span>
<a aria-label="module.loaders" class="icon-link" href="#module-loaders"></a>
</h2>
<p><code>module.loaders</code> were deprecated since webpack 2 and are now removed in favor of <a href="/configuration/module/#rule"><code>module.rules</code></a>.</p>
</div>
<br/><h1>从 v1 升级到 v2 或 v3</h1>
<div><p>以下各节描述从 webpack 1 到 webpack 2 的重大变化。</p>
<blockquote class="tip"><div class="tip-content"> webpack 从 1 到 2 的变化，比从 2 到 3 要少很多，所以版本迁移起来难度应该不大。如果你遇到了问题，请查看 <a href="https://github.com/webpack/webpack/releases">更新日志</a> 以了解更多细节。 </div></blockquote><h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-root-resolve-fallback-resolve-modulesdirectories" id="resolve-root-resolve-fallback-resolve-modulesdirectories"></a>
<span class="text"><code>resolve.root</code>, <code>resolve.fallback</code>, <code>resolve.modulesDirectories</code></span>
<a aria-label="&lt;code&gt;resolve.root&lt;/code&gt;, &lt;code&gt;resolve.fallback&lt;/code&gt;, &lt;code&gt;resolve.modulesDirectories&lt;/code&gt;" class="icon-link" href="#resolve-root-resolve-fallback-resolve-modulesdirectories"></a>
</h2>
<p>这些选项被一个单独的选项 <code>resolve.modules</code> 取代。更多用法请查看<a href="/configuration/resolve">解析</a>。</p>
<pre><code class="lang-diff">  resolve: {
<span class="token deleted">-   root: path.join(__dirname, "src")</span>
<span class="token inserted">+   modules: [</span>
<span class="token inserted">+     path.join(__dirname, "src"),</span>
<span class="token inserted">+     "node_modules"</span>
<span class="token inserted">+   ]</span>
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-extensions" id="resolve-extensions"></a>
<span class="text"><code>resolve.extensions</code></span>
<a aria-label="&lt;code&gt;resolve.extensions&lt;/code&gt;" class="icon-link" href="#resolve-extensions"></a>
</h2>
<p>此选项不再需要传一个空字符串。此行为被迁移到 <code>resolve.enforceExtension</code>。更多用法请查看<a href="/configuration/resolve">解析</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#resolve-" id="resolve-"></a>
<span class="text"><code>resolve.*</code></span>
<a aria-label="&lt;code&gt;resolve.*&lt;/code&gt;" class="icon-link" href="#resolve-"></a>
</h2>
<p>这里更改了几个 API。由于不常用，不在这里详细列出。更多用法请查看<a href="/configuration/resolve">解析</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#module-loaders-改为-module-rules" id="module-loaders-改为-module-rules"></a>
<span class="text"><code>module.loaders</code> 改为 <code>module.rules</code></span>
<a aria-label="&lt;code&gt;module.loaders&lt;/code&gt; 改为 &lt;code&gt;module.rules&lt;/code&gt;" class="icon-link" href="#module-loaders-改为-module-rules"></a>
</h2>
<p>旧的 loader 配置被更强大的 rules 系统取代，后者允许配置 loader 以及其他更多选项。
为了兼容旧版，<code>module.loaders</code> 语法仍然有效，旧的属性名依然可以被解析。
新的命名约定更易于理解，并且是升级配置使用 <code>module.rules</code> 的好理由。</p>
<pre><code class="lang-diff">  module: {
<span class="token deleted">-   loaders: [</span>
<span class="token inserted">+   rules: [</span>
      {
        test: /\.css$/,
<span class="token deleted">-       loaders: [</span>
<span class="token deleted">-         "style-loader",</span>
<span class="token deleted">-         "css-loader?modules=true"</span>
<span class="token inserted">+       use: [</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           loader: "style-loader"</span>
<span class="token inserted">+         },</span>
<span class="token inserted">+         {</span>
<span class="token inserted">+           loader: "css-loader",</span>
<span class="token inserted">+           options: {</span>
<span class="token inserted">+             modules: true</span>
<span class="token inserted">+           }</span>
<span class="token inserted">+         }</span>
        ]
      },
      {
        test: /\.jsx$/,
        loader: "babel-loader", // 这里不再使用 "use"
        options: {
          // ...
        }
      }
    ]
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#链式-loader" id="链式-loader"></a>
<span class="text">链式 loader</span>
<a aria-label="链式 loader" class="icon-link" href="#链式-loader"></a>
</h2>
<p>就像在 webpack 1 中，loader 可以链式调用，上一个 loader 的输出被作为输入传给下一个 loader。
使用 <a href="/configuration/module#rule-use">rule.use</a> 配置选项，<code>use</code> 可以设置为一个 loader 数组。
在 webpack 1 中，loader 通常被用 <code>!</code> 连写。这一写法在 webpack 2 中只在使用旧的选项 <code>module.loaders</code> 时才有效。</p>
<pre><code class="lang-diff">  module: {
<span class="token deleted">-   loaders: [{</span>
<span class="token inserted">+   rules: [{</span>
      test: /\.less$/,
<span class="token deleted">-     loader: "style-loader!css-loader!less-loader"</span>
<span class="token inserted">+     use: [</span>
<span class="token inserted">+       "style-loader",</span>
<span class="token inserted">+       "css-loader",</span>
<span class="token inserted">+       "less-loader"</span>
<span class="token inserted">+     ]</span>
    }]
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#取消-在模块名中自动添加-loader-后缀-" id="取消-在模块名中自动添加-loader-后缀-"></a>
<span class="text">取消「在模块名中自动添加 <code>-loader</code> 后缀」</span>
<a aria-label="取消「在模块名中自动添加 &lt;code&gt;-loader&lt;/code&gt; 后缀」" class="icon-link" href="#取消-在模块名中自动添加-loader-后缀-"></a>
</h2>
<p>在引用 loader 时，不能再省略 <code>-loader</code> 后缀了:</p>
<pre><code class="lang-diff">  module: {
    rules: [
      {
        use: [
<span class="token deleted">-         "style",</span>
<span class="token inserted">+         "style-loader",</span>
<span class="token deleted">-         "css",</span>
<span class="token inserted">+         "css-loader",</span>
<span class="token deleted">-         "less",</span>
<span class="token inserted">+         "less-loader",</span>
        ]
      }
    ]
  }
</code></pre>
<p>你仍然可以通过配置 <code>resolveLoader.moduleExtensions</code> 配置选项，启用这一旧有行为，但是我们不推荐这么做。</p>
<pre><code class="lang-diff"><span class="token inserted">+ resolveLoader: {</span>
<span class="token inserted">+   moduleExtensions: ["-loader"]</span>
<span class="token inserted">+ }</span>
</code></pre>
<p>了解这一改变背后的原因，请查看 <a href="https://github.com/webpack/webpack/issues/2986">#2986</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#json-loader-不再需要手动添加" id="json-loader-不再需要手动添加"></a>
<span class="text"><code>json-loader</code> 不再需要手动添加</span>
<a aria-label="&lt;code&gt;json-loader&lt;/code&gt; 不再需要手动添加" class="icon-link" href="#json-loader-不再需要手动添加"></a>
</h2>
<p>如果没有为 JSON 文件配置 loader，webpack 将自动尝试通过
<a href="https://github.com/webpack-contrib/json-loader"><code>json-loader</code></a> 加载 JSON 文件。</p>
<pre><code class="lang-diff">  module: {
    rules: [
<span class="token deleted">-     {</span>
<span class="token deleted">-       test: /\.json/,</span>
<span class="token deleted">-       loader: "json-loader"</span>
<span class="token deleted">-     }</span>
    ]
  }
</code></pre>
<p><a href="https://github.com/webpack/webpack/issues/3363">我们决定这么做</a>是为了消除
webpack、 node.js 和 browserify 之间的环境差异。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#配置中的-loader-默认相对于-context-进行解析" id="配置中的-loader-默认相对于-context-进行解析"></a>
<span class="text">配置中的 loader 默认相对于 context 进行解析</span>
<a aria-label="配置中的 loader 默认相对于 context 进行解析" class="icon-link" href="#配置中的-loader-默认相对于-context-进行解析"></a>
</h2>
<p>在 <strong>webpack 1</strong> 中，默认配置下 loader 解析相对于被匹配的文件。然而，在 <strong>webpack 2</strong> 中，默认配置下 loader 解析相对于 <code>context</code> 选项。</p>
<p>这解决了「在使用 <code>npm link</code> 或引用 <code>context</code> 上下文目录之外的模块时，loader 所导致的模块重复载入」的问题。</p>
<p>你可以移除掉那些为解决此问题的 hack 方案了：</p>
<pre><code class="lang-diff">  module: {
    rules: [
      {
        // ...
<span class="token deleted">-       loader: require.resolve("my-loader")</span>
<span class="token inserted">+       loader: "my-loader"</span>
      }
    ]
  },
  resolveLoader: {
<span class="token deleted">-   root: path.resolve(__dirname, "node_modules")</span>
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#移除-module-preloaders-和-module-postloaders" id="移除-module-preloaders-和-module-postloaders"></a>
<span class="text">移除 <code>module.preLoaders</code> 和 <code>module.postLoaders</code></span>
<a aria-label="移除 &lt;code&gt;module.preLoaders&lt;/code&gt; 和 &lt;code&gt;module.postLoaders&lt;/code&gt;" class="icon-link" href="#移除-module-preloaders-和-module-postloaders"></a>
</h2>
<pre><code class="lang-diff">  module: {
<span class="token deleted">-   preLoaders: [</span>
<span class="token inserted">+   rules: [</span>
      {
        test: /\.js$/,
<span class="token inserted">+       enforce: "pre",</span>
        loader: "eslint-loader"
      }
    ]
  }
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#uglifyjsplugin-sourcemap" id="uglifyjsplugin-sourcemap"></a>
<span class="text"><code>UglifyJsPlugin</code> sourceMap</span>
<a aria-label="&lt;code&gt;UglifyJsPlugin&lt;/code&gt; sourceMap" class="icon-link" href="#uglifyjsplugin-sourcemap"></a>
</h2>
<p><code>UglifyJsPlugin</code> 的 <code>sourceMap</code> 选项现在默认为 <code>false</code> 而不是 <code>true</code>。这意味着如果你在压缩代码时启用了 source map，或者想要让 uglifyjs 的警告能够对应到正确的代码行，你需要将 <code>UglifyJsPlugin</code> 的 <code>sourceMap</code> 设为 <code>true</code>。</p>
<pre><code class="lang-diff">  devtool: "source-map",
  plugins: [
    new UglifyJsPlugin({
<span class="token inserted">+     sourceMap: true</span>
    })
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#uglifyjsplugin-warnings" id="uglifyjsplugin-warnings"></a>
<span class="text"><code>UglifyJsPlugin</code> warnings</span>
<a aria-label="&lt;code&gt;UglifyJsPlugin&lt;/code&gt; warnings" class="icon-link" href="#uglifyjsplugin-warnings"></a>
</h2>
<p><code>UglifyJsPlugin</code> 的 <code>compress.warnings</code> 选项现在默认为 <code>false</code> 而不是 <code>true</code>。
这意味着如果你想要看到 uglifyjs 的警告信息，你需要将 <code>compress.warnings</code> 设为 <code>true</code>。</p>
<pre><code class="lang-diff">  devtool: "source-map",
  plugins: [
    new UglifyJsPlugin({
<span class="token inserted">+     compress: {</span>
<span class="token inserted">+       warnings: true</span>
<span class="token inserted">+     }</span>
    })
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#uglifyjsplugin-压缩-loaders" id="uglifyjsplugin-压缩-loaders"></a>
<span class="text"><code>UglifyJsPlugin</code> 压缩 loaders</span>
<a aria-label="&lt;code&gt;UglifyJsPlugin&lt;/code&gt; 压缩 loaders" class="icon-link" href="#uglifyjsplugin-压缩-loaders"></a>
</h2>
<p><code>UglifyJsPlugin</code> 不再压缩 loaders。在未来很长一段时间里，需要通过设置 <code>minimize:true</code> 来压缩 loaders。参考 loader 文档里的相关选项。</p>
<p>loaders 的压缩模式将在 webpack 3 或后续版本中取消。</p>
<p>为了兼容旧的 loaders，loaders 可以通过插件来切换到压缩模式：</p>
<pre><code class="lang-diff">  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     minimize: true</span>
<span class="token inserted">+   })</span>
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#移除-dedupeplugin" id="移除-dedupeplugin"></a>
<span class="text">移除 <code>DedupePlugin</code></span>
<a aria-label="移除 &lt;code&gt;DedupePlugin&lt;/code&gt;" class="icon-link" href="#移除-dedupeplugin"></a>
</h2>
<p>不再需要 <code>webpack.optimize.DedupePlugin</code>。请从配置中移除。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#bannerplugin-破坏性改动" id="bannerplugin-破坏性改动"></a>
<span class="text"><code>BannerPlugin</code> - 破坏性改动</span>
<a aria-label="&lt;code&gt;BannerPlugin&lt;/code&gt; - 破坏性改动" class="icon-link" href="#bannerplugin-破坏性改动"></a>
</h2>
<p><code>BannerPlugin</code> 不再接受两个参数，而是只接受单独的 options 对象。</p>
<pre><code class="lang-diff">  plugins: [
<span class="token deleted">-    new webpack.BannerPlugin('Banner', {raw: true, entryOnly: true});</span>
<span class="token inserted">+    new webpack.BannerPlugin({banner: 'Banner', raw: true, entryOnly: true});</span>
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#默认加载-occurrenceorderplugin" id="默认加载-occurrenceorderplugin"></a>
<span class="text">默认加载 <code>OccurrenceOrderPlugin</code></span>
<a aria-label="默认加载 &lt;code&gt;OccurrenceOrderPlugin&lt;/code&gt;" class="icon-link" href="#默认加载-occurrenceorderplugin"></a>
</h2>
<p> <code>OccurrenceOrderPlugin</code> 现在默认启用，并已重命名（在 webpack 1 中为 <code>OccurenceOrderPlugin</code>）。
因此，请确保从你的配置中删除该插件：</p>
<pre><code class="lang-diff">  plugins: [
    // webpack 1
<span class="token deleted">-   new webpack.optimize.OccurenceOrderPlugin()</span>
    // webpack 2
<span class="token deleted">-   new webpack.optimize.OccurrenceOrderPlugin()</span>
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#extracttextwebpackplugin-破坏性改动" id="extracttextwebpackplugin-破坏性改动"></a>
<span class="text"><code>ExtractTextWebpackPlugin</code> - 破坏性改动</span>
<a aria-label="&lt;code&gt;ExtractTextWebpackPlugin&lt;/code&gt; - 破坏性改动" class="icon-link" href="#extracttextwebpackplugin-破坏性改动"></a>
</h2>
<p><a href="https://github.com/webpack-contrib/extract-text-webpack-plugin">ExtractTextPlugin</a> 需要使用版本 2，才能在 webpack 2 下正常运行。</p>
<p><code>npm install --save-dev extract-text-webpack-plugin</code></p>
<p>这一插件的配置变化主要体现在语法上。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#extracttextplugin-extract" id="extracttextplugin-extract"></a>
<span class="text"><code>ExtractTextPlugin.extract</code></span>
<a aria-label="&lt;code&gt;ExtractTextPlugin.extract&lt;/code&gt;" class="icon-link" href="#extracttextplugin-extract"></a>
</h3>
<pre><code class="lang-diff">module: {
  rules: [
    {
      test: /.css$/,
<span class="token deleted">-      loader: ExtractTextPlugin.extract("style-loader", "css-loader", { publicPath: "/dist" })</span>
<span class="token inserted">+      use: ExtractTextPlugin.extract({</span>
<span class="token inserted">+        fallback: "style-loader",</span>
<span class="token inserted">+        use: "css-loader",</span>
<span class="token inserted">+        publicPath: "/dist"</span>
<span class="token inserted">+      })</span>
    }
  ]
}
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#new-extracttextplugin-options-" id="new-extracttextplugin-options-"></a>
<span class="text"><code>new ExtractTextPlugin({options})</code></span>
<a aria-label="&lt;code&gt;new ExtractTextPlugin({options})&lt;/code&gt;" class="icon-link" href="#new-extracttextplugin-options-"></a>
</h3>
<pre><code class="lang-diff">plugins: [
<span class="token deleted">-  new ExtractTextPlugin("bundle.css", { allChunks: true, disable: false })</span>
<span class="token inserted">+  new ExtractTextPlugin({</span>
<span class="token inserted">+    filename: "bundle.css",</span>
<span class="token inserted">+    disable: false,</span>
<span class="token inserted">+    allChunks: true</span>
<span class="token inserted">+  })</span>
]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#全动态-require-现在默认会失败" id="全动态-require-现在默认会失败"></a>
<span class="text">全动态 require 现在默认会失败</span>
<a aria-label="全动态 require 现在默认会失败" class="icon-link" href="#全动态-require-现在默认会失败"></a>
</h2>
<p>只有一个表达式的依赖（例如 <code>require(expr)</code>）将创建一个空的 context 而不是一个完整目录的 context。</p>
<p>这样的代码应该进行重构，因为它不能与 ES2015 模块一起使用。如果你确定不会有 ES2015 模块，你可以使用 <code>ContextReplacementPlugin</code> 来指示 compiler 进行正确的解析。</p>
<blockquote class="todo"><div class="tip-content"> Link to an article about dynamic dependencies. </div></blockquote><h3 class="header">
<a aria-hidden="true" class="anchor" href="#在-cli-和配置中使用自定义参数" id="在-cli-和配置中使用自定义参数"></a>
<span class="text">在 CLI 和配置中使用自定义参数</span>
<a aria-label="在 CLI 和配置中使用自定义参数" class="icon-link" href="#在-cli-和配置中使用自定义参数"></a>
</h3>
<p>如果你之前滥用 CLI 来传自定义参数到配置中，比如：</p>
<p><code>webpack --custom-stuff</code></p>
<pre><code class="lang-js"><span class="token comment">// webpack.config.js</span>
<span class="token keyword">var</span> customStuff <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'--custom-stuff'</span><span class="token punctuation">)</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">/* ... */</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> config<span class="token punctuation">;</span>
</code></pre>
<p>你将会发现新版中不再允许这么做。CLI 现在更加严格了。</p>
<p>替代地，现在提供了一个接口来传递参数给配置。我们应该采用这种新方式，在未来许多工具将可能依赖于此。</p>
<p><code>webpack --env.customStuff</code></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>env<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> customStuff <span class="token operator">=</span> env<span class="token punctuation">.</span>customStuff<span class="token punctuation">;</span>
  <span class="token comment">/* ... */</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>详见 <a href="/api/cli">CLI</a>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#require-ensure-以及-amd-require-将采用异步式调用" id="require-ensure-以及-amd-require-将采用异步式调用"></a>
<span class="text"><code>require.ensure</code> 以及 AMD <code>require</code> 将采用异步式调用</span>
<a aria-label="&lt;code&gt;require.ensure&lt;/code&gt; 以及 AMD &lt;code&gt;require&lt;/code&gt; 将采用异步式调用" class="icon-link" href="#require-ensure-以及-amd-require-将采用异步式调用"></a>
</h2>
<p>现在这些函数总是异步的，而不是当 chunk 已经加载完成的时候同步调用它们的回调函数(callback)。</p>
<p><strong><code>require.ensure</code> 现在依赖于原生的 <code>Promise</code>。如果在不支持 Promise 的环境里使用 <code>require.ensure</code>，你需要添加 polyfill。</strong></p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#通过-options-配置-loader" id="通过-options-配置-loader"></a>
<span class="text">通过 <code>options</code> 配置 loader</span>
<a aria-label="通过 &lt;code&gt;options&lt;/code&gt; 配置 loader" class="icon-link" href="#通过-options-配置-loader"></a>
</h2>
<p>你<em>不能再</em>通过 <code>webpack.config.js</code> 的自定义属性来配置 loader。只能通过 <code>options</code> 来配置。下面配置的 <code>ts</code> 属性在 webpack 2 下不再有效：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 在 webpack 2 中无效</span>
  ts<span class="token punctuation">:</span> <span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#什么是-options-" id="什么是-options-"></a>
<span class="text">什么是 <code>options</code>?</span>
<a aria-label="什么是 &lt;code&gt;options&lt;/code&gt;?" class="icon-link" href="#什么是-options-"></a>
</h3>
<p>好问题。严格来说，有两种办法，都可以用来配置 webpack 的 loader。典型的 <code>options</code> 被称为 <code>query</code>，是一个可以被添加到 loader 名之后的字符串。它比较像一个 query string，但是实际上有<a href="https://github.com/webpack/loader-utils#parsequery">更强大的能力</a>：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader?'</span> <span class="token operator">+</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<p>不过它也可以分开来，写成一个单独的对象，紧跟在 loader 属性后面：</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      test<span class="token punctuation">:</span> <span class="token regex">/\.tsx?$/</span><span class="token punctuation">,</span>
      loader<span class="token punctuation">:</span> <span class="token string">'ts-loader'</span><span class="token punctuation">,</span>
      options<span class="token punctuation">:</span>  <span class="token punctuation">{</span> transpileOnly<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loaderoptionsplugin-context" id="loaderoptionsplugin-context"></a>
<span class="text"><code>LoaderOptionsPlugin</code> context</span>
<a aria-label="&lt;code&gt;LoaderOptionsPlugin&lt;/code&gt; context" class="icon-link" href="#loaderoptionsplugin-context"></a>
</h2>
<p>有的 loader 需要从配置中读取一些 context 信息。在未来很长一段时间里，这将需要通过 loader options 传入。详见 loader 文档的相关选项。</p>
<p>为了保持对旧 loaders 的兼容，这些信息可以通过插件传进来：</p>
<pre><code class="lang-diff">  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     options: {</span>
<span class="token inserted">+       context: __dirname</span>
<span class="token inserted">+     }</span>
<span class="token inserted">+   })</span>
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#debug" id="debug"></a>
<span class="text"><code>debug</code></span>
<a aria-label="&lt;code&gt;debug&lt;/code&gt;" class="icon-link" href="#debug"></a>
</h2>
<p>在 webpack 1 中 <code>debug</code> 选项可以将 loader 切换到调试模式(debug mode)。在未来很长一段时间里，这将需要通过 loader 选项传递。详见 loader 文档的相关选项。</p>
<p>loaders 的调试模式将在 webpack 3 或后续版本中取消。</p>
<p>为了保持对旧 loaders 的兼容，loader 可以通过插件来切换到调试模式：</p>
<pre><code class="lang-diff"><span class="token deleted">- debug: true,</span>
  plugins: [
<span class="token inserted">+   new webpack.LoaderOptionsPlugin({</span>
<span class="token inserted">+     debug: true</span>
<span class="token inserted">+   })</span>
  ]
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#es2015-的代码分割" id="es2015-的代码分割"></a>
<span class="text">ES2015 的代码分割</span>
<a aria-label="ES2015 的代码分割" class="icon-link" href="#es2015-的代码分割"></a>
</h2>
<p>在 webpack 1 中，可以使用 <a href="/api/module-methods#require-ensure"><code>require.ensure</code></a>作为实现应用程序的懒加载 chunks 的一种方法：</p>
<pre><code class="lang-javascript">require<span class="token punctuation">.</span><span class="token function">ensure</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>require<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p>ES2015 模块加载规范定义了 <a href="/api/module-methods#import-"><code>import()</code></a> 方法，可以在运行时(runtime)动态地加载 ES2015 模块。webpack 将 <code>import()</code> 作为分割点(split-point)并将所要请求的模块(requested module)放置到一个单独的 chunk 中。<code>import()</code> 接收模块名作为参数，并返回一个 Promise。</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./module'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>module <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> module<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Chunk loading failed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>好消息是：如果加载 chunk 失败，我们现在可以进行处理，因为现在它基于 <code>Promise</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#动态表达式" id="动态表达式"></a>
<span class="text">动态表达式</span>
<a aria-label="动态表达式" class="icon-link" href="#动态表达式"></a>
</h2>
<p>可以传递部分表达式给 <code>import()</code>。这与 CommonJS 对表达式的处理方式一致（webpack 为所有可能匹配的文件创建 <a href="/plugins/context-replacement-plugin/">context</a>）。</p>
<p><code>import()</code> 为每一个可能的模块创建独立的 chunk。</p>
<pre><code class="lang-js"><span class="token keyword">function</span> <span class="token function">route</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> query<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`./routes/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/route`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>route <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">new</span> <span class="token class-name">route<span class="token punctuation">.</span>Route</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 上面代码为每个可能的路由创建独立的 chunk</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#混合使用-es2015-amd-和-commonjs" id="混合使用-es2015-amd-和-commonjs"></a>
<span class="text">混合使用 ES2015、AMD 和 CommonJS</span>
<a aria-label="混合使用 ES2015、AMD 和 CommonJS" class="icon-link" href="#混合使用-es2015-amd-和-commonjs"></a>
</h2>
<p>你可以自由混合使用三种模块类型（甚至在同一个文件中）。在这个情况中 webpack 的行为和 babel 以及 node-eps 一致：</p>
<pre><code class="lang-javascript"><span class="token comment">// CommonJS 调用 ES2015 模块</span>
<span class="token keyword">var</span> book <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./book'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

book<span class="token punctuation">.</span>currentPage<span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token function">readPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
book<span class="token punctuation">.</span><span class="token keyword">default</span> <span class="token operator">===</span> <span class="token string">'This is a book'</span><span class="token punctuation">;</span>
</code></pre>
<pre><code class="lang-javascript"><span class="token comment">// ES2015 模块调用 CommonJS</span>
<span class="token keyword">import</span> fs <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// module.exports 映射到 default</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> readFileSync <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'fs'</span><span class="token punctuation">;</span> <span class="token comment">// 从返回对象(returned object+)中读取命名的导出方法(named exports)</span>

<span class="token keyword">typeof</span> fs<span class="token punctuation">.</span>readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>
<span class="token keyword">typeof</span> readFileSync <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">;</span>
</code></pre>
<p>值得注意的是，你需要让 Babel 不解析这些模块符号，从而让 webpack 可以使用它们。你可以通过设置如下配置到 .babelrc 或 babel-loader 来实现这一点。</p>
<p><strong>.babelrc</strong></p>
<pre><code class="lang-json"><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token property">"modules"</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#hints" id="hints"></a>
<span class="text">Hints</span>
<a aria-label="Hints" class="icon-link" href="#hints"></a>
</h2>
<p>不需要改变什么，但有机会改变。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#模板字符串" id="模板字符串"></a>
<span class="text">模板字符串</span>
<a aria-label="模板字符串" class="icon-link" href="#模板字符串"></a>
</h3>
<p>webpack 现在支持表达式中的模板字符串了。这意味着你可以在 webpack 构建中使用它们：</p>
<pre><code class="lang-diff"><span class="token deleted">- require("./templates/" + name);</span>
<span class="token inserted">+ require(`./templates/${name}`);</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#配置中使用-promise" id="配置中使用-promise"></a>
<span class="text">配置中使用 Promise</span>
<a aria-label="配置中使用 Promise" class="icon-link" href="#配置中使用-promise"></a>
</h3>
<p>webpack 现在支持在配置文件中返回 <code>Promise</code> 了。这让你能在配置文件中做异步处理。</p>
<p><strong>webpack.config.js</strong></p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">fetchLangs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>lang <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    entry<span class="token punctuation">:</span> <span class="token string">'...'</span><span class="token punctuation">,</span>
    <span class="token comment">// ...</span>
    plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span> LANGUAGE<span class="token punctuation">:</span> lang <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#高级-loader-匹配" id="高级-loader-匹配"></a>
<span class="text">高级 loader 匹配</span>
<a aria-label="高级 loader 匹配" class="icon-link" href="#高级-loader-匹配"></a>
</h3>
<p>webpack 现在支持对 loader 进行更多方式的匹配。</p>
<pre><code class="lang-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        resource<span class="token punctuation">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// 匹配 "/path/filename.js"</span>
        resourceQuery<span class="token punctuation">:</span> <span class="token regex">/^\?querystring$/</span><span class="token punctuation">,</span> <span class="token comment">// 匹配 "?querystring"</span>
        issuer<span class="token punctuation">:</span> <span class="token regex">/filename/</span><span class="token punctuation">,</span> <span class="token comment">// 如果请求 "/path/filename.js" 则匹配 "/path/something.js"</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#更多的-cli-参数项" id="更多的-cli-参数项"></a>
<span class="text">更多的 CLI 参数项</span>
<a aria-label="更多的 CLI 参数项" class="icon-link" href="#更多的-cli-参数项"></a>
</h3>
<p>你可以使用一些新的 CLI 参数项：</p>
<p><code>--define process.env.NODE_ENV="production"</code> 见 <a href="/plugins/define-plugin/"><code>DefinePlugin</code></a>。</p>
<p><code>--display-depth</code> 显示每个模块到入口的距离。</p>
<p><code>--display-used-exports</code> 显示一个模块中被使用的 exports 信息。</p>
<p><code>--display-max-modules</code> 设置输出时显示的模块数量（默认是 15）。</p>
<p><code>-p</code> 能够定义 <code>process.env.NODE_ENV</code> 为 <code>"production"</code>。</p>
<h2 class="header">
<a aria-hidden="true" class="anchor" href="#loader-变更" id="loader-变更"></a>
<span class="text">Loader 变更</span>
<a aria-label="Loader 变更" class="icon-link" href="#loader-变更"></a>
</h2>
<p>以下变更仅影响 loader 的开发者。</p>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#cacheable" id="cacheable"></a>
<span class="text">Cacheable</span>
<a aria-label="Cacheable" class="icon-link" href="#cacheable"></a>
</h3>
<p>Loaders 现在默认可被缓存。Loaders 如果不想被缓存，需要选择不被缓存。</p>
<pre><code class="lang-diff">  // 缓存 loader
  module.exports = function(source) {
<span class="token deleted">-   this.cacheable();</span>
    return source;
  }
</code></pre>
<pre><code class="lang-diff">  // 不缓存 loader
  module.exports = function(source) {
<span class="token inserted">+   this.cacheable(false);</span>
    return source;
  }
</code></pre>
<h3 class="header">
<a aria-hidden="true" class="anchor" href="#复合-options" id="复合-options"></a>
<span class="text">复合 options</span>
<a aria-label="复合 options" class="icon-link" href="#复合-options"></a>
</h3>
<p><strong>webpack 1</strong> 只支持能够「可 <code>JSON.stringify</code>的对象」作为 loader 的 options。</p>
<p><strong>webpack 2</strong> 现在支持任意 JS 对象作为 loader 的 options.</p>
<p>webpack <a href="https://github.com/webpack/webpack/releases/tag/v2.2.1">2.2.1</a>之前（即从 2.0.0 到 2.2.0），使用复合 options，需要在 <code>options</code> 对象上添加 <code>ident</code>，允许它能够被其他 loader 引用。<strong>这在 2.2.1</strong> 中被删除，因此目前的迁移不再需要使用 <code>ident</code> 键。</p>
<pre><code class="lang-diff">{
  test: /\.ext/
  use: {
    loader: '...',
    options: {
<span class="token deleted">-     ident: 'id',</span>
      fn: () =&gt; require('./foo.js')
    }
  }
}
</code></pre>
</div>
<br/></body>
</html>